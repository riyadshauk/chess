function l(a){return{j:a,r:Math.trunc(a/8),i:a%8,a:null}}var n={title:""};function p(a,c,d){a.addEventListener(c,d,!1)};function q(a){for(var c=document.createElement("board"),d=0,e=0;8>e;e++){for(var f=document.createElement("tr"),h=0;8>h;h++){var k=document.createElement("td");k.setAttribute("data-pos",d);if(a[8*e+h].a){var g=document.createElement("div");g.setAttribute("class",a[8*e+h].a.title);k.appendChild(g)}f.appendChild(k);d++}c.appendChild(f)}return c};function r(a,c){p(a,"click",function(){c(a)})};function t(a,c){this.g=a;this.c=c;this.b=l(Number(null));this.f=l(Number(null))}function u(a,c){var d=c||a.g.b(),e=a.c;e.b.replaceChild(q(d),e.b.firstChild);for(d=0;8>d;d++)for(e=0;8>e;e++)r(a.c.b.children[0].children[d].children[e],a.h.bind(a))}
t.prototype.h=function(a){this.f=this.b;var c=l(Number(a.getAttribute("data-pos")));a.querySelector("div")&&(c.a=n,c.a.title=a.querySelector("div").getAttribute("class"));this.b=c;console.log("previously selected box:",this.f);console.log("selected box:",this.b);u(this)};var v=new function(){var a=window.localStorage,c;this.b=function(){return c||JSON.parse(a.getItem("chess-game-vanilla-es6")||"[]")};this.c=function(d){a.setItem("chess-game-vanilla-es6",JSON.stringify(c=d))}},w=new t(v,new function(){this.b=document.querySelector(".chessboard")});
p(window,"load",function(){console.log("initializing the board.");for(var a={title:"whitebishop"},c={title:"whiteknight"},d={title:"whiterook"},e={title:"whitepawn"},f={title:"blackbishop"},h={title:"blackknight"},k={title:"blackrook"},g={title:"blackpawn"},b=Array(64),m=0;64>m;m++)b[m]=l(m);b[0].a=k;b[1].a=h;b[2].a=f;b[3].a={title:"blackqueen"};b[4].a={title:"blackking"};b[5].a=f;b[6].a=h;b[7].a=k;for(f=8;16>f;f++)b[f].a=g;for(g=48;56>g;g++)b[g].a=e;b[56].a=d;b[57].a=c;b[58].a=a;b[59].a={title:"whitequeen"};
b[60].a={title:"whiteking"};b[61].a=a;b[62].a=c;b[63].a=d;w.g.c(b);u(w,b);console.log("boxes when just initialized:",b)});
