!function(e){var t={};function s(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=e,s.c=t,s.d=function(e,t,i){s.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},s.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=0)}([function(e,t,s){"use strict";function i(e){return{pos:e,r:Math.trunc(e/8),c:e%8,piece:null,selected:!1,possibleDest:!1}}function o(e){return{title:e,timesMoved:0,capturedIdx:-1,selectedCapture:!1}}s.r(t);const r=0,l=1,c=e=>{let t=i(Number(e.getAttribute("data-pos")));return e.querySelector("div")&&(t.piece=o(e.querySelector("div").getAttribute("class"))),t},n=e=>o(e.firstChild.getAttribute("class")),a=e=>({r:e.r,c:e.c});function d(e,t){return(t||document).querySelector(e)}function h(e,t,s,i){e.addEventListener(t,s,!!i)}s(2);class u{constructor(){this.name="empty",this.getPossibleMoves=((e,t,s)=>{return e=>!1})}}const p={getNumMoves:(e,t)=>-1,isEmpty:(e,t)=>!1,isPieceOfGivenPlayer:(e,t,s)=>!1,isPieceOfCurrentPlayer:(e,t)=>!1,isBoxOnBoard:(e,t)=>!1,isValidSourceAndDest:(e,t,s)=>!1,canGoAlongRowToDest:(e,t,s)=>!1,canGoAlongColToDest:(e,t,s)=>!1,canGoAlongLineToDest:(e,t,s)=>!1,canGoAlongDiagonalToDest:(e,t,s)=>!1};p.getNumMoves=((e,t)=>{const{c:s,r:i}=t;let o=e.board[i][s].match(/([a-zA-z])(\d*)/);return o&&o.length>2&&!isNaN(o[2])?Number(o[2]):-1}),p.isEmpty=((e,t)=>{const{c:s,r:i}=t;return""===e.board[i][s].trim()}),p.isPieceOfGivenPlayer=((e,t,s)=>{let i=e.board[s.r][s.c].match(/([a-zA-z])(\d*)/),o=i.length>1?i[1]:null;return!!o&&(0==t&&o==o.toUpperCase()||1==t&&o==o.toLowerCase())}),p.isPieceOfCurrentPlayer=((e,t)=>{const s=(s,{c:i,r:o}=t)=>e.board[o][i]==s.apply(e.board[o][i])&&!p.isEmpty(e,t);return e.player==e.playerWhite?s(String.prototype.toUpperCase):s(String.prototype.toLowerCase)}),p.isBoxOnBoard=((e,t)=>t.r<e.numRows&&t.r>=0&&t.c>=0&&t.c<e.numCols),p.isValidSourceAndDest=((e,t,s)=>p.isPieceOfCurrentPlayer(e,t)&&!p.isPieceOfCurrentPlayer(e,s)&&p.isBoxOnBoard(e,s)&&t!=s),p.canGoAlongRowToDest=((e,t,s)=>{if(t.r==s.r){const i=s.c>t.c?1:-1;let o=Math.abs(s.c-t.c);for(let s=t.c+i;o-- >1;s+=i)if(!p.isEmpty(e,{r:t.r,c:s}))return!1;return!0}return!1}),p.canGoAlongColToDest=((e,t,s)=>{if(t.c==s.c){const i=s.r>t.r?1:-1;let o=Math.abs(s.r-t.r);for(let s=t.r+i;o-- >1;s+=i)if(!p.isEmpty(e,{r:s,c:t.c}))return!1;return!0}return!1}),p.canGoAlongLineToDest=((e,t,s)=>p.canGoAlongColToDest(e,t,s)||p.canGoAlongRowToDest(e,t,s)),p.canGoAlongDiagonalToDest=((e,t,s)=>{if(1!=Math.abs((s.r-t.r)/(s.c-t.c)))return!1;let i=Math.abs(s.c-t.c);const o=s.r-t.r>0?1:-1,r=s.c-t.c>0?1:-1;let l=t.r+o,c=t.c+r;for(;i-- >1;l+=o,c+=r)if(!p.isEmpty(e,{r:l,c:c}))return!1;return!0});class v{constructor(){this.name="rook",this.getPossibleMoves=((e,t,s)=>{return s=>!!p.isValidSourceAndDest(e,t,s)&&(p.canGoAlongRowToDest(e,t,s)||p.canGoAlongColToDest(e,t,s))})}}class g{constructor(e){this.name="king",this.getPossibleSpecialMoves=e,this.getPossibleMoves=((e,t,s)=>{return s=>!(!p.isValidSourceAndDest(e,t,s)||1!=Math.abs(s.c-t.c)&&1!=Math.abs(s.r-t.r))&&(p.canGoAlongRowToDest(e,t,s)||p.canGoAlongColToDest(e,t,s)||p.canGoAlongDiagonalToDest(e,t,s))})}}const b={getType:e=>new u,getNumMoves:e=>-1,getPossibleMoves:(e,t)=>[{r:-1,c:-1}],isPossibleToMoveTo:(e,t)=>e=>!1,isInCheck:(e,t)=>!1,isInCheckmate:(e,t)=>!1,kingCanCastleWithGivenRook:(e,t,s)=>!1,castleKingWithGivenRook:(e,t,s)=>!1,getSetOfAllPossibleMovesForPlayer:(e,t)=>new Set,randomDefensiveMove:e=>new Set,isACapture:(e,t,s)=>!1};b.getType=(e=>{if(""===e.trim())return new u;let t=e.match(/([a-zA-z])(\d*)/),s=t&&t.length>2?t[2]:null,i=t.length>1?t[1]:null;if(!s||!i)return new u;switch(i.toLowerCase().trim()){case"p":return new class{constructor(){this.name="pawn",this.getPossibleMoves=((e,t,s)=>(void 0===s&&(s=p.getNumMoves(e,t)),i=>{if(!p.isValidSourceAndDest(e,t,i))return!1;const o=(()=>e.player==e.playerWhite?-1:1)(),r=p.isEmpty(e,i)&&t.c==i.c&&i.r==t.r+o,l={r:t.r+o,c:i.c},c=0==s&&p.isEmpty(e,i)&&p.isEmpty(e,l)&&t.c==i.c&&i.r==t.r+2*o,n=!(p.isPieceOfCurrentPlayer(e,i)||p.isEmpty(e,i)||i.r!=t.r+o||i.c!=t.c+1&&i.c!=t.c-1);return r||c||n}))}};case"r":return new v;case"h":return new class{constructor(){this.name="knight",this.getPossibleMoves=((e,t,s)=>s=>!(!p.isValidSourceAndDest(e,t,s)||!(1==Math.abs(t.r-s.r)&&2==Math.abs(t.c-s.c)||1==Math.abs(t.c-s.c)&&2==Math.abs(t.r-s.r))))}};case"b":return new class{constructor(){this.name="bishop",this.getPossibleMoves=function(e,t,s){return s=>!!p.isValidSourceAndDest(e,t,s)&&p.canGoAlongDiagonalToDest(e,t,s)}}};case"q":return new class{constructor(){this.name="queen",this.getPossibleMoves=((e,t,s)=>s=>!!p.isValidSourceAndDest(e,t,s)&&(p.canGoAlongRowToDest(e,t,s)||p.canGoAlongColToDest(e,t,s)||p.canGoAlongDiagonalToDest(e,t,s)))}};case"k":return new g(b.kingCanCastleWithGivenRook);case"":default:return new u}}),b.getNumMoves=(e=>{let t=e.match(/([a-zA-z])(\d*)/);return t&&t.length>2&&!Number.isNaN(Number(t[2]))?Number(t[2]):-1}),b.getPossibleMoves=((e,t)=>{const s=e.board[t.r][t.c],i=b.getNumMoves(s),o=b.getType(s);return o&&!isNaN(i)?((e,t,s,i)=>{let o=[];const r="function"==typeof s.getPossibleMoves?s.getPossibleMoves(e,t,i):e=>!1;if(!r)return o;for(let t=0;t<e.board.length;t++)for(let s=0;s<e.board[0].length;s++)r({r:t,c:s})&&o.push({r:t,c:s});return o})(e,t,o,i):[]}),b.isPossibleToMoveTo=((e,t)=>{const s=e.board[t.r][t.c];b.getNumMoves(s);return b.getType(s).getPossibleMoves(e,t)}),b.isInCheck=((e,t)=>{for(let s=0;s<e.board.length;s++)for(let i=0;i<e.board[0].length;i++)if(t.r!=s&&t.c!=i){const o=b.getPossibleMoves(e,{r:s,c:i});for(let e=0;e<o.length;e++)if(o[e].r==t.r&&o[e].c==t.c)return!0}return!1}),b.isInCheckmate=((e,t)=>{const s=b.getPossibleMoves(e,t);if(b.isInCheck(e,t)){let t=!0;console.log("isInCheckmate possibleMoves",s);for(let i=0;i<s.length;i++)t=t&&b.isInCheck(e,s[i]);if(t)return!0}return!1}),b.kingCanCastleWithGivenRook=((e,t,s)=>{const i=e.board[t.r][t.c],o=e.board[s.r][s.c];if(b.getType(i).name!=(new g).name||b.getType(o).name!=(new v).name||0!=b.getNumMoves(i)||0!=b.getNumMoves(o))return!1;if(p.isPieceOfCurrentPlayer(e,t)&&p.isPieceOfCurrentPlayer(e,s)&&p.isBoxOnBoard(e,s)&&t!=s){let i=s.c-t.c>0?1:-1,o=Math.abs(s.c-t.c);for(let s=t.c+i;o-- >1;s+=i)if(!p.isEmpty(e,{r:t.r,c:s}))return!1;return!0}}),b.castleKingWithGivenRook=((e,t,s)=>{let i=s.c-t.c>0?1:-1,o=0;return 3==Math.abs(s.c-t.c)?o=2:4==Math.abs(s.c-t.c)&&(o=3),e[t.r][t.c+i*o]=Object.assign({},e[t.r][t.c]),e[t.r][t.c]=" ",e[s.r][s.c-i*o]=Object.assign({},e[s.r][s.c]),e[s.r][s.c]=" ",e}),b.getSetOfAllPossibleMovesForPlayer=((e,t)=>{let s=new Set;for(let i=0;i<e.board.length;i++)for(let o=0;o<e.board[0].length;o++)if(!p.isPieceOfGivenPlayer(e,t,{r:i,c:o})&&!p.isEmpty(e,{r:i,c:o})){const t=b.getPossibleMoves(e,{r:i,c:o});for(let e=0;e<t.length;e++)s.add(t[e])}return s}),b.randomDefensiveMove=(e=>{const t=0==e.player?1:0;return b.getSetOfAllPossibleMovesForPlayer(e,t)}),b.isACapture=((e,t,s)=>{const i=e.board[t.r][t.c],o=b.getNumMoves(i),r=b.getType(i);if("function"==typeof r.getPossibleMoves&&!isNaN(o)){if(r.getPossibleMoves(e,t,o)(s)&&!p.isPieceOfCurrentPlayer(e,s)&&!p.isEmpty(e,s))return!0}return!1});const f=new class{constructor(e,t){this.store=e,this.view=t,this._selectedBox=i(-1),this._lastSelectedBox=i(-1),this._selectedCapturedPiece=o(null),this.view.bindUndoMove(this.undoMove.bind(this)),this.view.bindRedoMove(this.redoMove.bind(this))}showBoardAndBindBoxes(){let e=this.store.getLocalStorage().liveBoard;this.view.showBoard(e);for(let e=0;e<8;e++)for(let t=0;t<8;t++){let s=this.view.get$board().children[0].children[e].children[t];this.view.bindSelectBox(s,this.selectBox.bind(this))}}showAndBindCapturedPieces(){let e=this.store.getLocalStorage().liveCaptures;this.view.showCaptures(e);let t=0,s=0;for(let i=0;i<e.length;i++)if(e[i].title&&0==e[i].title.indexOf("black")){let e=this.view.get$capturedblack().children[0].children[s++];void 0!=e&&this.view.bindCapturedPiece(e,i,this.selectCapturedPiece.bind(this))}else if(e[i].title&&0==e[i].title.indexOf("white")){let e=this.view.get$capturedwhite().children[0].children[t++];void 0!=e&&this.view.bindCapturedPiece(e,i,this.selectCapturedPiece.bind(this))}}selectBox(e){if(this._lastSelectedBox=this._selectedBox,this._selectedBox=c(e),this.store.selectBox(this._selectedBox.pos),this._lastSelectedBox.pos==this._selectedBox.pos)return;let t=void 0;if(null!=this._lastSelectedBox.piece&&(t=this.store.locationIfCanMove(a(this._lastSelectedBox),a(this._selectedBox))),null!=this._lastSelectedBox.piece&&0!=t)this.store.movePiece(a(this._lastSelectedBox),a(this._selectedBox)),this.store.unselectBox(this._lastSelectedBox.pos),this.store.updatePossibleMoves(null),this._lastSelectedBox=i(-1),this.store.canPromote({r:this._selectedBox.r,c:this._selectedBox.c})&&alert("Promotion possible: Select the promotable pawn, then any piece of the same color as the promotable pawn to complete the promotion."),this.store.unselectBox(this._selectedBox.pos),this._selectedBox=i(-1);else if(null!=this._lastSelectedBox.piece&&null!=this._lastSelectedBox.piece.title&&null!=this._selectedBox.piece&&null!=this._selectedBox.piece.title&&this.store.promoteIfPossible({r:this._lastSelectedBox.r,c:this._lastSelectedBox.c},{r:this._selectedBox.r,c:this._selectedBox.c})||null!=this._selectedCapturedPiece&&null!=this._selectedCapturedPiece.title&&null!=this._lastSelectedBox.piece&&null!=this._lastSelectedBox.piece.title&&this.store.promoteIfPossible({r:this._lastSelectedBox.r,c:this._lastSelectedBox.c},void 0,this._selectedCapturedPiece))-1!=this._selectedBox.pos&&this.store.unselectBox(this._selectedBox.pos),-1!=this._lastSelectedBox.pos&&this.store.unselectBox(this._lastSelectedBox.pos),this.store.updatePossibleMoves(null),this._lastSelectedBox=i(-1),this._selectedBox=i(-1);else if(null!=this._selectedBox.piece){this.store.updatePossibleMoves(null);const e=this.store.getPossibleMoves(a(this._selectedBox));this.store.updatePossibleMoves(e),-1!=this._lastSelectedBox.pos&&this.store.unselectBox(this._lastSelectedBox.pos),this._lastSelectedBox=i(-1)}else this.store.updatePossibleMoves(null),-1!=this._lastSelectedBox.pos&&this.store.unselectBox(this._lastSelectedBox.pos),this._lastSelectedBox=i(-1),this.store.canPromote({r:this._selectedBox.r,c:this._selectedBox.c}),-1!=this._selectedBox.pos&&this.store.unselectBox(this._selectedBox.pos),this._selectedBox=i(-1);-1!=this._selectedCapturedPiece.capturedIdx&&this.store.unSelectCapturedPiece(this._selectedCapturedPiece.capturedIdx),this.showAndBindCapturedPieces(),this.showBoardAndBindBoxes()}selectCapturedPiece(e,t){-1!=this._selectedCapturedPiece.capturedIdx&&this.store.unSelectCapturedPiece(this._selectedCapturedPiece.capturedIdx),null==this._lastSelectedBox.piece&&null==this._selectedBox.piece||(this.store.updatePossibleMoves(null),-1!=this._lastSelectedBox.pos&&this.store.unselectBox(this._lastSelectedBox.pos),-1!=this._lastSelectedBox.pos&&this.store.unselectBox(this._selectedBox.pos),this._lastSelectedBox=i(-1),this._lastSelectedBox=i(-1)),this._selectedCapturedPiece=n(e),this._selectedCapturedPiece.capturedIdx=t,this.store.selectCapturedPiece(t),this.showAndBindCapturedPieces(),this.showBoardAndBindBoxes()}undoMove(){0!=this.store.getLocalStorage().liveHistory.length&&(this.store.updatePossibleMoves(null),-1!=this._lastSelectedBox.pos&&this.store.unselectBox(this._lastSelectedBox.pos),-1!=this._selectedBox.pos&&this.store.unselectBox(this._selectedBox.pos),-1!=this._selectedCapturedPiece.capturedIdx&&this.store.unSelectCapturedPiece(this._selectedCapturedPiece.capturedIdx),this._selectedBox=i(-1),this._lastSelectedBox=i(-1),this._selectedCapturedPiece=o(null),this.store.undoMove(),this.showAndBindCapturedPieces(),this.showBoardAndBindBoxes())}redoMove(){0!=this.store.getLocalStorage().liveRedoHistory.length&&(this.store.updatePossibleMoves(null),-1!=this._lastSelectedBox.pos&&this.store.unselectBox(this._lastSelectedBox.pos),-1!=this._selectedBox.pos&&this.store.unselectBox(this._selectedBox.pos),-1!=this._selectedCapturedPiece.capturedIdx&&this.store.unSelectCapturedPiece(this._selectedCapturedPiece.capturedIdx),this._selectedBox=i(-1),this._lastSelectedBox=i(-1),this._selectedCapturedPiece=o(null),this.store.redoMove(),this.showAndBindCapturedPieces(),this.showBoardAndBindBoxes())}}(new class{constructor(e,t){this.liveStore={liveBoard:[],livePlayer:-1,liveCaptures:[],liveHistory:[],liveRedoHistory:[],prevLiveStore:{liveBoard:[],livePlayer:-1,liveCaptures:[],liveHistory:[],liveRedoHistory:[],prevLiveStore:void 0,redoLiveStore:void 0},redoLiveStore:{liveBoard:[],livePlayer:-1,liveCaptures:[],liveHistory:[],liveRedoHistory:[],prevLiveStore:void 0,redoLiveStore:void 0}},this.localStorage=window.localStorage,this.initializeBoard=(()=>{const e=o("whiteking"),t=o("whitequeen"),s=o("whitebishop"),r=o("whiteknight"),l=o("whiterook"),c=o("whitepawn"),n=o("blackking"),a=o("blackqueen"),d=o("blackbishop"),h=o("blackknight"),u=o("blackrook"),p=o("blackpawn"),v=function(){const e=[];for(let t=0;t<64;t++)e[t]=i(t);return e}();v[0].piece=Object.assign({},u),v[1].piece=Object.assign({},h),v[2].piece=Object.assign({},d),v[3].piece=Object.assign({},a),v[4].piece=Object.assign({},n),v[5].piece=Object.assign({},d),v[6].piece=Object.assign({},h),v[7].piece=Object.assign({},u);for(let e=8;e<16;e++)v[e].piece=Object.assign({},p);for(let e=48;e<56;e++)v[e].piece=Object.assign({},c);return v[56].piece=Object.assign({},l),v[57].piece=Object.assign({},r),v[58].piece=Object.assign({},s),v[59].piece=Object.assign({},t),v[60].piece=Object.assign({},e),v[61].piece=Object.assign({},s),v[62].piece=Object.assign({},r),v[63].piece=Object.assign({},l),v});let s=this.initializeBoard(),l=r,c=[],n=[],a=[];this.liveStore={liveBoard:s,livePlayer:l,liveCaptures:c,liveHistory:n,liveRedoHistory:a,prevLiveStore:{liveBoard:s,livePlayer:l,liveCaptures:c,liveHistory:n,liveRedoHistory:a,prevLiveStore:void 0,redoLiveStore:void 0},redoLiveStore:{liveBoard:s,livePlayer:l,liveCaptures:c,liveHistory:n,liveRedoHistory:a,prevLiveStore:void 0,redoLiveStore:void 0}},t&&t()}getLocalStorage(){const e=null!==this.localStorage.getItem(name)?String(this.localStorage.getItem(name)):JSON.stringify(this.liveStore);return this.liveStore||JSON.parse(e)}setLocalStorage(e,t,s,i,o,c,n){Array.isArray(e)&&(this.liveStore.liveBoard=e),t!==r&&t!==l||(this.liveStore.livePlayer=t),Array.isArray(s)&&(this.liveStore.liveCaptures=s),Array.isArray(i)&&(this.liveStore.liveHistory=i),Array.isArray(o)&&(this.liveStore.liveRedoHistory=o),void 0!=c&&(this.liveStore.prevLiveStore=c),void 0!=n&&(this.liveStore.redoLiveStore=n),localStorage.setItem(name,JSON.stringify(this.liveStore))}convertFrontToBackEncoding(e,t){let s="";switch(e){case"whitepawn":s="P";break;case"whiterook":s="R";break;case"whiteknight":s="H";break;case"whitebishop":s="B";break;case"whitequeen":s="Q";break;case"whiteking":s="K";break;case"blackpawn":s="p";break;case"blackrook":s="r";break;case"blackknight":s="h";break;case"blackbishop":s="b";break;case"blackqueen":s="q";break;case"blackking":s="k"}return s=s?s+t:s}convertBoardToGameState(e){let t=e||this.getLocalStorage().liveBoard;const s={board:Array(8),numRows:8,numCols:8,playerWhite:0,playerBlack:1,player:this.getLocalStorage().livePlayer};for(let e=0;e<s.board.length;e++){s.board[e]=[];for(let t=0;t<8;t++)s.board[e].push(" ");for(let i=0;i<s.board[e].length;i++){const o=t[8*e+i].piece;null!==o&&(s.board[e][i]=this.convertFrontToBackEncoding(o.title,o.timesMoved))}}return s}getEnPassantLocationIfPossible(e,t,s){const i=8*e.r+e.c,o=this.getLocalStorage(),l=t||o.liveBoard,c=s||o.liveHistory;if(l[i].piece&&0!=c.length){const t=o.livePlayer==r?-1:1,s=o.livePlayer==r?"white":"black",n=c[c.length-1].srcPiece;if(-1!=l[i].piece.title.indexOf("pawn")&&-1!=n.title.indexOf("pawn")&&(-1==n.title.indexOf(s)||n.r==l[i].piece.r&&n.c==l[i].piece.c)&&2==Math.abs(c[c.length-1].src.r-c[c.length-1].dst.r)&&c[c.length-1].dst.r==e.r&&1==Math.abs(c[c.length-1].dst.c-e.c)){const s={move:void 0,capture:void 0};return s.move={r:e.r+t,c:c[c.length-1].dst.c},s.capture=c[c.length-1].dst,s}}}locationIfIsCapture(e,t,s){const i=this.getEnPassantLocationIfPossible(t);return i&&i.move.c==s.c&&i.move.r==s.r?i.capture:!!b.isACapture(e,t,s)&&s}movePiece(e,t,s){let i=s||this.getLocalStorage(),o=i.liveBoard;const c=this.convertBoardToGameState(o);let n=i.livePlayer,a=i.liveCaptures,d=8*t.r+t.c;const h=8*e.r+e.c;let u=o[d].piece;const p=o[h].piece,v=this.locationIfIsCapture(c,e,t);if(0!=v&&(u=o[d=8*v.r+v.c].piece,o[d].piece.capturedIdx=a.length,a.push(o[d].piece),o[d].piece=null),b.kingCanCastleWithGivenRook(c,e,t)){let s=t.c-e.c>0?1:-1,i=0,r=0;3==Math.abs(t.c-e.c)?(i=2,r=2):4==Math.abs(t.c-e.c)&&(i=2,r=3),o[h+s*i].piece=o[h].piece,o[h+s*i].piece.timesMoved++,o[h].piece=null,o[d-s*r].piece=o[d].piece,o[d].piece=null}else void 0!=this.getEnPassantLocationIfPossible(e)?(this.getEnPassantLocationIfPossible(e),o[8*t.r+t.c].piece=o[8*e.r+e.c].piece,o[8*t.r+t.c].piece.timesMoved++,o[8*e.r+e.c].piece=null,u=null):(o[d].piece=o[h].piece,o[d].piece.timesMoved++,o[h].piece=null);let g=i.liveHistory;g.push({src:e,dst:t,srcPiece:p,dstPiece:u,move:g.length});const f=Object.assign({},i);f.prevLiveStore=void 0,n=n==r?l:r,this.setLocalStorage(o,n,a,g,[],f),this.canPromote(e)&&console.log("Promotion possible in Store movePiece")}selectBox(e){let t=this.getLocalStorage().liveBoard;t[e].selected=!0,this.setLocalStorage(t)}unselectBox(e){let t=this.getLocalStorage().liveBoard;t[e].selected=!1,this.setLocalStorage(t)}selectCapturedPiece(e){let t=this.getLocalStorage().liveCaptures;t[e].selectedCapture=!0,this.setLocalStorage(void 0,void 0,t)}unSelectCapturedPiece(e){let t=this.getLocalStorage().liveCaptures;t[e].selectedCapture=!1,this.setLocalStorage(void 0,void 0,t)}locationIfCanMove(e,t){if(!e||!t)return!1;const s=this.convertBoardToGameState(),i=b.isPossibleToMoveTo(s,e)(t),o=this.getEnPassantLocationIfPossible(e);return!!(void 0!=o&&o.move.r==t.r&&o.move.c==t.c||i)&&t}getPossibleMoves(e){const t=this.convertBoardToGameState();let s=b.getPossibleMoves(t,e);const i=this.getEnPassantLocationIfPossible(e);return void 0!=i&&s.push(i.move),s}updatePossibleMoves(e){let t=this.getLocalStorage().liveBoard;switch(e){case null:t=t.map(e=>(e.possibleDest=!1,e)),this.setLocalStorage(t);break;default:e.forEach(e=>{t[8*e.r+e.c].possibleDest=!0}),this.setLocalStorage(t)}}canPromote(e){let t=this.getLocalStorage().liveBoard,s=this.getLocalStorage().liveHistory,i=s[s.length-1];const o=t[8*e.r+e.c].piece;return null!=o&&-1!=o.title.indexOf("pawn")&&(0==e.r&&0==o.title.indexOf("white")||7==e.r&&0==o.title.indexOf("black"))&&i.dst.r==e.r&&i.dst.c==e.c}promoteIfPossible(e,t,s){let i=this.getLocalStorage().liveBoard,o=this.getLocalStorage().liveHistory,c=this.getLocalStorage().livePlayer,n=o[o.length-1];const a=i[8*e.r+e.c].piece,d=s||i[8*t.r+t.c].piece;if(null!=a&&-1!=a.title.indexOf("pawn")&&null!=d&&a.title.indexOf("white")==d.title.indexOf("white")&&(0==e.r&&0==a.title.indexOf("white")||7==e.r&&0==a.title.indexOf("black"))&&n.dst.r==e.r&&n.dst.c==e.c&&-1==d.title.indexOf("pawn")&&-1==d.title.indexOf("king")){i[8*e.r+e.c].piece.title=d.title;const t=n.move;return o.push({src:e,dst:e,srcPiece:a,dstPiece:a,move:t}),c=c==r?l:r,this.setLocalStorage(i,c,void 0,o),!0}return!1}undoMove(){}redoMove(){}loadBoard(){}saveBoard(){}}("chess-game-typescript-es6"),new class{constructor(e){this.template=e,this.$board=d(".chessboard"),this.$capturedwhite=d(".capturedwhite"),this.$capturedblack=d(".capturedblack"),this.$main=d(".main"),this.$undobtn=d(".undo"),this.$redobtn=d(".redo")}get$board(){return this.$board}get$capturedwhite(){return this.$capturedwhite}get$capturedblack(){return this.$capturedblack}showBoard(e){this.$board.replaceChild(this.template.Board(e),this.$board.firstChild)}showCaptures(e){this.$capturedwhite.replaceChild(this.template.CapturedWhite(e),this.$capturedwhite.firstChild),this.$capturedblack.replaceChild(this.template.CapturedBlack(e),this.$capturedblack.firstChild)}bindSelectBox(e,t){h(e,"click",({target:s})=>t(e))}bindCapturedPiece(e,t,s){h(e,"click",()=>s(e,t))}bindUndoMove(e){}bindRedoMove(e){}}(new class{Board(e){let t=document.createElement("board"),s=0;for(let i=0;i<8;i++){let o=document.createElement("tr");for(let t=0;t<8;t++){let r=document.createElement("td");r.setAttribute("data-pos",String(s));const l=e[8*i+t],c=l.piece;if(c){let e=document.createElement("div");e.setAttribute("class",c.title),r.appendChild(e)}l.selected&&r.setAttribute("class","selected"),l.possibleDest&&r.setAttribute("class","possibleDest"),o.appendChild(r),s++}t.appendChild(o)}return t}Captured(e,t){let s=document.createElement("tr");for(let i=0;i<t.length;i++){const o=t[i];if(o.title&&0==o.title.indexOf(e)){let e=document.createElement("td"),t=document.createElement("div");t.setAttribute("class",o.title),o.selectedCapture&&t.setAttribute("class",o.title+" selectedCapture"),e.appendChild(t),s.appendChild(e)}}return s}CapturedWhite(e){return this.Captured("white",e)}CapturedBlack(e){return this.Captured("black",e)}}));h(window,"load",()=>f.showBoardAndBindBoxes())},function(e,t){var s,i,o=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function l(){throw new Error("clearTimeout has not been defined")}function c(e){if(s===setTimeout)return setTimeout(e,0);if((s===r||!s)&&setTimeout)return s=setTimeout,setTimeout(e,0);try{return s(e,0)}catch(t){try{return s.call(null,e,0)}catch(t){return s.call(this,e,0)}}}!function(){try{s="function"==typeof setTimeout?setTimeout:r}catch(e){s=r}try{i="function"==typeof clearTimeout?clearTimeout:l}catch(e){i=l}}();var n,a=[],d=!1,h=-1;function u(){d&&n&&(d=!1,n.length?a=n.concat(a):h=-1,a.length&&p())}function p(){if(!d){var e=c(u);d=!0;for(var t=a.length;t;){for(n=a,a=[];++h<t;)n&&n[h].run();h=-1,t=a.length}n=null,d=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===l||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function v(e,t){this.fun=e,this.array=t}function g(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var s=1;s<arguments.length;s++)t[s-1]=arguments[s];a.push(new v(e,t)),1!==a.length||d||c(p)},v.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,s){(function(e){function s(e,t){for(var s=0,i=e.length-1;i>=0;i--){var o=e[i];"."===o?e.splice(i,1):".."===o?(e.splice(i,1),s++):s&&(e.splice(i,1),s--)}if(t)for(;s--;s)e.unshift("..");return e}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(e){return i.exec(e).slice(1)};function r(e,t){if(e.filter)return e.filter(t);for(var s=[],i=0;i<e.length;i++)t(e[i],i,e)&&s.push(e[i]);return s}t.resolve=function(){for(var t="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var l=o>=0?arguments[o]:e.cwd();if("string"!=typeof l)throw new TypeError("Arguments to path.resolve must be strings");l&&(t=l+"/"+t,i="/"===l.charAt(0))}return t=s(r(t.split("/"),function(e){return!!e}),!i).join("/"),(i?"/":"")+t||"."},t.normalize=function(e){var i=t.isAbsolute(e),o="/"===l(e,-1);return(e=s(r(e.split("/"),function(e){return!!e}),!i).join("/"))||i||(e="."),e&&o&&(e+="/"),(i?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(r(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},t.relative=function(e,s){function i(e){for(var t=0;t<e.length&&""===e[t];t++);for(var s=e.length-1;s>=0&&""===e[s];s--);return t>s?[]:e.slice(t,s-t+1)}e=t.resolve(e).substr(1),s=t.resolve(s).substr(1);for(var o=i(e.split("/")),r=i(s.split("/")),l=Math.min(o.length,r.length),c=l,n=0;n<l;n++)if(o[n]!==r[n]){c=n;break}var a=[];for(n=c;n<o.length;n++)a.push("..");return(a=a.concat(r.slice(c))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){var t=o(e),s=t[0],i=t[1];return s||i?(i&&(i=i.substr(0,i.length-1)),s+i):"."},t.basename=function(e,t){var s=o(e)[2];return t&&s.substr(-1*t.length)===t&&(s=s.substr(0,s.length-t.length)),s},t.extname=function(e){return o(e)[3]};var l="b"==="ab".substr(-1)?function(e,t,s){return e.substr(t,s)}:function(e,t,s){return t<0&&(t=e.length+t),e.substr(t,s)}}).call(this,s(1))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3R5cGVzLnRzIiwid2VicGFjazovLy8uL3NyYy9jb250cm9sbGVyL2NvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZpZXcvaGVscGVycy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWwvcGllY2UudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVsL3BpZWNlaGVscGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbC9yb29rLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbC9raW5nLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbC9waWVjZWdhbWVsb2dpYy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWwvcGF3bi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWwva25pZ2h0LnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbC9iaXNob3AudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVsL3F1ZWVuLnRzIiwid2VicGFjazovLy8uL3NyYy9hcHAudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3N0b3JlLnRzIiwid2VicGFjazovLy8uL3NyYy92aWV3L3ZpZXcudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3ZpZXcvdGVtcGxhdGUudHMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3Byb2Nlc3MvYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcGF0aC1icm93c2VyaWZ5L2luZGV4LmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJjb25maWd1cmFibGUiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsInZhbHVlIiwibiIsIl9fZXNNb2R1bGUiLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJlbXB0eUJveCIsInBvcyIsIk1hdGgiLCJ0cnVuYyIsInBpZWNlIiwic2VsZWN0ZWQiLCJwb3NzaWJsZURlc3QiLCJpbml0aWFsaXplUGllY2UiLCJ0aXRsZSIsInRpbWVzTW92ZWQiLCJjYXB0dXJlZElkeCIsInNlbGVjdGVkQ2FwdHVyZSIsIldISVRFX1BMQVlFUiIsIkJMQUNLX1BMQVlFUiIsImRlc2VyaWFsaXplQm94Q29udGVudHMiLCJib3giLCJyZXQiLCJOdW1iZXIiLCJnZXRBdHRyaWJ1dGUiLCJxdWVyeVNlbGVjdG9yIiwiZGVzZXJpYWxpemVDYXB0dXJlZFBpZWNlIiwicGllY2VFbGVtIiwiZmlyc3RDaGlsZCIsImV4dHJhY3RMb2NhdGlvbkZyb21Cb3giLCJxcyIsInNlbGVjdG9yIiwic2NvcGUiLCJkb2N1bWVudCIsIiRvbiIsInRhcmdldCIsInR5cGUiLCJjYWxsYmFjayIsImNhcHR1cmUiLCJhZGRFdmVudExpc3RlbmVyIiwiRW1wdHlQaWVjZSIsIltvYmplY3QgT2JqZWN0XSIsInRoaXMiLCJnZXRQb3NzaWJsZU1vdmVzIiwiZ2FtZVN0YXRlIiwic3JjIiwibnVtTW92ZXMiLCJkc3QiLCJQaWVjZUhlbHBlciIsImdldE51bU1vdmVzIiwiaXNFbXB0eSIsImlzUGllY2VPZkdpdmVuUGxheWVyIiwicGxheWVyIiwiaXNQaWVjZU9mQ3VycmVudFBsYXllciIsImlzQm94T25Cb2FyZCIsImlzVmFsaWRTb3VyY2VBbmREZXN0IiwiY2FuR29BbG9uZ1Jvd1RvRGVzdCIsImNhbkdvQWxvbmdDb2xUb0Rlc3QiLCJjYW5Hb0Fsb25nTGluZVRvRGVzdCIsImNhbkdvQWxvbmdEaWFnb25hbFRvRGVzdCIsImNvZGVNYXRjaCIsImJvYXJkIiwibWF0Y2giLCJsZW5ndGgiLCJpc05hTiIsInRyaW0iLCJhbHBoYWNvZGUiLCJ0b1VwcGVyQ2FzZSIsInRvTG93ZXJDYXNlIiwiY2hlY2tQYXJ0aWN1bGFyUGxheWVyIiwicGxheWVyQ2FzZSIsImFwcGx5IiwicGxheWVyV2hpdGUiLCJTdHJpbmciLCJudW1Sb3dzIiwibnVtQ29scyIsImRpciIsImxlbiIsImFicyIsInJvd0RpciIsImNvbERpciIsImoiLCJyb29rX1Jvb2siLCJraW5nX0tpbmciLCJzcGVjaWFsTW92ZXMiLCJnZXRQb3NzaWJsZVNwZWNpYWxNb3ZlcyIsIlBpZWNlR2FtZUxvZ2ljIiwiZ2V0VHlwZSIsImlzUG9zc2libGVUb01vdmVUbyIsIkJveCIsImlzSW5DaGVjayIsImlzSW5DaGVja21hdGUiLCJraW5nQ2FuQ2FzdGxlV2l0aEdpdmVuUm9vayIsImNhc3RsZUtpbmdXaXRoR2l2ZW5Sb29rIiwiZ2V0U2V0T2ZBbGxQb3NzaWJsZU1vdmVzRm9yUGxheWVyIiwiU2V0IiwicmFuZG9tRGVmZW5zaXZlTW92ZSIsImlzQUNhcHR1cmUiLCJ1bmRlZmluZWQiLCJmb3J3YXJkRGlyZWN0aW9uT2ZDdXJyZW50UGxheWVyIiwicGF3bkNhbk1vdmUxRm9yd2FyZCIsImluQmV0d2VlblNxdWFyZSIsInBhd25DYW5Nb3ZlMkZvcndhcmQiLCJwYXduQ2FuQXR0YWNrIiwiUGllY2VUeXBlIiwidmFsaWRNb3ZlcyIsInB1c2giLCJjb25zdHJ1Y3RNb3Zlc01hdHJpeCIsInBvc3NpYmxlQXR0YWNrcyIsImsiLCJwb3NzaWJsZU1vdmVzIiwiY29uc29sZSIsImxvZyIsInQiLCJvdXREaXIiLCJzaGlmdCIsImFzc2lnbiIsInBvc3NpYmxlUGxheWVyTW92ZXMiLCJhZGQiLCJvcHBvbmVudCIsImNvbnRyb2xsZXIiLCJzdG9yZSIsInZpZXciLCJfc2VsZWN0ZWRCb3giLCJfbGFzdFNlbGVjdGVkQm94IiwiX3NlbGVjdGVkQ2FwdHVyZWRQaWVjZSIsImJpbmRVbmRvTW92ZSIsInVuZG9Nb3ZlIiwiYmluZCIsImJpbmRSZWRvTW92ZSIsInJlZG9Nb3ZlIiwiZ2V0TG9jYWxTdG9yYWdlIiwibGl2ZUJvYXJkIiwic2hvd0JvYXJkIiwiZ2V0JGJvYXJkIiwiY2hpbGRyZW4iLCJiaW5kU2VsZWN0Qm94Iiwic2VsZWN0Qm94IiwiY2FwdHVyZXMiLCJsaXZlQ2FwdHVyZXMiLCJzaG93Q2FwdHVyZXMiLCJ3aGl0ZUlkeCIsImJsYWNrSWR4IiwiaW5kZXhPZiIsImdldCRjYXB0dXJlZGJsYWNrIiwiYmluZENhcHR1cmVkUGllY2UiLCJzZWxlY3RDYXB0dXJlZFBpZWNlIiwiZ2V0JGNhcHR1cmVkd2hpdGUiLCJsb2NhdGlvbklmQ2FuTW92ZSIsIm1vdmVQaWVjZSIsInVuc2VsZWN0Qm94IiwidXBkYXRlUG9zc2libGVNb3ZlcyIsImNhblByb21vdGUiLCJhbGVydCIsInByb21vdGVJZlBvc3NpYmxlIiwidW5TZWxlY3RDYXB0dXJlZFBpZWNlIiwic2hvd0FuZEJpbmRDYXB0dXJlZFBpZWNlcyIsInNob3dCb2FyZEFuZEJpbmRCb3hlcyIsImxpdmVIaXN0b3J5IiwibGl2ZVJlZG9IaXN0b3J5IiwibGl2ZVN0b3JlIiwibGl2ZVBsYXllciIsInByZXZMaXZlU3RvcmUiLCJyZWRvTGl2ZVN0b3JlIiwibG9jYWxTdG9yYWdlIiwid2luZG93IiwiaW5pdGlhbGl6ZUJvYXJkIiwid2hpdGVraW5nIiwid2hpdGVxdWVlbiIsIndoaXRlYmlzaG9wIiwid2hpdGVrbmlnaHQiLCJ3aGl0ZXJvb2siLCJ3aGl0ZXBhd24iLCJibGFja2tpbmciLCJibGFja3F1ZWVuIiwiYmxhY2tiaXNob3AiLCJibGFja2tuaWdodCIsImJsYWNrcm9vayIsImJsYWNrcGF3biIsImJveGVzIiwiYXJyIiwiZW1wdHlCb2FyZCIsImxvY2FsU3RvcmFnZUl0ZW0iLCJnZXRJdGVtIiwiSlNPTiIsInN0cmluZ2lmeSIsInBhcnNlIiwiaGlzdG9yeSIsInJlZG9IaXN0b3J5IiwiQXJyYXkiLCJpc0FycmF5Iiwic2V0SXRlbSIsImVuY29kaW5nIiwiYm9hcmRJbiIsInBsYXllckJsYWNrIiwiY29udmVydEZyb250VG9CYWNrRW5jb2RpbmciLCJoaXN0b3J5SW4iLCJzcmNQb3MiLCJmb3J3YXJkRGlyIiwic3JjQ29sb3IiLCJwaWVjZVRoYXRMYXN0TW92ZWQiLCJzcmNQaWVjZSIsIm1vdmUiLCJwb3NzaWJsZUVuUGFzc2FudExvY2F0aW9uIiwiZ2V0RW5QYXNzYW50TG9jYXRpb25JZlBvc3NpYmxlIiwic3RvcmVJbiIsImNvbnZlcnRCb2FyZFRvR2FtZVN0YXRlIiwicGxheWVyVHVybiIsImRzdFBvcyIsImRzdFBpZWNlIiwibG9jYXRpb25Ub0NhcHR1cmUiLCJsb2NhdGlvbklmSXNDYXB0dXJlIiwic2hpZnRLaW5nIiwic2hpZnRSb29rIiwic2V0TG9jYWxTdG9yYWdlIiwiY2FuTW92ZVRvRGVzdCIsImxvY2F0aW9ucyIsIm1hcCIsImZvckVhY2giLCJsb2MiLCJwYXduIiwiaEl0ZW0iLCJwYXduUGllY2UiLCJvdGhlciIsIm90aGVyUGllY2VJbiIsIm90aGVyUGllY2UiLCJ0ZW1wbGF0ZSIsIiRib2FyZCIsIiRjYXB0dXJlZHdoaXRlIiwiJGNhcHR1cmVkYmxhY2siLCIkbWFpbiIsIiR1bmRvYnRuIiwiJHJlZG9idG4iLCJyZXBsYWNlQ2hpbGQiLCJCb2FyZCIsIkNhcHR1cmVkV2hpdGUiLCJDYXB0dXJlZEJsYWNrIiwiaGFuZGxlciIsImNyZWF0ZUVsZW1lbnQiLCJib3hQb3MiLCJ0ciIsInRkIiwic2V0QXR0cmlidXRlIiwicGllY2VEaXYiLCJhcHBlbmRDaGlsZCIsIkNhcHR1cmVkIiwiY2FjaGVkU2V0VGltZW91dCIsImNhY2hlZENsZWFyVGltZW91dCIsInByb2Nlc3MiLCJkZWZhdWx0U2V0VGltb3V0IiwiRXJyb3IiLCJkZWZhdWx0Q2xlYXJUaW1lb3V0IiwicnVuVGltZW91dCIsImZ1biIsInNldFRpbWVvdXQiLCJlIiwiY2xlYXJUaW1lb3V0IiwiY3VycmVudFF1ZXVlIiwicXVldWUiLCJkcmFpbmluZyIsInF1ZXVlSW5kZXgiLCJjbGVhblVwTmV4dFRpY2siLCJjb25jYXQiLCJkcmFpblF1ZXVlIiwidGltZW91dCIsInJ1biIsIm1hcmtlciIsInJ1bkNsZWFyVGltZW91dCIsIkl0ZW0iLCJhcnJheSIsIm5vb3AiLCJuZXh0VGljayIsImFyZ3MiLCJhcmd1bWVudHMiLCJicm93c2VyIiwiZW52IiwiYXJndiIsInZlcnNpb24iLCJ2ZXJzaW9ucyIsIm9uIiwiYWRkTGlzdGVuZXIiLCJvbmNlIiwib2ZmIiwicmVtb3ZlTGlzdGVuZXIiLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJlbWl0IiwicHJlcGVuZExpc3RlbmVyIiwicHJlcGVuZE9uY2VMaXN0ZW5lciIsImxpc3RlbmVycyIsImJpbmRpbmciLCJjd2QiLCJjaGRpciIsInVtYXNrIiwibm9ybWFsaXplQXJyYXkiLCJwYXJ0cyIsImFsbG93QWJvdmVSb290IiwidXAiLCJsYXN0Iiwic3BsaWNlIiwidW5zaGlmdCIsInNwbGl0UGF0aFJlIiwic3BsaXRQYXRoIiwiZmlsZW5hbWUiLCJleGVjIiwic2xpY2UiLCJmaWx0ZXIiLCJ4cyIsImYiLCJyZXMiLCJyZXNvbHZlIiwicmVzb2x2ZWRQYXRoIiwicmVzb2x2ZWRBYnNvbHV0ZSIsInBhdGgiLCJUeXBlRXJyb3IiLCJjaGFyQXQiLCJzcGxpdCIsImpvaW4iLCJub3JtYWxpemUiLCJpc0Fic29sdXRlIiwidHJhaWxpbmdTbGFzaCIsInN1YnN0ciIsInBhdGhzIiwiaW5kZXgiLCJyZWxhdGl2ZSIsImZyb20iLCJ0byIsInN0YXJ0IiwiZW5kIiwiZnJvbVBhcnRzIiwidG9QYXJ0cyIsIm1pbiIsInNhbWVQYXJ0c0xlbmd0aCIsIm91dHB1dFBhcnRzIiwic2VwIiwiZGVsaW1pdGVyIiwiZGlybmFtZSIsInJlc3VsdCIsInJvb3QiLCJiYXNlbmFtZSIsImV4dCIsImV4dG5hbWUiLCJzdHIiXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEtBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsSUFDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxZQVVBLE9BTkFJLEVBQUFMLEdB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LCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbiBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbiBcdFx0XHR9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiLyoqXG4gKiBAdHlwZWRlZiB7IXtwb3M6IG51bWJlciwgcjogbnVtYmVyLCBjOiBudW1iZXIsIHBpZWNlOiAoUGllY2V8bnVsbCksIHNlbGVjdGVkOiBib29sZWFuLCBwb3NzaWJsZURlc3Q6IGJvb2xlYW59fVxuICovXG5leHBvcnQgaW50ZXJmYWNlIEJveCB7XG4gICAgcG9zOiBudW1iZXI7XG4gICAgcjogbnVtYmVyO1xuICAgIGM6IG51bWJlcjtcbiAgICBwaWVjZTogUGllY2UgfCBudWxsO1xuICAgIHNlbGVjdGVkOiBib29sZWFuO1xuICAgIHBvc3NpYmxlRGVzdDogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBAZnVuY3Rpb25cbiAqIEBwYXJhbSB7IW51bWJlcn0gcG9zXG4gKiBAcmV0dXJucyB7Qm94fVxuICovXG5leHBvcnQgZnVuY3Rpb24gZW1wdHlCb3gocG9zOiBudW1iZXIpOiBCb3gge1xuICAgIHJldHVybiB7XG4gICAgICAgIHBvczogcG9zLFxuICAgICAgICByOiBNYXRoLnRydW5jKHBvcy84KSxcbiAgICAgICAgYzogcG9zJTgsXG4gICAgICAgIHBpZWNlOiBudWxsLFxuICAgICAgICBzZWxlY3RlZDogZmFsc2UsXG4gICAgICAgIHBvc3NpYmxlRGVzdDogZmFsc2UsXG4gICAgfVxufVxuXG4vKipcbiAqIEB0eXBlZGVmIHshe3I6IG51bWJlciwgYzogbnVtYmVyfX1cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBMb2NhdGlvbiB7XG4gICAgcjogbnVtYmVyO1xuICAgIGM6IG51bWJlcjtcbn1cblxuLyoqXG4gKiBAdHlwZWRlZiB7IXt0aXRsZTogc3RyaW5nLCB0aW1lc01vdmVkOiBudW1iZXIsIGNhcHR1cmVkSWR4OiBudW1iZXIsIHNlbGVjdGVkQ2FwdHVyZTogYm9vbGVhbn19XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUGllY2Uge1xuICAgIHRpdGxlOiBzdHJpbmc7XG4gICAgdGltZXNNb3ZlZDogbnVtYmVyO1xuICAgIGNhcHR1cmVkSWR4OiBudW1iZXI7XG4gICAgc2VsZWN0ZWRDYXB0dXJlOiBib29sZWFuO1xufVxuXG4vKipcbiAqIEBmdW5jdGlvblxuICogQHBhcmFtIHshc3RyaW5nfSB0aXRsZSBcbiAqIEByZXR1cm5zIHshUGllY2V9XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpbml0aWFsaXplUGllY2UodGl0bGU6IHN0cmluZyk6IFBpZWNlIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0aXRsZTogdGl0bGUsXG4gICAgICAgIHRpbWVzTW92ZWQ6IDAsXG4gICAgICAgIGNhcHR1cmVkSWR4OiAtMSxcbiAgICAgICAgc2VsZWN0ZWRDYXB0dXJlOiBmYWxzZVxuICAgIH1cbn1cblxuLyoqXG4gKiBAdHlwZWRlZiB7IW51bWJlcn1cbiAqL1xuZXhwb3J0IHR5cGUgUGxheWVyID0gbnVtYmVyO1xuXG4vKipcbiAqIEB0eXBlIHshUGxheWVyfVxuICovXG5leHBvcnQgY29uc3QgV0hJVEVfUExBWUVSOiBQbGF5ZXIgPSAwO1xuXG4vKipcbiAqIEB0eXBlIHshUGxheWVyfVxuICovXG5leHBvcnQgY29uc3QgQkxBQ0tfUExBWUVSOiBQbGF5ZXIgPSAxO1xuXG4vKipcbiAqIEB0eXBlZGVmIHshQXJyYXk8Qm94Pn1cbiAqL1xuZXhwb3J0IHR5cGUgQm9hcmQgPSBBcnJheTxCb3g+OyIsImltcG9ydCBTdG9yZSBmcm9tICcuLi9zdG9yZSc7XG5pbXBvcnQgVmlldyBmcm9tICcuLi92aWV3L3ZpZXcnO1xuaW1wb3J0IHtCb2FyZCwgQm94LCBlbXB0eUJveCwgUGllY2UsIGluaXRpYWxpemVQaWVjZSwgTG9jYXRpb259IGZyb20gJy4uL3R5cGVzJztcblxuLyoqXG4gKiBEZXNlcmlhbGl6ZSB0aGUgSFRNTCBkYXRhIGludG8gYSBKUyBvYmplY3QuXG4gKiBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy81NjYwMDUwL3doYXQtaXMtc2VyaWFsaXphdGlvbi1hbmQtZGVzZXJpYWxpemF0aW9uLWNvbmNlcHR1YWxseVxuICogQHBhcmFtIHtFbGVtZW50fSBib3ggVGhlIHJhdyBodG1sIGJveCBmcm9tIHRoZSB2aWV3XG4gKiBAcmV0dXJucyB7Qm94fSB0aGUgY29udGVudHMgb2YgdGhlIGJveCBhcyBhIHN0cnVjdHVyZWQgSlMgb2JqZWN0XG4gKi9cbmNvbnN0IGRlc2VyaWFsaXplQm94Q29udGVudHMgPSAoYm94OiBFbGVtZW50KTogQm94ID0+IHtcbiAgICBsZXQgcmV0ID0gZW1wdHlCb3goTnVtYmVyKGJveC5nZXRBdHRyaWJ1dGUoJ2RhdGEtcG9zJykpKTtcbiAgICBpZiAoYm94LnF1ZXJ5U2VsZWN0b3IoJ2RpdicpKSB7XG4gICAgICAgIHJldC5waWVjZSA9IGluaXRpYWxpemVQaWVjZShib3gucXVlcnlTZWxlY3RvcignZGl2JykuZ2V0QXR0cmlidXRlKCdjbGFzcycpKTtcbiAgICB9XG4gICAgcmV0dXJuIHJldDtcbn1cblxuY29uc3QgZGVzZXJpYWxpemVDYXB0dXJlZFBpZWNlID0gKHBpZWNlRWxlbSkgPT4gaW5pdGlhbGl6ZVBpZWNlKHBpZWNlRWxlbS5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSgnY2xhc3MnKSk7XG5cbi8qKlxuICogQHBhcmFtIHtCb3h9IGJveFxuICogQHJldHVybnMge0xvY2F0aW9ufSBsb2NhdGlvbiBvZiBib3ggb24gYm9hcmRcbiAqL1xuY29uc3QgZXh0cmFjdExvY2F0aW9uRnJvbUJveCA9IChib3g6IEJveCk6IExvY2F0aW9uID0+IHtcbiAgICByZXR1cm4ge3I6IGJveC5yLCBjOiBib3guY31cbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ29udHJvbGxlciB7XG4gICAgcHJpdmF0ZSBzdG9yZTogU3RvcmU7XG4gICAgcHJpdmF0ZSB2aWV3OiBWaWV3O1xuICAgIHByaXZhdGUgX3NlbGVjdGVkQm94OiBCb3g7XG4gICAgcHJpdmF0ZSBfbGFzdFNlbGVjdGVkQm94OiBCb3g7XG4gICAgcHJpdmF0ZSBfc2VsZWN0ZWRDYXB0dXJlZFBpZWNlOiBQaWVjZTtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0geyFTdG9yZX0gc3RvcmUgQSBzdG9yZSBpbnN0YW5jZVxuICAgICAqIEBwYXJhbSB7IVZpZXd9IHZpZXcgYSBWaWV3IGluc3RhbmNlXG4gICAgICovXG4gICAgY29uc3RydWN0b3Ioc3RvcmU6IFN0b3JlLCB2aWV3OiBWaWV3KSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7IVN0b3JlfVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5zdG9yZSA9IHN0b3JlO1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUgeyFWaWV3fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy52aWV3ID0gdmlldztcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHshQm94fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5fc2VsZWN0ZWRCb3ggPSBlbXB0eUJveCgtMSk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7IUJveH1cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX2xhc3RTZWxlY3RlZEJveCA9IGVtcHR5Qm94KC0xKTtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHshUGllY2V9XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLl9zZWxlY3RlZENhcHR1cmVkUGllY2UgPSBpbml0aWFsaXplUGllY2UobnVsbCk7XG4gICAgICAgIHRoaXMudmlldy5iaW5kVW5kb01vdmUodGhpcy51bmRvTW92ZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgdGhpcy52aWV3LmJpbmRSZWRvTW92ZSh0aGlzLnJlZG9Nb3ZlLmJpbmQodGhpcykpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgSFRNTCBib2FyZCBpbiBWaWV3LCBiaW5kIHRoaXMuc2VsZWN0Qm94IHRvIGVhY2ggYm94IGluIFZpZXcuXG4gICAgICogQHBhcmFtIHtWb2lkfVxuICAgICAqIEByZXR1cm5zIHtWb2lkfVxuICAgICAqL1xuICAgIHNob3dCb2FyZEFuZEJpbmRCb3hlcygpIHtcbiAgICAgICAgbGV0IGJvYXJkID0gdGhpcy5zdG9yZS5nZXRMb2NhbFN0b3JhZ2UoKS5saXZlQm9hcmQ7XG4gICAgICAgIHRoaXMudmlldy5zaG93Qm9hcmQoYm9hcmQpO1xuICAgICAgICBmb3IgKGxldCByID0gMDsgciA8IDg7IHIrKykge1xuICAgICAgICAgICAgZm9yIChsZXQgYyA9IDA7IGMgPCA4OyBjKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgYm94ID0gdGhpcy52aWV3LmdldCRib2FyZCgpLmNoaWxkcmVuWzBdLmNoaWxkcmVuW3JdLmNoaWxkcmVuW2NdO1xuICAgICAgICAgICAgICAgIHRoaXMudmlldy5iaW5kU2VsZWN0Qm94KGJveCwgdGhpcy5zZWxlY3RCb3guYmluZCh0aGlzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIEhUTUwgY2FwdHVyZXMgaW4gVmlldywgYmluZCB0aGlzLnNlbGVjdENhcHR1cmVkUGllY2UgdG8gZWFjaCBjYXB0dXJlZCBwaWVjZSBpbiBWaWV3LlxuICAgICAqIEBwYXJhbSB7Vm9pZH1cbiAgICAgKiBAcmV0dXJucyB7Vm9pZH1cbiAgICAgKi9cbiAgICBzaG93QW5kQmluZENhcHR1cmVkUGllY2VzKCkge1xuICAgICAgICBsZXQgY2FwdHVyZXMgPSB0aGlzLnN0b3JlLmdldExvY2FsU3RvcmFnZSgpLmxpdmVDYXB0dXJlcztcbiAgICAgICAgdGhpcy52aWV3LnNob3dDYXB0dXJlcyhjYXB0dXJlcyk7XG4gICAgICAgIGxldCB3aGl0ZUlkeCA9IDA7XG4gICAgICAgIGxldCBibGFja0lkeCA9IDA7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2FwdHVyZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmIChjYXB0dXJlc1tpXS50aXRsZSAmJiBjYXB0dXJlc1tpXS50aXRsZS5pbmRleE9mKCdibGFjaycpID09IDApIHtcbiAgICAgICAgICAgICAgICBsZXQgcGllY2UgPSB0aGlzLnZpZXcuZ2V0JGNhcHR1cmVkYmxhY2soKS5jaGlsZHJlblswXS5jaGlsZHJlbltibGFja0lkeCsrXTtcbiAgICAgICAgICAgICAgICBpZiAocGllY2UgIT0gdW5kZWZpbmVkKSB0aGlzLnZpZXcuYmluZENhcHR1cmVkUGllY2UocGllY2UsIGksIHRoaXMuc2VsZWN0Q2FwdHVyZWRQaWVjZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNhcHR1cmVzW2ldLnRpdGxlICYmIGNhcHR1cmVzW2ldLnRpdGxlLmluZGV4T2YoJ3doaXRlJykgPT0gMCkge1xuICAgICAgICAgICAgICAgIGxldCBwaWVjZSA9IHRoaXMudmlldy5nZXQkY2FwdHVyZWR3aGl0ZSgpLmNoaWxkcmVuWzBdLmNoaWxkcmVuW3doaXRlSWR4KytdO1xuICAgICAgICAgICAgICAgIGlmIChwaWVjZSAhPSB1bmRlZmluZWQpIHRoaXMudmlldy5iaW5kQ2FwdHVyZWRQaWVjZShwaWVjZSwgaSwgdGhpcy5zZWxlY3RDYXB0dXJlZFBpZWNlLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIHNlbGVjdGVkUGllY2UgYWZ0ZXIgc2V0aW5nIGxhc3RTZWxlY3RlZFBpZWNlIHRvIGN1cnJlbnQgc2VsZWN0ZWRQaWVjZS5cbiAgICAgKiBcbiAgICAgKiBAcGFyYW0geyFFbGVtZW50fSBib3ggZGl2IG9mIHRoZSBzZWxlY3RlZCBib3hcbiAgICAgKiBAdG9kbyBTdG9wIHRyeWluZyB0byBiZSBjdXRlLiBNb3ZlIGEgbG90IG9mIHRoaXMgbG9naWMgdG8gdGhlIG1vZGVsLlxuICAgICAqICAgVGhpcyBmdW5jdGlvbiBzaG91bGQgYmUgc2ltcGxlL2NvbmNpc2UgYW5kIGVhc3kgdG8gdW5kZXJzdGFuZCwgYXQgYSBnbGFuY2UuXG4gICAgICovXG4gICAgc2VsZWN0Qm94KGJveDogRWxlbWVudCkge1xuICAgICAgICB0aGlzLl9sYXN0U2VsZWN0ZWRCb3ggPSB0aGlzLl9zZWxlY3RlZEJveDtcbiAgICAgICAgdGhpcy5fc2VsZWN0ZWRCb3ggPSBkZXNlcmlhbGl6ZUJveENvbnRlbnRzKGJveCk7XG4gICAgICAgIHRoaXMuc3RvcmUuc2VsZWN0Qm94KHRoaXMuX3NlbGVjdGVkQm94LnBvcyk7XG4gICAgICAgIGlmICh0aGlzLl9sYXN0U2VsZWN0ZWRCb3gucG9zID09IHRoaXMuX3NlbGVjdGVkQm94LnBvcykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGxldCBsb2NhdGlvbklmQ2FuTW92ZSA9IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKHRoaXMuX2xhc3RTZWxlY3RlZEJveC5waWVjZSAhPSBudWxsKSBsb2NhdGlvbklmQ2FuTW92ZSA9IHRoaXMuc3RvcmUubG9jYXRpb25JZkNhbk1vdmUoZXh0cmFjdExvY2F0aW9uRnJvbUJveCh0aGlzLl9sYXN0U2VsZWN0ZWRCb3gpLCBleHRyYWN0TG9jYXRpb25Gcm9tQm94KHRoaXMuX3NlbGVjdGVkQm94KSk7XG4gICAgICAgIGlmICh0aGlzLl9sYXN0U2VsZWN0ZWRCb3gucGllY2UgIT0gbnVsbCAmJiBsb2NhdGlvbklmQ2FuTW92ZSAhPSBmYWxzZSkge1xuICAgICAgICAgICAgdGhpcy5zdG9yZS5tb3ZlUGllY2UoZXh0cmFjdExvY2F0aW9uRnJvbUJveCh0aGlzLl9sYXN0U2VsZWN0ZWRCb3gpLCBleHRyYWN0TG9jYXRpb25Gcm9tQm94KHRoaXMuX3NlbGVjdGVkQm94KSk7XG4gICAgICAgICAgICB0aGlzLnN0b3JlLnVuc2VsZWN0Qm94KHRoaXMuX2xhc3RTZWxlY3RlZEJveC5wb3MpO1xuICAgICAgICAgICAgdGhpcy5zdG9yZS51cGRhdGVQb3NzaWJsZU1vdmVzKG51bGwpO1xuICAgICAgICAgICAgdGhpcy5fbGFzdFNlbGVjdGVkQm94ID0gZW1wdHlCb3goLTEpO1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RvcmUuY2FuUHJvbW90ZSh7cjogdGhpcy5fc2VsZWN0ZWRCb3guciwgYzogdGhpcy5fc2VsZWN0ZWRCb3guY30pKSB7XG4gICAgICAgICAgICAgICAgYWxlcnQoJ1Byb21vdGlvbiBwb3NzaWJsZTogU2VsZWN0IHRoZSBwcm9tb3RhYmxlIHBhd24sIHRoZW4gYW55IHBpZWNlIG9mIHRoZSBzYW1lIGNvbG9yIGFzIHRoZSBwcm9tb3RhYmxlIHBhd24gdG8gY29tcGxldGUgdGhlIHByb21vdGlvbi4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuc3RvcmUudW5zZWxlY3RCb3godGhpcy5fc2VsZWN0ZWRCb3gucG9zKTtcbiAgICAgICAgICAgIHRoaXMuX3NlbGVjdGVkQm94ID0gZW1wdHlCb3goLTEpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCh0aGlzLl9sYXN0U2VsZWN0ZWRCb3gucGllY2UgIT0gbnVsbCAmJiB0aGlzLl9sYXN0U2VsZWN0ZWRCb3gucGllY2UudGl0bGUgIT0gbnVsbFxuICAgICAgICAgICAgICAgICYmIHRoaXMuX3NlbGVjdGVkQm94LnBpZWNlICE9IG51bGwgJiYgdGhpcy5fc2VsZWN0ZWRCb3gucGllY2UudGl0bGUgIT0gbnVsbFxuICAgICAgICAgICAgICAgICYmICh0aGlzLnN0b3JlLnByb21vdGVJZlBvc3NpYmxlKHtyOiB0aGlzLl9sYXN0U2VsZWN0ZWRCb3guciwgYzogdGhpcy5fbGFzdFNlbGVjdGVkQm94LmN9LCB7cjogdGhpcy5fc2VsZWN0ZWRCb3guciwgYzogdGhpcy5fc2VsZWN0ZWRCb3guY30pKSBcbiAgICAgICAgICAgICAgICAgICAgfHwgKCh0aGlzLl9zZWxlY3RlZENhcHR1cmVkUGllY2UgIT0gbnVsbCAmJiB0aGlzLl9zZWxlY3RlZENhcHR1cmVkUGllY2UudGl0bGUgIT0gbnVsbFxuICAgICAgICAgICAgICAgICAgICAgICAgJiYgdGhpcy5fbGFzdFNlbGVjdGVkQm94LnBpZWNlICE9IG51bGwgJiYgdGhpcy5fbGFzdFNlbGVjdGVkQm94LnBpZWNlLnRpdGxlICE9IG51bGxcbiAgICAgICAgICAgICAgICAgICAgICAgICYmIHRoaXMuc3RvcmUucHJvbW90ZUlmUG9zc2libGUoe3I6IHRoaXMuX2xhc3RTZWxlY3RlZEJveC5yLCBjOiB0aGlzLl9sYXN0U2VsZWN0ZWRCb3guY30sIHVuZGVmaW5lZCwgdGhpcy5fc2VsZWN0ZWRDYXB0dXJlZFBpZWNlKSkpXG4gICAgICAgICAgICAgICAgKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fc2VsZWN0ZWRCb3gucG9zICE9IC0xKSB0aGlzLnN0b3JlLnVuc2VsZWN0Qm94KHRoaXMuX3NlbGVjdGVkQm94LnBvcyk7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9sYXN0U2VsZWN0ZWRCb3gucG9zICE9IC0xKSB0aGlzLnN0b3JlLnVuc2VsZWN0Qm94KHRoaXMuX2xhc3RTZWxlY3RlZEJveC5wb3MpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0b3JlLnVwZGF0ZVBvc3NpYmxlTW92ZXMobnVsbCk7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2xhc3RTZWxlY3RlZEJveCA9IGVtcHR5Qm94KC0xKTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2VsZWN0ZWRCb3ggPSBlbXB0eUJveCgtMSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodGhpcy5fc2VsZWN0ZWRCb3gucGllY2UgIT0gbnVsbCkge1xuICAgICAgICAgICAgdGhpcy5zdG9yZS51cGRhdGVQb3NzaWJsZU1vdmVzKG51bGwpO1xuICAgICAgICAgICAgY29uc3QgcG9zc2libGVNb3ZlcyA9IHRoaXMuc3RvcmUuZ2V0UG9zc2libGVNb3ZlcyhleHRyYWN0TG9jYXRpb25Gcm9tQm94KHRoaXMuX3NlbGVjdGVkQm94KSk7XG4gICAgICAgICAgICB0aGlzLnN0b3JlLnVwZGF0ZVBvc3NpYmxlTW92ZXMocG9zc2libGVNb3Zlcyk7XG4gICAgICAgICAgICBpZiAodGhpcy5fbGFzdFNlbGVjdGVkQm94LnBvcyAhPSAtMSkgdGhpcy5zdG9yZS51bnNlbGVjdEJveCh0aGlzLl9sYXN0U2VsZWN0ZWRCb3gucG9zKTtcbiAgICAgICAgICAgIHRoaXMuX2xhc3RTZWxlY3RlZEJveCA9IGVtcHR5Qm94KC0xKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuc3RvcmUudXBkYXRlUG9zc2libGVNb3ZlcyhudWxsKTtcbiAgICAgICAgICAgIGlmICh0aGlzLl9sYXN0U2VsZWN0ZWRCb3gucG9zICE9IC0xKSB0aGlzLnN0b3JlLnVuc2VsZWN0Qm94KHRoaXMuX2xhc3RTZWxlY3RlZEJveC5wb3MpO1xuICAgICAgICAgICAgdGhpcy5fbGFzdFNlbGVjdGVkQm94ID0gZW1wdHlCb3goLTEpO1xuICAgICAgICAgICAgaWYgKHRoaXMuc3RvcmUuY2FuUHJvbW90ZSh7cjogdGhpcy5fc2VsZWN0ZWRCb3guciwgYzogdGhpcy5fc2VsZWN0ZWRCb3guY30pKSB7XG4gICAgICAgICAgICAgICAgLy8gYWxlcnQoJ1Byb21vdGlvbiBwb3NzaWJsZTogU2VsZWN0IHRoZSBwcm9tb3RhYmxlIHBhd24sIHRoZW4gYW55IHBpZWNlIG9mIHRoZSBzYW1lIGNvbG9yIGFzIHRoZSBwcm9tb3RhYmxlIHBhd24gdG8gY29tcGxldGUgdGhlIHByb21vdGlvbi4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICh0aGlzLl9zZWxlY3RlZEJveC5wb3MgIT0gLTEpIHRoaXMuc3RvcmUudW5zZWxlY3RCb3godGhpcy5fc2VsZWN0ZWRCb3gucG9zKTtcbiAgICAgICAgICAgIHRoaXMuX3NlbGVjdGVkQm94ID0gZW1wdHlCb3goLTEpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl9zZWxlY3RlZENhcHR1cmVkUGllY2UuY2FwdHVyZWRJZHggIT0gLTEpIHtcbiAgICAgICAgICAgIHRoaXMuc3RvcmUudW5TZWxlY3RDYXB0dXJlZFBpZWNlKHRoaXMuX3NlbGVjdGVkQ2FwdHVyZWRQaWVjZS5jYXB0dXJlZElkeCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zaG93QW5kQmluZENhcHR1cmVkUGllY2VzKCk7XG4gICAgICAgIHRoaXMuc2hvd0JvYXJkQW5kQmluZEJveGVzKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBwaWVjZUVsZW1cbiAgICAgKiBAcGFyYW0ge251bWJlcn0gaSBJbmRleCBvZiBjYXB0dXJlZCBwaWVjZS5cbiAgICAgKi9cbiAgICBzZWxlY3RDYXB0dXJlZFBpZWNlKHBpZWNlRWxlbTogRWxlbWVudCwgaTogbnVtYmVyKSB7XG4gICAgICAgIGlmICh0aGlzLl9zZWxlY3RlZENhcHR1cmVkUGllY2UuY2FwdHVyZWRJZHggIT0gLTEpIHtcbiAgICAgICAgICAgIHRoaXMuc3RvcmUudW5TZWxlY3RDYXB0dXJlZFBpZWNlKHRoaXMuX3NlbGVjdGVkQ2FwdHVyZWRQaWVjZS5jYXB0dXJlZElkeCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX2xhc3RTZWxlY3RlZEJveC5waWVjZSAhPSBudWxsIHx8IHRoaXMuX3NlbGVjdGVkQm94LnBpZWNlICE9IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuc3RvcmUudXBkYXRlUG9zc2libGVNb3ZlcyhudWxsKTtcbiAgICAgICAgICAgIGlmICh0aGlzLl9sYXN0U2VsZWN0ZWRCb3gucG9zICE9IC0xKSB0aGlzLnN0b3JlLnVuc2VsZWN0Qm94KHRoaXMuX2xhc3RTZWxlY3RlZEJveC5wb3MpO1xuICAgICAgICAgICAgaWYgKHRoaXMuX2xhc3RTZWxlY3RlZEJveC5wb3MgIT0gLTEpIHRoaXMuc3RvcmUudW5zZWxlY3RCb3godGhpcy5fc2VsZWN0ZWRCb3gucG9zKTtcbiAgICAgICAgICAgIHRoaXMuX2xhc3RTZWxlY3RlZEJveCA9IGVtcHR5Qm94KC0xKTtcbiAgICAgICAgICAgIHRoaXMuX2xhc3RTZWxlY3RlZEJveCA9IGVtcHR5Qm94KC0xKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9zZWxlY3RlZENhcHR1cmVkUGllY2UgPSBkZXNlcmlhbGl6ZUNhcHR1cmVkUGllY2UocGllY2VFbGVtKTtcbiAgICAgICAgdGhpcy5fc2VsZWN0ZWRDYXB0dXJlZFBpZWNlLmNhcHR1cmVkSWR4ID0gaTtcbiAgICAgICAgdGhpcy5zdG9yZS5zZWxlY3RDYXB0dXJlZFBpZWNlKGkpO1xuICAgICAgICB0aGlzLnNob3dBbmRCaW5kQ2FwdHVyZWRQaWVjZXMoKTtcbiAgICAgICAgdGhpcy5zaG93Qm9hcmRBbmRCaW5kQm94ZXMoKTtcbiAgICB9XG5cbiAgICB1bmRvTW92ZSgpIHtcbiAgICAgICAgY29uc3QgbGl2ZVN0b3JlID0gdGhpcy5zdG9yZS5nZXRMb2NhbFN0b3JhZ2UoKTtcbiAgICAgICAgaWYgKGxpdmVTdG9yZS5saXZlSGlzdG9yeS5sZW5ndGggPT0gMCkgcmV0dXJuO1xuICAgICAgICB0aGlzLnN0b3JlLnVwZGF0ZVBvc3NpYmxlTW92ZXMobnVsbCk7XG4gICAgICAgIGlmICh0aGlzLl9sYXN0U2VsZWN0ZWRCb3gucG9zICE9IC0xKSB0aGlzLnN0b3JlLnVuc2VsZWN0Qm94KHRoaXMuX2xhc3RTZWxlY3RlZEJveC5wb3MpO1xuICAgICAgICBpZiAodGhpcy5fc2VsZWN0ZWRCb3gucG9zICE9IC0xKSB0aGlzLnN0b3JlLnVuc2VsZWN0Qm94KHRoaXMuX3NlbGVjdGVkQm94LnBvcyk7XG4gICAgICAgIGlmICh0aGlzLl9zZWxlY3RlZENhcHR1cmVkUGllY2UuY2FwdHVyZWRJZHggIT0gLTEpIHRoaXMuc3RvcmUudW5TZWxlY3RDYXB0dXJlZFBpZWNlKHRoaXMuX3NlbGVjdGVkQ2FwdHVyZWRQaWVjZS5jYXB0dXJlZElkeCk7XG4gICAgICAgIHRoaXMuX3NlbGVjdGVkQm94ID0gZW1wdHlCb3goLTEpO1xuICAgICAgICB0aGlzLl9sYXN0U2VsZWN0ZWRCb3ggPSBlbXB0eUJveCgtMSk7XG4gICAgICAgIHRoaXMuX3NlbGVjdGVkQ2FwdHVyZWRQaWVjZSA9IGluaXRpYWxpemVQaWVjZShudWxsKTtcbiAgICAgICAgdGhpcy5zdG9yZS51bmRvTW92ZSgpO1xuICAgICAgICB0aGlzLnNob3dBbmRCaW5kQ2FwdHVyZWRQaWVjZXMoKTtcbiAgICAgICAgdGhpcy5zaG93Qm9hcmRBbmRCaW5kQm94ZXMoKTtcbiAgICB9XG5cbiAgICByZWRvTW92ZSgpIHtcbiAgICAgICAgY29uc3QgbGl2ZVN0b3JlID0gdGhpcy5zdG9yZS5nZXRMb2NhbFN0b3JhZ2UoKTtcbiAgICAgICAgaWYgKGxpdmVTdG9yZS5saXZlUmVkb0hpc3RvcnkubGVuZ3RoID09IDApIHJldHVybjtcbiAgICAgICAgdGhpcy5zdG9yZS51cGRhdGVQb3NzaWJsZU1vdmVzKG51bGwpO1xuICAgICAgICBpZiAodGhpcy5fbGFzdFNlbGVjdGVkQm94LnBvcyAhPSAtMSkgdGhpcy5zdG9yZS51bnNlbGVjdEJveCh0aGlzLl9sYXN0U2VsZWN0ZWRCb3gucG9zKTtcbiAgICAgICAgaWYgKHRoaXMuX3NlbGVjdGVkQm94LnBvcyAhPSAtMSkgdGhpcy5zdG9yZS51bnNlbGVjdEJveCh0aGlzLl9zZWxlY3RlZEJveC5wb3MpO1xuICAgICAgICBpZiAodGhpcy5fc2VsZWN0ZWRDYXB0dXJlZFBpZWNlLmNhcHR1cmVkSWR4ICE9IC0xKSB0aGlzLnN0b3JlLnVuU2VsZWN0Q2FwdHVyZWRQaWVjZSh0aGlzLl9zZWxlY3RlZENhcHR1cmVkUGllY2UuY2FwdHVyZWRJZHgpO1xuICAgICAgICB0aGlzLl9zZWxlY3RlZEJveCA9IGVtcHR5Qm94KC0xKTtcbiAgICAgICAgdGhpcy5fbGFzdFNlbGVjdGVkQm94ID0gZW1wdHlCb3goLTEpO1xuICAgICAgICB0aGlzLl9zZWxlY3RlZENhcHR1cmVkUGllY2UgPSBpbml0aWFsaXplUGllY2UobnVsbCk7XG4gICAgICAgIHRoaXMuc3RvcmUucmVkb01vdmUoKTtcbiAgICAgICAgdGhpcy5zaG93QW5kQmluZENhcHR1cmVkUGllY2VzKCk7XG4gICAgICAgIHRoaXMuc2hvd0JvYXJkQW5kQmluZEJveGVzKCk7XG4gICAgfVxufSIsIi8vIFRoaXMgZmlsZSwgYXMgd2l0aCBtb3N0IG9mIGZyb250X2VuZCwgaXMgaW5zcGlyZWQgYnkgYW5kIG1vc3RseSB0YWtlbiBmcm9tIFRvZG9NVkMvdmFuaWxsYS1lczZcbi8vIHJlc3BlY3Q6IGh0dHBzOi8vZ2l0aHViLmNvbS90YXN0ZWpzL3RvZG9tdmMvdHJlZS9naC1wYWdlcy9leGFtcGxlcy92YW5pbGxhLWVzNlxuXG4vKipcbiAqIHF1ZXJ5U2VsZWN0b3Igd3JhcHBlclxuICogXG4gKiBAcGFyYW0ge3N0cmluZ30gc2VsZWN0b3JcbiAqIEBwYXJhbSB7RWxlbWVudH0gW3Njb3BlXVxuICovXG5leHBvcnQgZnVuY3Rpb24gcXMoc2VsZWN0b3I6IHN0cmluZywgc2NvcGU/OiBFbGVtZW50KSB7XG4gICAgcmV0dXJuIChzY29wZSB8fCBkb2N1bWVudCkucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG59XG5cbi8qKlxuICogYWRkRXZlbnRMaXN0ZW5lciB3cmFwcGVyXG4gKiBcbiAqIEBwYXJhbSB7RWxlbWVudHxXaW5kb3d9IHRhcmdldCBUYXJnZXQgRWxlbWVudFxuICogQHBhcmFtIHtzdHJpbmd9IHR5cGUgRXZlbnQgbmFtZSB0byBiaW5kIHRvXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFjayBFdmVudCBjYWxsYmFja1xuICogQHBhcmFtIHtib29sZWFufSBbY2FwdHVyZV0gQ2FwdHVyZSB0aGUgZXZlbnRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uICRvbih0YXJnZXQ6IEVsZW1lbnQgfCBXaW5kb3csIHR5cGU6IHN0cmluZywgY2FsbGJhY2s6IEV2ZW50TGlzdGVuZXJPckV2ZW50TGlzdGVuZXJPYmplY3QsIGNhcHR1cmU/OiBib29sZWFuIHwgQWRkRXZlbnRMaXN0ZW5lck9wdGlvbnMpIHsgLy8gQHRvZG8gZml4IGNhbGxiYWNrIHR5cGVcbiAgICB0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBjYWxsYmFjaywgISFjYXB0dXJlKTtcbn1cblxuLyoqXG4gKiBBdHRhY2ggYSBoYW5kbGVyIHRvIGFuIGV2ZW50IGZvciBhbGwgZWxlbWVudHMgbWF0Y2hpbmcgYSBzZWxlY3RvclxuICogXG4gKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldCBFbGVtZW50IHdoaWNoIHRoZSBldmVudCBtdXN0IGJ1YmJsZSB0b1xuICovXG4vLyAuLi4uXG5cbi8qKlxuICogRW5jb2RlIGxlc3MtdGhhbiBhbmQgYW1wZXJzYW5kIGNoYXJhY3RlcnMgd2l0aCBIVE1MLXNhZmUgdmVyc2lvbnMuXG4gKiBcbiAqIEBwYXJhbSB7c3RyaW5nfSBzIFN0cmluZyB0byBlc2NhcGVcbiAqIFxuICogQHJldHVybnMge3N0cmluZ30gU3RyaW5nIHdpdGggdW5zYWZlIGNoYXJhY3RlcnMgZXNjYXBlZC5cbiAqL1xuZXhwb3J0IGNvbnN0IGVzY2FwZUZvckhUTUwgPSAoczogc3RyaW5nKTogc3RyaW5nID0+IHMucmVwbGFjZSgvWyY8XS9nLCBjID0+IGMgPT09ICcmJyA/ICcmYW1wOycgOiAnJmx0OycpOyIsImV4cG9ydCBpbnRlcmZhY2UgQm94IHtcbiAgcjogbnVtYmVyO1xuICBjOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGllY2Uge1xuICBuYW1lOiBzdHJpbmc7XG4gIGdldFBvc3NpYmxlTW92ZXM6IChnYW1lU3RhdGUsIHNyYzogQm94LCBudW1Nb3Zlcz86IG51bWJlcikgPT4gKGRzdDogQm94KSA9PiBib29sZWFuO1xufVxuXG5leHBvcnQgY2xhc3MgRW1wdHlQaWVjZSBpbXBsZW1lbnRzIFBpZWNlIHtcbiAgcHVibGljIG5hbWU6IHN0cmluZztcbiAgcHVibGljIGdldFBvc3NpYmxlTW92ZXM7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMubmFtZSA9ICdlbXB0eSc7XG4gICAgdGhpcy5nZXRQb3NzaWJsZU1vdmVzID0gKGdhbWVTdGF0ZSwgc3JjOiBCb3gsIG51bU1vdmVzPzogbnVtYmVyKSA9PiB7XG4gICAgICBjb25zdCBpc1Bvc3NpYmxlVG9Nb3ZlVG8gPSAoZHN0OiBCb3gpID0+IGZhbHNlO1xuICAgICAgcmV0dXJuIGlzUG9zc2libGVUb01vdmVUbztcbiAgICB9XG4gIH1cbn0iLCJpbXBvcnQge1BpZWNlLCBCb3h9IGZyb20gJy4vcGllY2UnO1xuaW1wb3J0IHtHYW1lU3RhdGV9IGZyb20gJy4vZ2FtZXN0YXRlJztcbi8vIGltcG9ydCB7Qm94fSBmcm9tICcuLi8uLi9ib3gnO1xuY29uc3QgUGllY2VIZWxwZXIgPSB7XG4gIGdldE51bU1vdmVzOiAoZ2FtZVN0YXRlLCBib3g6IEJveCkgPT4gLTEsXG4gIGlzRW1wdHk6IChnYW1lU3RhdGUsIGJveDogQm94KSA9PiBmYWxzZSxcbiAgaXNQaWVjZU9mR2l2ZW5QbGF5ZXI6IChnYW1lU3RhdGUsIHBsYXllcjogbnVtYmVyLCBib3g6IEJveCkgPT4gZmFsc2UsXG4gIGlzUGllY2VPZkN1cnJlbnRQbGF5ZXI6IChnYW1lU3RhdGUsIGJveDogQm94KSA9PiBmYWxzZSwgXG4gIGlzQm94T25Cb2FyZDogKGdhbWVTdGF0ZSwgYm94OiBCb3gpID0+IGZhbHNlLCBcbiAgaXNWYWxpZFNvdXJjZUFuZERlc3Q6IChnYW1lU3RhdGUsIHNyYzogQm94LCBkc3Q6IEJveCkgPT4gZmFsc2UsIFxuICBjYW5Hb0Fsb25nUm93VG9EZXN0OiAoZ2FtZVN0YXRlLCBzcmM6IEJveCwgZHN0OiBCb3gpID0+IGZhbHNlLCBcbiAgY2FuR29BbG9uZ0NvbFRvRGVzdDogKGdhbWVTdGF0ZSwgc3JjOiBCb3gsIGRzdDogQm94KSA9PiBmYWxzZSwgXG4gIGNhbkdvQWxvbmdMaW5lVG9EZXN0OiAoZ2FtZVN0YXRlLCBzcmM6IEJveCwgZHN0OiBCb3gpID0+IGZhbHNlLCBcbiAgY2FuR29BbG9uZ0RpYWdvbmFsVG9EZXN0OiAoZ2FtZVN0YXRlLCBzcmM6IEJveCwgZHN0OiBCb3gpID0+IGZhbHNlLCBcbn07XG4vKipcbiAqIEBwYXJhbSB7R2FtZVN0YXRlfSBnYW1lU3RhdGVcbiAqIEBwYXJhbSB7Qm94fSBib3hcbiAqIEByZXR1cm5zIHtudW1iZXJ9XG4gKiBAdG9kbyBoYW5kbGUgZXJyb3IgY2FzZSB3aGVyZSBjb2RlIGRvZXNuJ3QgbWF0Y2ggaW4gbW9yZSBtZWFuaW5nZnVsIHdheSwgYmV0dGVyIGZvciB0ZXN0aW5nLlxuICovXG5QaWVjZUhlbHBlci5nZXROdW1Nb3ZlcyA9IChnYW1lU3RhdGUsYm94KSA9PiB7XG4gIGNvbnN0IHtjOiBjLCByOiByfSA9IGJveDtcbiAgY29uc3QgcyA9IGdhbWVTdGF0ZS5ib2FyZFtyXVtjXTtcbiAgbGV0IGNvZGVNYXRjaCA9IHMubWF0Y2goLyhbYS16QS16XSkoXFxkKikvKTtcbiAgbGV0IG51bU1vdmVzID0gY29kZU1hdGNoICYmIGNvZGVNYXRjaC5sZW5ndGggPiAyICYmICFpc05hTihjb2RlTWF0Y2hbMl0pID8gTnVtYmVyKGNvZGVNYXRjaFsyXSkgOiAtMTsgLy8gLTEgc2hvdWxkIG5ldmVyIGhhcHBlbiwgdGhvdWdoLlxuICByZXR1cm4gbnVtTW92ZXM7XG59XG4vKipcbiAqIFxuICogQHBhcmFtIHtHYW1lU3RhdGV9IGdhbWVTdGF0ZVxuICogQHBhcmFtIHtCb3h9IGJveFxuICogQHJldHVybnMge2Jvb2xlYW59XG4gKiBAdG9kbyBQYXJhbWV0ZXIgZGVzdHJ1Y3R1cmluZyBub3QgeWV0IHN1cHBvcnRlZCBieSBHb29nbGUgQ2xvc3VyZSBjb21waWxlci4gQ2hlY2sgZm9yIHVwZGF0ZXM6IGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGUvY2xvc3VyZS1jb21waWxlci9pc3N1ZXMvMTc4MSBhbmQgcmV2aXNlIGlmIHVwZGF0ZWQuXG4gKi9cblBpZWNlSGVscGVyLmlzRW1wdHkgPSAoZ2FtZVN0YXRlLGJveCk6IGJvb2xlYW4gPT4ge1xuICBjb25zdCB7YzogYywgcjogcn0gPSBib3g7XG4gIHJldHVybiBnYW1lU3RhdGUuYm9hcmRbcl1bY10udHJpbSgpID09PSAnJztcbn1cbi8qKlxuICogXG4gKiBAcGFyYW0ge0dhbWVTdGF0ZX0gZ2FtZVN0YXRlIFxuICogQHBhcmFtIHtudW1iZXJ9IHBsYXllciBcbiAqIEBwYXJhbSB7Qm94fSBib3hcbiAqIEByZXR1cm5zIHtib29sZWFufVxuICovXG5QaWVjZUhlbHBlci5pc1BpZWNlT2ZHaXZlblBsYXllciA9IChnYW1lU3RhdGUscGxheWVyLGJveCkgPT4ge1xuICBjb25zdCBzID0gZ2FtZVN0YXRlLmJvYXJkW2JveC5yXVtib3guY107XG4gIGxldCBjb2RlTWF0Y2ggPSBzLm1hdGNoKC8oW2EtekEtel0pKFxcZCopLyk7XG4gIGxldCBhbHBoYWNvZGUgPSBjb2RlTWF0Y2gubGVuZ3RoID4gMSA/IGNvZGVNYXRjaFsxXSA6IG51bGw7XG4gIGlmICghYWxwaGFjb2RlKSByZXR1cm4gZmFsc2U7XG4gIGlmICgocGxheWVyID09IDAgJiYgYWxwaGFjb2RlID09IGFscGhhY29kZS50b1VwcGVyQ2FzZSgpKSB8fCAocGxheWVyID09IDEgJiYgYWxwaGFjb2RlID09IGFscGhhY29kZS50b0xvd2VyQ2FzZSgpKSkgcmV0dXJuIHRydWU7XG4gIHJldHVybiBmYWxzZTtcbn1cbi8qKlxuICogXG4gKiBAcGFyYW0ge0dhbWVTdGF0ZX0gZ2FtZVN0YXRlIFxuICogQHBhcmFtIHtCb3h9IGJveCBcbiAqIEByZXR1cm5zIHtib29sZWFufVxuICovXG5QaWVjZUhlbHBlci5pc1BpZWNlT2ZDdXJyZW50UGxheWVyID0gKGdhbWVTdGF0ZSxib3gpID0+IHtcbiAgY29uc3QgY2hlY2tQYXJ0aWN1bGFyUGxheWVyID0gKHBsYXllckNhc2Use2M6IGMsIHI6IHJ9ID0gYm94KSA9PlxuICAgIChnYW1lU3RhdGUuYm9hcmRbcl1bY10gPT0gcGxheWVyQ2FzZS5hcHBseShnYW1lU3RhdGUuYm9hcmRbcl1bY10pKSAmJiAhUGllY2VIZWxwZXIuaXNFbXB0eShnYW1lU3RhdGUsYm94KTtcbiAgcmV0dXJuIGdhbWVTdGF0ZS5wbGF5ZXIgPT0gZ2FtZVN0YXRlLnBsYXllcldoaXRlID9cbiAgICBjaGVja1BhcnRpY3VsYXJQbGF5ZXIoU3RyaW5nLnByb3RvdHlwZS50b1VwcGVyQ2FzZSkgOiBjaGVja1BhcnRpY3VsYXJQbGF5ZXIoU3RyaW5nLnByb3RvdHlwZS50b0xvd2VyQ2FzZSk7XG59XG4vKipcbiAqIFxuICogQHBhcmFtIHtHYW1lU3RhdGV9IGdhbWVTdGF0ZSBcbiAqIEBwYXJhbSB7Qm94fSBib3ggXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuUGllY2VIZWxwZXIuaXNCb3hPbkJvYXJkID0gKGdhbWVTdGF0ZSxib3gpID0+IGJveC5yIDwgZ2FtZVN0YXRlLm51bVJvd3MgJiYgYm94LnIgPj0gMCAmJiBib3guYyA+PSAwICYmIGJveC5jIDwgZ2FtZVN0YXRlLm51bUNvbHM7XG4vKipcbiAqIFxuICogQHBhcmFtIHtHYW1lU3RhdGV9IGdhbWVTdGF0ZSBcbiAqIEBwYXJhbSB7Qm94fSBzcmMgXG4gKiBAcGFyYW0ge0JveH0gZHN0IFxuICogQHJldHVybnMge2Jvb2xlYW59XG4gKi9cblBpZWNlSGVscGVyLmlzVmFsaWRTb3VyY2VBbmREZXN0ID0gKGdhbWVTdGF0ZSxzcmMsZHN0KSA9PiBQaWVjZUhlbHBlci5pc1BpZWNlT2ZDdXJyZW50UGxheWVyKGdhbWVTdGF0ZSxzcmMpICYmICFQaWVjZUhlbHBlci5pc1BpZWNlT2ZDdXJyZW50UGxheWVyKGdhbWVTdGF0ZSxkc3QpICYmIFBpZWNlSGVscGVyLmlzQm94T25Cb2FyZChnYW1lU3RhdGUsZHN0KSAmJiBzcmMgIT0gZHN0O1xuLyoqXG4gKiBcbiAqIEBwYXJhbSB7R2FtZVN0YXRlfSBnYW1lU3RhdGUgXG4gKiBAcGFyYW0ge0JveH0gc3JjIFxuICogQHBhcmFtIHtCb3h9IGRzdCBcbiAqIEByZXR1cm5zIHtib29sZWFufVxuICovXG5QaWVjZUhlbHBlci5jYW5Hb0Fsb25nUm93VG9EZXN0ID0gKGdhbWVTdGF0ZSxzcmMsZHN0KSA9PiB7XG4gIGlmIChzcmMuciA9PSBkc3Qucikge1xuICAgIGNvbnN0IGRpciA9IGRzdC5jID4gc3JjLmMgPyAxIDogLTE7XG4gICAgbGV0IGxlbiA9IE1hdGguYWJzKGRzdC5jLXNyYy5jKTtcbiAgICBmb3IgKGxldCBpID0gc3JjLmMrZGlyOyBsZW4tLSA+IDE7IGkgKz0gZGlyKSBpZiAoIVBpZWNlSGVscGVyLmlzRW1wdHkoZ2FtZVN0YXRlLHtyOnNyYy5yLGM6aX0pKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuLyoqXG4gKiBcbiAqIEBwYXJhbSB7R2FtZVN0YXRlfSBnYW1lU3RhdGUgXG4gKiBAcGFyYW0ge0JveH0gc3JjIFxuICogQHBhcmFtIHtCb3h9IGRzdCBcbiAqIEByZXR1cm5zIHtib29sZWFufVxuICovXG5QaWVjZUhlbHBlci5jYW5Hb0Fsb25nQ29sVG9EZXN0ID0gKGdhbWVTdGF0ZSxzcmMsZHN0KSA9PiB7XG4gIGlmIChzcmMuYyA9PSBkc3QuYykge1xuICAgIGNvbnN0IGRpciA9IGRzdC5yID4gc3JjLnIgPyAxIDogLTE7XG4gICAgbGV0IGxlbiA9IE1hdGguYWJzKGRzdC5yLXNyYy5yKTtcbiAgICBmb3IgKGxldCBpID0gc3JjLnIrZGlyOyBsZW4tLSA+IDE7IGkgKz0gZGlyKSBpZiAoIVBpZWNlSGVscGVyLmlzRW1wdHkoZ2FtZVN0YXRlLHtyOmksYzpzcmMuY30pKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuLyoqXG4gKiBcbiAqIEBwYXJhbSB7R2FtZVN0YXRlfSBnYW1lU3RhdGUgXG4gKiBAcGFyYW0ge0JveH0gc3JjXG4gKiBAcGFyYW0ge0JveH0gZHN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuUGllY2VIZWxwZXIuY2FuR29BbG9uZ0xpbmVUb0Rlc3QgPSAoZ2FtZVN0YXRlLHNyYyxkc3QpID0+IFBpZWNlSGVscGVyLmNhbkdvQWxvbmdDb2xUb0Rlc3QoZ2FtZVN0YXRlLHNyYyxkc3QpIHx8IFBpZWNlSGVscGVyLmNhbkdvQWxvbmdSb3dUb0Rlc3QoZ2FtZVN0YXRlLHNyYyxkc3QpO1xuLyoqXG4gKiBcbiAqIEBwYXJhbSB7R2FtZVN0YXRlfSBnYW1lU3RhdGUgXG4gKiBAcGFyYW0ge0JveH0gc3JjIFxuICogQHBhcmFtIHtCb3h9IGRzdCBcbiAqIEByZXR1cm5zIHtib29sZWFufVxuICovXG5QaWVjZUhlbHBlci5jYW5Hb0Fsb25nRGlhZ29uYWxUb0Rlc3QgPSAoZ2FtZVN0YXRlLHNyYyxkc3QpID0+IHsgLy8gbmF0dXJhbCBmdW5jdGlvbmFsaXR5IGZvciBiaXNob3BcbiAgaWYgKE1hdGguYWJzKChkc3QuciAtIHNyYy5yKS8oZHN0LmMgLSBzcmMuYykpICE9IDEpIHJldHVybiBmYWxzZTtcbiAgbGV0IGxlbiA9IE1hdGguYWJzKGRzdC5jIC0gc3JjLmMpO1xuICBjb25zdCByb3dEaXIgPSBkc3QuciAtIHNyYy5yID4gMCA/IDEgOiAtMTtcbiAgY29uc3QgY29sRGlyID0gZHN0LmMgLSBzcmMuYyA+IDAgPyAxIDogLTE7XG4gIGxldCBpID0gc3JjLnIrcm93RGlyO1xuICBsZXQgaiA9IHNyYy5jK2NvbERpcjtcbiAgZm9yICg7IGxlbi0tID4gMTsgaSArPSByb3dEaXIsIGogKz0gY29sRGlyKSBpZiAoIVBpZWNlSGVscGVyLmlzRW1wdHkoZ2FtZVN0YXRlLHtyOmksYzpqfSkpIHJldHVybiBmYWxzZTtcbiAgcmV0dXJuIHRydWU7XG59XG5leHBvcnQge1BpZWNlSGVscGVyfTsiLCJpbXBvcnQge1BpZWNlLCBCb3h9IGZyb20gJy4vcGllY2UnO1xuaW1wb3J0IHtQaWVjZUhlbHBlcn0gZnJvbSAnLi9waWVjZWhlbHBlcic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJvb2sgaW1wbGVtZW50cyBQaWVjZSB7XG4gIHB1YmxpYyBuYW1lOiBzdHJpbmc7XG4gIHB1YmxpYyBnZXRQb3NzaWJsZU1vdmVzO1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLm5hbWUgPSAncm9vayc7XG4gICAgdGhpcy5nZXRQb3NzaWJsZU1vdmVzID0gKGdhbWVTdGF0ZSxzcmM6IEJveCxudW1Nb3Zlcz86IG51bWJlcikgPT4ge1xuICAgICAgY29uc3QgaXNQb3NzaWJsZVRvTW92ZVRvID0gZHN0ID0+XG4gICAgICAgIFBpZWNlSGVscGVyLmlzVmFsaWRTb3VyY2VBbmREZXN0KGdhbWVTdGF0ZSxzcmMsZHN0KSA/XG4gICAgICAgIFBpZWNlSGVscGVyLmNhbkdvQWxvbmdSb3dUb0Rlc3QoZ2FtZVN0YXRlLHNyYyxkc3QpIHx8IFBpZWNlSGVscGVyLmNhbkdvQWxvbmdDb2xUb0Rlc3QoZ2FtZVN0YXRlLHNyYyxkc3QpIDogZmFsc2U7XG4gICAgICByZXR1cm4gaXNQb3NzaWJsZVRvTW92ZVRvO1xuICAgIH07XG4gIH1cbn0iLCJpbXBvcnQge1BpZWNlLCBCb3h9IGZyb20gJy4vcGllY2UnO1xuaW1wb3J0IHtQaWVjZUhlbHBlcn0gZnJvbSAnLi9waWVjZWhlbHBlcic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEtpbmcgaW1wbGVtZW50cyBQaWVjZSB7XG4gIHB1YmxpYyBuYW1lOiBzdHJpbmc7XG4gIHB1YmxpYyBnZXRQb3NzaWJsZU1vdmVzO1xuICBwdWJsaWMgZ2V0UG9zc2libGVTcGVjaWFsTW92ZXM6IEZ1bmN0aW9uO1xuICBjb25zdHJ1Y3RvcihzcGVjaWFsTW92ZXM/KSB7XG4gICAgdGhpcy5uYW1lID0gJ2tpbmcnO1xuICAgIHRoaXMuZ2V0UG9zc2libGVTcGVjaWFsTW92ZXMgPSBzcGVjaWFsTW92ZXM7XG4gICAgdGhpcy5nZXRQb3NzaWJsZU1vdmVzID0gKGdhbWVTdGF0ZSxzcmM6IEJveCxudW1Nb3Zlcz86IG51bWJlcikgPT4ge1xuICAgICAgY29uc3QgaXNQb3NzaWJsZVRvTW92ZVRvID0gZHN0ID0+IHtcbiAgICAgICAgaWYgKFBpZWNlSGVscGVyLmlzVmFsaWRTb3VyY2VBbmREZXN0KGdhbWVTdGF0ZSxzcmMsZHN0KSAmJiAoTWF0aC5hYnMoZHN0LmMtc3JjLmMpPT0xIHx8IE1hdGguYWJzKGRzdC5yLXNyYy5yKT09MSkpXG4gICAgICAgICAgcmV0dXJuIFBpZWNlSGVscGVyLmNhbkdvQWxvbmdSb3dUb0Rlc3QoZ2FtZVN0YXRlLHNyYyxkc3QpIHx8IFBpZWNlSGVscGVyLmNhbkdvQWxvbmdDb2xUb0Rlc3QoZ2FtZVN0YXRlLHNyYyxkc3QpIHx8IFBpZWNlSGVscGVyLmNhbkdvQWxvbmdEaWFnb25hbFRvRGVzdChnYW1lU3RhdGUsc3JjLGRzdClcbiAgICAgICAgZWxzZSByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gaXNQb3NzaWJsZVRvTW92ZVRvO1xuICAgIH07XG4gIH1cbn0iLCJpbXBvcnQgJ3BhdGgnO1xuaW1wb3J0IHtHYW1lU3RhdGUsIGluaXRpYWxHYW1lU3RhdGV9IGZyb20gJy4vZ2FtZXN0YXRlJztcbmltcG9ydCB7Qm94LCBQaWVjZSwgRW1wdHlQaWVjZX0gZnJvbSAnLi9waWVjZSc7XG5pbXBvcnQge1BpZWNlSGVscGVyfSBmcm9tICcuL3BpZWNlaGVscGVyJztcbmltcG9ydCBQYXduIGZyb20gJy4vcGF3bic7XG5pbXBvcnQgUm9vayBmcm9tICcuL3Jvb2snO1xuaW1wb3J0IEtuaWdodCBmcm9tICcuL2tuaWdodCc7XG5pbXBvcnQgQmlzaG9wIGZyb20gJy4vYmlzaG9wJztcbmltcG9ydCBRdWVlbiBmcm9tICcuL3F1ZWVuJztcbmltcG9ydCBLaW5nIGZyb20gJy4va2luZyc7XG5jb25zdCBQaWVjZUdhbWVMb2dpYyA9IHsgLy8gZm9yIFR5cGVTY3JpcHRcbiAgZ2V0VHlwZTogKHM6IHN0cmluZykgPT4gbmV3IEVtcHR5UGllY2UsXG4gIGdldE51bU1vdmVzOiAoczogc3RyaW5nKSA9PiAtMSxcbiAgZ2V0UG9zc2libGVNb3ZlczogKGdhbWVTdGF0ZSwgc3JjOiBCb3gpID0+IFt7cjogLTEsIGM6IC0xfV0sXG4gIGlzUG9zc2libGVUb01vdmVUbzogKGdhbWVTdGF0ZSwgc3JjOiBCb3gpID0+IChCb3gpID0+IGZhbHNlLFxuICBpc0luQ2hlY2s6IChnYW1lU3RhdGUsIHNyYzogQm94KSA9PiBmYWxzZSxcbiAgaXNJbkNoZWNrbWF0ZTogKGdhbWVTdGF0ZSwgc3JjOiBCb3gpID0+IGZhbHNlLFxuICBraW5nQ2FuQ2FzdGxlV2l0aEdpdmVuUm9vazogKGdhbWVTdGF0ZSwgc3JjOiBCb3gsIGRzdDogQm94KSA9PiBmYWxzZSxcbiAgY2FzdGxlS2luZ1dpdGhHaXZlblJvb2s6IChnYW1lU3RhdGUsIHNyYzogQm94LCBkc3Q6IEJveCkgPT4gZmFsc2UsXG4gIGdldFNldE9mQWxsUG9zc2libGVNb3Zlc0ZvclBsYXllcjogKGdhbWVTdGF0ZSwgcGxheWVyOiBudW1iZXIpID0+IG5ldyBTZXQoKSxcbiAgcmFuZG9tRGVmZW5zaXZlTW92ZTogKGdhbWVTdGF0ZSkgPT4gbmV3IFNldCgpLFxuICBpc0FDYXB0dXJlOiAoZ2FtZVN0YXRlLCBzcmM6IEJveCwgZHN0OiBCb3gpID0+IGZhbHNlLFxufTtcbi8qKlxuICogXG4gKiBAcGFyYW0ge3N0cmluZ30gcyBcbiAqIEByZXR1cm5zIHtQaWVjZX1cbiAqL1xuUGllY2VHYW1lTG9naWMuZ2V0VHlwZSA9IChzOiBzdHJpbmcpID0+IHtcbiAgaWYgKHMudHJpbSgpID09PSAnJykgcmV0dXJuIG5ldyBFbXB0eVBpZWNlO1xuICBsZXQgY29kZU1hdGNoID0gcy5tYXRjaCgvKFthLXpBLXpdKShcXGQqKS8pO1xuICBsZXQgbnVtTW92ZXMgPSBjb2RlTWF0Y2ggJiYgY29kZU1hdGNoLmxlbmd0aCA+IDIgPyBjb2RlTWF0Y2hbMl0gOiBudWxsO1xuICBsZXQgYWxwaGFjb2RlID0gY29kZU1hdGNoLmxlbmd0aCA+IDEgPyBjb2RlTWF0Y2hbMV0gOiBudWxsO1xuICBpZiAoIW51bU1vdmVzIHx8ICFhbHBoYWNvZGUpIHJldHVybiBuZXcgRW1wdHlQaWVjZTtcbiAgc3dpdGNoIChhbHBoYWNvZGUudG9Mb3dlckNhc2UoKS50cmltKCkpIHtcbiAgICBjYXNlICdwJzpcbiAgICAgIHJldHVybiBuZXcgUGF3bjtcbiAgICBjYXNlICdyJzpcbiAgICAgIHJldHVybiBuZXcgUm9vaztcbiAgICBjYXNlICdoJzpcbiAgICAgIHJldHVybiBuZXcgS25pZ2h0O1xuICAgIGNhc2UgJ2InOlxuICAgICAgcmV0dXJuIG5ldyBCaXNob3A7XG4gICAgY2FzZSAncSc6XG4gICAgICByZXR1cm4gbmV3IFF1ZWVuO1xuICAgIGNhc2UgJ2snOlxuICAgICAgY29uc3Qga2luZyA9IG5ldyBLaW5nKFBpZWNlR2FtZUxvZ2ljLmtpbmdDYW5DYXN0bGVXaXRoR2l2ZW5Sb29rKTtcbiAgICAgIHJldHVybiBraW5nO1xuICAgIGNhc2UgJyc6XG4gICAgICByZXR1cm4gbmV3IEVtcHR5UGllY2U7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBuZXcgRW1wdHlQaWVjZTtcbiAgICB9XG59XG4vKipcbiAqIFxuICogQHBhcmFtIHtzdHJpbmd9IHMgXG4gKiBAcmV0dXJucyB7KG51bWJlcil9XG4gKiBAdG9kbyBoYW5kbGUgZXJyb3IgY2FzZSB3aGVyZSBjb2RlIGRvZXNuJ3QgbWF0Y2ggaW4gbW9yZSBtZWFuaW5nZnVsIHdheSwgYmV0dGVyIGZvciB0ZXN0aW5nLlxuICovXG5QaWVjZUdhbWVMb2dpYy5nZXROdW1Nb3ZlcyA9IHMgPT4ge1xuICBsZXQgY29kZU1hdGNoID0gcy5tYXRjaCgvKFthLXpBLXpdKShcXGQqKS8pO1xuICBsZXQgbnVtTW92ZXMgPSBjb2RlTWF0Y2ggJiYgY29kZU1hdGNoLmxlbmd0aCA+IDIgJiYgIU51bWJlci5pc05hTihOdW1iZXIoY29kZU1hdGNoWzJdKSkgPyBOdW1iZXIoY29kZU1hdGNoWzJdKSA6IC0xOyAvLyAtMSBzaG91bGQgbmV2ZXIgaGFwcGVuLCB0aG91Z2guXG4gIHJldHVybiBudW1Nb3Zlcztcbn1cbi8qKlxuICogXG4gKiBAcGFyYW0ge0dhbWVTdGF0ZX0gZ2FtZVN0YXRlIFxuICogQHBhcmFtIHtCb3h9IHNyYyBcbiAqIEByZXR1cm5zIHtBcnJheTxCb3g+fVxuICovXG5QaWVjZUdhbWVMb2dpYy5nZXRQb3NzaWJsZU1vdmVzID0gKGdhbWVTdGF0ZSxzcmMpID0+IHtcbiAgY29uc3QgY29uc3RydWN0TW92ZXNNYXRyaXggPSAoZ2FtZVN0YXRlLHNyYyxQaWVjZVR5cGUsbnVtTW92ZXMpID0+IHtcbiAgICBsZXQgdmFsaWRNb3ZlcyA9IFtdO1xuICAgIGNvbnN0IGlzUG9zc2libGVUb01vdmVUbyA9IHR5cGVvZiBQaWVjZVR5cGUuZ2V0UG9zc2libGVNb3ZlcyA9PSAnZnVuY3Rpb24nID8gUGllY2VUeXBlLmdldFBvc3NpYmxlTW92ZXMoZ2FtZVN0YXRlLHNyYyxudW1Nb3ZlcykgOiAoZHN0KT0+ZmFsc2U7XG4gICAgaWYgKCFpc1Bvc3NpYmxlVG9Nb3ZlVG8pIHJldHVybiB2YWxpZE1vdmVzO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZ2FtZVN0YXRlLmJvYXJkLmxlbmd0aDsgaSsrKVxuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBnYW1lU3RhdGUuYm9hcmRbMF0ubGVuZ3RoOyBqKyspXG4gICAgICAgICBpZiAoaXNQb3NzaWJsZVRvTW92ZVRvKHtyOmksYzpqfSkpIHZhbGlkTW92ZXMucHVzaCh7cjppLGM6an0pO1xuICAgIHJldHVybiB2YWxpZE1vdmVzO1xuICB9XG4gIGNvbnN0IHMgPSBnYW1lU3RhdGUuYm9hcmRbc3JjLnJdW3NyYy5jXTtcbiAgY29uc3QgbnVtTW92ZXMgPSBQaWVjZUdhbWVMb2dpYy5nZXROdW1Nb3ZlcyhzKTtcbiAgY29uc3QgUGllY2VUeXBlID0gUGllY2VHYW1lTG9naWMuZ2V0VHlwZShzKTtcbiAgaWYgKFBpZWNlVHlwZSAmJiAhaXNOYU4obnVtTW92ZXMpKSByZXR1cm4gY29uc3RydWN0TW92ZXNNYXRyaXgoZ2FtZVN0YXRlLHNyYyxQaWVjZVR5cGUsbnVtTW92ZXMpXG4gIHJldHVybiBbXTtcbn1cbi8qKlxuICogXG4gKiBAcGFyYW0ge0dhbWVTdGF0ZX0gZ2FtZVN0YXRlIFxuICogQHBhcmFtIHtCb3h9IHNyY1xuICogQHJldHVybnMge0Z1bmN0aW9uOiBib29sZWFufVxuICovXG5QaWVjZUdhbWVMb2dpYy5pc1Bvc3NpYmxlVG9Nb3ZlVG8gPSAoZ2FtZVN0YXRlLCBzcmMpID0+IHtcbiAgY29uc3QgcyA9IGdhbWVTdGF0ZS5ib2FyZFtzcmMucl1bc3JjLmNdO1xuICBjb25zdCBudW1Nb3ZlcyA9IFBpZWNlR2FtZUxvZ2ljLmdldE51bU1vdmVzKHMpO1xuICBjb25zdCBQaWVjZVR5cGUgPSBQaWVjZUdhbWVMb2dpYy5nZXRUeXBlKHMpO1xuICBjb25zdCBpc1Bvc3NpYmxlVG9Nb3ZlVG8gPSBQaWVjZVR5cGUuZ2V0UG9zc2libGVNb3ZlcyhnYW1lU3RhdGUsIHNyYyk7XG4gIHJldHVybiBpc1Bvc3NpYmxlVG9Nb3ZlVG87XG59XG4vKipcbiAqIFxuICogQHBhcmFtIHtHYW1lU3RhdGV9IGdhbWVTdGF0ZSBcbiAqIEBwYXJhbSB7Qm94fSBzcmMgXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuUGllY2VHYW1lTG9naWMuaXNJbkNoZWNrID0gKGdhbWVTdGF0ZSxzcmMpID0+IHtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBnYW1lU3RhdGUuYm9hcmQubGVuZ3RoOyBpKyspXG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCBnYW1lU3RhdGUuYm9hcmRbMF0ubGVuZ3RoOyBqKyspXG4gICAgICBpZiAoc3JjLnIgIT0gaSAmJiBzcmMuYyAhPSBqKSB7XG4gICAgICAgIGNvbnN0IHBvc3NpYmxlQXR0YWNrcyA9IFBpZWNlR2FtZUxvZ2ljLmdldFBvc3NpYmxlTW92ZXMoZ2FtZVN0YXRlLHtyOmksYzpqfSk7XG4gICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgcG9zc2libGVBdHRhY2tzLmxlbmd0aDsgaysrKSB7XG4gICAgICAgICAgaWYgKHBvc3NpYmxlQXR0YWNrc1trXS5yPT1zcmMuciAmJiBwb3NzaWJsZUF0dGFja3Nba10uYz09c3JjLmMpIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gIHJldHVybiBmYWxzZTtcbn1cbi8qKlxuICogXG4gKiBAcGFyYW0ge0dhbWVTdGF0ZX0gZ2FtZVN0YXRlIFxuICogQHBhcmFtIHtCb3h9IHNyYyBcbiAqIEByZXR1cm5zIHtib29sZWFufVxuICovXG5QaWVjZUdhbWVMb2dpYy5pc0luQ2hlY2ttYXRlID0gKGdhbWVTdGF0ZSxzcmMpID0+IHtcbiAgY29uc3QgcG9zc2libGVNb3ZlcyA9IFBpZWNlR2FtZUxvZ2ljLmdldFBvc3NpYmxlTW92ZXMoZ2FtZVN0YXRlLHNyYyk7XG4gIGxldCBwaWVjZUlzSW5DaGVjayA9IFBpZWNlR2FtZUxvZ2ljLmlzSW5DaGVjayhnYW1lU3RhdGUsc3JjKTtcbiAgaWYgKHBpZWNlSXNJbkNoZWNrKSB7XG4gICAgbGV0IGlzSW5DaGVja21hdGUgPSB0cnVlOyAvLyB1c2UgcmVkdWNlXG4gICAgY29uc29sZS5sb2coJ2lzSW5DaGVja21hdGUgcG9zc2libGVNb3ZlcycsIHBvc3NpYmxlTW92ZXMpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcG9zc2libGVNb3Zlcy5sZW5ndGg7IGkrKylcbiAgICAgIGlzSW5DaGVja21hdGUgPSBpc0luQ2hlY2ttYXRlICYmIFBpZWNlR2FtZUxvZ2ljLmlzSW5DaGVjayhnYW1lU3RhdGUscG9zc2libGVNb3Zlc1tpXSk7XG4gICAgaWYgKGlzSW5DaGVja21hdGUpIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cbi8qKlxuICogXG4gKiBAcGFyYW0ge0dhbWVTdGF0ZX0gZ2FtZVN0YXRlIFxuICogQHBhcmFtIHtCb3h9IHNyYyBcbiAqIEBwYXJhbSB7Qm94fSBkc3QgXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuUGllY2VHYW1lTG9naWMua2luZ0NhbkNhc3RsZVdpdGhHaXZlblJvb2sgPSAoZ2FtZVN0YXRlLHNyYyxkc3QpID0+IHtcbiAgY29uc3QgcyA9IGdhbWVTdGF0ZS5ib2FyZFtzcmMucl1bc3JjLmNdO1xuICBjb25zdCB0ID0gZ2FtZVN0YXRlLmJvYXJkW2RzdC5yXVtkc3QuY107XG4gIGlmIChQaWVjZUdhbWVMb2dpYy5nZXRUeXBlKHMpLm5hbWUgIT0gKG5ldyBLaW5nKC8qIEB0b2RvIHBhc3MgaW4gZnVuY3Rpb25hbGl0eT8gKi8pKS5uYW1lIHx8IFBpZWNlR2FtZUxvZ2ljLmdldFR5cGUodCkubmFtZSAhPSAobmV3IFJvb2spLm5hbWUgfHwgUGllY2VHYW1lTG9naWMuZ2V0TnVtTW92ZXMocykgIT0gMCB8fCBQaWVjZUdhbWVMb2dpYy5nZXROdW1Nb3Zlcyh0KSAhPSAwKSByZXR1cm4gZmFsc2U7XG4gIGlmIChQaWVjZUhlbHBlci5pc1BpZWNlT2ZDdXJyZW50UGxheWVyKGdhbWVTdGF0ZSxzcmMpICYmIFBpZWNlSGVscGVyLmlzUGllY2VPZkN1cnJlbnRQbGF5ZXIoZ2FtZVN0YXRlLGRzdCkgJiYgUGllY2VIZWxwZXIuaXNCb3hPbkJvYXJkKGdhbWVTdGF0ZSxkc3QpICYmIHNyYyAhPSBkc3QpIHtcbiAgICBsZXQgZGlyID0gZHN0LmMgLSBzcmMuYyA+IDAgPyAxIDogLTE7XG4gICAgbGV0IGxlbiA9IE1hdGguYWJzKGRzdC5jLXNyYy5jKTtcbiAgICBmb3IgKGxldCBpID0gc3JjLmMrZGlyOyBsZW4tLSA+IDE7IGkgKz0gZGlyKSBpZiAoIVBpZWNlSGVscGVyLmlzRW1wdHkoZ2FtZVN0YXRlLHtyOnNyYy5yLGM6aX0pKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn1cbi8qKlxuICogQXNzdW1lcyBQaWVjZUdhbWVMb2dpYy5raW5nQ2FuQ2FzdGxlV2l0aEdpdmVuUm9vayB3YXMgY2FsbGVkIGJlZm9yZWhhbmQgdG8gdmVyaWZ5IHRoaXMgaXMgYSB2YWxpZCBtb3ZlLlxuICogQHBhcmFtIHtHYW1lU3RhdGV9IGdhbWVTdGF0ZSBcbiAqIEBwYXJhbSB7Qm94fSBzcmMgXG4gKiBAcGFyYW0ge0JveH0gZHN0XG4gKiBAcmV0dXJucyB7R2FtZVN0YXRlfSBVcGRhdGVkIEdhbWVTdGF0ZSB3aXRoIEtpbmcncyBjYXN0bGUuXG4gKi9cblBpZWNlR2FtZUxvZ2ljLmNhc3RsZUtpbmdXaXRoR2l2ZW5Sb29rID0gKGdhbWVTdGF0ZSxzcmMsZHN0KSA9PiB7XG4gIGxldCBvdXREaXIgPSBkc3QuYyAtIHNyYy5jID4gMCA/IDEgOiAtMTtcbiAgbGV0IHNoaWZ0ID0gMDtcbiAgaWYgKE1hdGguYWJzKGRzdC5jIC0gc3JjLmMpID09IDMpIHNoaWZ0ID0gMjtcbiAgZWxzZSBpZiAoTWF0aC5hYnMoZHN0LmMgLSBzcmMuYykgPT0gNCkgc2hpZnQgPSAzO1xuICBnYW1lU3RhdGVbc3JjLnJdW3NyYy5jK291dERpcipzaGlmdF0gPSBPYmplY3QuYXNzaWduKHt9LGdhbWVTdGF0ZVtzcmMucl1bc3JjLmNdKTtcbiAgZ2FtZVN0YXRlW3NyYy5yXVtzcmMuY10gPSAnICc7XG4gIGdhbWVTdGF0ZVtkc3Qucl1bZHN0LmMtb3V0RGlyKnNoaWZ0XSA9IE9iamVjdC5hc3NpZ24oe30sZ2FtZVN0YXRlW2RzdC5yXVtkc3QuY10pO1xuICBnYW1lU3RhdGVbZHN0LnJdW2RzdC5jXSA9ICcgJztcbiAgcmV0dXJuIGdhbWVTdGF0ZTtcbn1cblxuLyoqXG4gKiBcbiAqIEBwYXJhbSB7R2FtZVN0YXRlfSBnYW1lU3RhdGUgXG4gKiBAcGFyYW0ge251bWJlcn0gcGxheWVyIFxuICogQHJldHVybnMge1NldH1cbiAqL1xuUGllY2VHYW1lTG9naWMuZ2V0U2V0T2ZBbGxQb3NzaWJsZU1vdmVzRm9yUGxheWVyID0gKGdhbWVTdGF0ZSxwbGF5ZXIpID0+IHtcbiAgbGV0IHMgPSBuZXcgU2V0KCk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgZ2FtZVN0YXRlLmJvYXJkLmxlbmd0aDsgaSsrKVxuICAgIGZvciAobGV0IGogPSAwOyBqIDwgZ2FtZVN0YXRlLmJvYXJkWzBdLmxlbmd0aDsgaisrKVxuICAgICAgaWYgKCFQaWVjZUhlbHBlci5pc1BpZWNlT2ZHaXZlblBsYXllcihnYW1lU3RhdGUscGxheWVyLHtyOmksYzpqfSkgJiYgIVBpZWNlSGVscGVyLmlzRW1wdHkoZ2FtZVN0YXRlLHtyOmksYzpqfSkpIHtcbiAgICAgICAgY29uc3QgcG9zc2libGVQbGF5ZXJNb3ZlcyA9IFBpZWNlR2FtZUxvZ2ljLmdldFBvc3NpYmxlTW92ZXMoZ2FtZVN0YXRlLHtyOmksYzpqfSk7XG4gICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgcG9zc2libGVQbGF5ZXJNb3Zlcy5sZW5ndGg7IGsrKylcbiAgICAgICAgICBzLmFkZChwb3NzaWJsZVBsYXllck1vdmVzW2tdKTtcbiAgICAgIH1cbiAgcmV0dXJuIHM7XG59XG4vKipcbiAqIFxuICogQHBhcmFtIHtHYW1lU3RhdGV9IGdhbWVTdGF0ZSBcbiAqIEByZXR1cm5zIHtTZXR9XG4gKiBAdG9kbyBub3QgdGhpcyBzaW1wbGUsIHNob3VsZCBwcmlvcml0aXplIGtpbGwtbW92ZXMgYW5kIG1vdmVzIHRoYXQgZ2V0IHRoZSBwbGF5ZXIgb3V0IG9mIGhhcm0gKGluIG5leHQgbW92ZSBvbmx5LCBmb3Igbm93KVxuICovXG5QaWVjZUdhbWVMb2dpYy5yYW5kb21EZWZlbnNpdmVNb3ZlID0gKGdhbWVTdGF0ZSkgPT4ge1xuICBjb25zdCBjdXJyZW50UGxheWVyID0gZ2FtZVN0YXRlLnBsYXllcjtcbiAgY29uc3Qgb3Bwb25lbnQgPSBjdXJyZW50UGxheWVyID09IDAgPyAxIDogMDtcbiAgY29uc3Qgc2V0T2ZPcHBvbmVudE1vdmVzID0gUGllY2VHYW1lTG9naWMuZ2V0U2V0T2ZBbGxQb3NzaWJsZU1vdmVzRm9yUGxheWVyKGdhbWVTdGF0ZSxvcHBvbmVudCk7XG4gIGxldCByYW5kSWR4ID0gMDtcbiAgcmV0dXJuIHNldE9mT3Bwb25lbnRNb3Zlcztcbn1cbi8qKlxuICogXG4gKiBAcGFyYW0ge0dhbWVTdGF0ZX0gZ2FtZVN0YXRlIFxuICogQHBhcmFtIHtCb3h9IHNyYyBcbiAqIEBwYXJhbSB7Qm94fSBkc3QgXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuUGllY2VHYW1lTG9naWMuaXNBQ2FwdHVyZSA9IChnYW1lU3RhdGUsc3JjLGRzdCkgPT4ge1xuICBjb25zdCBzID0gZ2FtZVN0YXRlLmJvYXJkW3NyYy5yXVtzcmMuY107XG4gIGNvbnN0IG51bU1vdmVzID0gUGllY2VHYW1lTG9naWMuZ2V0TnVtTW92ZXMocyk7XG4gIGNvbnN0IFBpZWNlVHlwZSA9IFBpZWNlR2FtZUxvZ2ljLmdldFR5cGUocyk7XG4gIGlmICh0eXBlb2YgUGllY2VUeXBlLmdldFBvc3NpYmxlTW92ZXMgPT0gJ2Z1bmN0aW9uJyAmJiAhaXNOYU4obnVtTW92ZXMpKSB7XG4gICAgY29uc3QgaXNQb3NzaWJsZVRvTW92ZVRvID0gUGllY2VUeXBlLmdldFBvc3NpYmxlTW92ZXMoZ2FtZVN0YXRlLHNyYyxudW1Nb3Zlcyk7XG4gICAgaWYgKGlzUG9zc2libGVUb01vdmVUbyhkc3QpICYmICFQaWVjZUhlbHBlci5pc1BpZWNlT2ZDdXJyZW50UGxheWVyKGdhbWVTdGF0ZSxkc3QpICYmICFQaWVjZUhlbHBlci5pc0VtcHR5KGdhbWVTdGF0ZSxkc3QpKSByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5leHBvcnQge1BpZWNlR2FtZUxvZ2ljfTtcbiIsImltcG9ydCB7UGllY2UsIEJveH0gZnJvbSAnLi9waWVjZSc7XG5pbXBvcnQge1BpZWNlSGVscGVyfSBmcm9tICcuL3BpZWNlaGVscGVyJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF3biBpbXBsZW1lbnRzIFBpZWNlIHtcbiAgcHVibGljIG5hbWU6IHN0cmluZztcbiAgcHVibGljIGdldFBvc3NpYmxlTW92ZXM7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMubmFtZSA9ICdwYXduJztcbiAgICB0aGlzLmdldFBvc3NpYmxlTW92ZXMgPSAoZ2FtZVN0YXRlLHNyYzogQm94LG51bU1vdmVzPzogbnVtYmVyKSA9PiB7XG4gICAgICBpZiAobnVtTW92ZXMgPT09IHVuZGVmaW5lZCkgbnVtTW92ZXMgPSBQaWVjZUhlbHBlci5nZXROdW1Nb3ZlcyhnYW1lU3RhdGUsc3JjKTtcbiAgICAgIGNvbnN0IGZvcndhcmREaXJlY3Rpb25PZkN1cnJlbnRQbGF5ZXIgPSAoKSA9PiBnYW1lU3RhdGUucGxheWVyID09IGdhbWVTdGF0ZS5wbGF5ZXJXaGl0ZSA/IC0xIDogMTtcbiAgICAgIC8qKlxuICAgICAgICogQHBhcmFtIHshQm94fSBkc3QgXG4gICAgICAgKiBAeWllbGRzIHtib29sZWFufSBSZXR1cm5zIGEgKGN1cnJpZWQpIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIGJvb2xlYW4gKHdoZW4gYXBwbGllZCkuXG4gICAgICAgKi9cbiAgICAgIGNvbnN0IGlzUG9zc2libGVUb01vdmVUbyA9IGRzdCA9PiB7XG4gICAgICAgIGlmICghUGllY2VIZWxwZXIuaXNWYWxpZFNvdXJjZUFuZERlc3QoZ2FtZVN0YXRlLHNyYyxkc3QpKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIGNvbnN0IGRpciA9IGZvcndhcmREaXJlY3Rpb25PZkN1cnJlbnRQbGF5ZXIoKTtcbiAgICAgICAgY29uc3QgcGF3bkNhbk1vdmUxRm9yd2FyZCA9IFBpZWNlSGVscGVyLmlzRW1wdHkoZ2FtZVN0YXRlLGRzdCkgJiYgc3JjLmMgPT0gZHN0LmMgJiYgZHN0LnIgPT0gc3JjLnIgKyBkaXI7XG4gICAgICAgIGNvbnN0IGluQmV0d2VlblNxdWFyZSA9IHtcbiAgICAgICAgICByOiBzcmMuciArIGRpcixcbiAgICAgICAgICBjOiBkc3QuY1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBwYXduQ2FuTW92ZTJGb3J3YXJkID0gbnVtTW92ZXMgPT0gMCAmJiBQaWVjZUhlbHBlci5pc0VtcHR5KGdhbWVTdGF0ZSxkc3QpICYmIFBpZWNlSGVscGVyLmlzRW1wdHkoZ2FtZVN0YXRlLGluQmV0d2VlblNxdWFyZSkgJiYgc3JjLmMgPT0gZHN0LmMgJiYgZHN0LnIgPT0gc3JjLnIgKzIqZGlyO1xuICAgICAgICBjb25zdCBwYXduQ2FuQXR0YWNrID0gIVBpZWNlSGVscGVyLmlzUGllY2VPZkN1cnJlbnRQbGF5ZXIoZ2FtZVN0YXRlLGRzdCkgJiYgIVBpZWNlSGVscGVyLmlzRW1wdHkoZ2FtZVN0YXRlLGRzdCkgJiYgZHN0LnIgPT0gc3JjLnIgKyBkaXIgJiYgKGRzdC5jID09IHNyYy5jICsgMSB8fCBkc3QuYyA9PSBzcmMuYyAtIDEpO1xuICAgICAgICByZXR1cm4gcGF3bkNhbk1vdmUxRm9yd2FyZCB8fCBwYXduQ2FuTW92ZTJGb3J3YXJkIHx8IHBhd25DYW5BdHRhY2s7XG4gICAgICB9XG4gICAgICByZXR1cm4gaXNQb3NzaWJsZVRvTW92ZVRvO1xuICAgIH07XG4gIH1cbn0iLCJpbXBvcnQge1BpZWNlLCBCb3h9IGZyb20gJy4vcGllY2UnO1xuaW1wb3J0IHtQaWVjZUhlbHBlcn0gZnJvbSAnLi9waWVjZWhlbHBlcic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEtuaWdodCBpbXBsZW1lbnRzIFBpZWNlIHtcbiAgcHVibGljIG5hbWU6IHN0cmluZztcbiAgcHVibGljIGdldFBvc3NpYmxlTW92ZXM7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMubmFtZSA9ICdrbmlnaHQnO1xuICAgIHRoaXMuZ2V0UG9zc2libGVNb3ZlcyA9IChnYW1lU3RhdGUsc3JjLG51bU1vdmVzKSA9PiB7XG4gICAgICBjb25zdCBpc1Bvc3NpYmxlVG9Nb3ZlVG8gPSBkc3QgPT5cbiAgICAgICAgUGllY2VIZWxwZXIuaXNWYWxpZFNvdXJjZUFuZERlc3QoZ2FtZVN0YXRlLHNyYyxkc3QpICYmXG4gICAgICAgICgoTWF0aC5hYnMoc3JjLnItZHN0LnIpID09IDEgJiYgTWF0aC5hYnMoc3JjLmMtZHN0LmMpID09IDIpIHx8IChNYXRoLmFicyhzcmMuYy1kc3QuYykgPT0gMSAmJiBNYXRoLmFicyhzcmMuci1kc3QucikgPT0gMikpID9cbiAgICAgICAgdHJ1ZSA6IGZhbHNlO1xuICAgICAgcmV0dXJuIGlzUG9zc2libGVUb01vdmVUbztcbiAgICB9O1xuICB9XG59IiwiaW1wb3J0IHsgUGllY2UsIEJveCwgRW1wdHlQaWVjZSB9IGZyb20gJy4vcGllY2UnO1xuaW1wb3J0IHsgUGllY2VIZWxwZXIgfSBmcm9tICcuL3BpZWNlaGVscGVyJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmlzaG9wIGltcGxlbWVudHMgUGllY2Uge1xuICBwdWJsaWMgbmFtZTogc3RyaW5nO1xuICBwdWJsaWMgZ2V0UG9zc2libGVNb3ZlcztcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5uYW1lID0gJ2Jpc2hvcCc7XG4gICAgdGhpcy5nZXRQb3NzaWJsZU1vdmVzID0gZnVuY3Rpb24oZ2FtZVN0YXRlLCBzcmM6IEJveCwgbnVtTW92ZXM/OiBudW1iZXIpIHtcbiAgICAgIGNvbnN0IGlzUG9zc2libGVUb01vdmVUbyA9IChkc3Q6IEJveCkgPT4ge1xuICAgICAgICByZXR1cm4gUGllY2VIZWxwZXIuaXNWYWxpZFNvdXJjZUFuZERlc3QoZ2FtZVN0YXRlLHNyYyxkc3QpID9cbiAgICAgICAgUGllY2VIZWxwZXIuY2FuR29BbG9uZ0RpYWdvbmFsVG9EZXN0KGdhbWVTdGF0ZSxzcmMsZHN0KSA6IGZhbHNlO1xuICAgICAgfTtcbiAgICAgIHJldHVybiBpc1Bvc3NpYmxlVG9Nb3ZlVG87XG4gICAgfVxuICB9XG59IiwiaW1wb3J0IHtQaWVjZSwgQm94fSBmcm9tICcuL3BpZWNlJztcbmltcG9ydCB7UGllY2VIZWxwZXJ9IGZyb20gJy4vcGllY2VoZWxwZXInO1xuXG4vKipcbiAqIEBjbGFzcyBRdWVlblxuICogQHR5cGUge1BpZWNlfVxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBRdWVlbiBpbXBsZW1lbnRzIFBpZWNlIHtcbiAgcHVibGljIG5hbWU6IHN0cmluZztcbiAgcHVibGljIGdldFBvc3NpYmxlTW92ZXM7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMubmFtZSA9ICdxdWVlbic7XG4gICAgdGhpcy5nZXRQb3NzaWJsZU1vdmVzID0gKGdhbWVTdGF0ZSxzcmM6IEJveCxudW1Nb3Zlcz86IG51bWJlcikgPT4ge1xuICAgICAgY29uc3QgaXNQb3NzaWJsZVRvTW92ZVRvID0gZHN0ID0+XG4gICAgICAgIFBpZWNlSGVscGVyLmlzVmFsaWRTb3VyY2VBbmREZXN0KGdhbWVTdGF0ZSxzcmMsZHN0KSA/XG4gICAgICAgIFBpZWNlSGVscGVyLmNhbkdvQWxvbmdSb3dUb0Rlc3QoZ2FtZVN0YXRlLHNyYyxkc3QpIHx8IFBpZWNlSGVscGVyLmNhbkdvQWxvbmdDb2xUb0Rlc3QoZ2FtZVN0YXRlLHNyYyxkc3QpIHx8IFBpZWNlSGVscGVyLmNhbkdvQWxvbmdEaWFnb25hbFRvRGVzdChnYW1lU3RhdGUsc3JjLGRzdCkgOiBmYWxzZTtcbiAgICAgIHJldHVybiBpc1Bvc3NpYmxlVG9Nb3ZlVG87XG4gICAgfTtcbiAgfVxufSIsImltcG9ydCBDb250cm9sbGVyIGZyb20gJy4vY29udHJvbGxlci9jb250cm9sbGVyJztcbmltcG9ydCB7JG9ufSBmcm9tICcuL3ZpZXcvaGVscGVycyc7XG5pbXBvcnQgVGVtcGxhdGUgZnJvbSAnLi92aWV3L3RlbXBsYXRlJztcbmltcG9ydCBTdG9yZSBmcm9tICcuL3N0b3JlJztcbmltcG9ydCBWaWV3IGZyb20gJy4vdmlldy92aWV3JztcblxuY29uc3Qgc3RvcmU6IFN0b3JlID0gbmV3IFN0b3JlKCdjaGVzcy1nYW1lLXR5cGVzY3JpcHQtZXM2Jyk7XG5cbmNvbnN0IHRlbXBsYXRlOiBUZW1wbGF0ZSA9IG5ldyBUZW1wbGF0ZSgpO1xuXG5jb25zdCB2aWV3OiBWaWV3ID0gbmV3IFZpZXcodGVtcGxhdGUpO1xuXG5jb25zdCBjb250cm9sbGVyOiBDb250cm9sbGVyID0gbmV3IENvbnRyb2xsZXIoc3RvcmUsIHZpZXcpO1xuXG5jb25zdCBpbml0ID0gKCkgPT4gY29udHJvbGxlci5zaG93Qm9hcmRBbmRCaW5kQm94ZXMoKTtcbiRvbih3aW5kb3csICdsb2FkJywgaW5pdCk7IiwiaW1wb3J0IHtCb2FyZCwgTG9jYXRpb24sIEJveCwgZW1wdHlCb3gsIFBpZWNlLCBpbml0aWFsaXplUGllY2UsIFBsYXllciwgV0hJVEVfUExBWUVSLCBCTEFDS19QTEFZRVJ9IGZyb20gJy4vdHlwZXMnO1xuaW1wb3J0IHtQaWVjZUdhbWVMb2dpY30gZnJvbSAnLi9tb2RlbC9waWVjZWdhbWVsb2dpYyc7XG5cbi8qKlxuICogVGhpcyBpcyB0aGUgR2FtZVN0YXRlIGludGVyZmFjZSB0aGF0IEkgZGVjaWRlZCB0byB1c2UgaW4gbW9kZWxcbiAqIEB0b2RvIHJlZmFjdG9yIHRoaXMgaW50ZXJmYWNlIHNvIGl0IGRvZXNuJ3QgaGF2ZSBhIGJvYXJkIHRoYXQgaXMgQXJyYXk8c3RyaW5nPi4gZWcgdXNlIE9PUC5cbiAqL1xuaW50ZXJmYWNlIEdhbWVTdGF0ZSB7IC8vIEB0b2RvIG1vdmUgb3V0IHRvIHNvbWUgbW9kZWwtbGV2ZWwgaW50ZXJmYWNlIHdpdGggZnJvbnQtZW5kP1xuICAgIGJvYXJkOiBBcnJheTxzdHJpbmc+O1xuICAgIG51bVJvd3M6IG51bWJlcjtcbiAgICBudW1Db2xzOiBudW1iZXI7XG4gICAgcGxheWVyV2hpdGU6IFBsYXllcjtcbiAgICBwbGF5ZXJCbGFjazogUGxheWVyO1xuICAgIHBsYXllcjogUGxheWVyO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3RvcmUge1xuICAgIHByaXZhdGUgbGl2ZVN0b3JlID0ge1xuICAgICAgICBsaXZlQm9hcmQ6IFtdLFxuICAgICAgICBsaXZlUGxheWVyOiAtMSxcbiAgICAgICAgbGl2ZUNhcHR1cmVzOiBbXSxcbiAgICAgICAgbGl2ZUhpc3Rvcnk6IFtdLFxuICAgICAgICBsaXZlUmVkb0hpc3Rvcnk6IFtdLFxuICAgICAgICBwcmV2TGl2ZVN0b3JlOiB7XG4gICAgICAgICAgICBsaXZlQm9hcmQ6IFtdLFxuICAgICAgICAgICAgbGl2ZVBsYXllcjogLTEsXG4gICAgICAgICAgICBsaXZlQ2FwdHVyZXM6IFtdLFxuICAgICAgICAgICAgbGl2ZUhpc3Rvcnk6IFtdLFxuICAgICAgICAgICAgbGl2ZVJlZG9IaXN0b3J5OiBbXSxcbiAgICAgICAgICAgIHByZXZMaXZlU3RvcmU6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHJlZG9MaXZlU3RvcmU6IHVuZGVmaW5lZFxuICAgICAgICB9LFxuICAgICAgICByZWRvTGl2ZVN0b3JlOiB7XG4gICAgICAgICAgICBsaXZlQm9hcmQ6IFtdLFxuICAgICAgICAgICAgbGl2ZVBsYXllcjogLTEsXG4gICAgICAgICAgICBsaXZlQ2FwdHVyZXM6IFtdLFxuICAgICAgICAgICAgbGl2ZUhpc3Rvcnk6IFtdLFxuICAgICAgICAgICAgbGl2ZVJlZG9IaXN0b3J5OiBbXSxcbiAgICAgICAgICAgIHByZXZMaXZlU3RvcmU6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgIHJlZG9MaXZlU3RvcmU6IHVuZGVmaW5lZFxuICAgICAgICB9XG4gICAgfTtcbiAgICBwcml2YXRlIGxvY2FsU3RvcmFnZSA9IHdpbmRvdy5sb2NhbFN0b3JhZ2U7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHshc3RyaW5nfSBuYW1lIERhdGFiYXNlIG5hbWVcbiAgICAgKiBAcGFyYW0ge2Z1bmN0aW9uKCl9IFtjYWxsYmFja10gQ2FsbGVkIHdoZW4gU3RvcmUgaXMgcmVhZHlcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihuYW1lOiBzdHJpbmcsIGNhbGxiYWNrPzogRnVuY3Rpb24pIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHtCb2FyZH1cbiAgICAgICAgICovXG4gICAgICAgIGxldCBsaXZlQm9hcmQgPSB0aGlzLmluaXRpYWxpemVCb2FyZCgpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgdHVybiBvZiB0aGUgcGxheWVyIGN1cnJlbnRseSBhbGxvd2VkIHRvIG1ha2UgdGhlIG5leHQgbW92ZS5cbiAgICAgICAgICogQHR5cGUgeyFQbGF5ZXJ9XG4gICAgICAgICAqL1xuICAgICAgICBsZXQgbGl2ZVBsYXllciA9IFdISVRFX1BMQVlFUjtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge0FycmF5PFBpZWNlPn1cbiAgICAgICAgICovXG4gICAgICAgIGxldCBsaXZlQ2FwdHVyZXMgPSBbXTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge0FycmF5PHtzcmM6IExvY2F0aW9uLCBkc3Q6IExvY2F0aW9uLCBzcmNQaWVjZTogUGllY2UsIGRzdFBpZWNlOiBQaWVjZSwgbW92ZTogbnVtYmVyfT59XG4gICAgICAgICAqL1xuICAgICAgICBsZXQgbGl2ZUhpc3RvcnkgPSBbXTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge0FycmF5PHtzcmM6IExvY2F0aW9uLCBkc3Q6IExvY2F0aW9uLCBzcmNQaWVjZTogUGllY2UsIGRzdFBpZWNlOiBQaWVjZSwgbW92ZTogbnVtYmVyfT59XG4gICAgICAgICAqL1xuICAgICAgICBsZXQgbGl2ZVJlZG9IaXN0b3J5ID0gW107XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEB0eXBlIHt7bGl2ZUJvYXJkOiB7Qm9hcmR9LCBsaXZlUGxheWVyOiBudW1iZXJ9fVxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5saXZlU3RvcmUgPSB7XG4gICAgICAgICAgICBsaXZlQm9hcmQ6IC8qKiBAdHlwZSB7IUJvYXJkfSAqLyAobGl2ZUJvYXJkKSxcbiAgICAgICAgICAgIGxpdmVQbGF5ZXI6IGxpdmVQbGF5ZXIsXG4gICAgICAgICAgICBsaXZlQ2FwdHVyZXM6IGxpdmVDYXB0dXJlcyxcbiAgICAgICAgICAgIGxpdmVIaXN0b3J5OiBsaXZlSGlzdG9yeSxcbiAgICAgICAgICAgIGxpdmVSZWRvSGlzdG9yeTogbGl2ZVJlZG9IaXN0b3J5LFxuICAgICAgICAgICAgcHJldkxpdmVTdG9yZToge1xuICAgICAgICAgICAgICAgIGxpdmVCb2FyZDogLyoqIEB0eXBlIHshQm9hcmR9ICovIChsaXZlQm9hcmQpLFxuICAgICAgICAgICAgICAgIGxpdmVQbGF5ZXI6IGxpdmVQbGF5ZXIsXG4gICAgICAgICAgICAgICAgbGl2ZUNhcHR1cmVzOiBsaXZlQ2FwdHVyZXMsXG4gICAgICAgICAgICAgICAgbGl2ZUhpc3Rvcnk6IGxpdmVIaXN0b3J5LFxuICAgICAgICAgICAgICAgIGxpdmVSZWRvSGlzdG9yeTogbGl2ZVJlZG9IaXN0b3J5LFxuICAgICAgICAgICAgICAgIHByZXZMaXZlU3RvcmU6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICByZWRvTGl2ZVN0b3JlOiB1bmRlZmluZWRcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByZWRvTGl2ZVN0b3JlOiB7XG4gICAgICAgICAgICAgICAgbGl2ZUJvYXJkOiAvKiogQHR5cGUgeyFCb2FyZH0gKi8gKGxpdmVCb2FyZCksXG4gICAgICAgICAgICAgICAgbGl2ZVBsYXllcjogbGl2ZVBsYXllcixcbiAgICAgICAgICAgICAgICBsaXZlQ2FwdHVyZXM6IGxpdmVDYXB0dXJlcyxcbiAgICAgICAgICAgICAgICBsaXZlSGlzdG9yeTogbGl2ZUhpc3RvcnksXG4gICAgICAgICAgICAgICAgbGl2ZVJlZG9IaXN0b3J5OiBsaXZlUmVkb0hpc3RvcnksXG4gICAgICAgICAgICAgICAgcHJldkxpdmVTdG9yZTogdW5kZWZpbmVkLFxuICAgICAgICAgICAgICAgIHJlZG9MaXZlU3RvcmU6IHVuZGVmaW5lZFxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEByZXR1cm5zIHtCb2FyZH0gdGhlIGluaXRpYWwgYm9hcmQgd2l0aCBhbGwgcGllY2VzIGluIHRoZWlyIHN0YXJ0aW5nIHBvc2l0aW9uc1xuICAgICAqL1xuICAgIHByaXZhdGUgaW5pdGlhbGl6ZUJvYXJkID0gKCkgPT4ge1xuICAgICAgICBjb25zdCB3aGl0ZWtpbmcgPSBpbml0aWFsaXplUGllY2UoJ3doaXRla2luZycpO1xuICAgICAgICBjb25zdCB3aGl0ZXF1ZWVuID0gaW5pdGlhbGl6ZVBpZWNlKCd3aGl0ZXF1ZWVuJyk7XG4gICAgICAgIGNvbnN0IHdoaXRlYmlzaG9wID0gaW5pdGlhbGl6ZVBpZWNlKCd3aGl0ZWJpc2hvcCcpO1xuICAgICAgICBjb25zdCB3aGl0ZWtuaWdodCA9IGluaXRpYWxpemVQaWVjZSgnd2hpdGVrbmlnaHQnKTtcbiAgICAgICAgY29uc3Qgd2hpdGVyb29rID0gaW5pdGlhbGl6ZVBpZWNlKCd3aGl0ZXJvb2snKTtcbiAgICAgICAgY29uc3Qgd2hpdGVwYXduID0gaW5pdGlhbGl6ZVBpZWNlKCd3aGl0ZXBhd24nKTtcbiAgICAgICAgY29uc3QgYmxhY2traW5nID0gaW5pdGlhbGl6ZVBpZWNlKCdibGFja2tpbmcnKTtcbiAgICAgICAgY29uc3QgYmxhY2txdWVlbiA9IGluaXRpYWxpemVQaWVjZSgnYmxhY2txdWVlbicpO1xuICAgICAgICBjb25zdCBibGFja2Jpc2hvcCA9IGluaXRpYWxpemVQaWVjZSgnYmxhY2tiaXNob3AnKTtcbiAgICAgICAgY29uc3QgYmxhY2trbmlnaHQgPSBpbml0aWFsaXplUGllY2UoJ2JsYWNra25pZ2h0Jyk7XG4gICAgICAgIGNvbnN0IGJsYWNrcm9vayA9IGluaXRpYWxpemVQaWVjZSgnYmxhY2tyb29rJyk7XG4gICAgICAgIGNvbnN0IGJsYWNrcGF3biA9IGluaXRpYWxpemVQaWVjZSgnYmxhY2twYXduJyk7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAcmV0dXJucyB7Qm9hcmR9XG4gICAgICAgICAqL1xuICAgICAgICBjb25zdCBlbXB0eUJvYXJkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjb25zdCBhcnIgPSBbXTtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNjQ7IGkrKykgYXJyW2ldID0gZW1wdHlCb3goaSk7XG4gICAgICAgICAgICByZXR1cm4gYXJyO1xuICAgICAgICB9O1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge0JvYXJkfVxuICAgICAgICAgKi9cbiAgICAgICAgY29uc3QgYm94ZXMgPSBlbXB0eUJvYXJkKCk7XG4gICAgICAgIGJveGVzWzBdLnBpZWNlID0gT2JqZWN0LmFzc2lnbih7fSxibGFja3Jvb2spO1xuICAgICAgICBib3hlc1sxXS5waWVjZSA9IE9iamVjdC5hc3NpZ24oe30sYmxhY2trbmlnaHQpO1xuICAgICAgICBib3hlc1syXS5waWVjZSA9IE9iamVjdC5hc3NpZ24oe30sYmxhY2tiaXNob3ApO1xuICAgICAgICBib3hlc1szXS5waWVjZSA9IE9iamVjdC5hc3NpZ24oe30sYmxhY2txdWVlbik7XG4gICAgICAgIGJveGVzWzRdLnBpZWNlID0gT2JqZWN0LmFzc2lnbih7fSxibGFja2tpbmcpO1xuICAgICAgICBib3hlc1s1XS5waWVjZSA9IE9iamVjdC5hc3NpZ24oe30sYmxhY2tiaXNob3ApO1xuICAgICAgICBib3hlc1s2XS5waWVjZSA9IE9iamVjdC5hc3NpZ24oe30sYmxhY2trbmlnaHQpO1xuICAgICAgICBib3hlc1s3XS5waWVjZSA9IE9iamVjdC5hc3NpZ24oe30sYmxhY2tyb29rKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDg7IGkgPCAxNjsgaSsrKSBib3hlc1tpXS5waWVjZSA9IE9iamVjdC5hc3NpZ24oe30sYmxhY2twYXduKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDQ4OyBpIDwgNTY7IGkrKykgYm94ZXNbaV0ucGllY2UgPSBPYmplY3QuYXNzaWduKHt9LHdoaXRlcGF3bik7XG4gICAgICAgIGJveGVzWzU2XS5waWVjZSA9IE9iamVjdC5hc3NpZ24oe30sd2hpdGVyb29rKTtcbiAgICAgICAgYm94ZXNbNTddLnBpZWNlID0gT2JqZWN0LmFzc2lnbih7fSx3aGl0ZWtuaWdodCk7XG4gICAgICAgIGJveGVzWzU4XS5waWVjZSA9IE9iamVjdC5hc3NpZ24oe30sd2hpdGViaXNob3ApO1xuICAgICAgICBib3hlc1s1OV0ucGllY2UgPSBPYmplY3QuYXNzaWduKHt9LHdoaXRlcXVlZW4pO1xuICAgICAgICBib3hlc1s2MF0ucGllY2UgPSBPYmplY3QuYXNzaWduKHt9LHdoaXRla2luZyk7XG4gICAgICAgIGJveGVzWzYxXS5waWVjZSA9IE9iamVjdC5hc3NpZ24oe30sd2hpdGViaXNob3ApO1xuICAgICAgICBib3hlc1s2Ml0ucGllY2UgPSBPYmplY3QuYXNzaWduKHt9LHdoaXRla25pZ2h0KTtcbiAgICAgICAgYm94ZXNbNjNdLnBpZWNlID0gT2JqZWN0LmFzc2lnbih7fSx3aGl0ZXJvb2spO1xuICAgICAgICByZXR1cm4gYm94ZXM7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVhZCB0aGUgQm9hcmQgYW5kIGN1cnJlbnQgcGxheWVyIGZyb20gbG9jYWxTdG9yYWdlLlxuICAgICAqIEByZXR1cm5zIHt7bGl2ZUJvYXJkOiBCb2FyZCwgbGl2ZVBsYXllcjogbnVtYmVyfX1cbiAgICAgKi9cbiAgICBwdWJsaWMgZ2V0TG9jYWxTdG9yYWdlKCkge1xuICAgICAgICAvKipcbiAgICAgICAgICogQHR5cGUge3N0cmluZ31cbiAgICAgICAgICovXG4gICAgICAgIGNvbnN0IGxvY2FsU3RvcmFnZUl0ZW0gPSB0aGlzLmxvY2FsU3RvcmFnZS5nZXRJdGVtKG5hbWUpICE9PSBudWxsID8gU3RyaW5nKHRoaXMubG9jYWxTdG9yYWdlLmdldEl0ZW0obmFtZSkpIDogSlNPTi5zdHJpbmdpZnkodGhpcy5saXZlU3RvcmUpO1xuICAgICAgICByZXR1cm4gdGhpcy5saXZlU3RvcmUgfHwgSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2VJdGVtKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBXcml0ZSB0aGUgbG9jYWwgQm9hcmQgdG8gbG9jYWxTdG9yYWdlLlxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7Qm9hcmR9IGJvYXJkIEFycmF5IG9mIGJveGVzIHRvIHdyaXRlXG4gICAgICogQHBhcmFtIHtQbGF5ZXI9fSBbcGxheWVyXSBPcHRpb25hbGx5IHNldCB0aGUgdmFsdWUgb2YgdGhlIHBsYXllciB3aG8gaXMgYWxsb3dlZCB0byBtYWtlIHRoZSBuZXh0IG1vdmUuXG4gICAgICogQHBhcmFtIHtBcnJheTxQaWVjZT49fSBjYXB0dXJlcyBPcHRpb25hbCBhcnJheSBvZiBjYXB0dXJlZCBwaWVjZXMuXG4gICAgICogQHBhcmFtIHtBcnJheTx7c3JjOiBMb2NhdGlvbiwgZHN0OiBMb2NhdGlvbn0+PX0gaGlzdG9yeVxuICAgICAqIEBwYXJhbSB7QXJyYXk8e3NyYzogTG9jYXRpb24sIGRzdDogTG9jYXRpb259Pj19IEhpc3RvcnlJdGVtXG4gICAgICogQHBhcmFtIHtPYmplY3Q9fSBwcmV2TGl2ZVN0b3JlXG4gICAgICogQHBhcmFtIHtPYmplY3Q9fSByZWRvTGl2ZVN0b3JlXG4gICAgICovXG4gICAgc2V0TG9jYWxTdG9yYWdlKGJvYXJkPzogQm9hcmQsIHBsYXllcj86IFBsYXllciwgY2FwdHVyZXM/OiBBcnJheTxQaWVjZT4sIGhpc3Rvcnk/OiBBcnJheTx7c3JjOiBMb2NhdGlvbiwgZHN0OiBMb2NhdGlvbn0+LCByZWRvSGlzdG9yeT86IEFycmF5PHtzcmM6IExvY2F0aW9uLCBkc3Q6IExvY2F0aW9ufT4sIHByZXZMaXZlU3RvcmU/OiBhbnksIHJlZG9MaXZlU3RvcmU/OiBhbnkpIHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoYm9hcmQpKSB0aGlzLmxpdmVTdG9yZS5saXZlQm9hcmQgPSBib2FyZDtcbiAgICAgICAgaWYgKHBsYXllciA9PT0gV0hJVEVfUExBWUVSIHx8IHBsYXllciA9PT0gQkxBQ0tfUExBWUVSKSB0aGlzLmxpdmVTdG9yZS5saXZlUGxheWVyID0gcGxheWVyO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShjYXB0dXJlcykpIHRoaXMubGl2ZVN0b3JlLmxpdmVDYXB0dXJlcyA9IGNhcHR1cmVzO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShoaXN0b3J5KSkgdGhpcy5saXZlU3RvcmUubGl2ZUhpc3RvcnkgPSBoaXN0b3J5O1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShyZWRvSGlzdG9yeSkpIHRoaXMubGl2ZVN0b3JlLmxpdmVSZWRvSGlzdG9yeSA9IHJlZG9IaXN0b3J5O1xuICAgICAgICBpZiAocHJldkxpdmVTdG9yZSAhPSB1bmRlZmluZWQpIHRoaXMubGl2ZVN0b3JlLnByZXZMaXZlU3RvcmUgPSBwcmV2TGl2ZVN0b3JlO1xuICAgICAgICBpZiAocmVkb0xpdmVTdG9yZSAhPSB1bmRlZmluZWQpIHRoaXMubGl2ZVN0b3JlLnJlZG9MaXZlU3RvcmUgPSByZWRvTGl2ZVN0b3JlO1xuICAgICAgICAvLyBjb25zb2xlLmxvZygndGhpcy5saXZlU3RvcmU6JywgdGhpcy5saXZlU3RvcmUpO1xuICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShuYW1lLCBKU09OLnN0cmluZ2lmeSh0aGlzLmxpdmVTdG9yZSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdsdWVzIHRoaXMgZnJvbnQtZW5kIHBpZWNlIHJlcHJlc2VudGF0aW9uIHRvIG15IHBhcnRpY3VsYXIgYmFjay1lbmQgcGllY2UgcmVwcmVzZW50YXRpb24gKGFzIHNlZW4gaW4gbXkgZ2FtZVN0YXRlLmpzKS5cbiAgICAgKiBAcGFyYW0geyFzdHJpbmd9IHMgZW5jb2Rpbmcgb2YgYSBwaWVjZSBpbiB0aGlzIGZyb250LWVuZCByZXByZXNlbnRhdGlvblxuICAgICAqIEByZXR1cm5zIHshc3RyaW5nfSBlbmNvZGluZyBvZiBhIHBpZWNlIHRoYXQgbXkgcGFydGljdWxhciBiYWNrLWVuZCB1bmRlcnN0YW5kcy5cbiAgICAgKi9cbiAgICBjb252ZXJ0RnJvbnRUb0JhY2tFbmNvZGluZyhzOiBzdHJpbmcsIHRpbWVzTW92ZWQ6IG51bWJlcik6IHN0cmluZyB7XG4gICAgICAgIGxldCBlbmNvZGluZyA9ICcnO1xuICAgICAgICBzd2l0Y2gocykge1xuICAgICAgICAgICAgY2FzZSAnd2hpdGVwYXduJzpcbiAgICAgICAgICAgICAgICBlbmNvZGluZyA9ICdQJztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3doaXRlcm9vayc6XG4gICAgICAgICAgICAgICAgZW5jb2RpbmcgPSAnUic7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICd3aGl0ZWtuaWdodCc6XG4gICAgICAgICAgICAgICAgZW5jb2RpbmcgPSAnSCc7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICd3aGl0ZWJpc2hvcCc6XG4gICAgICAgICAgICAgICAgZW5jb2RpbmcgPSAnQic7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICd3aGl0ZXF1ZWVuJzpcbiAgICAgICAgICAgICAgICBlbmNvZGluZyA9ICdRJztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3doaXRla2luZyc6XG4gICAgICAgICAgICAgICAgZW5jb2RpbmcgPSAnSyc7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdibGFja3Bhd24nOlxuICAgICAgICAgICAgICAgIGVuY29kaW5nID0gJ3AnO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnYmxhY2tyb29rJzpcbiAgICAgICAgICAgICAgICBlbmNvZGluZyA9ICdyJztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2JsYWNra25pZ2h0JzpcbiAgICAgICAgICAgICAgICBlbmNvZGluZyA9ICdoJztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2JsYWNrYmlzaG9wJzpcbiAgICAgICAgICAgICAgICBlbmNvZGluZyA9ICdiJztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2JsYWNrcXVlZW4nOlxuICAgICAgICAgICAgICAgIGVuY29kaW5nID0gJ3EnO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnYmxhY2traW5nJzpcbiAgICAgICAgICAgICAgICBlbmNvZGluZyA9ICdrJztcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgZW5jb2RpbmcgPSBlbmNvZGluZyA/IGVuY29kaW5nK3RpbWVzTW92ZWQgOiBlbmNvZGluZzsgLy8gdGhlIG51bWJlciBvZiBtb3ZlcyBpcyBub3QgcmVhbGx5IG5lY2Vzc2FyeSBhdG0uLi5cbiAgICAgICAgcmV0dXJuIGVuY29kaW5nO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEdsdWVzIHRoaXMgZnJvbnQtZW5kIGdhbWUgcmVwcmVzZW50YXRpb24gdG8gbXkgcGFydGljdWxhciBiYWNrLWVuZCBnYW1lIHJlcHJlc2VudGF0aW9uIGFzIGEgZ2FtZVN0YXRlIG9iamVjdC5cbiAgICAgKiBAcGFyYW0ge0JvYXJkPX0gYm9hcmRJblxuICAgICAqIEByZXR1cm5zIHshT2JqZWN0PEFycmF5PHN0cmluZz4+fVxuICAgICAqL1xuICAgIGNvbnZlcnRCb2FyZFRvR2FtZVN0YXRlKGJvYXJkSW4/OiBCb2FyZCk6IEdhbWVTdGF0ZSB7XG4gICAgICAgIC8qKlxuICAgICAgICAgKiBAdHlwZSB7Qm9hcmR9XG4gICAgICAgICAqL1xuICAgICAgICBsZXQgYm9hcmQgPSBib2FyZEluIHx8IHRoaXMuZ2V0TG9jYWxTdG9yYWdlKCkubGl2ZUJvYXJkO1xuICAgICAgICBjb25zdCBnYW1lU3RhdGUgPSB7XG4gICAgICAgICAgICBib2FyZDogQXJyYXkoOCksXG4gICAgICAgICAgICBudW1Sb3dzOiA4LFxuICAgICAgICAgICAgbnVtQ29sczogOCxcbiAgICAgICAgICAgIHBsYXllcldoaXRlOiAwLFxuICAgICAgICAgICAgcGxheWVyQmxhY2s6IDEsXG4gICAgICAgICAgICBwbGF5ZXI6IHRoaXMuZ2V0TG9jYWxTdG9yYWdlKCkubGl2ZVBsYXllcixcbiAgICAgICAgfTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBnYW1lU3RhdGUuYm9hcmQubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGdhbWVTdGF0ZS5ib2FyZFtpXSA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCA4OyBrKyspIGdhbWVTdGF0ZS5ib2FyZFtpXS5wdXNoKCcgJyk7IC8vIEFycmF5LmZpbGwoJyAnKTtcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgZ2FtZVN0YXRlLmJvYXJkW2ldLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGllY2UgPSBib2FyZFs4Kmkral0ucGllY2U7XG4gICAgICAgICAgICAgICAgaWYgKHBpZWNlICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIGdhbWVTdGF0ZS5ib2FyZFtpXVtqXSA9IHRoaXMuY29udmVydEZyb250VG9CYWNrRW5jb2RpbmcocGllY2UudGl0bGUsIHBpZWNlLnRpbWVzTW92ZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZ2FtZVN0YXRlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7TG9jYXRpb259IHNyYyBcbiAgICAgKiBAcGFyYW0ge0JvYXJkPX0gYm9hcmRJblxuICAgICAqIEByZXR1cm5zIHsoe21vdmU6IExvY2F0aW9uLCBjYXB0dXJlOiBMb2NhdGlvbn18dW5kZWZpbmVkKX1cbiAgICAgKi9cbiAgICBnZXRFblBhc3NhbnRMb2NhdGlvbklmUG9zc2libGUoc3JjOiBMb2NhdGlvbiwgYm9hcmRJbj86IEJvYXJkLCBoaXN0b3J5SW4/KToge21vdmU6IExvY2F0aW9uLCBjYXB0dXJlOiBMb2NhdGlvbn0gfCB1bmRlZmluZWQge1xuICAgICAgICBjb25zdCBzcmNQb3MgPSBzcmMucio4K3NyYy5jO1xuICAgICAgICBjb25zdCBsaXZlU3RvcmUgPSB0aGlzLmdldExvY2FsU3RvcmFnZSgpO1xuICAgICAgICBjb25zdCBib2FyZCA9IGJvYXJkSW4gfHwgbGl2ZVN0b3JlLmxpdmVCb2FyZDtcbiAgICAgICAgY29uc3QgaGlzdG9yeSA9IGhpc3RvcnlJbiB8fCBsaXZlU3RvcmUubGl2ZUhpc3Rvcnk7XG4gICAgICAgIGlmIChib2FyZFtzcmNQb3NdLnBpZWNlICYmIGhpc3RvcnkubGVuZ3RoICE9IDApIHtcbiAgICAgICAgICAgIGNvbnN0IGZvcndhcmREaXIgPSBsaXZlU3RvcmUubGl2ZVBsYXllciA9PSBXSElURV9QTEFZRVIgPyAtMSA6IDE7XG4gICAgICAgICAgICBjb25zdCBzcmNDb2xvciA9IGxpdmVTdG9yZS5saXZlUGxheWVyID09IFdISVRFX1BMQVlFUiA/ICd3aGl0ZScgOiAnYmxhY2snO1xuICAgICAgICAgICAgY29uc3QgcGllY2VUaGF0TGFzdE1vdmVkID0gaGlzdG9yeVtoaXN0b3J5Lmxlbmd0aC0xXS5zcmNQaWVjZTtcbiAgICAgICAgICAgIGlmIChib2FyZFtzcmNQb3NdLnBpZWNlLnRpdGxlLmluZGV4T2YoJ3Bhd24nKSAhPSAtMSBcbiAgICAgICAgICAgICAgICAmJiBwaWVjZVRoYXRMYXN0TW92ZWQudGl0bGUuaW5kZXhPZigncGF3bicpICE9IC0xIFxuICAgICAgICAgICAgICAgICYmIChwaWVjZVRoYXRMYXN0TW92ZWQudGl0bGUuaW5kZXhPZihzcmNDb2xvcikgPT0gLTEgfHwgKHBpZWNlVGhhdExhc3RNb3ZlZC5yID09IGJvYXJkW3NyY1Bvc10ucGllY2UuciAmJiBwaWVjZVRoYXRMYXN0TW92ZWQuYyA9PSBib2FyZFtzcmNQb3NdLnBpZWNlLmMpKVxuICAgICAgICAgICAgICAgICYmIE1hdGguYWJzKGhpc3RvcnlbaGlzdG9yeS5sZW5ndGgtMV0uc3JjLnIgLSBoaXN0b3J5W2hpc3RvcnkubGVuZ3RoLTFdLmRzdC5yKSA9PSAyXG4gICAgICAgICAgICAgICAgJiYgaGlzdG9yeVtoaXN0b3J5Lmxlbmd0aC0xXS5kc3QuciA9PSBzcmMuclxuICAgICAgICAgICAgICAgICYmIE1hdGguYWJzKGhpc3RvcnlbaGlzdG9yeS5sZW5ndGgtMV0uZHN0LmMgLSBzcmMuYykgPT0gMSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXQgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBtb3ZlOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXB0dXJlOiB1bmRlZmluZWQsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgIHJldC5tb3ZlID0ge3I6IHNyYy5yK2ZvcndhcmREaXIsIGM6IGhpc3RvcnlbaGlzdG9yeS5sZW5ndGgtMV0uZHN0LmMgfTtcbiAgICAgICAgICAgICAgICAgICAgcmV0LmNhcHR1cmUgPSBoaXN0b3J5W2hpc3RvcnkubGVuZ3RoLTFdLmRzdDtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJldDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge0dhbWVTdGF0ZX0gZ2FtZVN0YXRlIFxuICAgICAqIEBwYXJhbSB7TG9jYXRpb259IHNyYyBcbiAgICAgKiBAcGFyYW0ge0xvY2F0aW9ufSBkc3QgXG4gICAgICogQHJldHVybiB7KExvY2F0aW9ufGJvb2xlYW4pfSBMb2NhdGlvbiBvZiBwaWVjZSB0aGF0IHdvdWxkIGJlIGNhcHR1cmVkXG4gICAgICovXG4gICAgbG9jYXRpb25JZklzQ2FwdHVyZShnYW1lU3RhdGU6IEdhbWVTdGF0ZSwgc3JjOiBMb2NhdGlvbiwgZHN0OiBMb2NhdGlvbik6IExvY2F0aW9uIHwgYm9vbGVhbiB7XG4gICAgICAgIGNvbnN0IHBvc3NpYmxlRW5QYXNzYW50TG9jYXRpb24gPSB0aGlzLmdldEVuUGFzc2FudExvY2F0aW9uSWZQb3NzaWJsZShzcmMpO1xuICAgICAgICBsZXQgZm9yd2FyZERpciA9IDA7XG4gICAgICAgIGlmIChwb3NzaWJsZUVuUGFzc2FudExvY2F0aW9uICYmIHBvc3NpYmxlRW5QYXNzYW50TG9jYXRpb24ubW92ZS5jID09IGRzdC5jICYmIHBvc3NpYmxlRW5QYXNzYW50TG9jYXRpb24ubW92ZS5yID09IGRzdC5yKSB7XG4gICAgICAgICAgICByZXR1cm4gcG9zc2libGVFblBhc3NhbnRMb2NhdGlvbi5jYXB0dXJlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKFBpZWNlR2FtZUxvZ2ljLmlzQUNhcHR1cmUoZ2FtZVN0YXRlLCBzcmMsIGRzdCkpIHtcbiAgICAgICAgICAgIHJldHVybiBkc3Q7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBNb3ZlcyB0aGUgcGllY2UgZnJvbSBzcmMgdG8gZHN0LCBtYXJraW5nIHRoZSBwaWVjZSBhdCBkc3QgY2FwdHVyZWQgaWYgaXQncyBhIGNhcHR1cmUuXG4gICAgICogVGhpcyBpcyB0aGUgb25seSBwbGFjZSB3aGVyZSB0aGUgcGxheWVyIHR1cm4gaXMgdXBkYXRlZC4gXG4gICAgICogVXBkYXRlcyBsb2NhbFN0b3JhZ2Ugd2l0aCB0aGUgdXBkYXRlZCBib2FyZCBhbmQgcGxheWVyLlxuICAgICAqIEB0b2RvIGFkZCBlZGdlLWNhc2UgZm9yIGNhc3RsaW5nIGxvZ2ljLlxuICAgICAqIEBwYXJhbSB7IUxvY2F0aW9ufSBzcmMgXG4gICAgICogQHBhcmFtIHshTG9jYXRpb259IGRzdCBcbiAgICAgKiBAcGFyYW0ge09iamVjdD19IHN0b3JlSW5cbiAgICAgKi9cbiAgICBtb3ZlUGllY2Uoc3JjOiBMb2NhdGlvbiwgZHN0OiBMb2NhdGlvbiwgc3RvcmVJbj86IE9iamVjdCkge1xuICAgICAgICBsZXQgc3RvcmUgPSBzdG9yZUluIHx8IHRoaXMuZ2V0TG9jYWxTdG9yYWdlKCk7XG4gICAgICAgIGxldCBib2FyZCA9IHN0b3JlLmxpdmVCb2FyZDtcbiAgICAgICAgY29uc3QgZ2FtZVN0YXRlID0gdGhpcy5jb252ZXJ0Qm9hcmRUb0dhbWVTdGF0ZShib2FyZCk7XG4gICAgICAgIGxldCBwbGF5ZXJUdXJuID0gc3RvcmUubGl2ZVBsYXllcjtcbiAgICAgICAgbGV0IGNhcHR1cmVzID0gc3RvcmUubGl2ZUNhcHR1cmVzO1xuICAgICAgICBsZXQgZHN0UG9zOiBudW1iZXIgPSBkc3Qucio4K2RzdC5jO1xuICAgICAgICBjb25zdCBzcmNQb3MgPSBzcmMucio4K3NyYy5jO1xuICAgICAgICBsZXQgZHN0UGllY2UgPSBib2FyZFtkc3RQb3NdLnBpZWNlO1xuICAgICAgICBjb25zdCBzcmNQaWVjZSA9IGJvYXJkW3NyY1Bvc10ucGllY2U7XG4gICAgICAgIGNvbnN0IGxvY2F0aW9uVG9DYXB0dXJlOiBMb2NhdGlvbiB8IGJvb2xlYW4gPSB0aGlzLmxvY2F0aW9uSWZJc0NhcHR1cmUoZ2FtZVN0YXRlLCBzcmMsIGRzdCk7XG4gICAgICAgIGlmIChsb2NhdGlvblRvQ2FwdHVyZSAhPSBmYWxzZSkge1xuICAgICAgICAgICAgZHN0UG9zID0gKDxMb2NhdGlvbj5sb2NhdGlvblRvQ2FwdHVyZSkucio4ICsgKDxMb2NhdGlvbj5sb2NhdGlvblRvQ2FwdHVyZSkuYztcbiAgICAgICAgICAgIGRzdFBpZWNlID0gYm9hcmRbZHN0UG9zXS5waWVjZTtcbiAgICAgICAgICAgIGJvYXJkW2RzdFBvc10ucGllY2UuY2FwdHVyZWRJZHggPSBjYXB0dXJlcy5sZW5ndGg7XG4gICAgICAgICAgICBjYXB0dXJlcy5wdXNoKGJvYXJkW2RzdFBvc10ucGllY2UpO1xuICAgICAgICAgICAgYm9hcmRbZHN0UG9zXS5waWVjZSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFBpZWNlR2FtZUxvZ2ljLmtpbmdDYW5DYXN0bGVXaXRoR2l2ZW5Sb29rKGdhbWVTdGF0ZSxzcmMsZHN0KSkge1xuICAgICAgICAgICAgbGV0IG91dERpciA9IGRzdC5jIC0gc3JjLmMgPiAwID8gMSA6IC0xO1xuICAgICAgICAgICAgbGV0IHNoaWZ0S2luZyA9IDA7XG4gICAgICAgICAgICBsZXQgc2hpZnRSb29rID0gMDtcbiAgICAgICAgICAgIGlmIChNYXRoLmFicyhkc3QuYyAtIHNyYy5jKSA9PSAzKSB7XG4gICAgICAgICAgICAgICAgc2hpZnRLaW5nID0gMjtcbiAgICAgICAgICAgICAgICBzaGlmdFJvb2sgPSAyO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChNYXRoLmFicyhkc3QuYyAtIHNyYy5jKSA9PSA0KSB7XG4gICAgICAgICAgICAgICAgc2hpZnRLaW5nID0gMjtcbiAgICAgICAgICAgICAgICBzaGlmdFJvb2sgPSAzO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYm9hcmRbc3JjUG9zK291dERpcipzaGlmdEtpbmddLnBpZWNlID0gYm9hcmRbc3JjUG9zXS5waWVjZTtcbiAgICAgICAgICAgIGJvYXJkW3NyY1BvcytvdXREaXIqc2hpZnRLaW5nXS5waWVjZS50aW1lc01vdmVkKys7IC8vIGlzIG9ubHkgYSBraW5nJ3MgbW92ZS5cbiAgICAgICAgICAgIGJvYXJkW3NyY1Bvc10ucGllY2UgPSBudWxsO1xuICAgICAgICAgICAgYm9hcmRbZHN0UG9zLW91dERpcipzaGlmdFJvb2tdLnBpZWNlID0gYm9hcmRbZHN0UG9zXS5waWVjZTtcbiAgICAgICAgICAgIGJvYXJkW2RzdFBvc10ucGllY2UgPSBudWxsO1xuICAgICAgICB9IGVsc2UgaWYodGhpcy5nZXRFblBhc3NhbnRMb2NhdGlvbklmUG9zc2libGUoc3JjKSAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGNvbnN0IGVuUGFzc2FudCA9IHRoaXMuZ2V0RW5QYXNzYW50TG9jYXRpb25JZlBvc3NpYmxlKHNyYyk7XG4gICAgICAgICAgICBib2FyZFtkc3Qucio4K2RzdC5jXS5waWVjZSA9IGJvYXJkW3NyYy5yKjgrc3JjLmNdLnBpZWNlO1xuICAgICAgICAgICAgYm9hcmRbZHN0LnIqOCtkc3QuY10ucGllY2UudGltZXNNb3ZlZCsrO1xuICAgICAgICAgICAgYm9hcmRbc3JjLnIqOCtzcmMuY10ucGllY2UgPSBudWxsO1xuICAgICAgICAgICAgZHN0UGllY2UgPSBudWxsO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYm9hcmRbZHN0UG9zXS5waWVjZSA9IGJvYXJkW3NyY1Bvc10ucGllY2U7XG4gICAgICAgICAgICBib2FyZFtkc3RQb3NdLnBpZWNlLnRpbWVzTW92ZWQrKztcbiAgICAgICAgICAgIGJvYXJkW3NyY1Bvc10ucGllY2UgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGxldCBoaXN0b3J5ID0gc3RvcmUubGl2ZUhpc3Rvcnk7XG4gICAgICAgIGhpc3RvcnkucHVzaCh7c3JjOiBzcmMsIGRzdDogZHN0LCBzcmNQaWVjZTogc3JjUGllY2UsIGRzdFBpZWNlOiBkc3RQaWVjZSwgbW92ZTogaGlzdG9yeS5sZW5ndGh9KTtcbiAgICAgICAgY29uc3QgcHJldkxpdmVTdG9yZSA9IE9iamVjdC5hc3NpZ24oe30sIHN0b3JlKTtcbiAgICAgICAgcHJldkxpdmVTdG9yZS5wcmV2TGl2ZVN0b3JlID0gdW5kZWZpbmVkO1xuICAgICAgICBpZiAocGxheWVyVHVybiA9PSBXSElURV9QTEFZRVIpIHBsYXllclR1cm4gPSBCTEFDS19QTEFZRVI7XG4gICAgICAgIGVsc2UgcGxheWVyVHVybiA9IFdISVRFX1BMQVlFUjtcbiAgICAgICAgdGhpcy5zZXRMb2NhbFN0b3JhZ2UoYm9hcmQsIHBsYXllclR1cm4sIGNhcHR1cmVzLCBoaXN0b3J5LCBbXSwgcHJldkxpdmVTdG9yZSk7XG4gICAgICAgIGlmICh0aGlzLmNhblByb21vdGUoc3JjKSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ1Byb21vdGlvbiBwb3NzaWJsZSBpbiBTdG9yZSBtb3ZlUGllY2UnKTtcbiAgICAgICAgICAgIC8vIGxldCB7Ym9hcmQsIHBsYXllclR1cm4sIGNhcHR1cmVzLCBoaXN0b3J5LCByZWRvSGlzdG9yeSwgcHJldkxpdmVTdG9yZX0gPSB0aGlzLmdldExvY2FsU3RvcmFnZSgpO1xuICAgICAgICAgICAgLy8gcGxheWVyVHVybiA9IHBsYXllclR1cm4gPT0gV0hJVEVfUExBWUVSID8gQkxBQ0tfUExBWUVSIDogV0hJVEVfUExBWUVSO1xuICAgICAgICAgICAgLy8gdGhpcy5zZXRMb2NhbFN0b3JhZ2UoYm9hcmQsIHBsYXllclR1cm4sIGNhcHR1cmVzLCBoaXN0b3J5LCByZWRvSGlzdG9yeSwgcHJldkxpdmVTdG9yZSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBib3ggb24gdGhlIEJvYXJkIGFzIHNlbGVjdGVkLlxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwb3MgSW5kZXggb2YgYm94IGluIEJvYXJkLlxuICAgICAqL1xuICAgIHNlbGVjdEJveChwb3M6IG51bWJlcikge1xuICAgICAgICBsZXQgYm94ZXMgPSB0aGlzLmdldExvY2FsU3RvcmFnZSgpLmxpdmVCb2FyZDtcbiAgICAgICAgYm94ZXNbcG9zXS5zZWxlY3RlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuc2V0TG9jYWxTdG9yYWdlKGJveGVzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBib3ggb24gdGhlIEJvYXJkIGFzIHVuc2VsZWN0ZWQuXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBvcyBJbmRleCBvZiBib3ggaW4gQm9hcmQuXG4gICAgICovXG4gICAgdW5zZWxlY3RCb3gocG9zOiBudW1iZXIpIHtcbiAgICAgICAgbGV0IGJveGVzID0gdGhpcy5nZXRMb2NhbFN0b3JhZ2UoKS5saXZlQm9hcmQ7XG4gICAgICAgIGJveGVzW3Bvc10uc2VsZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zZXRMb2NhbFN0b3JhZ2UoYm94ZXMpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBwb3MgSW5kZXggb2YgdGhlIGNhcHR1cmVkIHBpZWNlIGluIGxpdmVDYXB0dXJlcy5cbiAgICAgKi9cbiAgICBzZWxlY3RDYXB0dXJlZFBpZWNlKHBvczogbnVtYmVyKSB7XG4gICAgICAgIGxldCBjYXB0dXJlcyA9IHRoaXMuZ2V0TG9jYWxTdG9yYWdlKCkubGl2ZUNhcHR1cmVzO1xuICAgICAgICBjYXB0dXJlc1twb3NdLnNlbGVjdGVkQ2FwdHVyZSA9IHRydWU7XG4gICAgICAgIHRoaXMuc2V0TG9jYWxTdG9yYWdlKHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBjYXB0dXJlcyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHBvcyBJbmRleCBvZiB0aGUgY2FwdHVyZWQgcGllY2UgaW4gbGl2ZUNhcHR1cmVzLlxuICAgICAqL1xuICAgIHVuU2VsZWN0Q2FwdHVyZWRQaWVjZShwb3M6IG51bWJlcikge1xuICAgICAgICBsZXQgY2FwdHVyZXMgPSB0aGlzLmdldExvY2FsU3RvcmFnZSgpLmxpdmVDYXB0dXJlcztcbiAgICAgICAgY2FwdHVyZXNbcG9zXS5zZWxlY3RlZENhcHR1cmUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5zZXRMb2NhbFN0b3JhZ2UodW5kZWZpbmVkLCB1bmRlZmluZWQsIGNhcHR1cmVzKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0geyFMb2NhdGlvbn0gc3JjIFxuICAgICAqIEBwYXJhbSB7IUxvY2F0aW9ufSBkc3RcbiAgICAgKiBAcmV0dXJucyB7KExvY2F0aW9ufGJvb2xlYW4pfSBGYWxzZSBpZmYgY2Fubm90IG1vdmUgdGhlIHBpZWNlIGF0IHNyYyB0byBkc3QsIGVsc2UgbG9jYXRpb24gb2YgRW4gUGFzc2FudCBNb3ZlLlxuICAgICAqL1xuICAgIGxvY2F0aW9uSWZDYW5Nb3ZlKHNyYzogTG9jYXRpb24sIGRzdDogTG9jYXRpb24pOiBMb2NhdGlvbiB8IGJvb2xlYW4ge1xuICAgICAgICBpZiAoIXNyYyB8fCAhZHN0KSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgZ2FtZVN0YXRlID0gdGhpcy5jb252ZXJ0Qm9hcmRUb0dhbWVTdGF0ZSgpO1xuICAgICAgICBjb25zdCBpc1Bvc3NpYmxlVG9Nb3ZlVG8gPSBQaWVjZUdhbWVMb2dpYy5pc1Bvc3NpYmxlVG9Nb3ZlVG8oZ2FtZVN0YXRlLHNyYyk7XG4gICAgICAgIGNvbnN0IGNhbk1vdmVUb0Rlc3QgPSBpc1Bvc3NpYmxlVG9Nb3ZlVG8oZHN0KTtcbiAgICAgICAgY29uc3QgcG9zc2libGVFblBhc3NhbnRMb2NhdGlvbiA9IHRoaXMuZ2V0RW5QYXNzYW50TG9jYXRpb25JZlBvc3NpYmxlKHNyYyk7XG4gICAgICAgIGxldCBjYW5FblBhc3NhbnQgPSBmYWxzZTtcbiAgICAgICAgaWYgKChwb3NzaWJsZUVuUGFzc2FudExvY2F0aW9uICE9IHVuZGVmaW5lZCAmJiBwb3NzaWJsZUVuUGFzc2FudExvY2F0aW9uLm1vdmUuciA9PSBkc3QuciAmJiBwb3NzaWJsZUVuUGFzc2FudExvY2F0aW9uLm1vdmUuYyA9PSBkc3QuYykgfHwgY2FuTW92ZVRvRGVzdCkgIHtcbiAgICAgICAgICAgIHJldHVybiBkc3Q7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0geyFMb2NhdGlvbn0gc3JjIFxuICAgICAqIEByZXR1cm5zIHshQXJyYXk8TG9jYXRpb24+fVxuICAgICAqL1xuICAgIGdldFBvc3NpYmxlTW92ZXMoc3JjOiBMb2NhdGlvbik6IEFycmF5PExvY2F0aW9uPiB7XG4gICAgICAgIGNvbnN0IGdhbWVTdGF0ZSA9IHRoaXMuY29udmVydEJvYXJkVG9HYW1lU3RhdGUoKTtcbiAgICAgICAgbGV0IGxvY2F0aW9ucyA9IFBpZWNlR2FtZUxvZ2ljLmdldFBvc3NpYmxlTW92ZXMoZ2FtZVN0YXRlLHNyYyk7XG4gICAgICAgIGNvbnN0IHBvc3NpYmxlRW5QYXNzYW50TG9jYXRpb24gPSB0aGlzLmdldEVuUGFzc2FudExvY2F0aW9uSWZQb3NzaWJsZShzcmMpO1xuICAgICAgICBpZiAocG9zc2libGVFblBhc3NhbnRMb2NhdGlvbiAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGxvY2F0aW9ucy5wdXNoKHBvc3NpYmxlRW5QYXNzYW50TG9jYXRpb24ubW92ZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGxvY2F0aW9ucztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0geyhBcnJheTxMb2NhdGlvbj58bnVsbCl9IHBvc3NpYmxlTW92ZXMgXG4gICAgICovXG4gICAgdXBkYXRlUG9zc2libGVNb3Zlcyhwb3NzaWJsZU1vdmVzPzogQXJyYXk8TG9jYXRpb24+KSB7XG4gICAgICAgIGxldCBib3hlcyA9IHRoaXMuZ2V0TG9jYWxTdG9yYWdlKCkubGl2ZUJvYXJkO1xuICAgICAgICBzd2l0Y2gocG9zc2libGVNb3Zlcykge1xuICAgICAgICAgICAgY2FzZSBudWxsOlxuICAgICAgICAgICAgICAgIGJveGVzID0gYm94ZXMubWFwKGJveCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGJveC5wb3NzaWJsZURlc3QgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJveDtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0aGlzLnNldExvY2FsU3RvcmFnZShib3hlcyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHBvc3NpYmxlTW92ZXMuZm9yRWFjaChsb2MgPT4ge1xuICAgICAgICAgICAgICAgICAgICBib3hlc1tsb2Mucio4K2xvYy5jXS5wb3NzaWJsZURlc3QgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIHRoaXMuc2V0TG9jYWxTdG9yYWdlKGJveGVzKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7TG9jYXRpb259IHBhd24gXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICovXG4gICAgY2FuUHJvbW90ZShwYXduOiBMb2NhdGlvbik6IGJvb2xlYW4ge1xuICAgICAgICBsZXQgYm9hcmQgPSB0aGlzLmdldExvY2FsU3RvcmFnZSgpLmxpdmVCb2FyZDtcbiAgICAgICAgbGV0IGhpc3RvcnkgPSB0aGlzLmdldExvY2FsU3RvcmFnZSgpLmxpdmVIaXN0b3J5O1xuICAgICAgICBsZXQgaEl0ZW0gPSBoaXN0b3J5W2hpc3RvcnkubGVuZ3RoLTFdO1xuICAgICAgICBjb25zdCBwYXduUGllY2UgPSBib2FyZFtwYXduLnIqOCtwYXduLmNdLnBpZWNlO1xuICAgICAgICBpZiAocGF3blBpZWNlICE9IG51bGwgJiYgcGF3blBpZWNlLnRpdGxlLmluZGV4T2YoJ3Bhd24nKSAhPSAtMVxuICAgICAgICAgICAgJiYgKChwYXduLnIgPT0gMCAmJiBwYXduUGllY2UudGl0bGUuaW5kZXhPZignd2hpdGUnKSA9PSAwKSB8fCAocGF3bi5yID09IDcgJiYgcGF3blBpZWNlLnRpdGxlLmluZGV4T2YoJ2JsYWNrJykgPT0gMCkpXG4gICAgICAgICAgICAmJiBoSXRlbS5kc3QuciA9PSBwYXduLnIgJiYgaEl0ZW0uZHN0LmMgPT0gcGF3bi5jXG4gICAgICAgICkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7TG9jYXRpb259IHBhd25cbiAgICAgKiBAcGFyYW0ge0xvY2F0aW9uPX0gb3RoZXIgT3RoZXIgcGllY2UgbG9jYXRpb24gdG8gcHJvbW90ZSBwYXduIHRvXG4gICAgICogQHBhcmFtIHtQaWVjZT19IG90aGVyUGllY2VJblxuICAgICAqIEByZXR1cm5zIHtib29sZWFufSBUcnVlIGlmIHN1Y2Nlc3NmdWxseSBwcm9tb3RlZCwgZmFsc2Ugby53LlxuICAgICAqIEBkZXNjcmlwdGlvbiBPbmx5IG1vZGlmaWVzIHRoaXMubGl2ZVN0b3JlLmxpdmVCb2FyZCBhdCB0aGUgdGl0bGUgb2YgdGhlIGdpdmVuIHBhd24gcGllY2UsIGlmZiB2YWxpZCwgYW5kIHNldHMgdGhhdCBpbnRvIGxvY2FsU3RvcmFnZS5cbiAgICAgKi9cbiAgICBwcm9tb3RlSWZQb3NzaWJsZShwYXduOiBMb2NhdGlvbiwgb3RoZXI/OiBMb2NhdGlvbiwgb3RoZXJQaWVjZUluPzogUGllY2UpOiBib29sZWFuIHtcbiAgICAgICAgbGV0IGJvYXJkID0gdGhpcy5nZXRMb2NhbFN0b3JhZ2UoKS5saXZlQm9hcmQ7XG4gICAgICAgIGxldCBoaXN0b3J5ID0gdGhpcy5nZXRMb2NhbFN0b3JhZ2UoKS5saXZlSGlzdG9yeTtcbiAgICAgICAgbGV0IHBsYXllciA9IHRoaXMuZ2V0TG9jYWxTdG9yYWdlKCkubGl2ZVBsYXllcjtcbiAgICAgICAgbGV0IGhJdGVtID0gaGlzdG9yeVtoaXN0b3J5Lmxlbmd0aC0xXTtcbiAgICAgICAgY29uc3QgcGF3blBpZWNlID0gYm9hcmRbcGF3bi5yKjgrcGF3bi5jXS5waWVjZTtcbiAgICAgICAgY29uc3Qgb3RoZXJQaWVjZSA9IG90aGVyUGllY2VJbiB8fCBib2FyZFtvdGhlci5yKjgrb3RoZXIuY10ucGllY2U7XG4gICAgICAgIGlmIChwYXduUGllY2UgIT0gbnVsbCAmJiBwYXduUGllY2UudGl0bGUuaW5kZXhPZigncGF3bicpICE9IC0xXG4gICAgICAgICAgICAmJiBvdGhlclBpZWNlICE9IG51bGwgJiYgcGF3blBpZWNlLnRpdGxlLmluZGV4T2YoJ3doaXRlJykgPT0gb3RoZXJQaWVjZS50aXRsZS5pbmRleE9mKCd3aGl0ZScpXG4gICAgICAgICAgICAmJiAoKHBhd24uciA9PSAwICYmIHBhd25QaWVjZS50aXRsZS5pbmRleE9mKCd3aGl0ZScpID09IDApIHx8IChwYXduLnIgPT0gNyAmJiBwYXduUGllY2UudGl0bGUuaW5kZXhPZignYmxhY2snKSA9PSAwKSlcbiAgICAgICAgICAgICYmIGhJdGVtLmRzdC5yID09IHBhd24uciAmJiBoSXRlbS5kc3QuYyA9PSBwYXduLmNcbiAgICAgICAgICAgICYmIG90aGVyUGllY2UudGl0bGUuaW5kZXhPZigncGF3bicpID09IC0xXG4gICAgICAgICAgICAmJiBvdGhlclBpZWNlLnRpdGxlLmluZGV4T2YoJ2tpbmcnKSA9PSAtMVxuICAgICAgICApIHtcbiAgICAgICAgICAgIGJvYXJkW3Bhd24ucio4K3Bhd24uY10ucGllY2UudGl0bGUgPSBvdGhlclBpZWNlLnRpdGxlO1xuICAgICAgICAgICAgY29uc3QgbSA9IGhJdGVtLm1vdmU7XG4gICAgICAgICAgICBoaXN0b3J5LnB1c2goe3NyYzogcGF3biwgZHN0OiBwYXduLCBzcmNQaWVjZTogcGF3blBpZWNlLCBkc3RQaWVjZTogcGF3blBpZWNlLCBtb3ZlOiBtfSk7XG4gICAgICAgICAgICBwbGF5ZXIgPSBwbGF5ZXIgPT0gV0hJVEVfUExBWUVSID8gQkxBQ0tfUExBWUVSIDogV0hJVEVfUExBWUVSO1xuICAgICAgICAgICAgdGhpcy5zZXRMb2NhbFN0b3JhZ2UoYm9hcmQscGxheWVyLHVuZGVmaW5lZCxoaXN0b3J5KTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAdG9kbyBMb29rIGludG8gRkVOLCBQR04sIFNBTiBhbmQgY29tbW9uIGltcGxlbWVudGF0aW9ucyBvZiBrZWVwaW5nIGhpc3RvcnlcbiAgICAgKi9cbiAgICB1bmRvTW92ZSgpIHtcbiAgICAgICAgLy8gY29uc3Qgc3RvcmUgPSB0aGlzLnN0b3JlLmdldExvY2FsU3RvcmFnZSgpO1xuICAgICAgICAvLyBzdG9yZS5yZWRvTGl2ZVN0b3JlID0gT2JqZWN0LmFzc2lnbih7fSwgc3RvcmUpO1xuICAgICAgICAvLyBzdG9yZS5yZWRvTGl2ZVN0b3JlLnByZXZcbiAgICAgICAgLy8gc3RvcmUgPSBPYmplY3QuYXNzaWduKHt9LCBzdG9yZS5wcmV2TGl2ZVN0b3JlKTtcbiAgICB9XG4gICAgcmVkb01vdmUoKSB7XG4gICAgICAgIFxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEB0b2RvIENvbnNpZGVyIEZFTiwgUEdOLCBTQU4sIGV0YyBmb3IgdGhpcy5cbiAgICAgKi9cbiAgICBsb2FkQm9hcmQoKSB7XG5cbiAgICB9XG4gICAgc2F2ZUJvYXJkKCkge1xuXG4gICAgfVxufSIsImltcG9ydCB7IEJvYXJkLCBMb2NhdGlvbiwgQm94LCBQaWVjZSB9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB7IHFzLCAkb24gfSBmcm9tICcuL2hlbHBlcnMnO1xuaW1wb3J0IFRlbXBsYXRlIGZyb20gJy4vdGVtcGxhdGUnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBWaWV3IHtcbiAgICBwcml2YXRlIHRlbXBsYXRlOiBUZW1wbGF0ZTtcbiAgICBwcml2YXRlICRib2FyZDogRWxlbWVudDtcbiAgICBwcml2YXRlICRjYXB0dXJlZHdoaXRlOiBFbGVtZW50O1xuICAgIHByaXZhdGUgJGNhcHR1cmVkYmxhY2s6IEVsZW1lbnQ7XG4gICAgcHJpdmF0ZSAkbWFpbjogRWxlbWVudDtcbiAgICBwcml2YXRlICR1bmRvYnRuOiBFbGVtZW50O1xuICAgIHByaXZhdGUgJHJlZG9idG46IEVsZW1lbnQ7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHtUZW1wbGF0ZX0gdGVtcGxhdGUgQSBUZW1wbGF0ZSBpbnN0YW5jZVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHRlbXBsYXRlOiBUZW1wbGF0ZSkge1xuICAgICAgICB0aGlzLnRlbXBsYXRlID0gdGVtcGxhdGU7XG4gICAgICAgIHRoaXMuJGJvYXJkID0gcXMoJy5jaGVzc2JvYXJkJyk7XG4gICAgICAgIHRoaXMuJGNhcHR1cmVkd2hpdGUgPSBxcygnLmNhcHR1cmVkd2hpdGUnKTtcbiAgICAgICAgdGhpcy4kY2FwdHVyZWRibGFjayA9IHFzKCcuY2FwdHVyZWRibGFjaycpO1xuICAgICAgICB0aGlzLiRtYWluID0gcXMoJy5tYWluJyk7XG4gICAgICAgIHRoaXMuJHVuZG9idG4gPSBxcygnLnVuZG8nKTtcbiAgICAgICAgdGhpcy4kcmVkb2J0biA9IHFzKCcucmVkbycpO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXQkYm9hcmQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiRib2FyZDtcbiAgICB9XG4gICAgcHVibGljIGdldCRjYXB0dXJlZHdoaXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4kY2FwdHVyZWR3aGl0ZTtcbiAgICB9XG4gICAgcHVibGljIGdldCRjYXB0dXJlZGJsYWNrKCkge1xuICAgICAgICByZXR1cm4gdGhpcy4kY2FwdHVyZWRibGFjaztcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBjaGVzc2JvYXJkIGh0bWwuXG4gICAgICogQHBhcmFtIHtCb2FyZH0gYm9hcmQgXG4gICAgICovXG4gICAgc2hvd0JvYXJkKGJvYXJkOiBCb2FyZCkge1xuICAgICAgICB0aGlzLiRib2FyZC5yZXBsYWNlQ2hpbGQodGhpcy50ZW1wbGF0ZS5Cb2FyZChib2FyZCksIHRoaXMuJGJvYXJkLmZpcnN0Q2hpbGQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgdGhlIGNhcHR1cmVkIHBpZWNlcyBpbiB0aGUgaHRtbC5cbiAgICAgKiBAcGFyYW0ge0FycmF5PFBpZWNlPn0gY2FwdHVyZXMgXG4gICAgICovXG4gICAgc2hvd0NhcHR1cmVzKGNhcHR1cmVzOiBBcnJheTxQaWVjZT4pIHtcbiAgICAgICAgdGhpcy4kY2FwdHVyZWR3aGl0ZS5yZXBsYWNlQ2hpbGQodGhpcy50ZW1wbGF0ZS5DYXB0dXJlZFdoaXRlKGNhcHR1cmVzKSwgdGhpcy4kY2FwdHVyZWR3aGl0ZS5maXJzdENoaWxkKTtcbiAgICAgICAgdGhpcy4kY2FwdHVyZWRibGFjay5yZXBsYWNlQ2hpbGQodGhpcy50ZW1wbGF0ZS5DYXB0dXJlZEJsYWNrKGNhcHR1cmVzKSwgdGhpcy4kY2FwdHVyZWRibGFjay5maXJzdENoaWxkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBCaW5kcyBoYW5kbGVyIHRvIGJveCwgY2FsbGluZyBoYW5kbGVyIHdoZW4gdGhlIHN5bnRoZXRpYyAnY2xpY2snIGV2ZW50IGlzIGZpcmVkLlxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gYm94IFxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXIgXG4gICAgICovXG4gICAgYmluZFNlbGVjdEJveChib3g6IEVsZW1lbnQsIGhhbmRsZXI6IEZ1bmN0aW9uKSB7XG4gICAgICAgICRvbihib3gsICdjbGljaycsICgoe3RhcmdldH0pID0+IGhhbmRsZXIoYm94KSkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEJpbmRzIGhhbmRsZXIgdG8gcGllY2UsIGNhbGxpbmcgaGFuZGxlciB3aGVuIHRoZSBzeW50aGV0aWMgJ2NsaWNrJyBldmVudCBpcyBmaXJlZC5cbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IHBpZWNlIFxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXIgXG4gICAgICovXG4gICAgYmluZENhcHR1cmVkUGllY2UocGllY2U6IEVsZW1lbnQsIGk6IG51bWJlciwgaGFuZGxlcjogRnVuY3Rpb24pIHtcbiAgICAgICAgJG9uKHBpZWNlLCAnY2xpY2snLCAoKSA9PiBoYW5kbGVyKHBpZWNlLCBpKSk7XG4gICAgfVxuXG4gICAgYmluZFVuZG9Nb3ZlKGhhbmRsZXIpIHtcbiAgICAgICAgLy8gJG9uKHRoaXMuJHVuZG9idG4sICdjbGljaycsICgpID0+IGhhbmRsZXIoKSk7XG4gICAgfVxuXG4gICAgYmluZFJlZG9Nb3ZlKGhhbmRsZXIpIHtcbiAgICAgICAgLy8gJG9uKHRoaXMuJHJlZG9idG4sICdjbGljaycsICgpID0+IGhhbmRsZXIoKSk7XG4gICAgfVxufSIsImltcG9ydCB7IEJvYXJkLCBlbXB0eUJveCwgUGllY2UgfSBmcm9tICcuLi90eXBlcyc7XG5cbmltcG9ydCB7IGVzY2FwZUZvckhUTUwgfSBmcm9tICcuL2hlbHBlcnMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUZW1wbGF0ZSB7XG4gICAgLyoqXG4gICAgICogRm9ybWF0IHRoZSBjb250ZW50IG9mIHRoZSBib2FyZCBieTpcbiAgICAgKiAxKSBDcmVhdGluZyBlYWNoIGJveCBpbiBhIHRhYmxlIHJlcHJlc2VudGF0aW9uO1xuICAgICAqIDIpIFBsYWNpbmcgZWFjaCBwaWVjZSBpbiBpdHMgY29ycmVzcG9uZGluZyBib3guXG4gICAgICogXG4gICAgICogQHBhcmFtIHtCb2FyZH0gYm94ZXMgQXJyYXkgY29udGFpbmluZyBib3hlc1xuICAgICAqIEByZXR1cm5zIHshRWxlbWVudH0gQ29udGVudHMgb2YgdGhlIGJvYXJkIChhcyBhIHRhYmxlKVxuICAgICAqL1xuICAgIEJvYXJkKGJveGVzOiBCb2FyZCk6IEVsZW1lbnQge1xuICAgICAgICBsZXQgYm9hcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdib2FyZCcpO1xuICAgICAgICBsZXQgYm94UG9zID0gMDtcbiAgICAgICAgZm9yIChsZXQgciA9IDA7IHIgPCA4OyByKyspIHtcbiAgICAgICAgICAgIGxldCB0ciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XG4gICAgICAgICAgICBmb3IgKGxldCBjID0gMDsgYyA8IDg7IGMrKykge1xuICAgICAgICAgICAgICAgIGxldCB0ZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XG4gICAgICAgICAgICAgICAgdGQuc2V0QXR0cmlidXRlKCdkYXRhLXBvcycsIFN0cmluZyhib3hQb3MpKTtcbiAgICAgICAgICAgICAgICBjb25zdCBib3ggPSBib3hlc1tyKjgrY107XG4gICAgICAgICAgICAgICAgY29uc3QgcGllY2UgPSBib3gucGllY2U7XG4gICAgICAgICAgICAgICAgaWYgKHBpZWNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBwaWVjZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgICAgICBwaWVjZURpdi5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgcGllY2UudGl0bGUpO1xuICAgICAgICAgICAgICAgICAgICB0ZC5hcHBlbmRDaGlsZChwaWVjZURpdik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChib3guc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGQuc2V0QXR0cmlidXRlKCdjbGFzcycsICdzZWxlY3RlZCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoYm94LnBvc3NpYmxlRGVzdCkge1xuICAgICAgICAgICAgICAgICAgICB0ZC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ3Bvc3NpYmxlRGVzdCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0ci5hcHBlbmRDaGlsZCh0ZCk7XG4gICAgICAgICAgICAgICAgYm94UG9zKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBib2FyZC5hcHBlbmRDaGlsZCh0cik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGJvYXJkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAcGFyYW0geyFzdHJpbmd9IHR5cGUgXG4gICAgICogQHBhcmFtIHshQXJyYXk8UGllY2U+fSBjYXB0dXJlcyBcbiAgICAgKiBAcmV0dXJucyB7RWxlbWVudH1cbiAgICAgKi9cbiAgICBDYXB0dXJlZCh0eXBlOiBzdHJpbmcsIGNhcHR1cmVzOiBBcnJheTxQaWVjZT4pOiBFbGVtZW50IHtcbiAgICAgICAgbGV0IHRyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndHInKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjYXB0dXJlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgY29uc3QgcGllY2UgPSBjYXB0dXJlc1tpXTtcbiAgICAgICAgICAgIGlmIChwaWVjZS50aXRsZSAmJiBwaWVjZS50aXRsZS5pbmRleE9mKHR5cGUpID09IDApIHtcbiAgICAgICAgICAgICAgICBsZXQgdGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xuICAgICAgICAgICAgICAgIGxldCBwaWVjZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgIHBpZWNlRGl2LnNldEF0dHJpYnV0ZSgnY2xhc3MnLCBwaWVjZS50aXRsZSk7XG4gICAgICAgICAgICAgICAgaWYgKHBpZWNlLnNlbGVjdGVkQ2FwdHVyZSkge1xuICAgICAgICAgICAgICAgICAgICBwaWVjZURpdi5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgcGllY2UudGl0bGUgKyAnIHNlbGVjdGVkQ2FwdHVyZScpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0ZC5hcHBlbmRDaGlsZChwaWVjZURpdik7XG4gICAgICAgICAgICAgICAgdHIuYXBwZW5kQ2hpbGQodGQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHshQm9hcmR9IGJveGVzXG4gICAgICogQHJldHVybnMge0VsZW1lbnR9IFxuICAgICAqL1xuICAgIENhcHR1cmVkV2hpdGUoYm94ZXM6IEFycmF5PFBpZWNlPik6IEVsZW1lbnQge1xuICAgICAgICByZXR1cm4gdGhpcy5DYXB0dXJlZCgnd2hpdGUnLCBib3hlcyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB7IUJvYXJkfSBib3hlcyBcbiAgICAgKiBAcmV0dXJucyB7RWxlbWVudH1cbiAgICAgKi9cbiAgICBDYXB0dXJlZEJsYWNrKGJveGVzOiBBcnJheTxQaWVjZT4pOiBFbGVtZW50IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuQ2FwdHVyZWQoJ2JsYWNrJywgYm94ZXMpO1xuICAgIH1cbn0iLCIvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblxuLy8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0XG4vLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcbi8vIHdyYXBwZWQgaW4gc3RyaWN0IG1vZGUgY29kZSB3aGljaCBkb2Vzbid0IGRlZmluZSBhbnkgZ2xvYmFscy4gIEl0J3MgaW5zaWRlIGFcbi8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuXG5cbnZhciBjYWNoZWRTZXRUaW1lb3V0O1xudmFyIGNhY2hlZENsZWFyVGltZW91dDtcblxuZnVuY3Rpb24gZGVmYXVsdFNldFRpbW91dCgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRDbGVhclRpbWVvdXQgKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG4oZnVuY3Rpb24gKCkge1xuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2xlYXJUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgIH1cbn0gKCkpXG5mdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikge1xuICAgIGlmIChjYWNoZWRTZXRUaW1lb3V0ID09PSBzZXRUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICAvLyBpZiBzZXRUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkU2V0VGltZW91dCA9PT0gZGVmYXVsdFNldFRpbW91dCB8fCAhY2FjaGVkU2V0VGltZW91dCkgJiYgc2V0VGltZW91dCkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sIDApO1xuICAgIH0gY2F0Y2goZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwobnVsbCwgZnVuLCAwKTtcbiAgICAgICAgfSBjYXRjaChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yXG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKHRoaXMsIGZ1biwgMCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxufVxuZnVuY3Rpb24gcnVuQ2xlYXJUaW1lb3V0KG1hcmtlcikge1xuICAgIGlmIChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGNsZWFyVGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICAvLyBpZiBjbGVhclRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGRlZmF1bHRDbGVhclRpbWVvdXQgfHwgIWNhY2hlZENsZWFyVGltZW91dCkgJiYgY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCAgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLCBtYXJrZXIpO1xuICAgICAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yLlxuICAgICAgICAgICAgLy8gU29tZSB2ZXJzaW9ucyBvZiBJLkUuIGhhdmUgZGlmZmVyZW50IHJ1bGVzIGZvciBjbGVhclRpbWVvdXQgdnMgc2V0VGltZW91dFxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG59XG52YXIgcXVldWUgPSBbXTtcbnZhciBkcmFpbmluZyA9IGZhbHNlO1xudmFyIGN1cnJlbnRRdWV1ZTtcbnZhciBxdWV1ZUluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcbiAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgIH1cbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICAgIGRyYWluUXVldWUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG4gICAgaWYgKGRyYWluaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRpbWVvdXQgPSBydW5UaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG4gICAgZHJhaW5pbmcgPSB0cnVlO1xuXG4gICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZShsZW4pIHtcbiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG4gICAgICAgIHF1ZXVlID0gW107XG4gICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBydW5DbGVhclRpbWVvdXQodGltZW91dCk7XG59XG5cbnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcbiAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuICAgICAgICBydW5UaW1lb3V0KGRyYWluUXVldWUpO1xuICAgIH1cbn07XG5cbi8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcbmZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuICAgIHRoaXMuZnVuID0gZnVuO1xuICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbn1cbkl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcbn07XG5wcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcbnByb2Nlc3MuZW52ID0ge307XG5wcm9jZXNzLmFyZ3YgPSBbXTtcbnByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xucHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxucHJvY2Vzcy5vbiA9IG5vb3A7XG5wcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3Mub25jZSA9IG5vb3A7XG5wcm9jZXNzLm9mZiA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcbnByb2Nlc3MuZW1pdCA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRPbmNlTGlzdGVuZXIgPSBub29wO1xuXG5wcm9jZXNzLmxpc3RlbmVycyA9IGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBbXSB9XG5cbnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcblxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5wcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuIiwiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbi8vIHJlc29sdmVzIC4gYW5kIC4uIGVsZW1lbnRzIGluIGEgcGF0aCBhcnJheSB3aXRoIGRpcmVjdG9yeSBuYW1lcyB0aGVyZVxuLy8gbXVzdCBiZSBubyBzbGFzaGVzLCBlbXB0eSBlbGVtZW50cywgb3IgZGV2aWNlIG5hbWVzIChjOlxcKSBpbiB0aGUgYXJyYXlcbi8vIChzbyBhbHNvIG5vIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHNsYXNoZXMgLSBpdCBkb2VzIG5vdCBkaXN0aW5ndWlzaFxuLy8gcmVsYXRpdmUgYW5kIGFic29sdXRlIHBhdGhzKVxuZnVuY3Rpb24gbm9ybWFsaXplQXJyYXkocGFydHMsIGFsbG93QWJvdmVSb290KSB7XG4gIC8vIGlmIHRoZSBwYXRoIHRyaWVzIHRvIGdvIGFib3ZlIHRoZSByb290LCBgdXBgIGVuZHMgdXAgPiAwXG4gIHZhciB1cCA9IDA7XG4gIGZvciAodmFyIGkgPSBwYXJ0cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgIHZhciBsYXN0ID0gcGFydHNbaV07XG4gICAgaWYgKGxhc3QgPT09ICcuJykge1xuICAgICAgcGFydHMuc3BsaWNlKGksIDEpO1xuICAgIH0gZWxzZSBpZiAobGFzdCA9PT0gJy4uJykge1xuICAgICAgcGFydHMuc3BsaWNlKGksIDEpO1xuICAgICAgdXArKztcbiAgICB9IGVsc2UgaWYgKHVwKSB7XG4gICAgICBwYXJ0cy5zcGxpY2UoaSwgMSk7XG4gICAgICB1cC0tO1xuICAgIH1cbiAgfVxuXG4gIC8vIGlmIHRoZSBwYXRoIGlzIGFsbG93ZWQgdG8gZ28gYWJvdmUgdGhlIHJvb3QsIHJlc3RvcmUgbGVhZGluZyAuLnNcbiAgaWYgKGFsbG93QWJvdmVSb290KSB7XG4gICAgZm9yICg7IHVwLS07IHVwKSB7XG4gICAgICBwYXJ0cy51bnNoaWZ0KCcuLicpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBwYXJ0cztcbn1cblxuLy8gU3BsaXQgYSBmaWxlbmFtZSBpbnRvIFtyb290LCBkaXIsIGJhc2VuYW1lLCBleHRdLCB1bml4IHZlcnNpb25cbi8vICdyb290JyBpcyBqdXN0IGEgc2xhc2gsIG9yIG5vdGhpbmcuXG52YXIgc3BsaXRQYXRoUmUgPVxuICAgIC9eKFxcLz98KShbXFxzXFxTXSo/KSgoPzpcXC57MSwyfXxbXlxcL10rP3wpKFxcLlteLlxcL10qfCkpKD86W1xcL10qKSQvO1xudmFyIHNwbGl0UGF0aCA9IGZ1bmN0aW9uKGZpbGVuYW1lKSB7XG4gIHJldHVybiBzcGxpdFBhdGhSZS5leGVjKGZpbGVuYW1lKS5zbGljZSgxKTtcbn07XG5cbi8vIHBhdGgucmVzb2x2ZShbZnJvbSAuLi5dLCB0bylcbi8vIHBvc2l4IHZlcnNpb25cbmV4cG9ydHMucmVzb2x2ZSA9IGZ1bmN0aW9uKCkge1xuICB2YXIgcmVzb2x2ZWRQYXRoID0gJycsXG4gICAgICByZXNvbHZlZEFic29sdXRlID0gZmFsc2U7XG5cbiAgZm9yICh2YXIgaSA9IGFyZ3VtZW50cy5sZW5ndGggLSAxOyBpID49IC0xICYmICFyZXNvbHZlZEFic29sdXRlOyBpLS0pIHtcbiAgICB2YXIgcGF0aCA9IChpID49IDApID8gYXJndW1lbnRzW2ldIDogcHJvY2Vzcy5jd2QoKTtcblxuICAgIC8vIFNraXAgZW1wdHkgYW5kIGludmFsaWQgZW50cmllc1xuICAgIGlmICh0eXBlb2YgcGF0aCAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50cyB0byBwYXRoLnJlc29sdmUgbXVzdCBiZSBzdHJpbmdzJyk7XG4gICAgfSBlbHNlIGlmICghcGF0aCkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgcmVzb2x2ZWRQYXRoID0gcGF0aCArICcvJyArIHJlc29sdmVkUGF0aDtcbiAgICByZXNvbHZlZEFic29sdXRlID0gcGF0aC5jaGFyQXQoMCkgPT09ICcvJztcbiAgfVxuXG4gIC8vIEF0IHRoaXMgcG9pbnQgdGhlIHBhdGggc2hvdWxkIGJlIHJlc29sdmVkIHRvIGEgZnVsbCBhYnNvbHV0ZSBwYXRoLCBidXRcbiAgLy8gaGFuZGxlIHJlbGF0aXZlIHBhdGhzIHRvIGJlIHNhZmUgKG1pZ2h0IGhhcHBlbiB3aGVuIHByb2Nlc3MuY3dkKCkgZmFpbHMpXG5cbiAgLy8gTm9ybWFsaXplIHRoZSBwYXRoXG4gIHJlc29sdmVkUGF0aCA9IG5vcm1hbGl6ZUFycmF5KGZpbHRlcihyZXNvbHZlZFBhdGguc3BsaXQoJy8nKSwgZnVuY3Rpb24ocCkge1xuICAgIHJldHVybiAhIXA7XG4gIH0pLCAhcmVzb2x2ZWRBYnNvbHV0ZSkuam9pbignLycpO1xuXG4gIHJldHVybiAoKHJlc29sdmVkQWJzb2x1dGUgPyAnLycgOiAnJykgKyByZXNvbHZlZFBhdGgpIHx8ICcuJztcbn07XG5cbi8vIHBhdGgubm9ybWFsaXplKHBhdGgpXG4vLyBwb3NpeCB2ZXJzaW9uXG5leHBvcnRzLm5vcm1hbGl6ZSA9IGZ1bmN0aW9uKHBhdGgpIHtcbiAgdmFyIGlzQWJzb2x1dGUgPSBleHBvcnRzLmlzQWJzb2x1dGUocGF0aCksXG4gICAgICB0cmFpbGluZ1NsYXNoID0gc3Vic3RyKHBhdGgsIC0xKSA9PT0gJy8nO1xuXG4gIC8vIE5vcm1hbGl6ZSB0aGUgcGF0aFxuICBwYXRoID0gbm9ybWFsaXplQXJyYXkoZmlsdGVyKHBhdGguc3BsaXQoJy8nKSwgZnVuY3Rpb24ocCkge1xuICAgIHJldHVybiAhIXA7XG4gIH0pLCAhaXNBYnNvbHV0ZSkuam9pbignLycpO1xuXG4gIGlmICghcGF0aCAmJiAhaXNBYnNvbHV0ZSkge1xuICAgIHBhdGggPSAnLic7XG4gIH1cbiAgaWYgKHBhdGggJiYgdHJhaWxpbmdTbGFzaCkge1xuICAgIHBhdGggKz0gJy8nO1xuICB9XG5cbiAgcmV0dXJuIChpc0Fic29sdXRlID8gJy8nIDogJycpICsgcGF0aDtcbn07XG5cbi8vIHBvc2l4IHZlcnNpb25cbmV4cG9ydHMuaXNBYnNvbHV0ZSA9IGZ1bmN0aW9uKHBhdGgpIHtcbiAgcmV0dXJuIHBhdGguY2hhckF0KDApID09PSAnLyc7XG59O1xuXG4vLyBwb3NpeCB2ZXJzaW9uXG5leHBvcnRzLmpvaW4gPSBmdW5jdGlvbigpIHtcbiAgdmFyIHBhdGhzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKTtcbiAgcmV0dXJuIGV4cG9ydHMubm9ybWFsaXplKGZpbHRlcihwYXRocywgZnVuY3Rpb24ocCwgaW5kZXgpIHtcbiAgICBpZiAodHlwZW9mIHAgIT09ICdzdHJpbmcnKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudHMgdG8gcGF0aC5qb2luIG11c3QgYmUgc3RyaW5ncycpO1xuICAgIH1cbiAgICByZXR1cm4gcDtcbiAgfSkuam9pbignLycpKTtcbn07XG5cblxuLy8gcGF0aC5yZWxhdGl2ZShmcm9tLCB0bylcbi8vIHBvc2l4IHZlcnNpb25cbmV4cG9ydHMucmVsYXRpdmUgPSBmdW5jdGlvbihmcm9tLCB0bykge1xuICBmcm9tID0gZXhwb3J0cy5yZXNvbHZlKGZyb20pLnN1YnN0cigxKTtcbiAgdG8gPSBleHBvcnRzLnJlc29sdmUodG8pLnN1YnN0cigxKTtcblxuICBmdW5jdGlvbiB0cmltKGFycikge1xuICAgIHZhciBzdGFydCA9IDA7XG4gICAgZm9yICg7IHN0YXJ0IDwgYXJyLmxlbmd0aDsgc3RhcnQrKykge1xuICAgICAgaWYgKGFycltzdGFydF0gIT09ICcnKSBicmVhaztcbiAgICB9XG5cbiAgICB2YXIgZW5kID0gYXJyLmxlbmd0aCAtIDE7XG4gICAgZm9yICg7IGVuZCA+PSAwOyBlbmQtLSkge1xuICAgICAgaWYgKGFycltlbmRdICE9PSAnJykgYnJlYWs7XG4gICAgfVxuXG4gICAgaWYgKHN0YXJ0ID4gZW5kKSByZXR1cm4gW107XG4gICAgcmV0dXJuIGFyci5zbGljZShzdGFydCwgZW5kIC0gc3RhcnQgKyAxKTtcbiAgfVxuXG4gIHZhciBmcm9tUGFydHMgPSB0cmltKGZyb20uc3BsaXQoJy8nKSk7XG4gIHZhciB0b1BhcnRzID0gdHJpbSh0by5zcGxpdCgnLycpKTtcblxuICB2YXIgbGVuZ3RoID0gTWF0aC5taW4oZnJvbVBhcnRzLmxlbmd0aCwgdG9QYXJ0cy5sZW5ndGgpO1xuICB2YXIgc2FtZVBhcnRzTGVuZ3RoID0gbGVuZ3RoO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGZyb21QYXJ0c1tpXSAhPT0gdG9QYXJ0c1tpXSkge1xuICAgICAgc2FtZVBhcnRzTGVuZ3RoID0gaTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHZhciBvdXRwdXRQYXJ0cyA9IFtdO1xuICBmb3IgKHZhciBpID0gc2FtZVBhcnRzTGVuZ3RoOyBpIDwgZnJvbVBhcnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgb3V0cHV0UGFydHMucHVzaCgnLi4nKTtcbiAgfVxuXG4gIG91dHB1dFBhcnRzID0gb3V0cHV0UGFydHMuY29uY2F0KHRvUGFydHMuc2xpY2Uoc2FtZVBhcnRzTGVuZ3RoKSk7XG5cbiAgcmV0dXJuIG91dHB1dFBhcnRzLmpvaW4oJy8nKTtcbn07XG5cbmV4cG9ydHMuc2VwID0gJy8nO1xuZXhwb3J0cy5kZWxpbWl0ZXIgPSAnOic7XG5cbmV4cG9ydHMuZGlybmFtZSA9IGZ1bmN0aW9uKHBhdGgpIHtcbiAgdmFyIHJlc3VsdCA9IHNwbGl0UGF0aChwYXRoKSxcbiAgICAgIHJvb3QgPSByZXN1bHRbMF0sXG4gICAgICBkaXIgPSByZXN1bHRbMV07XG5cbiAgaWYgKCFyb290ICYmICFkaXIpIHtcbiAgICAvLyBObyBkaXJuYW1lIHdoYXRzb2V2ZXJcbiAgICByZXR1cm4gJy4nO1xuICB9XG5cbiAgaWYgKGRpcikge1xuICAgIC8vIEl0IGhhcyBhIGRpcm5hbWUsIHN0cmlwIHRyYWlsaW5nIHNsYXNoXG4gICAgZGlyID0gZGlyLnN1YnN0cigwLCBkaXIubGVuZ3RoIC0gMSk7XG4gIH1cblxuICByZXR1cm4gcm9vdCArIGRpcjtcbn07XG5cblxuZXhwb3J0cy5iYXNlbmFtZSA9IGZ1bmN0aW9uKHBhdGgsIGV4dCkge1xuICB2YXIgZiA9IHNwbGl0UGF0aChwYXRoKVsyXTtcbiAgLy8gVE9ETzogbWFrZSB0aGlzIGNvbXBhcmlzb24gY2FzZS1pbnNlbnNpdGl2ZSBvbiB3aW5kb3dzP1xuICBpZiAoZXh0ICYmIGYuc3Vic3RyKC0xICogZXh0Lmxlbmd0aCkgPT09IGV4dCkge1xuICAgIGYgPSBmLnN1YnN0cigwLCBmLmxlbmd0aCAtIGV4dC5sZW5ndGgpO1xuICB9XG4gIHJldHVybiBmO1xufTtcblxuXG5leHBvcnRzLmV4dG5hbWUgPSBmdW5jdGlvbihwYXRoKSB7XG4gIHJldHVybiBzcGxpdFBhdGgocGF0aClbM107XG59O1xuXG5mdW5jdGlvbiBmaWx0ZXIgKHhzLCBmKSB7XG4gICAgaWYgKHhzLmZpbHRlcikgcmV0dXJuIHhzLmZpbHRlcihmKTtcbiAgICB2YXIgcmVzID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB4cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoZih4c1tpXSwgaSwgeHMpKSByZXMucHVzaCh4c1tpXSk7XG4gICAgfVxuICAgIHJldHVybiByZXM7XG59XG5cbi8vIFN0cmluZy5wcm90b3R5cGUuc3Vic3RyIC0gbmVnYXRpdmUgaW5kZXggZG9uJ3Qgd29yayBpbiBJRThcbnZhciBzdWJzdHIgPSAnYWInLnN1YnN0cigtMSkgPT09ICdiJ1xuICAgID8gZnVuY3Rpb24gKHN0ciwgc3RhcnQsIGxlbikgeyByZXR1cm4gc3RyLnN1YnN0cihzdGFydCwgbGVuKSB9XG4gICAgOiBmdW5jdGlvbiAoc3RyLCBzdGFydCwgbGVuKSB7XG4gICAgICAgIGlmIChzdGFydCA8IDApIHN0YXJ0ID0gc3RyLmxlbmd0aCArIHN0YXJ0O1xuICAgICAgICByZXR1cm4gc3RyLnN1YnN0cihzdGFydCwgbGVuKTtcbiAgICB9XG47XG4iXSwic291cmNlUm9vdCI6IiJ9