!function(e){var t={};function r(o){if(t[o])return t[o].exports;var s=t[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(o,s,function(t){return e[t]}.bind(null,s));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";r.r(t);class o{constructor(e="blank"){this.name="empty",this.color=e,this.getPossibleMoves=((e,t,r)=>{return e=>!1})}}class s{get board(){return Object.assign([],this._board)}get rankCount(){return this._board.length}get fileCount(){return this._board[0].length>0?this._board[0].length:1}constructor(e){this._board=e instanceof s?e._board:e||[["r0","h0","b0","q0","k0","b0","h0","r0"],["p0","p0","p0","p0","p0","p0","p0","p0"],[" "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "],["P0","P0","P0","P0","P0","P0","P0","P0"],["R0","H0","B0","Q0","K0","B0","H0","R0"]],this.getEncoding=(e=>this._board[e.r][e.c]),this.setEncoding=((e,t)=>{e.r>-1&&e.r<this._board.length&&e.c>-1&&e.c<this._board[0].length&&(this._board[e.r][e.c]=t)})}}class n{get player(){return this._player}set player(e){this._player=e}get board(){return this._board.board}constructor(e){this._board=new s(e),this.getEncoding=(e=>this._board.getEncoding(e)),this._player=c,this.rankCount=this._board.rankCount,this.fileCount=this._board.fileCount}}class i{array2d(e,t){const r=[];for(let o=0;o<e;o++){r.push([]);for(let s=0;s<e;s++)r[o].push(t)}return r}initializeFalseGrid(e){return this.array2d(e,!1)}constructor(e){this.gameState=e?e.gameState:new n,this.selectedBoxes=e?e.selectedBoxes:this.initializeFalseGrid(8),this.possibleDestBoxes=e?e.possibleDestBoxes:this.initializeFalseGrid(8),this.prevMove=e?e.prevMove:{src:{r:-1,c:-1},dst:{r:-1,c:-1}},this.captures=e?e.captures:[],this.selectedCaptures=e?e.selectedCaptures:[],this.board=e?e.board:[]}}const c=0,a=1;class l{constructor(){this._state=new i}get state(){return this._state}set state(e){this._state.gameState=e.gameState?e.gameState:this._state.gameState,this._state.board=e.board?e.board:this._state.board,this._state.selectedBoxes=e.selectedBoxes?e.selectedBoxes:this._state.selectedBoxes,this._state.possibleDestBoxes=e.possibleDestBoxes?e.possibleDestBoxes:this._state.possibleDestBoxes,this._state.prevMove=e.prevMove?e.prevMove:this._state.prevMove,this._state.captures=e.captures?e.captures:this._state.captures,this._state.selectedCaptures=e.selectedCaptures?e.selectedCaptures:this._state.selectedCaptures}}function u(e,t){return(t||document).querySelector(e)}function d(e,t,r,o){e.addEventListener(t,r,!!o)}class h{Board(e){const t=e.board;let r=document.createElement("board"),o=0;for(let s=0;s<8;s++){let n=document.createElement("tr");for(let r=0;r<8;r++){let i=document.createElement("td");i.setAttribute("data-pos",String(o));const c=t[s][r];if(i.setAttribute("piece",JSON.stringify(c)),c){let e=document.createElement("div");e.setAttribute("class",c.color+c.name),i.appendChild(e)}e.selectedBoxes[s][r]&&i.setAttribute("class","selected"),e.possibleDestBoxes[s][r]&&i.setAttribute("class","possibleDest"),n.appendChild(i),o++}r.appendChild(n)}return r}Captured(e,t){const r=t.captures,o=t.selectedCaptures;let s=document.createElement("tr");for(let t=0;t<r.length;t++){const n=r[t];if(n.color&&0==n.color.indexOf(e)){let e=document.createElement("td"),r=document.createElement("div");r.setAttribute("class",n.color+n.name),o[t]&&r.setAttribute("class",n.color+n.name+" selectedCapture"),e.appendChild(r),s.appendChild(e)}}return s}CapturedWhite(e){return this.Captured("white",e)}CapturedBlack(e){return this.Captured("black",e)}}class g{constructor(){this._template=new h,this._$board=u(".chessboard"),this._$capturedwhite=u(".capturedwhite"),this._$capturedblack=u(".capturedblack"),this._$main=u(".main"),this._$undobtn=u(".undo"),this._$redobtn=u(".redo")}get $board(){return this._$board}get $capturedwhite(){return this._$capturedwhite}get $capturedblack(){return this._$capturedblack}showBoard(e){this.$board.replaceChild(this._template.Board(e),this.$board.firstChild)}showCaptures(e){this.$capturedwhite.replaceChild(this._template.CapturedWhite(e),this.$capturedwhite.firstChild),this.$capturedblack.replaceChild(this._template.CapturedBlack(e),this.$capturedblack.firstChild)}bindSelectBox(e,t){d(e,"click",()=>t(e))}bindCapturedPiece(e,t,r){d(e,"click",()=>r(e,t))}bindUndoMove(e){}bindRedoMove(e){}}r(2);const p={getNumMoves:(e,t)=>-1,isEmpty:(e,t)=>!1,isPieceOfGivenPlayer:(e,t,r)=>!1,isPieceOfCurrentPlayer:(e,t)=>!1,isBoxOnBoard:(e,t)=>!1,isValidSourceAndDest:(e,t,r)=>!1,canGoAlongRowToDest:(e,t,r)=>!1,canGoAlongColToDest:(e,t,r)=>!1,canGoAlongLineToDest:(e,t,r)=>!1,canGoAlongDiagonalToDest:(e,t,r)=>!1};p.getNumMoves=((e,t)=>{let r=e.getEncoding(t).match(/([a-zA-z])(\d*)/);return r&&r.length>2&&!isNaN(Number(r[2]))?Number(r[2]):-1}),p.isEmpty=((e,t)=>""===e.getEncoding(t).trim()),p.isPieceOfGivenPlayer=((e,t,r)=>{let o=e.getEncoding(r).match(/([a-zA-z])(\d*)/),s=o.length>1?o[1]:null;return!!s&&(t==c&&s==s.toUpperCase()||t==a&&s==s.toLowerCase())}),p.isPieceOfCurrentPlayer=((e,t)=>{const r=(r,{c:o,r:s}=t)=>e.getEncoding(t)===r.apply(e.getEncoding(t))&&!p.isEmpty(e,t);return e.player===c?r(String.prototype.toUpperCase):r(String.prototype.toLowerCase)}),p.isBoxOnBoard=((e,t)=>t.r<e.rankCount&&t.r>=0&&t.c>=0&&t.c<e.fileCount),p.isValidSourceAndDest=((e,t,r)=>p.isPieceOfCurrentPlayer(e,t)&&!p.isPieceOfCurrentPlayer(e,r)&&p.isBoxOnBoard(e,r)&&t!=r),p.canGoAlongRowToDest=((e,t,r)=>{if(t.r==r.r){const o=r.c>t.c?1:-1;let s=Math.abs(r.c-t.c);for(let r=t.c+o;s-- >1;r+=o)if(!p.isEmpty(e,{r:t.r,c:r}))return!1;return!0}return!1}),p.canGoAlongColToDest=((e,t,r)=>{if(t.c==r.c){const o=r.r>t.r?1:-1;let s=Math.abs(r.r-t.r);for(let r=t.r+o;s-- >1;r+=o)if(!p.isEmpty(e,{r:r,c:t.c}))return!1;return!0}return!1}),p.canGoAlongLineToDest=((e,t,r)=>p.canGoAlongColToDest(e,t,r)||p.canGoAlongRowToDest(e,t,r)),p.canGoAlongDiagonalToDest=((e,t,r)=>{if(1!=Math.abs((r.r-t.r)/(r.c-t.c)))return!1;let o=Math.abs(r.c-t.c);const s=r.r-t.r>0?1:-1,n=r.c-t.c>0?1:-1;let i=t.r+s,c=t.c+n;for(;o-- >1;i+=s,c+=n)if(!p.isEmpty(e,{r:i,c:c}))return!1;return!0});class f{constructor(e){this.name="pawn",this.color=e,this.getPossibleMoves=((e,t,r)=>{void 0===r&&(r=p.getNumMoves(e,t));return o=>{if(!p.isValidSourceAndDest(e,t,o))return!1;const s=e.player==c?-1:1,n=p.isEmpty(e,o)&&t.c==o.c&&o.r==t.r+s,i={r:t.r+s,c:o.c},a=0==r&&p.isEmpty(e,o)&&p.isEmpty(e,i)&&t.c==o.c&&o.r==t.r+2*s,l=!(p.isPieceOfCurrentPlayer(e,o)||p.isEmpty(e,o)||o.r!=t.r+s||o.c!=t.c+1&&o.c!=t.c-1);return(n||a||l)&&!p.isPieceOfCurrentPlayer(e,o)}})}}class b{constructor(e){this.name="rook",this.color=e,this.getPossibleMoves=((e,t,r)=>{return r=>!!p.isValidSourceAndDest(e,t,r)&&(p.canGoAlongRowToDest(e,t,r)||p.canGoAlongColToDest(e,t,r))})}}class m{constructor(e){this.name="knight",this.color=e,this.getPossibleMoves=((e,t,r)=>{return r=>!(!p.isValidSourceAndDest(e,t,r)||!(1==Math.abs(t.r-r.r)&&2==Math.abs(t.c-r.c)||1==Math.abs(t.c-r.c)&&2==Math.abs(t.r-r.r)))})}}class v{constructor(e){this.name="bishop",this.color=e,this.getPossibleMoves=function(e,t,r){return r=>!!p.isValidSourceAndDest(e,t,r)&&p.canGoAlongDiagonalToDest(e,t,r)}}}class P{constructor(e){this.name="queen",this.color=e,this.getPossibleMoves=((e,t,r)=>{return r=>!!p.isValidSourceAndDest(e,t,r)&&(p.canGoAlongRowToDest(e,t,r)||p.canGoAlongColToDest(e,t,r)||p.canGoAlongDiagonalToDest(e,t,r))})}}class w{constructor(e,t){this.name="king",this.color=e,this.getPossibleSpecialMoves=t,this.getPossibleMoves=((e,t,r)=>{return r=>!(!p.isValidSourceAndDest(e,t,r)||1!=Math.abs(r.c-t.c)&&1!=Math.abs(r.r-t.r))&&(p.canGoAlongRowToDest(e,t,r)||p.canGoAlongColToDest(e,t,r)||p.canGoAlongDiagonalToDest(e,t,r))})}}const C={convertGSBoardToPieceBoard:e=>[],convertPieceToStringEncoding:(e,t)=>"",getType:e=>new o,getNumMoves:e=>-1,getPossiblePiecesToPromoteTo:(e,t)=>[],getPossibleMoves:(e,t,r)=>[{r:-1,c:-1}],isPossibleToMoveTo:(e,t)=>e=>!1,isInCheck:(e,t)=>!1,isInCheckmate:(e,t)=>!1,kingCanCastleWithGivenRook:(e,t,r)=>!1,castleKingWithGivenRook:(e,t,r)=>e,getSetOfAllPossibleMovesForPlayer:(e,t)=>new Set,randomDefensiveMove:e=>new Set,isACapture:(e,t,r)=>!1,isEnPassantPossible:(e,t,r)=>!1,getBoxOfPromotablePieceIfPossible:e=>({r:-1,c:-1}),promoteIfPossible:(e,t,r)=>e,incrementMoveCount:e=>"",makeLegalMove:(e,t,r,s,n)=>({gameState:e,capturedPiece:new o,wasPromotion:!1})};C.convertGSBoardToPieceBoard=(e=>{const t=[];for(let r=0;r<e.rankCount;r++){t.push([]);for(let o=0;o<e.fileCount;o++)t[r].push(C.getType(e.getEncoding({r:r,c:o})))}return t}),C.convertPieceToStringEncoding=((e,t=0)=>{let r="";return e instanceof f&&(r="white"===e.color?"P":"p"),e instanceof b&&(r="white"===e.color?"R":"r"),e instanceof m&&(r="white"===e.color?"H":"h"),e instanceof v&&(r="white"===e.color?"B":"b"),e instanceof P&&(r="white"===e.color?"Q":"q"),e instanceof w&&(r="white"===e.color?"K":"k"),r=r?r+t:r}),C.getType=(e=>{if(""===e.trim())return new o;let t=e.match(/([a-zA-z])(\d*)/),r=t&&t.length>2?Number(t[2]):void 0,s=t.length>1?t[1]:void 0;if(void 0===r||void 0===s)return new o;switch(s.trim()){case"p":return new f("black");case"r":return new b("black");case"h":return new m("black");case"b":return new v("black");case"q":return new P("black");case"k":return new w("black",C.kingCanCastleWithGivenRook);case"P":return new f("white");case"R":return new b("white");case"H":return new m("white");case"B":return new v("white");case"Q":return new P("white");case"K":return new w("white",C.kingCanCastleWithGivenRook);case"":default:return new o}}),C.getNumMoves=(e=>{const t=e.match(/([a-zA-z])(\d*)/);return t&&t.length>2&&!Number.isNaN(Number(t[2]))?Number(t[2]):-1}),C.getPossiblePiecesToPromoteTo=((e,t)=>{const r=[];if(void 0!==C.getBoxOfPromotablePieceIfPossible(e)){const s=C.getType(e.getEncoding(t));for(let t=0;t<e.rankCount;t++)for(let n=0;n<e.fileCount;n++){const i={r:t,c:n},c=C.getType(e.getEncoding({r:t,c:n}));s.color!==c.color||c instanceof f||c instanceof w||c instanceof o||r.push(i)}}return r}),C.getPossibleMoves=((e,t,r)=>{const o=C.getPossiblePiecesToPromoteTo(e,t);if(o.length>0)return o;const s=e.getEncoding(t),n=C.getNumMoves(s),i=C.getType(s);if(i&&!isNaN(n)){const o=((e,t,r,o)=>{const s=[],n="function"==typeof r.getPossibleMoves?r.getPossibleMoves(e,t,o):e=>!1;if(!n)return s;for(let t=0;t<e.rankCount;t++)for(let r=0;r<e.fileCount;r++)n({r:t,c:r})&&s.push({r:t,c:r});return s})(e,t,i,n);if(C.getType(e.getEncoding(t))instanceof w&&(C.kingCanCastleWithGivenRook(e,t,{r:t.r,c:0})&&o.push({r:t.r,c:0}),C.kingCanCastleWithGivenRook(e,t,{r:t.r,c:e.fileCount-1})&&o.push({r:t.r,c:e.fileCount-1})),C.getType(e.getEncoding(t))instanceof f)if(void 0===r)console.warn("PieceGameLogic.getPossibleMoves should be passed prevMove as last parameter! Please refactor, else En Passante will not work.");else if(C.isEnPassantPossible(e,t,r)){const e=r.dst.c-r.src.c>0?1:-1;o.push({r:t.r+e,c:r.dst.c})}return o}return[]}),C.isPossibleToMoveTo=((e,t)=>{const r=e.getEncoding(t);C.getNumMoves(r);return C.getType(r).getPossibleMoves(e,t)}),C.isInCheck=((e,t)=>{for(let r=0;r<e.rankCount;r++)for(let o=0;o<e.fileCount;o++)if(t.r!=r&&t.c!=o){const s=C.getPossibleMoves(e,{r:r,c:o});for(let e=0;e<s.length;e++)if(s[e].r==t.r&&s[e].c==t.c)return!0}return!1}),C.isInCheckmate=((e,t)=>{const r=C.getPossibleMoves(e,t);if(C.isInCheck(e,t)){let t=!0;for(let o=0;o<r.length;o++)t=t&&C.isInCheck(e,r[o]);if(t)return!0}return!1}),C.kingCanCastleWithGivenRook=((e,t,r)=>{const o=e.getEncoding(t),s=e.getEncoding(r);if(C.getType(o).name!=new w("").name||C.getType(s).name!=new b("").name||0!=C.getNumMoves(o)||0!=C.getNumMoves(s))return!1;if(p.isPieceOfCurrentPlayer(e,t)&&p.isPieceOfCurrentPlayer(e,r)&&p.isBoxOnBoard(e,r)&&t!=r){let o=r.c-t.c>0?1:-1,s=Math.abs(r.c-t.c);for(let r=t.c+o;s-- >1;r+=o)if(!p.isEmpty(e,{r:t.r,c:r}))return!1;return!0}}),C.castleKingWithGivenRook=((e,t,r)=>{if(!C.kingCanCastleWithGivenRook(e,t,r))return e;const o=new s(e.board);o.setEncoding(t,C.incrementMoveCount(e.getEncoding(t)));let i=r.c-t.c>0?1:-1,c=0;return 3==Math.abs(r.c-t.c)?c=2:4==Math.abs(r.c-t.c)&&(c=3),o.setEncoding({r:t.r,c:t.c+i*c},e.getEncoding(t)),o.setEncoding(t," "),o.setEncoding({r:r.r,c:r.c-i*c},e.getEncoding(r)),o.setEncoding(r," "),new n(o)}),C.getSetOfAllPossibleMovesForPlayer=((e,t)=>{let r=new Set;for(let o=0;o<e.rankCount;o++)for(let s=0;s<e.fileCount;s++)if(!p.isPieceOfGivenPlayer(e,t,{r:o,c:s})&&!p.isEmpty(e,{r:o,c:s})){const t=C.getPossibleMoves(e,{r:o,c:s});for(let e=0;e<t.length;e++)r.add(t[e])}return r}),C.randomDefensiveMove=(e=>{const t=0==e.player?1:0;return C.getSetOfAllPossibleMovesForPlayer(e,t)}),C.isACapture=((e,t,r)=>{const o=e.getEncoding(t),s=C.getNumMoves(o),n=C.getType(o);if("function"==typeof n.getPossibleMoves&&!isNaN(s)){if(n.getPossibleMoves(e,t,s)(r)&&!p.isPieceOfCurrentPlayer(e,r)&&!p.isEmpty(e,r))return!0}return!1}),C.isEnPassantPossible=((e,t,r)=>{const o=r.dst.r-r.src.r>0?1:6;r.dst.r,r.src.r;return C.getType(e.getEncoding(t))instanceof f&&2===Math.abs(r.dst.r-r.src.r)&&r.dst.r===t.r&&o===r.src.r&&C.getType(e.getEncoding(r.dst))instanceof f&&!p.isPieceOfCurrentPlayer(e,r.dst)}),C.getBoxOfPromotablePieceIfPossible=(e=>{const t=t=>{for(let r=0;r<e.rankCount;r++)if(C.getType(e.getEncoding({r:t,c:r}))instanceof f)return{r:t,c:r}};return t(0)||t(e.rankCount-1)}),C.promoteIfPossible=((e,t,r)=>{const i=C.getBoxOfPromotablePieceIfPossible(e),c=new s(e.board);return void 0===i||i.r!==t.r||i.c!==t.c||r instanceof f||r instanceof w||r instanceof o||C.getType(e.getEncoding(t)).color!==r.color||c.setEncoding(t,C.convertPieceToStringEncoding(r)),new n(c)}),C.incrementMoveCount=(e=>{const t=e.trim().match(/\w/g)?e.trim().match(/\w/g)[0]:"",r=e.trim().match(/(\d+)/g)?Number(e.trim().match(/(\d+)/g)[0]):0;return t+Number(r+1)}),C.makeLegalMove=((e,t,r,i,c)=>{if(void 0!==C.getBoxOfPromotablePieceIfPossible(e))return void 0===c&&(c=C.getType(e.getEncoding(r))),{gameState:C.promoteIfPossible(e,t,c),capturedPiece:new o,wasPromotion:!0};if(C.kingCanCastleWithGivenRook(e,t,r))return{gameState:C.castleKingWithGivenRook(e,t,r),capturedPiece:new o,wasPromotion:!1};const a=o=>{const i=o?C.getType(e.getEncoding(o)):C.getType(e.getEncoding(r)),c=new s(e.board);return o&&c.setEncoding(o," "),c.setEncoding(r,C.incrementMoveCount(e.getEncoding(t))),c.setEncoding(t," "),{gameState:new n(c),capturedPiece:i,wasPromotion:!1}};if(C.isEnPassantPossible(e,t,i)){const e=i.dst.r-i.src.r>0?-1:1,o={r:t.r+e,c:i.dst.c};if(r.r===o.r&&r.c===o.c)return a(i.dst)}const l=C.getPossibleMoves(e,t,i);for(let t=0;t<l.length;t++){const o=l[t];if(r.r===o.r&&r.c===o.c&&!p.isPieceOfCurrentPlayer(e,r))return a()}return{gameState:e,capturedPiece:new o,wasPromotion:!1}});const y=e=>{let t=Number(e.getAttribute("data-pos"));return{box:{r:Math.floor(t/8),c:t%8},piece:JSON.parse(e.getAttribute("piece"))}};new class{createAndShowInitialBoard(){const e=new i;e.board=C.convertGSBoardToPieceBoard(e.gameState),this.store.state=e,this.showBoardAndBindBoxes()}setStoreState(e){e.board=C.convertGSBoardToPieceBoard(e.gameState),this.store.state=e}constructor(){this.store=new l,this.view=new g,this._selectedBox={box:{r:-1,c:-1},piece:new o},this._lastSelectedBox={box:{r:-1,c:-1},piece:new o},this._selectedCapturedPiece=new o,this.createAndShowInitialBoard()}showBoardAndBindBoxes(){this.view.showBoard(this.store.state);for(let e=0;e<8;e++)for(let t=0;t<8;t++){let r=this.view.$board.children[0].children[e].children[t];this.view.bindSelectBox(r,this.selectBox.bind(this))}}showAndBindCapturedPieces(){let e=this.store.state.captures;this.view.showCaptures(this.store.state);let t=0,r=0;for(let o=0;o<e.length;o++)if(e[o].color&&0==e[o].color.indexOf("black")){let e=this.view.$capturedblack.children[0].children[r++];void 0!=e&&this.view.bindCapturedPiece(e,o,this.selectCapturedPiece.bind(this))}else if(e[o].color&&0==e[o].color.indexOf("white")){let e=this.view.$capturedwhite.children[0].children[t++];void 0!=e&&this.view.bindCapturedPiece(e,o,this.selectCapturedPiece.bind(this))}}moveXorGetPossibleMoves(){if(!(this._lastSelectedBox.piece instanceof o)){const e=C.makeLegalMove(this.store.state.gameState,this._lastSelectedBox.box,this._selectedBox.box,this.store.state.prevMove,this._selectedCapturedPiece),t=new i(this.store.state);t.gameState=e.gameState;const r=e.capturedPiece;if(this.store.state.gameState!==t.gameState)t.possibleDestBoxes=this.store.state.initializeFalseGrid(8),t.prevMove={src:this._lastSelectedBox.box,dst:this._selectedBox.box},t.gameState.player=this.store.state.gameState.player===c?a:c,e.wasPromotion&&(t.gameState.player=t.gameState.player===c?a:c),r instanceof o||t.captures.push(r);else{const e=C.getPossibleMoves(this.store.state.gameState,this._selectedBox.box,this.store.state.prevMove);t.possibleDestBoxes=this.store.state.initializeFalseGrid(8),e.forEach(e=>{t.possibleDestBoxes[e.r][e.c]=!0})}this.setStoreState(t)}this._selectedCapturedPiece=void 0}selectBox(e){this._lastSelectedBox=this._selectedBox,this._selectedBox=y(e),this.showAndBindCapturedPieces(),this.showBoardAndBindBoxes(),this.moveXorGetPossibleMoves(),this.showAndBindCapturedPieces(),this.showBoardAndBindBoxes()}selectCapturedPiece(e,t){this._selectedCapturedPiece=this.store.state.captures[t],this.showAndBindCapturedPieces(),this.showBoardAndBindBoxes()}undoMove(){}redoMove(){}loadBoard(){}saveBoard(){}};u(".chessboard > board:nth-child(1) > tr:nth-child(7) > td:nth-child(5) > div:nth-child(1)").click()},function(e,t){var r,o,s=e.exports={};function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function c(e){if(r===setTimeout)return setTimeout(e,0);if((r===n||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:n}catch(e){r=n}try{o="function"==typeof clearTimeout?clearTimeout:i}catch(e){o=i}}();var a,l=[],u=!1,d=-1;function h(){u&&a&&(u=!1,a.length?l=a.concat(l):d=-1,l.length&&g())}function g(){if(!u){var e=c(h);u=!0;for(var t=l.length;t;){for(a=l,l=[];++d<t;)a&&a[d].run();d=-1,t=l.length}a=null,u=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===i||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function f(){}s.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new p(e,t)),1!==l.length||u||c(g)},p.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=f,s.addListener=f,s.once=f,s.off=f,s.removeListener=f,s.removeAllListeners=f,s.emit=f,s.prependListener=f,s.prependOnceListener=f,s.listeners=function(e){return[]},s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},function(e,t,r){(function(e){function r(e,t){for(var r=0,o=e.length-1;o>=0;o--){var s=e[o];"."===s?e.splice(o,1):".."===s?(e.splice(o,1),r++):r&&(e.splice(o,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}var o=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,s=function(e){return o.exec(e).slice(1)};function n(e,t){if(e.filter)return e.filter(t);for(var r=[],o=0;o<e.length;o++)t(e[o],o,e)&&r.push(e[o]);return r}t.resolve=function(){for(var t="",o=!1,s=arguments.length-1;s>=-1&&!o;s--){var i=s>=0?arguments[s]:e.cwd();if("string"!=typeof i)throw new TypeError("Arguments to path.resolve must be strings");i&&(t=i+"/"+t,o="/"===i.charAt(0))}return t=r(n(t.split("/"),function(e){return!!e}),!o).join("/"),(o?"/":"")+t||"."},t.normalize=function(e){var o=t.isAbsolute(e),s="/"===i(e,-1);return(e=r(n(e.split("/"),function(e){return!!e}),!o).join("/"))||o||(e="."),e&&s&&(e+="/"),(o?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(n(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},t.relative=function(e,r){function o(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=t.resolve(e).substr(1),r=t.resolve(r).substr(1);for(var s=o(e.split("/")),n=o(r.split("/")),i=Math.min(s.length,n.length),c=i,a=0;a<i;a++)if(s[a]!==n[a]){c=a;break}var l=[];for(a=c;a<s.length;a++)l.push("..");return(l=l.concat(n.slice(c))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){var t=s(e),r=t[0],o=t[1];return r||o?(o&&(o=o.substr(0,o.length-1)),r+o):"."},t.basename=function(e,t){var r=s(e)[2];return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},t.extname=function(e){return s(e)[3]};var i="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)}}).call(this,r(1))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3R5cGVzLnRzIiwid2VicGFjazovLy8uL3NyYy9zdG9yZS9zdG9yZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdmlldy9oZWxwZXJzLnRzIiwid2VicGFjazovLy8uL3NyYy92aWV3L3RlbXBsYXRlLnRzIiwid2VicGFjazovLy8uL3NyYy92aWV3L3ZpZXcudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVsL3BpZWNlaGVscGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbC9wYXduLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbC9yb29rLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbC9rbmlnaHQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVsL2Jpc2hvcC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWwvcXVlZW4udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVsL2tpbmcudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVsL3BpZWNlZ2FtZWxvZ2ljLnRzIiwid2VicGFjazovLy8uL3NyYy9jb250cm9sbGVyL2NvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FwcC50cyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9wYXRoLWJyb3dzZXJpZnkvaW5kZXguanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJFbXB0eVBpZWNlIiwiW29iamVjdCBPYmplY3RdIiwiY29sb3IiLCJ0aGlzIiwiZ2V0UG9zc2libGVNb3ZlcyIsImdhbWVTdGF0ZSIsInNyYyIsIm51bU1vdmVzIiwiZHN0IiwiQm9hcmQiLCJib2FyZCIsImFzc2lnbiIsIl9ib2FyZCIsInJhbmtDb3VudCIsImxlbmd0aCIsImZpbGVDb3VudCIsImdldEVuY29kaW5nIiwiYm94Iiwic2V0RW5jb2RpbmciLCJlbmMiLCJHYW1lU3RhdGUiLCJwbGF5ZXIiLCJfcGxheWVyIiwibmV3UGxheWVyIiwiUExBWUVSX1dISVRFIiwiU3RvcmVTdGF0ZSIsInYiLCJhcnIiLCJwdXNoIiwiaiIsImFycmF5MmQiLCJzdGF0ZSIsInNlbGVjdGVkQm94ZXMiLCJpbml0aWFsaXplRmFsc2VHcmlkIiwicG9zc2libGVEZXN0Qm94ZXMiLCJwcmV2TW92ZSIsImNhcHR1cmVzIiwic2VsZWN0ZWRDYXB0dXJlcyIsIlBMQVlFUl9CTEFDSyIsInN0b3JlX1N0b3JlIiwiX3N0YXRlIiwicXMiLCJzZWxlY3RvciIsInNjb3BlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiJG9uIiwidGFyZ2V0IiwidHlwZSIsImNhbGxiYWNrIiwiY2FwdHVyZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJUZW1wbGF0ZSIsInBpZWNlcyIsImNyZWF0ZUVsZW1lbnQiLCJib3hQb3MiLCJ0ciIsInRkIiwic2V0QXR0cmlidXRlIiwiU3RyaW5nIiwicGllY2UiLCJKU09OIiwic3RyaW5naWZ5IiwicGllY2VEaXYiLCJhcHBlbmRDaGlsZCIsImluZGV4T2YiLCJDYXB0dXJlZCIsInZpZXdfVmlldyIsIl90ZW1wbGF0ZSIsIl8kYm9hcmQiLCJfJGNhcHR1cmVkd2hpdGUiLCJfJGNhcHR1cmVkYmxhY2siLCJfJG1haW4iLCJfJHVuZG9idG4iLCJfJHJlZG9idG4iLCIkYm9hcmQiLCIkY2FwdHVyZWR3aGl0ZSIsIiRjYXB0dXJlZGJsYWNrIiwicmVwbGFjZUNoaWxkIiwiZmlyc3RDaGlsZCIsIkNhcHR1cmVkV2hpdGUiLCJDYXB0dXJlZEJsYWNrIiwiaGFuZGxlciIsIlBpZWNlSGVscGVyIiwiZ2V0TnVtTW92ZXMiLCJpc0VtcHR5IiwiaXNQaWVjZU9mR2l2ZW5QbGF5ZXIiLCJpc1BpZWNlT2ZDdXJyZW50UGxheWVyIiwiaXNCb3hPbkJvYXJkIiwiaXNWYWxpZFNvdXJjZUFuZERlc3QiLCJjYW5Hb0Fsb25nUm93VG9EZXN0IiwiY2FuR29BbG9uZ0NvbFRvRGVzdCIsImNhbkdvQWxvbmdMaW5lVG9EZXN0IiwiY2FuR29BbG9uZ0RpYWdvbmFsVG9EZXN0IiwiY29kZU1hdGNoIiwibWF0Y2giLCJpc05hTiIsIk51bWJlciIsInRyaW0iLCJhbHBoYWNvZGUiLCJ0b1VwcGVyQ2FzZSIsInRvTG93ZXJDYXNlIiwiY2hlY2tQYXJ0aWN1bGFyUGxheWVyIiwicGxheWVyQ2FzZSIsImFwcGx5IiwiZGlyIiwibGVuIiwiTWF0aCIsImFicyIsInJvd0RpciIsImNvbERpciIsInBhd25fUGF3biIsInVuZGVmaW5lZCIsInBhd25DYW5Nb3ZlMUZvcndhcmQiLCJpbkJldHdlZW5TcXVhcmUiLCJwYXduQ2FuTW92ZTJGb3J3YXJkIiwicGF3bkNhbkF0dGFjayIsInJvb2tfUm9vayIsImtuaWdodF9LbmlnaHQiLCJiaXNob3BfQmlzaG9wIiwicXVlZW5fUXVlZW4iLCJraW5nX0tpbmciLCJzcGVjaWFsTW92ZXMiLCJnZXRQb3NzaWJsZVNwZWNpYWxNb3ZlcyIsIlBpZWNlR2FtZUxvZ2ljIiwiY29udmVydEdTQm9hcmRUb1BpZWNlQm9hcmQiLCJjb252ZXJ0UGllY2VUb1N0cmluZ0VuY29kaW5nIiwidGltZXNNb3ZlZCIsImdldFR5cGUiLCJnZXRQb3NzaWJsZVBpZWNlc1RvUHJvbW90ZVRvIiwiaXNQb3NzaWJsZVRvTW92ZVRvIiwiaXNJbkNoZWNrIiwiaXNJbkNoZWNrbWF0ZSIsImtpbmdDYW5DYXN0bGVXaXRoR2l2ZW5Sb29rIiwiY2FzdGxlS2luZ1dpdGhHaXZlblJvb2siLCJnZXRTZXRPZkFsbFBvc3NpYmxlTW92ZXNGb3JQbGF5ZXIiLCJTZXQiLCJyYW5kb21EZWZlbnNpdmVNb3ZlIiwiaXNBQ2FwdHVyZSIsImlzRW5QYXNzYW50UG9zc2libGUiLCJnZXRCb3hPZlByb21vdGFibGVQaWVjZUlmUG9zc2libGUiLCJwcm9tb3RlSWZQb3NzaWJsZSIsImZpcnN0Iiwic2Vjb25kIiwiaW5jcmVtZW50TW92ZUNvdW50IiwibWFrZUxlZ2FsTW92ZSIsInBpZWNlVG9Qcm9tb3RlVG8iLCJjYXB0dXJlZFBpZWNlIiwid2FzUHJvbW90aW9uIiwicGllY2VCb2FyZCIsImVuY29kaW5nIiwidmFsaWRQcm9tb3Rpb25zIiwic3JjUGllY2UiLCJvdGhlclBpZWNlIiwicG9zc2libGVQcm9tb3Rpb25Nb3ZlcyIsIlBpZWNlVHlwZSIsIm1vdmVzTWF0cml4IiwidmFsaWRNb3ZlcyIsImNvbnN0cnVjdE1vdmVzTWF0cml4IiwiY29uc29sZSIsIndhcm4iLCJwb3NzaWJsZUF0dGFja3MiLCJrIiwicG9zc2libGVNb3ZlcyIsIm5ld0JvYXJkIiwib3V0RGlyIiwic2hpZnQiLCJwb3NzaWJsZVBsYXllck1vdmVzIiwiYWRkIiwib3Bwb25lbnQiLCJvcHBvbmVudFN0YXJ0IiwicGF3bkF0Q29sdW1uQm9yZGVyIiwiYm9yZGVySWR4IiwicHJvbW90YWJsZUJveCIsInByZWZpeCIsIm51bSIsIm1vdmVBbmRVcGRhdGVTdGF0ZSIsImVuUGFzc2FudCIsImRlc2VyaWFsaXplQm94Q29udGVudHMiLCJib3hFbGVtIiwiZ2V0QXR0cmlidXRlIiwiZmxvb3IiLCJwYXJzZSIsIm5ld1N0YXRlIiwic3RvcmUiLCJzaG93Qm9hcmRBbmRCaW5kQm94ZXMiLCJ2aWV3IiwiX3NlbGVjdGVkQm94IiwiX2xhc3RTZWxlY3RlZEJveCIsIl9zZWxlY3RlZENhcHR1cmVkUGllY2UiLCJjcmVhdGVBbmRTaG93SW5pdGlhbEJvYXJkIiwic2hvd0JvYXJkIiwiY2hpbGRyZW4iLCJiaW5kU2VsZWN0Qm94Iiwic2VsZWN0Qm94Iiwic2hvd0NhcHR1cmVzIiwid2hpdGVJZHgiLCJibGFja0lkeCIsImJpbmRDYXB0dXJlZFBpZWNlIiwic2VsZWN0Q2FwdHVyZWRQaWVjZSIsInVwZGF0ZWRNb3ZlU3RhdGUiLCJmb3JFYWNoIiwic2V0U3RvcmVTdGF0ZSIsInNob3dBbmRCaW5kQ2FwdHVyZWRQaWVjZXMiLCJtb3ZlWG9yR2V0UG9zc2libGVNb3ZlcyIsInBpZWNlRWxlbSIsImNsaWNrIiwiY2FjaGVkU2V0VGltZW91dCIsImNhY2hlZENsZWFyVGltZW91dCIsInByb2Nlc3MiLCJkZWZhdWx0U2V0VGltb3V0IiwiRXJyb3IiLCJkZWZhdWx0Q2xlYXJUaW1lb3V0IiwicnVuVGltZW91dCIsImZ1biIsInNldFRpbWVvdXQiLCJlIiwiY2xlYXJUaW1lb3V0IiwiY3VycmVudFF1ZXVlIiwicXVldWUiLCJkcmFpbmluZyIsInF1ZXVlSW5kZXgiLCJjbGVhblVwTmV4dFRpY2siLCJjb25jYXQiLCJkcmFpblF1ZXVlIiwidGltZW91dCIsInJ1biIsIm1hcmtlciIsInJ1bkNsZWFyVGltZW91dCIsIkl0ZW0iLCJhcnJheSIsIm5vb3AiLCJuZXh0VGljayIsImFyZ3MiLCJBcnJheSIsImFyZ3VtZW50cyIsInRpdGxlIiwiYnJvd3NlciIsImVudiIsImFyZ3YiLCJ2ZXJzaW9uIiwidmVyc2lvbnMiLCJvbiIsImFkZExpc3RlbmVyIiwib25jZSIsIm9mZiIsInJlbW92ZUxpc3RlbmVyIiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwiZW1pdCIsInByZXBlbmRMaXN0ZW5lciIsInByZXBlbmRPbmNlTGlzdGVuZXIiLCJsaXN0ZW5lcnMiLCJiaW5kaW5nIiwiY3dkIiwiY2hkaXIiLCJ1bWFzayIsIm5vcm1hbGl6ZUFycmF5IiwicGFydHMiLCJhbGxvd0Fib3ZlUm9vdCIsInVwIiwibGFzdCIsInNwbGljZSIsInVuc2hpZnQiLCJzcGxpdFBhdGhSZSIsInNwbGl0UGF0aCIsImZpbGVuYW1lIiwiZXhlYyIsInNsaWNlIiwiZmlsdGVyIiwieHMiLCJmIiwicmVzIiwicmVzb2x2ZSIsInJlc29sdmVkUGF0aCIsInJlc29sdmVkQWJzb2x1dGUiLCJwYXRoIiwiVHlwZUVycm9yIiwiY2hhckF0Iiwic3BsaXQiLCJqb2luIiwibm9ybWFsaXplIiwiaXNBYnNvbHV0ZSIsInRyYWlsaW5nU2xhc2giLCJzdWJzdHIiLCJwYXRocyIsImluZGV4IiwicmVsYXRpdmUiLCJmcm9tIiwidG8iLCJzdGFydCIsImVuZCIsImZyb21QYXJ0cyIsInRvUGFydHMiLCJtaW4iLCJzYW1lUGFydHNMZW5ndGgiLCJvdXRwdXRQYXJ0cyIsInNlcCIsImRlbGltaXRlciIsImRpcm5hbWUiLCJyZXN1bHQiLCJyb290IiwiYmFzZW5hbWUiLCJleHQiLCJleHRuYW1lIiwic3RyIl0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxLQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLElBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsWUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMsR0FBMENLLFlBQUEsRUFBQUMsSUFBQUwsS0FLMUNaLEVBQUFrQixFQUFBLFNBQUFoQixHQUNBLG9CQUFBaUIsZUFBQUMsYUFDQU4sT0FBQUMsZUFBQWIsRUFBQWlCLE9BQUFDLGFBQXdEQyxNQUFBLFdBRXhEUCxPQUFBQyxlQUFBYixFQUFBLGNBQWlEbUIsT0FBQSxLQVFqRHJCLEVB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QyxFQUFZOUMsSUFDN0IsR0FBQW1VLEVBQUFuVSxLQUFBb1UsRUFBQXBVLEdBQUEsQ0FDQXNVLEVBQUF0VSxFQUNBLE1BSUEsSUFBQXVVLEtBQ0EsSUFBQXZVLEVBQUFzVSxFQUErQnRVLEVBQUFtVSxFQUFBclIsT0FBc0I5QyxJQUNyRHVVLEVBQUEzUSxLQUFBLE1BS0EsT0FGQTJRLElBQUF4RSxPQUFBcUUsRUFBQXpCLE1BQUEyQixLQUVBZixLQUFBLE1BR0F6VCxFQUFBMFUsSUFBQSxJQUNBMVUsRUFBQTJVLFVBQUEsSUFFQTNVLEVBQUE0VSxRQUFBLFNBQUF2QixHQUNBLElBQUF3QixFQUFBbkMsRUFBQVcsR0FDQXlCLEVBQUFELEVBQUEsR0FDQWxNLEVBQUFrTSxFQUFBLEdBRUEsT0FBQUMsR0FBQW5NLEdBS0FBLElBRUFBLElBQUFrTCxPQUFBLEVBQUFsTCxFQUFBM0YsT0FBQSxJQUdBOFIsRUFBQW5NLEdBUkEsS0FZQTNJLEVBQUErVSxTQUFBLFNBQUExQixFQUFBMkIsR0FDQSxJQUFBaEMsRUFBQU4sRUFBQVcsR0FBQSxHQUtBLE9BSEEyQixHQUFBaEMsRUFBQWEsUUFBQSxFQUFBbUIsRUFBQWhTLFVBQUFnUyxJQUNBaEMsSUFBQWEsT0FBQSxFQUFBYixFQUFBaFEsT0FBQWdTLEVBQUFoUyxTQUVBZ1EsR0FJQWhULEVBQUFpVixRQUFBLFNBQUE1QixHQUNBLE9BQUFYLEVBQUFXLEdBQUEsSUFhQSxJQUFBUSxFQUFBLFdBQUFBLFFBQUEsR0FDQSxTQUFBcUIsRUFBQWYsRUFBQXZMLEdBQWtDLE9BQUFzTSxFQUFBckIsT0FBQU0sRUFBQXZMLElBQ2xDLFNBQUFzTSxFQUFBZixFQUFBdkwsR0FFQSxPQURBdUwsRUFBQSxJQUFBQSxFQUFBZSxFQUFBbFMsT0FBQW1SLEdBQ0FlLEVBQUFyQixPQUFBTSxFQUFBdkwiLCJmaWxlIjoiLi9kaXN0L2J1bmRsZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAwKTtcbiIsImV4cG9ydCBpbnRlcmZhY2UgQm94IHtcbiAgcjogbnVtYmVyO1xuICBjOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGllY2Uge1xuICBuYW1lOiBzdHJpbmc7XG4gIGNvbG9yOiBzdHJpbmc7XG4gIGdldFBvc3NpYmxlTW92ZXM6IChnYW1lU3RhdGU6IEdhbWVTdGF0ZSwgc3JjOiBCb3gsIG51bU1vdmVzPzogbnVtYmVyKSA9PiAoZHN0OiBCb3gpID0+IGJvb2xlYW47XG59XG5cbmV4cG9ydCBjbGFzcyBFbXB0eVBpZWNlIGltcGxlbWVudHMgUGllY2Uge1xuICBwdWJsaWMgbmFtZTogc3RyaW5nO1xuICBwdWJsaWMgY29sb3I6IHN0cmluZztcbiAgcHVibGljIGdldFBvc3NpYmxlTW92ZXM6IChnYW1lU3RhdGU6IEdhbWVTdGF0ZSwgc3JjOiBCb3gsIG51bU1vdmVzPzogbnVtYmVyKSA9PiAoZHN0OiBCb3gpID0+IGJvb2xlYW47XG4gIGNvbnN0cnVjdG9yKGNvbG9yID0gJ2JsYW5rJykge1xuICAgIHRoaXMubmFtZSA9ICdlbXB0eSc7XG4gICAgdGhpcy5jb2xvciA9IGNvbG9yO1xuICAgIHRoaXMuZ2V0UG9zc2libGVNb3ZlcyA9IChnYW1lU3RhdGU6IEdhbWVTdGF0ZSwgc3JjOiBCb3gsIG51bU1vdmVzPzogbnVtYmVyKSA9PiB7XG4gICAgICBjb25zdCBpc1Bvc3NpYmxlVG9Nb3ZlVG8gPSAoZHN0OiBCb3gpID0+IGZhbHNlO1xuICAgICAgcmV0dXJuIGlzUG9zc2libGVUb01vdmVUbztcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBAdHlwZWRlZiB7e2JvYXJkOiBBcnJheTxBcnJheTxzdHJpbmc+PiwgbnVtUm93czogbnVtYmVyLCBudW1Db2xzOiBudW1iZXIsIHBsYXllcldoaXRlOiBudW1iZXIsIHBsYXllckJsYWNrOiBudW1iZXIsIHBsYXllcjogbnVtYmVyfX1cbiAqL1xuLy8gZXhwb3J0IGludGVyZmFjZSBHYW1lU3RhdGUge1xuLy8gICBib2FyZDogQXJyYXk8QXJyYXk8c3RyaW5nPj4sIHBsYXllcjogUGxheWVyLCBnZXRFbmNvZGluZzogKChib3g6IEJveCkgPT4gc3RyaW5nKTtcbi8vIH07XG5cbmV4cG9ydCBjbGFzcyBCb2FyZCB7XG4gIHByaXZhdGUgX2JvYXJkOiBBcnJheTxBcnJheTxzdHJpbmc+PjtcbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbiBDcmVhdGVzIGEgY29weSBvZiBhIGJvYXJkICh3aGljaCBjYW4gYmUgc2FmZWx5IG11dGF0ZWQgaW4gRlAgcGFyYWRpZ20pLlxuICAgKi9cbiAgcHVibGljIGdldCBib2FyZCgpOiBBcnJheTxBcnJheTxzdHJpbmc+PiB7XG4gICAgY29uc3QgYm9hcmRDb3B5ID0gT2JqZWN0LmFzc2lnbihbXSwgdGhpcy5fYm9hcmQpO1xuICAgIHJldHVybiBib2FyZENvcHk7XG4gIH1cbiAgcHVibGljIGdldCByYW5rQ291bnQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fYm9hcmQubGVuZ3RoO1xuICB9XG4gIHB1YmxpYyBnZXQgZmlsZUNvdW50KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2JvYXJkWzBdLmxlbmd0aCA+IDAgPyB0aGlzLl9ib2FyZFswXS5sZW5ndGggOiAxO1xuICB9XG4gIC8vIHByb3RlY3RlZCBzZXQgYm9hcmQoYm9hcmQ6IEFycmF5PEFycmF5PHN0cmluZz4+KSB7XG4gIC8vICAgdGhpcy5fYm9hcmQgPSBib2FyZDtcbiAgLy8gfVxuICBwdWJsaWMgcmVhZG9ubHkgZ2V0RW5jb2Rpbmc6IChib3g6IEJveCkgPT4gc3RyaW5nO1xuICBwdWJsaWMgcmVhZG9ubHkgc2V0RW5jb2Rpbmc6IChib3g6IEJveCwgZW5jOiBzdHJpbmcpID0+IHZvaWQ7XG4gIGNvbnN0cnVjdG9yKGJvYXJkPzogQXJyYXk8QXJyYXk8c3RyaW5nPj58Qm9hcmQgKSB7XG4gICAgaWYgKGJvYXJkIGluc3RhbmNlb2YgQm9hcmQpIHRoaXMuX2JvYXJkID0gYm9hcmQuX2JvYXJkO1xuICAgIGVsc2UgaWYgKGJvYXJkKSB0aGlzLl9ib2FyZCA9IGJvYXJkO1xuICAgIGVsc2UgdGhpcy5fYm9hcmQgPSBbXG4gICAgICBbJ3IwJywnaDAnLCdiMCcsJ3EwJywnazAnLCdiMCcsJ2gwJywncjAnXSwgLy8gbG93ZXIgY2FzZTogYmxhY2sgcGllY2VzXG4gICAgICBbJ3AwJywncDAnLCdwMCcsJ3AwJywncDAnLCdwMCcsJ3AwJywncDAnXSxcbiAgICAgIFsnICcsJyAnLCcgJywnICcsJyAnLCcgJywnICcsJyAnXSxcbiAgICAgIFsnICcsJyAnLCcgJywnICcsJyAnLCcgJywnICcsJyAnXSxcbiAgICAgIFsnICcsJyAnLCcgJywnICcsJyAnLCcgJywnICcsJyAnXSxcbiAgICAgIFsnICcsJyAnLCcgJywnICcsJyAnLCcgJywnICcsJyAnXSxcbiAgICAgIFsnUDAnLCdQMCcsJ1AwJywnUDAnLCdQMCcsJ1AwJywnUDAnLCdQMCddLCAvLyB1cHBlciBjYXNlOiB3aGl0ZSBwaWVjZXNcbiAgICAgIFsnUjAnLCdIMCcsJ0IwJywnUTAnLCdLMCcsJ0IwJywnSDAnLCdSMCddIF07XG4gICAgdGhpcy5nZXRFbmNvZGluZyA9IChib3g6IEJveCk6IHN0cmluZyA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5fYm9hcmRbYm94LnJdW2JveC5jXTtcbiAgICB9XG4gICAgdGhpcy5zZXRFbmNvZGluZyA9IChib3g6IEJveCwgZW5jOiBzdHJpbmcpOiB2b2lkID0+IHtcbiAgICAgIGlmIChib3guciA+IC0xICYmIGJveC5yIDwgdGhpcy5fYm9hcmQubGVuZ3RoICYmIGJveC5jID4gLTEgJiYgYm94LmMgPCB0aGlzLl9ib2FyZFswXS5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5fYm9hcmRbYm94LnJdW2JveC5jXSA9IGVuYztcbiAgICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdURVNUJykge1xuICAgICAgICBjb25zb2xlLndhcm4oJ3RoaXMuX2JvYXJkLmxlbmd0aCcsIHRoaXMuX2JvYXJkLmxlbmd0aCk7XG4gICAgICAgIGNvbnNvbGUud2FybigndGhpcy5fYm9hcmRbMF0ubGVuZ3RoJywgdGhpcy5fYm9hcmRbMF0ubGVuZ3RoKTtcbiAgICAgICAgY29uc29sZS53YXJuKGBBdHRlbXB0aW5nIHRvIGluY29ycmVjdGx5IHNldCBlbmNvZGluZyAoJHtlbmN9KSB0byBib2FyZCBhdCBib3ggKHtyOiAke2JveC5yfSwgYzogJHtib3guY319KS4gRm9yIGJvYXJkIHRoZSBmb2xsb3dpbmcgYm9hcmQgJHtKU09OLnN0cmluZ2lmeSh0aGlzLl9ib2FyZCl9LiBQbGVhc2UgZml4IHRoaXMgYnVnLmApO1xuICAgICAgfVxuICAgIH07XG4gIH1cbn07XG5cbi8qKlxuICogQGZ1bmN0aW9uXG4gKiBAcmV0dXJucyB7R2FtZVN0YXRlfVxuICovXG5leHBvcnQgY2xhc3MgR2FtZVN0YXRlIHtcbiAgcHJpdmF0ZSBfYm9hcmQ6IEJvYXJkO1xuICBwcml2YXRlIF9wbGF5ZXI6IFBsYXllcjtcbiAgLy8gcHJpdmF0ZSBzZXRFbmNvZGluZzsgLy8gaGlkZSBcbiAgcHVibGljIHJlYWRvbmx5IGdldEVuY29kaW5nOiAoYm94OiBCb3gpID0+IHN0cmluZztcbiAgZ2V0IHBsYXllcigpOiBQbGF5ZXIge1xuICAgIHJldHVybiB0aGlzLl9wbGF5ZXI7XG4gIH1cbiAgc2V0IHBsYXllcihuZXdQbGF5ZXI6IFBsYXllcikge1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ1RFU1QnKSB7XG4gICAgICBjb25zb2xlLndhcm4oYHBsYXllciBpcyBiZWluZyBjaGFuZ2VkIGZyb20gUGxheWVyICR7dGhpcy5fcGxheWVyfSB0byBQbGF5ZXIgJHtuZXdQbGF5ZXJ9LmApO1xuICAgIH1cbiAgICB0aGlzLl9wbGF5ZXIgPSBuZXdQbGF5ZXI7XG4gIH1cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbiBDcmVhdGVzIGEgY29weSBvZiBhIGJvYXJkICh3aGljaCBjYW4gYmUgc2FmZWx5IG11dGF0ZWQgaW4gRlAgcGFyYWRpZ20pLlxuICAgKi9cbiAgZ2V0IGJvYXJkKCk6IEFycmF5PEFycmF5PHN0cmluZz4+IHtcbiAgICByZXR1cm4gdGhpcy5fYm9hcmQuYm9hcmQ7XG4gIH1cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbiBOdW1iZXIgb2YgJ3Jvd3MnIG9uIGNoZXNzYm9hcmQuXG4gICAqL1xuICBwdWJsaWMgcmVhZG9ubHkgcmFua0NvdW50OiBudW1iZXI7XG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb24gTnVtYmVyIG9mICdjb2x1bW5zJyBvbiBjaGVzc2JvYXJkLlxuICAgKi9cbiAgcHVibGljIHJlYWRvbmx5IGZpbGVDb3VudDogbnVtYmVyO1xuICBjb25zdHJ1Y3Rvcihib2FyZD86IEJvYXJkfEFycmF5PEFycmF5PHN0cmluZz4+KSB7XG4gICAgdGhpcy5fYm9hcmQgPSBuZXcgQm9hcmQoYm9hcmQpO1xuICAgIHRoaXMuZ2V0RW5jb2RpbmcgPSAoYm94OiBCb3gpOiBzdHJpbmcgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuX2JvYXJkLmdldEVuY29kaW5nKGJveCk7XG4gICAgfVxuICAgIHRoaXMuX3BsYXllciA9IFBMQVlFUl9XSElURTtcbiAgICB0aGlzLnJhbmtDb3VudCA9IHRoaXMuX2JvYXJkLnJhbmtDb3VudDtcbiAgICB0aGlzLmZpbGVDb3VudCA9IHRoaXMuX2JvYXJkLmZpbGVDb3VudDtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgU3RvcmVTdGF0ZSB7XG4gIHB1YmxpYyBnYW1lU3RhdGU6IEdhbWVTdGF0ZTtcbiAgcHVibGljIHNlbGVjdGVkQm94ZXM6IEFycmF5PEFycmF5PGJvb2xlYW4+PjtcbiAgcHVibGljIHBvc3NpYmxlRGVzdEJveGVzOiBBcnJheTxBcnJheTxib29sZWFuPj47XG4gIHB1YmxpYyBwcmV2TW92ZTogeyBzcmM6IEJveCwgZHN0OiBCb3ggfTtcbiAgcHVibGljIGNhcHR1cmVzOiBBcnJheTxQaWVjZT47XG4gIHB1YmxpYyBzZWxlY3RlZENhcHR1cmVzOiBBcnJheTxib29sZWFuPjtcbiAgcHVibGljIGJvYXJkOiBBcnJheTxBcnJheTxQaWVjZT4+O1xuICBwcml2YXRlIGFycmF5MmQoZDogbnVtYmVyLCB2OiBhbnkpOiBBcnJheTxBcnJheTxhbnk+PiB7XG4gICAgY29uc3QgYXJyID0gW107XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBkOyBpKyspIHtcbiAgICAgIGFyci5wdXNoKFtdKTtcbiAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgZDsgaisrKSB7XG4gICAgICAgIGFycltpXS5wdXNoKHYpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYXJyO1xuICB9XG4gIHB1YmxpYyBpbml0aWFsaXplRmFsc2VHcmlkKGQ6IG51bWJlcik6IEFycmF5PEFycmF5PGJvb2xlYW4+PiB7XG4gICAgcmV0dXJuIHRoaXMuYXJyYXkyZChkLCBmYWxzZSk7XG4gIH1cbiAgY29uc3RydWN0b3Ioc3RhdGU/OiBTdG9yZVN0YXRlKSB7XG4gICAgdGhpcy5nYW1lU3RhdGUgPSBzdGF0ZSA/IHN0YXRlLmdhbWVTdGF0ZSA6IG5ldyBHYW1lU3RhdGU7XG4gICAgdGhpcy5zZWxlY3RlZEJveGVzID0gc3RhdGUgPyBzdGF0ZS5zZWxlY3RlZEJveGVzIDogdGhpcy5pbml0aWFsaXplRmFsc2VHcmlkKDgpO1xuICAgIHRoaXMucG9zc2libGVEZXN0Qm94ZXMgPSBzdGF0ZSA/IHN0YXRlLnBvc3NpYmxlRGVzdEJveGVzIDogdGhpcy5pbml0aWFsaXplRmFsc2VHcmlkKDgpO1xuICAgIHRoaXMucHJldk1vdmUgPSBzdGF0ZSA/IHN0YXRlLnByZXZNb3ZlIDogeyBzcmM6IHsgcjogLTEsIGM6IC0xIH0sIGRzdDogeyByOiAtMSwgYzogLTEgfX07XG4gICAgdGhpcy5jYXB0dXJlcyA9IHN0YXRlID8gc3RhdGUuY2FwdHVyZXMgOiBbXTtcbiAgICB0aGlzLnNlbGVjdGVkQ2FwdHVyZXMgPSBzdGF0ZSA/IHN0YXRlLnNlbGVjdGVkQ2FwdHVyZXMgOiBbXTtcbiAgICB0aGlzLmJvYXJkID0gc3RhdGUgPyBzdGF0ZS5ib2FyZCA6IFtdO1xuICB9XG59XG5cbi8qKlxuICogQHR5cGVkZWYgeyFudW1iZXJ9XG4gKi9cbmV4cG9ydCB0eXBlIFBsYXllciA9IG51bWJlcjtcblxuLyoqXG4gKiBAdHlwZSB7IVBsYXllcn1cbiAqL1xuZXhwb3J0IGNvbnN0IFBMQVlFUl9XSElURTogUGxheWVyID0gMDtcblxuLyoqXG4gKiBAdHlwZSB7IVBsYXllcn1cbiAqL1xuZXhwb3J0IGNvbnN0IFBMQVlFUl9CTEFDSzogUGxheWVyID0gMTtcblxuLyoqXG4gKiBAdHlwZWRlZiB7IUFycmF5PEJveD59XG4gKi9cbi8vIGV4cG9ydCB0eXBlIEJvYXJkID0gQXJyYXk8Qm94PjsiLCJpbXBvcnQgeyBCb3gsIFBpZWNlLCBFbXB0eVBpZWNlLCBHYW1lU3RhdGUsIEJvYXJkLCBTdG9yZVN0YXRlIH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTdG9yZSB7XG4gIHByaXZhdGUgcmVhZG9ubHkgX3N0YXRlOiBTdG9yZVN0YXRlO1xuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLl9zdGF0ZSA9IG5ldyBTdG9yZVN0YXRlO1xuICB9XG4gIHB1YmxpYyBnZXQgc3RhdGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3N0YXRlO1xuICB9XG4gIHB1YmxpYyBzZXQgc3RhdGUoc3RhdGU6IFN0b3JlU3RhdGUpIHtcbiAgICB0aGlzLl9zdGF0ZS5nYW1lU3RhdGUgPSBzdGF0ZS5nYW1lU3RhdGUgPyBzdGF0ZS5nYW1lU3RhdGUgOiB0aGlzLl9zdGF0ZS5nYW1lU3RhdGU7XG4gICAgdGhpcy5fc3RhdGUuYm9hcmQgPSBzdGF0ZS5ib2FyZCA/IHN0YXRlLmJvYXJkIDogdGhpcy5fc3RhdGUuYm9hcmQ7XG4gICAgdGhpcy5fc3RhdGUuc2VsZWN0ZWRCb3hlcyA9IHN0YXRlLnNlbGVjdGVkQm94ZXMgPyBzdGF0ZS5zZWxlY3RlZEJveGVzIDogdGhpcy5fc3RhdGUuc2VsZWN0ZWRCb3hlcztcbiAgICB0aGlzLl9zdGF0ZS5wb3NzaWJsZURlc3RCb3hlcyA9IHN0YXRlLnBvc3NpYmxlRGVzdEJveGVzID8gc3RhdGUucG9zc2libGVEZXN0Qm94ZXMgOiB0aGlzLl9zdGF0ZS5wb3NzaWJsZURlc3RCb3hlcztcbiAgICB0aGlzLl9zdGF0ZS5wcmV2TW92ZSA9IHN0YXRlLnByZXZNb3ZlID8gc3RhdGUucHJldk1vdmUgOiB0aGlzLl9zdGF0ZS5wcmV2TW92ZTtcbiAgICB0aGlzLl9zdGF0ZS5jYXB0dXJlcyA9IHN0YXRlLmNhcHR1cmVzID8gc3RhdGUuY2FwdHVyZXMgOiB0aGlzLl9zdGF0ZS5jYXB0dXJlcztcbiAgICB0aGlzLl9zdGF0ZS5zZWxlY3RlZENhcHR1cmVzID0gc3RhdGUuc2VsZWN0ZWRDYXB0dXJlcyA/IHN0YXRlLnNlbGVjdGVkQ2FwdHVyZXMgOiB0aGlzLl9zdGF0ZS5zZWxlY3RlZENhcHR1cmVzO1xuICB9XG59IiwiLy8gVGhpcyBmaWxlLCBhcyB3aXRoIG1vc3Qgb2YgZnJvbnRfZW5kLCBpcyBpbnNwaXJlZCBieSBhbmQgbW9zdGx5IHRha2VuIGZyb20gVG9kb01WQy92YW5pbGxhLWVzNlxuLy8gcmVzcGVjdDogaHR0cHM6Ly9naXRodWIuY29tL3Rhc3RlanMvdG9kb212Yy90cmVlL2doLXBhZ2VzL2V4YW1wbGVzL3ZhbmlsbGEtZXM2XG5cbi8qKlxuICogQGRlc2NyaXB0aW9uIHF1ZXJ5U2VsZWN0b3Igd3JhcHBlclxuICovXG5leHBvcnQgZnVuY3Rpb24gcXMoc2VsZWN0b3I6IHN0cmluZywgc2NvcGU/OiBFbGVtZW50KSB7XG4gICAgcmV0dXJuIChzY29wZSB8fCBkb2N1bWVudCkucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG59XG5cbi8qKlxuICogQGRlc2NyaXB0aW9uIGFkZEV2ZW50TGlzdGVuZXIgd3JhcHBlclxuICovXG5leHBvcnQgZnVuY3Rpb24gJG9uKHRhcmdldDogRWxlbWVudCB8IFdpbmRvdywgdHlwZTogc3RyaW5nLCBjYWxsYmFjazogRXZlbnRMaXN0ZW5lck9yRXZlbnRMaXN0ZW5lck9iamVjdCwgY2FwdHVyZT86IGJvb2xlYW4gfCBBZGRFdmVudExpc3RlbmVyT3B0aW9ucyk6IHZvaWQgeyAvLyBAdG9kbyBmaXggY2FsbGJhY2sgdHlwZVxuICAgIHRhcmdldC5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGNhbGxiYWNrLCAhIWNhcHR1cmUpO1xufVxuXG4vKipcbiAqIEF0dGFjaCBhIGhhbmRsZXIgdG8gYW4gZXZlbnQgZm9yIGFsbCBlbGVtZW50cyBtYXRjaGluZyBhIHNlbGVjdG9yXG4gKiBcbiAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0IEVsZW1lbnQgd2hpY2ggdGhlIGV2ZW50IG11c3QgYnViYmxlIHRvXG4gKi9cbi8vIC4uLi5cblxuLyoqXG4gKiBAZGVzY3JpcHRpb24gRW5jb2RlIGxlc3MtdGhhbiBhbmQgYW1wZXJzYW5kIGNoYXJhY3RlcnMgd2l0aCBIVE1MLXNhZmUgdmVyc2lvbnMuXG4gKiBAcGFyYW0ge3N0cmluZ30gcyBTdHJpbmcgdG8gZXNjYXBlXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBTdHJpbmcgd2l0aCB1bnNhZmUgY2hhcmFjdGVycyBlc2NhcGVkLlxuICovXG5leHBvcnQgY29uc3QgZXNjYXBlRm9ySFRNTCA9IChzOiBzdHJpbmcpOiBzdHJpbmcgPT4gcy5yZXBsYWNlKC9bJjxdL2csIGMgPT4gYyA9PT0gJyYnID8gJyZhbXA7JyA6ICcmbHQ7Jyk7IiwiaW1wb3J0IHsgQm9hcmQsIFBpZWNlLCBTdG9yZVN0YXRlIH0gZnJvbSAnLi4vdHlwZXMnO1xuXG5pbXBvcnQgeyBlc2NhcGVGb3JIVE1MIH0gZnJvbSAnLi9oZWxwZXJzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGVtcGxhdGUge1xuICAgIC8qKlxuICAgICAqIEZvcm1hdCB0aGUgY29udGVudCBvZiB0aGUgYm9hcmQgYnk6XG4gICAgICogMSkgQ3JlYXRpbmcgZWFjaCBib3ggaW4gYSB0YWJsZSByZXByZXNlbnRhdGlvbjtcbiAgICAgKiAyKSBQbGFjaW5nIGVhY2ggcGllY2UgaW4gaXRzIGNvcnJlc3BvbmRpbmcgYm94LlxuICAgICAqL1xuICAgIEJvYXJkKHN0YXRlOiBTdG9yZVN0YXRlKTogRWxlbWVudCB7XG4gICAgICAgIGNvbnN0IHBpZWNlczogQXJyYXk8QXJyYXk8UGllY2U+PiA9IHN0YXRlLmJvYXJkO1xuICAgICAgICBsZXQgYm9hcmQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdib2FyZCcpO1xuICAgICAgICBsZXQgYm94UG9zID0gMDtcbiAgICAgICAgZm9yIChsZXQgciA9IDA7IHIgPCA4OyByKyspIHtcbiAgICAgICAgICAgIGxldCB0ciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XG4gICAgICAgICAgICBmb3IgKGxldCBjID0gMDsgYyA8IDg7IGMrKykge1xuICAgICAgICAgICAgICAgIGxldCB0ZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XG4gICAgICAgICAgICAgICAgdGQuc2V0QXR0cmlidXRlKCdkYXRhLXBvcycsIFN0cmluZyhib3hQb3MpKTtcbiAgICAgICAgICAgICAgICBjb25zdCBwaWVjZSA9IHBpZWNlc1tyXVtjXTtcbiAgICAgICAgICAgICAgICB0ZC5zZXRBdHRyaWJ1dGUoJ3BpZWNlJywgSlNPTi5zdHJpbmdpZnkocGllY2UpKTtcbiAgICAgICAgICAgICAgICBpZiAocGllY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBpZWNlRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgICAgIHBpZWNlRGl2LnNldEF0dHJpYnV0ZSgnY2xhc3MnLCBwaWVjZS5jb2xvciArIHBpZWNlLm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICB0ZC5hcHBlbmRDaGlsZChwaWVjZURpdik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5zZWxlY3RlZEJveGVzW3JdW2NdKSB7XG4gICAgICAgICAgICAgICAgICAgIHRkLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAnc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlLnBvc3NpYmxlRGVzdEJveGVzW3JdW2NdKSB7XG4gICAgICAgICAgICAgICAgICAgIHRkLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAncG9zc2libGVEZXN0Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRyLmFwcGVuZENoaWxkKHRkKTtcbiAgICAgICAgICAgICAgICBib3hQb3MrKztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJvYXJkLmFwcGVuZENoaWxkKHRyKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYm9hcmQ7XG4gICAgfVxuICAgIENhcHR1cmVkKHR5cGU6IHN0cmluZywgc3RhdGU6IFN0b3JlU3RhdGUpOiBFbGVtZW50IHtcbiAgICAgICAgY29uc3QgY2FwdHVyZXMgPSBzdGF0ZS5jYXB0dXJlcztcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRDYXB0dXJlcyA9IHN0YXRlLnNlbGVjdGVkQ2FwdHVyZXM7XG4gICAgICAgIGxldCB0ciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RyJyk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2FwdHVyZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnN0IHBpZWNlID0gY2FwdHVyZXNbaV07XG4gICAgICAgICAgICBpZiAocGllY2UuY29sb3IgJiYgcGllY2UuY29sb3IuaW5kZXhPZih0eXBlKSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgbGV0IHRkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGQnKTtcbiAgICAgICAgICAgICAgICBsZXQgcGllY2VEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICAgICAgICBwaWVjZURpdi5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgcGllY2UuY29sb3IgKyBwaWVjZS5uYW1lKTtcbiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWRDYXB0dXJlc1tpXSkge1xuICAgICAgICAgICAgICAgICAgICBwaWVjZURpdi5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgcGllY2UuY29sb3IgKyBwaWVjZS5uYW1lICsgJyBzZWxlY3RlZENhcHR1cmUnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGQuYXBwZW5kQ2hpbGQocGllY2VEaXYpO1xuICAgICAgICAgICAgICAgIHRyLmFwcGVuZENoaWxkKHRkKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHI7XG5cbiAgICB9XG4gICAgQ2FwdHVyZWRXaGl0ZShzdGF0ZTogU3RvcmVTdGF0ZSk6IEVsZW1lbnQge1xuICAgICAgICByZXR1cm4gdGhpcy5DYXB0dXJlZCgnd2hpdGUnLCBzdGF0ZSk7XG4gICAgfVxuICAgIENhcHR1cmVkQmxhY2soc3RhdGU6IFN0b3JlU3RhdGUpOiBFbGVtZW50IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuQ2FwdHVyZWQoJ2JsYWNrJywgc3RhdGUpO1xuICAgIH1cbn0iLCJpbXBvcnQgeyBCb2FyZCwgQm94LCBQaWVjZSwgU3RvcmVTdGF0ZSB9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB7IHFzLCAkb24gfSBmcm9tICcuL2hlbHBlcnMnO1xuaW1wb3J0IFRlbXBsYXRlIGZyb20gJy4vdGVtcGxhdGUnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBWaWV3IHtcbiAgICBwcml2YXRlIF90ZW1wbGF0ZTogVGVtcGxhdGU7XG4gICAgcHJpdmF0ZSBfJGJvYXJkOiBFbGVtZW50O1xuICAgIHByaXZhdGUgXyRjYXB0dXJlZHdoaXRlOiBFbGVtZW50O1xuICAgIHByaXZhdGUgXyRjYXB0dXJlZGJsYWNrOiBFbGVtZW50O1xuICAgIHByaXZhdGUgXyRtYWluOiBFbGVtZW50O1xuICAgIHByaXZhdGUgXyR1bmRvYnRuOiBFbGVtZW50O1xuICAgIHByaXZhdGUgXyRyZWRvYnRuOiBFbGVtZW50O1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuX3RlbXBsYXRlID0gbmV3IFRlbXBsYXRlO1xuICAgICAgICB0aGlzLl8kYm9hcmQgPSBxcygnLmNoZXNzYm9hcmQnKTtcbiAgICAgICAgdGhpcy5fJGNhcHR1cmVkd2hpdGUgPSBxcygnLmNhcHR1cmVkd2hpdGUnKTtcbiAgICAgICAgdGhpcy5fJGNhcHR1cmVkYmxhY2sgPSBxcygnLmNhcHR1cmVkYmxhY2snKTtcbiAgICAgICAgdGhpcy5fJG1haW4gPSBxcygnLm1haW4nKTtcbiAgICAgICAgdGhpcy5fJHVuZG9idG4gPSBxcygnLnVuZG8nKTtcbiAgICAgICAgdGhpcy5fJHJlZG9idG4gPSBxcygnLnJlZG8nKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0ICRib2FyZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuXyRib2FyZDtcbiAgICB9XG4gICAgcHVibGljIGdldCAkY2FwdHVyZWR3aGl0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuXyRjYXB0dXJlZHdoaXRlO1xuICAgIH1cbiAgICBwdWJsaWMgZ2V0ICRjYXB0dXJlZGJsYWNrKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fJGNhcHR1cmVkYmxhY2s7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGRlc2NyaXB0aW9uIFVwZGF0ZXMgdGhlIGNoZXNzYm9hcmQgaHRtbC5cbiAgICAgKi9cbiAgICBzaG93Qm9hcmQoc3RhdGU6IFN0b3JlU3RhdGUpOiB2b2lkIHtcbiAgICAgICAgdGhpcy4kYm9hcmQucmVwbGFjZUNoaWxkKHRoaXMuX3RlbXBsYXRlLkJvYXJkKHN0YXRlKSwgdGhpcy4kYm9hcmQuZmlyc3RDaGlsZCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGRlc2NyaXB0aW9uIFVwZGF0ZXMgdGhlIGNhcHR1cmVkIHBpZWNlcyBpbiB0aGUgaHRtbC5cbiAgICAgKi9cbiAgICBzaG93Q2FwdHVyZXMoc3RhdGU6IFN0b3JlU3RhdGUpOiB2b2lkIHtcbiAgICAgICAgdGhpcy4kY2FwdHVyZWR3aGl0ZS5yZXBsYWNlQ2hpbGQodGhpcy5fdGVtcGxhdGUuQ2FwdHVyZWRXaGl0ZShzdGF0ZSksIHRoaXMuJGNhcHR1cmVkd2hpdGUuZmlyc3RDaGlsZCk7XG4gICAgICAgIHRoaXMuJGNhcHR1cmVkYmxhY2sucmVwbGFjZUNoaWxkKHRoaXMuX3RlbXBsYXRlLkNhcHR1cmVkQmxhY2soc3RhdGUpLCB0aGlzLiRjYXB0dXJlZGJsYWNrLmZpcnN0Q2hpbGQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBkZXNjcmlwdGlvbiBCaW5kcyBoYW5kbGVyIHRvIGJveCwgY2FsbGluZyBoYW5kbGVyIHdoZW4gdGhlIHN5bnRoZXRpYyAnY2xpY2snIGV2ZW50IGlzIGZpcmVkLlxuICAgICAqL1xuICAgIGJpbmRTZWxlY3RCb3goYm94OiBFbGVtZW50LCBoYW5kbGVyOiAoYm94OiBFbGVtZW50KSA9PiB2b2lkKTogdm9pZCB7XG4gICAgICAgICRvbihib3gsICdjbGljaycsICgpID0+IGhhbmRsZXIoYm94KSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGRlc2NyaXB0aW9uIEJpbmRzIGhhbmRsZXIgdG8gcGllY2UsIGNhbGxpbmcgaGFuZGxlciB3aGVuIHRoZSBzeW50aGV0aWMgJ2NsaWNrJyBldmVudCBpcyBmaXJlZC5cbiAgICAgKi9cbiAgICBiaW5kQ2FwdHVyZWRQaWVjZShwaWVjZTogRWxlbWVudCwgaTogbnVtYmVyLCBoYW5kbGVyOiAocGllY2U6IEVsZW1lbnQsIGk6IG51bWJlcikgPT4gdm9pZCk6IHZvaWQge1xuICAgICAgICAkb24ocGllY2UsICdjbGljaycsICgpID0+IGhhbmRsZXIocGllY2UsIGkpKTtcbiAgICB9XG5cbiAgICBiaW5kVW5kb01vdmUoaGFuZGxlcjogRnVuY3Rpb24pOiB2b2lkIHtcbiAgICAgICAgLy8gJG9uKHRoaXMuJHVuZG9idG4sICdjbGljaycsICgpID0+IGhhbmRsZXIoKSk7XG4gICAgfVxuXG4gICAgYmluZFJlZG9Nb3ZlKGhhbmRsZXI6IEZ1bmN0aW9uKTogdm9pZCB7XG4gICAgICAgIC8vICRvbih0aGlzLiRyZWRvYnRuLCAnY2xpY2snLCAoKSA9PiBoYW5kbGVyKCkpO1xuICAgIH1cbn0iLCJpbXBvcnQgeyBCb3gsIFBpZWNlLCBFbXB0eVBpZWNlLCBHYW1lU3RhdGUsIFBMQVlFUl9XSElURSwgUExBWUVSX0JMQUNLLCBQbGF5ZXIgfSBmcm9tICcuLi90eXBlcyc7XG5jb25zdCBQaWVjZUhlbHBlciA9IHtcbiAgZ2V0TnVtTW92ZXM6IChnYW1lU3RhdGU6IEdhbWVTdGF0ZSwgYm94OiBCb3gpID0+IC0xLFxuICBpc0VtcHR5OiAoZ2FtZVN0YXRlOiBHYW1lU3RhdGUsIGJveDogQm94KTogYm9vbGVhbiA9PiBmYWxzZSxcbiAgaXNQaWVjZU9mR2l2ZW5QbGF5ZXI6IChnYW1lU3RhdGU6IEdhbWVTdGF0ZSwgcGxheWVyOiBQbGF5ZXIsIGJveDogQm94KTogYm9vbGVhbiA9PiBmYWxzZSxcbiAgaXNQaWVjZU9mQ3VycmVudFBsYXllcjogKGdhbWVTdGF0ZTogR2FtZVN0YXRlLCBib3g6IEJveCk6IGJvb2xlYW4gPT4gZmFsc2UsIFxuICBpc0JveE9uQm9hcmQ6IChnYW1lU3RhdGU6IEdhbWVTdGF0ZSwgYm94OiBCb3gpOiBib29sZWFuID0+IGZhbHNlLCBcbiAgaXNWYWxpZFNvdXJjZUFuZERlc3Q6IChnYW1lU3RhdGU6IEdhbWVTdGF0ZSwgc3JjOiBCb3gsIGRzdDogQm94KTogYm9vbGVhbiA9PiBmYWxzZSwgXG4gIGNhbkdvQWxvbmdSb3dUb0Rlc3Q6IChnYW1lU3RhdGU6IEdhbWVTdGF0ZSwgc3JjOiBCb3gsIGRzdDogQm94KTogYm9vbGVhbiA9PiBmYWxzZSwgXG4gIGNhbkdvQWxvbmdDb2xUb0Rlc3Q6IChnYW1lU3RhdGU6IEdhbWVTdGF0ZSwgc3JjOiBCb3gsIGRzdDogQm94KTogYm9vbGVhbiA9PiBmYWxzZSwgXG4gIGNhbkdvQWxvbmdMaW5lVG9EZXN0OiAoZ2FtZVN0YXRlOiBHYW1lU3RhdGUsIHNyYzogQm94LCBkc3Q6IEJveCk6IGJvb2xlYW4gPT4gZmFsc2UsIFxuICBjYW5Hb0Fsb25nRGlhZ29uYWxUb0Rlc3Q6IChnYW1lU3RhdGU6IEdhbWVTdGF0ZSwgc3JjOiBCb3gsIGRzdDogQm94KTogYm9vbGVhbiA9PiBmYWxzZSwgXG59O1xuLyoqXG4gKiBAcGFyYW0ge0dhbWVTdGF0ZX0gZ2FtZVN0YXRlXG4gKiBAcGFyYW0ge0JveH0gYm94XG4gKiBAcmV0dXJucyB7bnVtYmVyfVxuICogQHRvZG8gaGFuZGxlIGVycm9yIGNhc2Ugd2hlcmUgY29kZSBkb2Vzbid0IG1hdGNoIGluIG1vcmUgbWVhbmluZ2Z1bCB3YXksIGJldHRlciBmb3IgdGVzdGluZy5cbiAqL1xuUGllY2VIZWxwZXIuZ2V0TnVtTW92ZXMgPSAoZ2FtZVN0YXRlOiBHYW1lU3RhdGUsIGJveDogQm94KTogbnVtYmVyID0+IHtcbiAgY29uc3QgcyA9IGdhbWVTdGF0ZS5nZXRFbmNvZGluZyhib3gpO1xuICBsZXQgY29kZU1hdGNoID0gcy5tYXRjaCgvKFthLXpBLXpdKShcXGQqKS8pO1xuICBsZXQgbnVtTW92ZXMgPSBjb2RlTWF0Y2ggJiYgY29kZU1hdGNoLmxlbmd0aCA+IDIgJiYgIWlzTmFOKE51bWJlcihjb2RlTWF0Y2hbMl0pKSA/IE51bWJlcihjb2RlTWF0Y2hbMl0pIDogLTE7IC8vIC0xIHNob3VsZCBuZXZlciBoYXBwZW4sIHRob3VnaC5cbiAgcmV0dXJuIG51bU1vdmVzO1xufVxuLyoqXG4gKiBcbiAqIEBwYXJhbSB7R2FtZVN0YXRlfSBnYW1lU3RhdGVcbiAqIEBwYXJhbSB7Qm94fSBib3hcbiAqIEByZXR1cm5zIHtib29sZWFufVxuICovXG5QaWVjZUhlbHBlci5pc0VtcHR5ID0gKGdhbWVTdGF0ZTogR2FtZVN0YXRlLCBib3g6IEJveCk6IGJvb2xlYW4gPT4gZ2FtZVN0YXRlLmdldEVuY29kaW5nKGJveCkudHJpbSgpID09PSAnJztcbi8qKlxuICogXG4gKiBAcGFyYW0ge0dhbWVTdGF0ZX0gZ2FtZVN0YXRlIFxuICogQHBhcmFtIHtudW1iZXJ9IHBsYXllciBcbiAqIEBwYXJhbSB7Qm94fSBib3hcbiAqIEByZXR1cm5zIHtib29sZWFufVxuICovXG5QaWVjZUhlbHBlci5pc1BpZWNlT2ZHaXZlblBsYXllciA9IChnYW1lU3RhdGU6IEdhbWVTdGF0ZSwgcGxheWVyOiBQbGF5ZXIsIGJveDogQm94KTogYm9vbGVhbiA9PiB7XG4gIGNvbnN0IHMgPSBnYW1lU3RhdGUuZ2V0RW5jb2RpbmcoYm94KTtcbiAgbGV0IGNvZGVNYXRjaCA9IHMubWF0Y2goLyhbYS16QS16XSkoXFxkKikvKTtcbiAgbGV0IGFscGhhY29kZSA9IGNvZGVNYXRjaC5sZW5ndGggPiAxID8gY29kZU1hdGNoWzFdIDogbnVsbDtcbiAgaWYgKCFhbHBoYWNvZGUpIHJldHVybiBmYWxzZTtcbiAgaWYgKChwbGF5ZXIgPT0gUExBWUVSX1dISVRFICYmIGFscGhhY29kZSA9PSBhbHBoYWNvZGUudG9VcHBlckNhc2UoKSkgfHwgKHBsYXllciA9PSBQTEFZRVJfQkxBQ0sgJiYgYWxwaGFjb2RlID09IGFscGhhY29kZS50b0xvd2VyQ2FzZSgpKSkgcmV0dXJuIHRydWU7XG4gIHJldHVybiBmYWxzZTtcbn1cblBpZWNlSGVscGVyLmlzUGllY2VPZkN1cnJlbnRQbGF5ZXIgPSAoZ2FtZVN0YXRlOiBHYW1lU3RhdGUsIGJveDogQm94KTogYm9vbGVhbiA9PiB7XG4gIGNvbnN0IGNoZWNrUGFydGljdWxhclBsYXllciA9IChwbGF5ZXJDYXNlOiAoczogc3RyaW5nKSA9PiBzdHJpbmcsIHtjOiBjLCByOiByfSA9IGJveCk6IGJvb2xlYW4gPT5cbiAgICAoZ2FtZVN0YXRlLmdldEVuY29kaW5nKGJveCkgPT09IHBsYXllckNhc2UuYXBwbHkoZ2FtZVN0YXRlLmdldEVuY29kaW5nKGJveCkpKSAmJiAhUGllY2VIZWxwZXIuaXNFbXB0eShnYW1lU3RhdGUsIGJveCk7XG4gIHJldHVybiBnYW1lU3RhdGUucGxheWVyID09PSBQTEFZRVJfV0hJVEUgP1xuICAgIGNoZWNrUGFydGljdWxhclBsYXllcihTdHJpbmcucHJvdG90eXBlLnRvVXBwZXJDYXNlKSA6IGNoZWNrUGFydGljdWxhclBsYXllcihTdHJpbmcucHJvdG90eXBlLnRvTG93ZXJDYXNlKTtcbn1cbi8qKlxuICogXG4gKiBAcGFyYW0ge0dhbWVTdGF0ZX0gZ2FtZVN0YXRlIFxuICogQHBhcmFtIHtCb3h9IGJveCBcbiAqIEByZXR1cm5zIHtib29sZWFufVxuICovXG5QaWVjZUhlbHBlci5pc0JveE9uQm9hcmQgPSAoZ2FtZVN0YXRlOiBHYW1lU3RhdGUsIGJveDogQm94KTogYm9vbGVhbiA9PiBib3guciA8IGdhbWVTdGF0ZS5yYW5rQ291bnQgJiYgYm94LnIgPj0gMCAmJiBib3guYyA+PSAwICYmIGJveC5jIDwgZ2FtZVN0YXRlLmZpbGVDb3VudDtcbi8qKlxuICogXG4gKiBAcGFyYW0ge0dhbWVTdGF0ZX0gZ2FtZVN0YXRlIFxuICogQHBhcmFtIHtCb3h9IHNyYyBcbiAqIEBwYXJhbSB7Qm94fSBkc3QgXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuUGllY2VIZWxwZXIuaXNWYWxpZFNvdXJjZUFuZERlc3QgPSAoZ2FtZVN0YXRlOiBHYW1lU3RhdGUsIHNyYzogQm94LCBkc3Q6IEJveCk6IGJvb2xlYW4gPT4gUGllY2VIZWxwZXIuaXNQaWVjZU9mQ3VycmVudFBsYXllcihnYW1lU3RhdGUsc3JjKSAmJiAhUGllY2VIZWxwZXIuaXNQaWVjZU9mQ3VycmVudFBsYXllcihnYW1lU3RhdGUsZHN0KSAmJiBQaWVjZUhlbHBlci5pc0JveE9uQm9hcmQoZ2FtZVN0YXRlLGRzdCkgJiYgc3JjICE9IGRzdDtcbi8qKlxuICogXG4gKiBAcGFyYW0ge0dhbWVTdGF0ZX0gZ2FtZVN0YXRlIFxuICogQHBhcmFtIHtCb3h9IHNyYyBcbiAqIEBwYXJhbSB7Qm94fSBkc3QgXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuUGllY2VIZWxwZXIuY2FuR29BbG9uZ1Jvd1RvRGVzdCA9IChnYW1lU3RhdGU6IEdhbWVTdGF0ZSwgc3JjOiBCb3gsIGRzdDogQm94KTogYm9vbGVhbiA9PiB7XG4gIGlmIChzcmMuciA9PSBkc3Qucikge1xuICAgIGNvbnN0IGRpciA9IGRzdC5jID4gc3JjLmMgPyAxIDogLTE7XG4gICAgbGV0IGxlbiA9IE1hdGguYWJzKGRzdC5jLXNyYy5jKTtcbiAgICBmb3IgKGxldCBpID0gc3JjLmMrZGlyOyBsZW4tLSA+IDE7IGkgKz0gZGlyKSBpZiAoIVBpZWNlSGVscGVyLmlzRW1wdHkoZ2FtZVN0YXRlLHtyOnNyYy5yLGM6aX0pKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuLyoqXG4gKiBcbiAqIEBwYXJhbSB7R2FtZVN0YXRlfSBnYW1lU3RhdGUgXG4gKiBAcGFyYW0ge0JveH0gc3JjIFxuICogQHBhcmFtIHtCb3h9IGRzdCBcbiAqIEByZXR1cm5zIHtib29sZWFufVxuICovXG5QaWVjZUhlbHBlci5jYW5Hb0Fsb25nQ29sVG9EZXN0ID0gKGdhbWVTdGF0ZTogR2FtZVN0YXRlLCBzcmM6IEJveCwgZHN0OiBCb3gpOiBib29sZWFuID0+IHtcbiAgaWYgKHNyYy5jID09IGRzdC5jKSB7XG4gICAgY29uc3QgZGlyID0gZHN0LnIgPiBzcmMuciA/IDEgOiAtMTtcbiAgICBsZXQgbGVuID0gTWF0aC5hYnMoZHN0LnItc3JjLnIpO1xuICAgIGZvciAobGV0IGkgPSBzcmMucitkaXI7IGxlbi0tID4gMTsgaSArPSBkaXIpIGlmICghUGllY2VIZWxwZXIuaXNFbXB0eShnYW1lU3RhdGUse3I6aSxjOnNyYy5jfSkpIHJldHVybiBmYWxzZTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG4vKipcbiAqIFxuICogQHBhcmFtIHtHYW1lU3RhdGV9IGdhbWVTdGF0ZSBcbiAqIEBwYXJhbSB7Qm94fSBzcmNcbiAqIEBwYXJhbSB7Qm94fSBkc3RcbiAqIEByZXR1cm5zIHtib29sZWFufVxuICovXG5QaWVjZUhlbHBlci5jYW5Hb0Fsb25nTGluZVRvRGVzdCA9IChnYW1lU3RhdGU6IEdhbWVTdGF0ZSwgc3JjOiBCb3gsIGRzdDogQm94KTogYm9vbGVhbiA9PiBQaWVjZUhlbHBlci5jYW5Hb0Fsb25nQ29sVG9EZXN0KGdhbWVTdGF0ZSwgc3JjLCBkc3QpIHx8IFBpZWNlSGVscGVyLmNhbkdvQWxvbmdSb3dUb0Rlc3QoZ2FtZVN0YXRlLCBzcmMsIGRzdCk7XG4vKipcbiAqIFxuICogQHBhcmFtIHtHYW1lU3RhdGV9IGdhbWVTdGF0ZSBcbiAqIEBwYXJhbSB7Qm94fSBzcmMgXG4gKiBAcGFyYW0ge0JveH0gZHN0IFxuICogQHJldHVybnMge2Jvb2xlYW59XG4gKi9cblBpZWNlSGVscGVyLmNhbkdvQWxvbmdEaWFnb25hbFRvRGVzdCA9IChnYW1lU3RhdGU6IEdhbWVTdGF0ZSwgc3JjOiBCb3gsIGRzdDogQm94KTogYm9vbGVhbiA9PiB7IC8vIG5hdHVyYWwgZnVuY3Rpb25hbGl0eSBmb3IgYmlzaG9wXG4gIGlmIChNYXRoLmFicygoZHN0LnIgLSBzcmMucikvKGRzdC5jIC0gc3JjLmMpKSAhPSAxKSByZXR1cm4gZmFsc2U7XG4gIGxldCBsZW4gPSBNYXRoLmFicyhkc3QuYyAtIHNyYy5jKTtcbiAgY29uc3Qgcm93RGlyID0gZHN0LnIgLSBzcmMuciA+IDAgPyAxIDogLTE7XG4gIGNvbnN0IGNvbERpciA9IGRzdC5jIC0gc3JjLmMgPiAwID8gMSA6IC0xO1xuICBsZXQgaSA9IHNyYy5yK3Jvd0RpcjtcbiAgbGV0IGogPSBzcmMuYytjb2xEaXI7XG4gIGZvciAoOyBsZW4tLSA+IDE7IGkgKz0gcm93RGlyLCBqICs9IGNvbERpcikgaWYgKCFQaWVjZUhlbHBlci5pc0VtcHR5KGdhbWVTdGF0ZSx7cjppLGM6an0pKSByZXR1cm4gZmFsc2U7XG4gIHJldHVybiB0cnVlO1xufVxuZXhwb3J0IHtQaWVjZUhlbHBlcn07IiwiaW1wb3J0IHsgQm94LCBQaWVjZSwgR2FtZVN0YXRlLCBQTEFZRVJfV0hJVEUgfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgeyBQaWVjZUhlbHBlciB9IGZyb20gJy4vcGllY2VoZWxwZXInO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQYXduIGltcGxlbWVudHMgUGllY2Uge1xuICBwdWJsaWMgbmFtZTogc3RyaW5nO1xuICBwdWJsaWMgY29sb3I6IHN0cmluZztcbiAgcHVibGljIGdldFBvc3NpYmxlTW92ZXM6IChnYW1lU3RhdGU6IEdhbWVTdGF0ZSwgc3JjOiBCb3gsIG51bU1vdmVzPzogbnVtYmVyKSA9PiAoZHN0OiBCb3gpID0+IGJvb2xlYW47XG4gIGNvbnN0cnVjdG9yKGNvbG9yOiBzdHJpbmcpIHtcbiAgICB0aGlzLm5hbWUgPSAncGF3bic7XG4gICAgdGhpcy5jb2xvciA9IGNvbG9yO1xuICAgIHRoaXMuZ2V0UG9zc2libGVNb3ZlcyA9IChnYW1lU3RhdGU6IEdhbWVTdGF0ZSwgc3JjOiBCb3gsbnVtTW92ZXM/OiBudW1iZXIpOiAoZHN0OiBCb3gpID0+IGJvb2xlYW4gPT4ge1xuICAgICAgaWYgKG51bU1vdmVzID09PSB1bmRlZmluZWQpIG51bU1vdmVzID0gUGllY2VIZWxwZXIuZ2V0TnVtTW92ZXMoZ2FtZVN0YXRlLHNyYyk7XG4gICAgICBjb25zdCBmb3J3YXJkRGlyZWN0aW9uT2ZDdXJyZW50UGxheWVyID0gKCkgPT4gZ2FtZVN0YXRlLnBsYXllciA9PSBQTEFZRVJfV0hJVEUgPyAtMSA6IDE7XG4gICAgICAvKipcbiAgICAgICAqIEBwYXJhbSB7IUJveH0gZHN0IFxuICAgICAgICogQHlpZWxkcyB7Ym9vbGVhbn0gUmV0dXJucyBhIChjdXJyaWVkKSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBib29sZWFuICh3aGVuIGFwcGxpZWQpLlxuICAgICAgICovXG4gICAgICBjb25zdCBpc1Bvc3NpYmxlVG9Nb3ZlVG8gPSAoZHN0OiBCb3gpOiBib29sZWFuID0+IHtcbiAgICAgICAgaWYgKCFQaWVjZUhlbHBlci5pc1ZhbGlkU291cmNlQW5kRGVzdChnYW1lU3RhdGUsc3JjLGRzdCkpIHJldHVybiBmYWxzZTtcbiAgICAgICAgY29uc3QgZGlyID0gZm9yd2FyZERpcmVjdGlvbk9mQ3VycmVudFBsYXllcigpO1xuICAgICAgICBjb25zdCBwYXduQ2FuTW92ZTFGb3J3YXJkID0gUGllY2VIZWxwZXIuaXNFbXB0eShnYW1lU3RhdGUsZHN0KSAmJiBzcmMuYyA9PSBkc3QuYyAmJiBkc3QuciA9PSBzcmMuciArIGRpcjtcbiAgICAgICAgY29uc3QgaW5CZXR3ZWVuU3F1YXJlID0ge1xuICAgICAgICAgIHI6IHNyYy5yICsgZGlyLFxuICAgICAgICAgIGM6IGRzdC5jXG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHBhd25DYW5Nb3ZlMkZvcndhcmQgPSBudW1Nb3ZlcyA9PSAwICYmIFBpZWNlSGVscGVyLmlzRW1wdHkoZ2FtZVN0YXRlLGRzdCkgJiYgUGllY2VIZWxwZXIuaXNFbXB0eShnYW1lU3RhdGUsaW5CZXR3ZWVuU3F1YXJlKSAmJiBzcmMuYyA9PSBkc3QuYyAmJiBkc3QuciA9PSBzcmMuciArMipkaXI7XG4gICAgICAgIGNvbnN0IHBhd25DYW5BdHRhY2sgPSAhUGllY2VIZWxwZXIuaXNQaWVjZU9mQ3VycmVudFBsYXllcihnYW1lU3RhdGUsZHN0KSAmJiAhUGllY2VIZWxwZXIuaXNFbXB0eShnYW1lU3RhdGUsZHN0KSAmJiBkc3QuciA9PSBzcmMuciArIGRpciAmJiAoZHN0LmMgPT0gc3JjLmMgKyAxIHx8IGRzdC5jID09IHNyYy5jIC0gMSk7XG4gICAgICAgIHJldHVybiAocGF3bkNhbk1vdmUxRm9yd2FyZCB8fCBwYXduQ2FuTW92ZTJGb3J3YXJkIHx8IHBhd25DYW5BdHRhY2spICYmICFQaWVjZUhlbHBlci5pc1BpZWNlT2ZDdXJyZW50UGxheWVyKGdhbWVTdGF0ZSwgZHN0KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBpc1Bvc3NpYmxlVG9Nb3ZlVG87XG4gICAgfTtcbiAgfVxufSIsImltcG9ydCB7IEJveCwgUGllY2UsIEdhbWVTdGF0ZSB9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB7IFBpZWNlSGVscGVyIH0gZnJvbSAnLi9waWVjZWhlbHBlcic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJvb2sgaW1wbGVtZW50cyBQaWVjZSB7XG4gIHB1YmxpYyBuYW1lOiBzdHJpbmc7XG4gIHB1YmxpYyBjb2xvcjogc3RyaW5nO1xuICBwdWJsaWMgZ2V0UG9zc2libGVNb3ZlczogKGdhbWVTdGF0ZTogR2FtZVN0YXRlLCBzcmM6IEJveCwgbnVtTW92ZXM/OiBudW1iZXIpID0+IChkc3Q6IEJveCkgPT4gYm9vbGVhbjtcbiAgY29uc3RydWN0b3IoY29sb3I6IHN0cmluZykge1xuICAgIHRoaXMubmFtZSA9ICdyb29rJztcbiAgICB0aGlzLmNvbG9yID0gY29sb3I7XG4gICAgdGhpcy5nZXRQb3NzaWJsZU1vdmVzID0gKGdhbWVTdGF0ZTogR2FtZVN0YXRlLCBzcmM6IEJveCxudW1Nb3Zlcz86IG51bWJlcikgPT4ge1xuICAgICAgY29uc3QgaXNQb3NzaWJsZVRvTW92ZVRvID0gKGRzdDogQm94KTogYm9vbGVhbiA9PlxuICAgICAgICBQaWVjZUhlbHBlci5pc1ZhbGlkU291cmNlQW5kRGVzdChnYW1lU3RhdGUsc3JjLGRzdCkgP1xuICAgICAgICBQaWVjZUhlbHBlci5jYW5Hb0Fsb25nUm93VG9EZXN0KGdhbWVTdGF0ZSxzcmMsZHN0KSB8fCBQaWVjZUhlbHBlci5jYW5Hb0Fsb25nQ29sVG9EZXN0KGdhbWVTdGF0ZSxzcmMsZHN0KSA6IGZhbHNlO1xuICAgICAgcmV0dXJuIGlzUG9zc2libGVUb01vdmVUbztcbiAgICB9O1xuICB9XG59IiwiaW1wb3J0IHsgQm94LCBQaWVjZSwgR2FtZVN0YXRlIH0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHsgUGllY2VIZWxwZXIgfSBmcm9tICcuL3BpZWNlaGVscGVyJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgS25pZ2h0IGltcGxlbWVudHMgUGllY2Uge1xuICBwdWJsaWMgbmFtZTogc3RyaW5nO1xuICBwdWJsaWMgY29sb3I6IHN0cmluZztcbiAgcHVibGljIGdldFBvc3NpYmxlTW92ZXM6IChnYW1lU3RhdGU6IEdhbWVTdGF0ZSwgc3JjOiBCb3gsIG51bU1vdmVzPzogbnVtYmVyKSA9PiAoZHN0OiBCb3gpID0+IGJvb2xlYW47XG4gIGNvbnN0cnVjdG9yKGNvbG9yOiBzdHJpbmcpIHtcbiAgICB0aGlzLm5hbWUgPSAna25pZ2h0JztcbiAgICB0aGlzLmNvbG9yID0gY29sb3I7XG4gICAgdGhpcy5nZXRQb3NzaWJsZU1vdmVzID0gKGdhbWVTdGF0ZSxzcmMsbnVtTW92ZXMpID0+IHtcbiAgICAgIGNvbnN0IGlzUG9zc2libGVUb01vdmVUbyA9IChkc3Q6IEJveCk6IGJvb2xlYW4gPT5cbiAgICAgICAgUGllY2VIZWxwZXIuaXNWYWxpZFNvdXJjZUFuZERlc3QoZ2FtZVN0YXRlLHNyYyxkc3QpICYmXG4gICAgICAgICgoTWF0aC5hYnMoc3JjLnItZHN0LnIpID09IDEgJiYgTWF0aC5hYnMoc3JjLmMtZHN0LmMpID09IDIpIHx8IChNYXRoLmFicyhzcmMuYy1kc3QuYykgPT0gMSAmJiBNYXRoLmFicyhzcmMuci1kc3QucikgPT0gMikpID9cbiAgICAgICAgdHJ1ZSA6IGZhbHNlO1xuICAgICAgcmV0dXJuIGlzUG9zc2libGVUb01vdmVUbztcbiAgICB9O1xuICB9XG59IiwiaW1wb3J0IHsgQm94LCBQaWVjZSwgR2FtZVN0YXRlIH0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHsgUGllY2VIZWxwZXIgfSBmcm9tICcuL3BpZWNlaGVscGVyJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmlzaG9wIGltcGxlbWVudHMgUGllY2Uge1xuICBwdWJsaWMgbmFtZTogc3RyaW5nO1xuICBwdWJsaWMgY29sb3I6IHN0cmluZztcbiAgcHVibGljIGdldFBvc3NpYmxlTW92ZXM6IChnYW1lU3RhdGU6IEdhbWVTdGF0ZSwgc3JjOiBCb3gsIG51bU1vdmVzPzogbnVtYmVyKSA9PiAoZHN0OiBCb3gpID0+IGJvb2xlYW47XG4gIGNvbnN0cnVjdG9yKGNvbG9yOiBzdHJpbmcpIHtcbiAgICB0aGlzLm5hbWUgPSAnYmlzaG9wJztcbiAgICB0aGlzLmNvbG9yID0gY29sb3I7XG4gICAgdGhpcy5nZXRQb3NzaWJsZU1vdmVzID0gZnVuY3Rpb24oZ2FtZVN0YXRlLCBzcmM6IEJveCwgbnVtTW92ZXM/OiBudW1iZXIpIHtcbiAgICAgIGNvbnN0IGlzUG9zc2libGVUb01vdmVUbyA9IChkc3Q6IEJveCkgPT4ge1xuICAgICAgICByZXR1cm4gUGllY2VIZWxwZXIuaXNWYWxpZFNvdXJjZUFuZERlc3QoZ2FtZVN0YXRlLHNyYyxkc3QpID9cbiAgICAgICAgUGllY2VIZWxwZXIuY2FuR29BbG9uZ0RpYWdvbmFsVG9EZXN0KGdhbWVTdGF0ZSxzcmMsZHN0KSA6IGZhbHNlO1xuICAgICAgfTtcbiAgICAgIHJldHVybiBpc1Bvc3NpYmxlVG9Nb3ZlVG87XG4gICAgfVxuICB9XG59IiwiaW1wb3J0IHsgQm94LCBQaWVjZSwgR2FtZVN0YXRlIH0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHsgUGllY2VIZWxwZXIgfSBmcm9tICcuL3BpZWNlaGVscGVyJztcblxuLyoqXG4gKiBAY2xhc3MgUXVlZW5cbiAqIEB0eXBlIHtQaWVjZX1cbiAqL1xuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUXVlZW4gaW1wbGVtZW50cyBQaWVjZSB7XG4gIHB1YmxpYyBuYW1lOiBzdHJpbmc7XG4gIHB1YmxpYyBjb2xvcjogc3RyaW5nO1xuICBwdWJsaWMgZ2V0UG9zc2libGVNb3ZlczogKGdhbWVTdGF0ZTogR2FtZVN0YXRlLCBzcmM6IEJveCwgbnVtTW92ZXM/OiBudW1iZXIpID0+IChkc3Q6IEJveCkgPT4gYm9vbGVhbjtcbiAgY29uc3RydWN0b3IoY29sb3I6IHN0cmluZykge1xuICAgIHRoaXMubmFtZSA9ICdxdWVlbic7XG4gICAgdGhpcy5jb2xvciA9IGNvbG9yO1xuICAgIHRoaXMuZ2V0UG9zc2libGVNb3ZlcyA9IChnYW1lU3RhdGU6IEdhbWVTdGF0ZSwgc3JjOiBCb3gsbnVtTW92ZXM/OiBudW1iZXIpID0+IHtcbiAgICAgIGNvbnN0IGlzUG9zc2libGVUb01vdmVUbyA9IChkc3Q6IEJveCk6IGJvb2xlYW4gPT5cbiAgICAgICAgUGllY2VIZWxwZXIuaXNWYWxpZFNvdXJjZUFuZERlc3QoZ2FtZVN0YXRlLHNyYyxkc3QpID9cbiAgICAgICAgUGllY2VIZWxwZXIuY2FuR29BbG9uZ1Jvd1RvRGVzdChnYW1lU3RhdGUsc3JjLGRzdCkgfHwgUGllY2VIZWxwZXIuY2FuR29BbG9uZ0NvbFRvRGVzdChnYW1lU3RhdGUsc3JjLGRzdCkgfHwgUGllY2VIZWxwZXIuY2FuR29BbG9uZ0RpYWdvbmFsVG9EZXN0KGdhbWVTdGF0ZSxzcmMsZHN0KSA6IGZhbHNlO1xuICAgICAgcmV0dXJuIGlzUG9zc2libGVUb01vdmVUbztcbiAgICB9O1xuICB9XG59IiwiaW1wb3J0IHsgQm94LCBQaWVjZSwgR2FtZVN0YXRlIH0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHsgUGllY2VIZWxwZXIgfSBmcm9tICcuL3BpZWNlaGVscGVyJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgS2luZyBpbXBsZW1lbnRzIFBpZWNlIHtcbiAgcHVibGljIG5hbWU6IHN0cmluZztcbiAgcHVibGljIGNvbG9yOiBzdHJpbmc7XG4gIHB1YmxpYyBnZXRQb3NzaWJsZU1vdmVzOiAoZ2FtZVN0YXRlOiBHYW1lU3RhdGUsIHNyYzogQm94LCBudW1Nb3Zlcz86IG51bWJlcikgPT4gKGRzdDogQm94KSA9PiBib29sZWFuO1xuICBwdWJsaWMgZ2V0UG9zc2libGVTcGVjaWFsTW92ZXM6IEZ1bmN0aW9uO1xuICBjb25zdHJ1Y3Rvcihjb2xvcjogc3RyaW5nLCBzcGVjaWFsTW92ZXM/OiBGdW5jdGlvbikge1xuICAgIHRoaXMubmFtZSA9ICdraW5nJztcbiAgICB0aGlzLmNvbG9yID0gY29sb3I7XG4gICAgdGhpcy5nZXRQb3NzaWJsZVNwZWNpYWxNb3ZlcyA9IHNwZWNpYWxNb3ZlcztcbiAgICB0aGlzLmdldFBvc3NpYmxlTW92ZXMgPSAoZ2FtZVN0YXRlOiBHYW1lU3RhdGUsIHNyYzogQm94LG51bU1vdmVzPzogbnVtYmVyKSA9PiB7XG4gICAgICBjb25zdCBpc1Bvc3NpYmxlVG9Nb3ZlVG8gPSAoZHN0OiBCb3gpOiBib29sZWFuID0+IHtcbiAgICAgICAgaWYgKFBpZWNlSGVscGVyLmlzVmFsaWRTb3VyY2VBbmREZXN0KGdhbWVTdGF0ZSxzcmMsZHN0KSAmJiAoTWF0aC5hYnMoZHN0LmMtc3JjLmMpPT0xIHx8IE1hdGguYWJzKGRzdC5yLXNyYy5yKT09MSkpXG4gICAgICAgICAgcmV0dXJuIFBpZWNlSGVscGVyLmNhbkdvQWxvbmdSb3dUb0Rlc3QoZ2FtZVN0YXRlLHNyYyxkc3QpIHx8IFBpZWNlSGVscGVyLmNhbkdvQWxvbmdDb2xUb0Rlc3QoZ2FtZVN0YXRlLHNyYyxkc3QpIHx8IFBpZWNlSGVscGVyLmNhbkdvQWxvbmdEaWFnb25hbFRvRGVzdChnYW1lU3RhdGUsc3JjLGRzdClcbiAgICAgICAgZWxzZSByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gaXNQb3NzaWJsZVRvTW92ZVRvO1xuICAgIH07XG4gIH1cbn0iLCJpbXBvcnQgJ3BhdGgnO1xuaW1wb3J0IHsgQm94LCBQaWVjZSwgRW1wdHlQaWVjZSwgR2FtZVN0YXRlLCBCb2FyZCB9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB7IFBpZWNlSGVscGVyIH0gZnJvbSAnLi9waWVjZWhlbHBlcic7XG5pbXBvcnQgUGF3biBmcm9tICcuL3Bhd24nO1xuaW1wb3J0IFJvb2sgZnJvbSAnLi9yb29rJztcbmltcG9ydCBLbmlnaHQgZnJvbSAnLi9rbmlnaHQnO1xuaW1wb3J0IEJpc2hvcCBmcm9tICcuL2Jpc2hvcCc7XG5pbXBvcnQgUXVlZW4gZnJvbSAnLi9xdWVlbic7XG5pbXBvcnQgS2luZyBmcm9tICcuL2tpbmcnO1xuLyoqXG4gKiBAZGVzY3JpcHRpb24gVGhpcyBtb2R1bGUgaXMgcHVyZWx5IGZ1bmN0aW9uYWwgKHRoZXJlIHNoYWxsIGJlIG5vIHNpZGUtZWZmZWN0cykuXG4gKiAgRnVydGhlcm1vcmUsIGl0IGlzIHVwIHRvIHRoZSBjYWxsZXIgdG8gYWRlcXVhdGVseSBzdG9yZSB0aGUgcmVzdWx0cyBvZiBjYWxsaW5nIHRoZXNlIHB1cmUgZnVuY3Rpb25zLlxuICovXG5jb25zdCBQaWVjZUdhbWVMb2dpYyA9IHsgLy8gZm9yIFR5cGVTY3JpcHRcbiAgY29udmVydEdTQm9hcmRUb1BpZWNlQm9hcmQ6IChnYW1lU3RhdGU6IEdhbWVTdGF0ZSk6IEFycmF5PEFycmF5PFBpZWNlPj4gPT4gW10sXG4gIGNvbnZlcnRQaWVjZVRvU3RyaW5nRW5jb2Rpbmc6IChwaWVjZTogUGllY2UsIHRpbWVzTW92ZWQ/OiBudW1iZXIpOiBzdHJpbmcgPT4gJycsXG4gIGdldFR5cGU6IChzOiBzdHJpbmcpOiBQaWVjZSA9PiA8UGllY2U+KG5ldyBFbXB0eVBpZWNlKSxcbiAgZ2V0TnVtTW92ZXM6IChzOiBzdHJpbmcpOiBudW1iZXIgPT4gLTEsXG4gIGdldFBvc3NpYmxlUGllY2VzVG9Qcm9tb3RlVG86IChnYW1lU3RhdGU6IEdhbWVTdGF0ZSwgc3JjOiBCb3gpOiBBcnJheTxCb3g+ID0+IFtdLFxuICBnZXRQb3NzaWJsZU1vdmVzOiAoZ2FtZVN0YXRlOiBHYW1lU3RhdGUsICBzcmM6IEJveCwgcHJldk1vdmU/OiB7IHNyYzogQm94LCBkc3Q6IEJveCB9KTogQXJyYXk8Qm94PiA9PiBbe3I6IC0xLCBjOiAtMX1dLFxuICBpc1Bvc3NpYmxlVG9Nb3ZlVG86IChnYW1lU3RhdGU6IEdhbWVTdGF0ZSwgIHNyYzogQm94KTogRnVuY3Rpb24gPT4gKGJveDogQm94KTogYm9vbGVhbiA9PiBmYWxzZSxcbiAgaXNJbkNoZWNrOiAoZ2FtZVN0YXRlOiBHYW1lU3RhdGUsICBzcmM6IEJveCk6IGJvb2xlYW4gPT4gZmFsc2UsXG4gIGlzSW5DaGVja21hdGU6IChnYW1lU3RhdGU6IEdhbWVTdGF0ZSwgIHNyYzogQm94KTogYm9vbGVhbiA9PiBmYWxzZSxcbiAga2luZ0NhbkNhc3RsZVdpdGhHaXZlblJvb2s6IChnYW1lU3RhdGU6IEdhbWVTdGF0ZSwgIHNyYzogQm94LCBkc3Q6IEJveCk6IGJvb2xlYW4gPT4gZmFsc2UsXG4gIGNhc3RsZUtpbmdXaXRoR2l2ZW5Sb29rOiAoZ2FtZVN0YXRlOiBHYW1lU3RhdGUsICBzcmM6IEJveCwgZHN0OiBCb3gpOiBHYW1lU3RhdGUgPT4gZ2FtZVN0YXRlLFxuICBnZXRTZXRPZkFsbFBvc3NpYmxlTW92ZXNGb3JQbGF5ZXI6IChnYW1lU3RhdGU6IEdhbWVTdGF0ZSwgIHBsYXllcjogbnVtYmVyKTogU2V0PEJveD4gPT4gbmV3IFNldCgpLFxuICByYW5kb21EZWZlbnNpdmVNb3ZlOiAoZ2FtZVN0YXRlOiBHYW1lU3RhdGUpOiBTZXQ8Qm94PiA9PiBuZXcgU2V0KCksXG4gIGlzQUNhcHR1cmU6IChnYW1lU3RhdGU6IEdhbWVTdGF0ZSwgIHNyYzogQm94LCBkc3Q6IEJveCk6IGJvb2xlYW4gPT4gZmFsc2UsXG4gIGlzRW5QYXNzYW50UG9zc2libGU6IChnYW1lU3RhdGU6IEdhbWVTdGF0ZSwgc3JjOiBCb3gsIHByZXZNb3ZlOiB7c3JjOiBCb3gsIGRzdDogQm94fSk6IGJvb2xlYW4gPT4gZmFsc2UsXG4gIGdldEJveE9mUHJvbW90YWJsZVBpZWNlSWZQb3NzaWJsZTogKGdhbWVTdGF0ZTogR2FtZVN0YXRlKTogQm94ID0+ICh7cjogLTEsIGM6IC0xfSksXG4gIHByb21vdGVJZlBvc3NpYmxlOiAoZ2FtZVN0YXRlOiBHYW1lU3RhdGUsIGZpcnN0OiBCb3gsIHNlY29uZDogUGllY2UpOiBHYW1lU3RhdGUgPT4gZ2FtZVN0YXRlLFxuICBpbmNyZW1lbnRNb3ZlQ291bnQ6IChlbmM6IHN0cmluZyk6IHN0cmluZyA9PiAnJyxcbiAgbWFrZUxlZ2FsTW92ZTogKGdhbWVTdGF0ZTogR2FtZVN0YXRlLCBzcmM6IEJveCwgZHN0OiBCb3gsIHByZXZNb3ZlOiB7c3JjOiBCb3gsIGRzdDogQm94fSwgcGllY2VUb1Byb21vdGVUbz86IFBpZWNlKTogeyBnYW1lU3RhdGU6IEdhbWVTdGF0ZSwgY2FwdHVyZWRQaWVjZTogUGllY2UsIHdhc1Byb21vdGlvbjogYm9vbGVhbiB9ID0+ICh7IGdhbWVTdGF0ZSwgY2FwdHVyZWRQaWVjZTogPFBpZWNlPihuZXcgRW1wdHlQaWVjZSksIHdhc1Byb21vdGlvbjogZmFsc2UgfSksXG59O1xuUGllY2VHYW1lTG9naWMuY29udmVydEdTQm9hcmRUb1BpZWNlQm9hcmQgPSAoZ2FtZVN0YXRlOiBHYW1lU3RhdGUpOiBBcnJheTxBcnJheTxQaWVjZT4+ID0+IHtcbiAgY29uc3QgcGllY2VCb2FyZCA9IFtdO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGdhbWVTdGF0ZS5yYW5rQ291bnQ7IGkrKykge1xuICAgIHBpZWNlQm9hcmQucHVzaChbXSk7XG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCBnYW1lU3RhdGUuZmlsZUNvdW50OyBqKyspIHtcbiAgICAgIHBpZWNlQm9hcmRbaV0ucHVzaChQaWVjZUdhbWVMb2dpYy5nZXRUeXBlKGdhbWVTdGF0ZS5nZXRFbmNvZGluZyh7IHI6IGksIGM6IGogfSkpKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHBpZWNlQm9hcmQ7XG59O1xuUGllY2VHYW1lTG9naWMuY29udmVydFBpZWNlVG9TdHJpbmdFbmNvZGluZyA9IChwaWVjZTogUGllY2UsIHRpbWVzTW92ZWQgPSAwKTogc3RyaW5nID0+IHtcbiAgICBsZXQgZW5jb2RpbmcgPSAnJztcbiAgICBpZiAocGllY2UgaW5zdGFuY2VvZiBQYXduKSB7XG4gICAgICBpZiAocGllY2UuY29sb3IgPT09ICd3aGl0ZScpIGVuY29kaW5nID0gJ1AnO1xuICAgICAgZWxzZSBlbmNvZGluZyA9ICdwJztcbiAgICB9XG4gICAgaWYgKHBpZWNlIGluc3RhbmNlb2YgUm9vaykge1xuICAgICAgaWYgKHBpZWNlLmNvbG9yID09PSAnd2hpdGUnKSBlbmNvZGluZyA9ICdSJztcbiAgICAgIGVsc2UgZW5jb2RpbmcgPSAncic7XG4gICAgfVxuICAgIGlmIChwaWVjZSBpbnN0YW5jZW9mIEtuaWdodCkge1xuICAgICAgaWYgKHBpZWNlLmNvbG9yID09PSAnd2hpdGUnKSBlbmNvZGluZyA9ICdIJztcbiAgICAgIGVsc2UgZW5jb2RpbmcgPSAnaCc7XG4gICAgfVxuICAgIGlmIChwaWVjZSBpbnN0YW5jZW9mIEJpc2hvcCkge1xuICAgICAgaWYgKHBpZWNlLmNvbG9yID09PSAnd2hpdGUnKSBlbmNvZGluZyA9ICdCJztcbiAgICAgIGVsc2UgZW5jb2RpbmcgPSAnYic7XG4gICAgfVxuICAgIGlmIChwaWVjZSBpbnN0YW5jZW9mIFF1ZWVuKSB7XG4gICAgICBpZiAocGllY2UuY29sb3IgPT09ICd3aGl0ZScpIGVuY29kaW5nID0gJ1EnO1xuICAgICAgZWxzZSBlbmNvZGluZyA9ICdxJztcbiAgICB9XG4gICAgaWYgKHBpZWNlIGluc3RhbmNlb2YgS2luZykge1xuICAgICAgaWYgKHBpZWNlLmNvbG9yID09PSAnd2hpdGUnKSBlbmNvZGluZyA9ICdLJztcbiAgICAgIGVsc2UgZW5jb2RpbmcgPSAnayc7XG4gICAgfVxuICAgIGVuY29kaW5nID0gZW5jb2RpbmcgPyBlbmNvZGluZyt0aW1lc01vdmVkIDogZW5jb2Rpbmc7XG4gICAgcmV0dXJuIGVuY29kaW5nO1xufVxuUGllY2VHYW1lTG9naWMuZ2V0VHlwZSA9IChzOiBzdHJpbmcpOiBQaWVjZSA9PiB7XG4gIGlmIChzLnRyaW0oKSA9PT0gJycpIHJldHVybiBuZXcgRW1wdHlQaWVjZTtcbiAgbGV0IGNvZGVNYXRjaDogQXJyYXk8YW55PiA9IHMubWF0Y2goLyhbYS16QS16XSkoXFxkKikvKTtcbiAgbGV0IG51bU1vdmVzOiBudW1iZXIgPSBjb2RlTWF0Y2ggJiYgY29kZU1hdGNoLmxlbmd0aCA+IDIgPyBOdW1iZXIoY29kZU1hdGNoWzJdKSA6IHVuZGVmaW5lZDtcbiAgbGV0IGFscGhhY29kZTogc3RyaW5nID0gY29kZU1hdGNoLmxlbmd0aCA+IDEgPyBjb2RlTWF0Y2hbMV0gOiB1bmRlZmluZWQ7XG4gIGlmIChudW1Nb3ZlcyA9PT0gdW5kZWZpbmVkIHx8IGFscGhhY29kZSA9PT0gdW5kZWZpbmVkKSByZXR1cm4gbmV3IEVtcHR5UGllY2U7XG4gIHN3aXRjaCAoYWxwaGFjb2RlLnRyaW0oKSkge1xuICAgIGNhc2UgJ3AnOlxuICAgICAgcmV0dXJuIG5ldyBQYXduKCdibGFjaycpO1xuICAgIGNhc2UgJ3InOlxuICAgICAgcmV0dXJuIG5ldyBSb29rKCdibGFjaycpO1xuICAgIGNhc2UgJ2gnOlxuICAgICAgcmV0dXJuIG5ldyBLbmlnaHQoJ2JsYWNrJyk7XG4gICAgY2FzZSAnYic6XG4gICAgICByZXR1cm4gbmV3IEJpc2hvcCgnYmxhY2snKTtcbiAgICBjYXNlICdxJzpcbiAgICAgIHJldHVybiBuZXcgUXVlZW4oJ2JsYWNrJyk7XG4gICAgY2FzZSAnayc6XG4gICAgICBjb25zdCBibGFja2tpbmcgPSBuZXcgS2luZygnYmxhY2snLCBQaWVjZUdhbWVMb2dpYy5raW5nQ2FuQ2FzdGxlV2l0aEdpdmVuUm9vayk7XG4gICAgICByZXR1cm4gYmxhY2traW5nO1xuICAgIGNhc2UgJ1AnOlxuICAgIHJldHVybiBuZXcgUGF3bignd2hpdGUnKTtcbiAgICBjYXNlICdSJzpcbiAgICAgIHJldHVybiBuZXcgUm9vaygnd2hpdGUnKTtcbiAgICBjYXNlICdIJzpcbiAgICAgIHJldHVybiBuZXcgS25pZ2h0KCd3aGl0ZScpO1xuICAgIGNhc2UgJ0InOlxuICAgICAgcmV0dXJuIG5ldyBCaXNob3AoJ3doaXRlJyk7XG4gICAgY2FzZSAnUSc6XG4gICAgICByZXR1cm4gbmV3IFF1ZWVuKCd3aGl0ZScpO1xuICAgIGNhc2UgJ0snOlxuICAgICAgY29uc3Qgd2hpdGVraW5nID0gbmV3IEtpbmcoJ3doaXRlJywgUGllY2VHYW1lTG9naWMua2luZ0NhbkNhc3RsZVdpdGhHaXZlblJvb2spO1xuICAgICAgcmV0dXJuIHdoaXRla2luZztcbiAgICBjYXNlICcnOlxuICAgICAgcmV0dXJuIG5ldyBFbXB0eVBpZWNlO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gbmV3IEVtcHR5UGllY2U7XG4gICAgfVxufTtcbi8qKlxuICogQHRvZG8gaGFuZGxlIGVycm9yIGNhc2Ugd2hlcmUgY29kZSBkb2Vzbid0IG1hdGNoIGluIG1vcmUgbWVhbmluZ2Z1bCB3YXksIGJldHRlciBmb3IgdGVzdGluZy5cbiAqL1xuUGllY2VHYW1lTG9naWMuZ2V0TnVtTW92ZXMgPSAoczogc3RyaW5nKTogbnVtYmVyID0+IHtcbiAgY29uc3QgY29kZU1hdGNoOiBBcnJheTxzdHJpbmc+ID0gcy5tYXRjaCgvKFthLXpBLXpdKShcXGQqKS8pO1xuICBjb25zdCBudW1Nb3ZlczogbnVtYmVyID0gY29kZU1hdGNoICYmIGNvZGVNYXRjaC5sZW5ndGggPiAyICYmICFOdW1iZXIuaXNOYU4oTnVtYmVyKGNvZGVNYXRjaFsyXSkpID8gTnVtYmVyKGNvZGVNYXRjaFsyXSkgOiAtMTsgLy8gLTEgc2hvdWxkIG5ldmVyIGhhcHBlbiwgdGhvdWdoLlxuICByZXR1cm4gbnVtTW92ZXM7XG59O1xuUGllY2VHYW1lTG9naWMuZ2V0UG9zc2libGVQaWVjZXNUb1Byb21vdGVUbyA9IChnYW1lU3RhdGU6IEdhbWVTdGF0ZSwgc3JjOiBCb3gpOiBBcnJheTxCb3g+ID0+IHtcbiAgY29uc3QgdmFsaWRQcm9tb3Rpb25zOiBBcnJheTxCb3g+ID0gW107XG4gIGNvbnN0IHByb21vdGFibGVCb3ggPSBQaWVjZUdhbWVMb2dpYy5nZXRCb3hPZlByb21vdGFibGVQaWVjZUlmUG9zc2libGUoZ2FtZVN0YXRlKTtcbiAgaWYgKHByb21vdGFibGVCb3ggIT09IHVuZGVmaW5lZCkge1xuICAgIGNvbnN0IHNyY1BpZWNlID0gUGllY2VHYW1lTG9naWMuZ2V0VHlwZShnYW1lU3RhdGUuZ2V0RW5jb2Rpbmcoc3JjKSk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBnYW1lU3RhdGUucmFua0NvdW50OyBpKyspXG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGdhbWVTdGF0ZS5maWxlQ291bnQ7IGorKykge1xuICAgICAgICBjb25zdCBib3ggPSB7IHI6IGksIGM6IGogfTtcbiAgICAgICAgY29uc3Qgb3RoZXJQaWVjZSA9IFBpZWNlR2FtZUxvZ2ljLmdldFR5cGUoZ2FtZVN0YXRlLmdldEVuY29kaW5nKHtyOiBpLCBjOiBqfSkpO1xuICAgICAgICBpZiAoc3JjUGllY2UuY29sb3IgPT09IG90aGVyUGllY2UuY29sb3JcbiAgICAgICAgICAgICYmICEob3RoZXJQaWVjZSBpbnN0YW5jZW9mIFBhd24pICYmICEob3RoZXJQaWVjZSBpbnN0YW5jZW9mIEtpbmcpICYmICEob3RoZXJQaWVjZSBpbnN0YW5jZW9mIEVtcHR5UGllY2UpKVxuICAgICAgICAgICAgICB2YWxpZFByb21vdGlvbnMucHVzaChib3gpO1xuICAgICAgfVxuICB9XG4gIHJldHVybiB2YWxpZFByb21vdGlvbnM7XG59XG5QaWVjZUdhbWVMb2dpYy5nZXRQb3NzaWJsZU1vdmVzID0gKGdhbWVTdGF0ZTogR2FtZVN0YXRlLCBzcmM6IEJveCwgcHJldk1vdmU/OiB7IHNyYzogQm94LCBkc3Q6IEJveCB9KTogQXJyYXk8Qm94PiA9PiB7XG4gIGNvbnN0IHBvc3NpYmxlUHJvbW90aW9uTW92ZXMgPSBQaWVjZUdhbWVMb2dpYy5nZXRQb3NzaWJsZVBpZWNlc1RvUHJvbW90ZVRvKGdhbWVTdGF0ZSwgc3JjKTtcbiAgaWYgKHBvc3NpYmxlUHJvbW90aW9uTW92ZXMubGVuZ3RoID4gMCkgcmV0dXJuIHBvc3NpYmxlUHJvbW90aW9uTW92ZXM7XG4gIGNvbnN0IGNvbnN0cnVjdE1vdmVzTWF0cml4ID0gKGdhbWVTdGF0ZTogR2FtZVN0YXRlLCBzcmM6IEJveCwgUGllY2VUeXBlOiBQaWVjZSwgbnVtTW92ZXM6IG51bWJlcikgPT4ge1xuICAgIGNvbnN0IHZhbGlkTW92ZXM6IEFycmF5PEJveD4gPSBbXTtcbiAgICBjb25zdCBpc1Bvc3NpYmxlVG9Nb3ZlVG8gPSB0eXBlb2YgUGllY2VUeXBlLmdldFBvc3NpYmxlTW92ZXMgPT0gJ2Z1bmN0aW9uJyA/IFBpZWNlVHlwZS5nZXRQb3NzaWJsZU1vdmVzKGdhbWVTdGF0ZSwgc3JjLCBudW1Nb3ZlcykgOiAoZHN0OiBCb3gpPT5mYWxzZTtcbiAgICBpZiAoIWlzUG9zc2libGVUb01vdmVUbykgcmV0dXJuIHZhbGlkTW92ZXM7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBnYW1lU3RhdGUucmFua0NvdW50OyBpKyspXG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGdhbWVTdGF0ZS5maWxlQ291bnQ7IGorKylcbiAgICAgICAgIGlmIChpc1Bvc3NpYmxlVG9Nb3ZlVG8oe3I6aSxjOmp9KSkgdmFsaWRNb3Zlcy5wdXNoKHtyOmksYzpqfSk7XG4gICAgcmV0dXJuIHZhbGlkTW92ZXM7XG4gIH1cbiAgY29uc3QgcyA9IGdhbWVTdGF0ZS5nZXRFbmNvZGluZyhzcmMpO1xuICBjb25zdCBudW1Nb3ZlcyA9IFBpZWNlR2FtZUxvZ2ljLmdldE51bU1vdmVzKHMpO1xuICBjb25zdCBQaWVjZVR5cGUgPSBQaWVjZUdhbWVMb2dpYy5nZXRUeXBlKHMpO1xuICBpZiAoUGllY2VUeXBlICYmICFpc05hTihudW1Nb3ZlcykpIHtcbiAgICBjb25zdCBtb3Zlc01hdHJpeCA9IGNvbnN0cnVjdE1vdmVzTWF0cml4KGdhbWVTdGF0ZSwgc3JjLCBQaWVjZVR5cGUsIG51bU1vdmVzKTtcbiAgICBpZiAoUGllY2VHYW1lTG9naWMuZ2V0VHlwZShnYW1lU3RhdGUuZ2V0RW5jb2Rpbmcoc3JjKSkgaW5zdGFuY2VvZiBLaW5nKSB7XG4gICAgICBpZiAoUGllY2VHYW1lTG9naWMua2luZ0NhbkNhc3RsZVdpdGhHaXZlblJvb2soZ2FtZVN0YXRlLCBzcmMsIHsgcjogc3JjLnIsIGM6IDAgfSkpIHtcbiAgICAgICAgbW92ZXNNYXRyaXgucHVzaCh7IHI6IHNyYy5yLCBjOiAwIH0pO1xuICAgICAgfVxuICAgICAgaWYgKFBpZWNlR2FtZUxvZ2ljLmtpbmdDYW5DYXN0bGVXaXRoR2l2ZW5Sb29rKGdhbWVTdGF0ZSwgc3JjLCB7IHI6IHNyYy5yLCBjOiBnYW1lU3RhdGUuZmlsZUNvdW50IC0gMSB9KSkge1xuICAgICAgICBtb3Zlc01hdHJpeC5wdXNoKHsgcjogc3JjLnIsIGM6IGdhbWVTdGF0ZS5maWxlQ291bnQgLSAxIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoUGllY2VHYW1lTG9naWMuZ2V0VHlwZShnYW1lU3RhdGUuZ2V0RW5jb2Rpbmcoc3JjKSkgaW5zdGFuY2VvZiBQYXduKSB7XG4gICAgICBpZiAocHJldk1vdmUgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAnVEVTVCcpIGNvbnNvbGUud2FybignUGllY2VHYW1lTG9naWMuZ2V0UG9zc2libGVNb3ZlcyBzaG91bGQgYmUgcGFzc2VkIHByZXZNb3ZlIGFzIGxhc3QgcGFyYW1ldGVyISBQbGVhc2UgcmVmYWN0b3IsIGVsc2UgRW4gUGFzc2FudGUgd2lsbCBub3Qgd29yay4nKTtcbiAgICAgIH0gZWxzZSBpZiAoUGllY2VHYW1lTG9naWMuaXNFblBhc3NhbnRQb3NzaWJsZShnYW1lU3RhdGUsIHNyYywgcHJldk1vdmUpKSB7XG4gICAgICAgIGNvbnN0IGRpciA9IHByZXZNb3ZlLmRzdC5jIC0gcHJldk1vdmUuc3JjLmMgPiAwID8gMSA6IC0xO1xuICAgICAgICBtb3Zlc01hdHJpeC5wdXNoKHsgcjogc3JjLnIgKyBkaXIsIGM6IHByZXZNb3ZlLmRzdC5jIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbW92ZXNNYXRyaXg7XG4gIH1cbiAgcmV0dXJuIFtdO1xufTtcblBpZWNlR2FtZUxvZ2ljLmlzUG9zc2libGVUb01vdmVUbyA9IChnYW1lU3RhdGU6IEdhbWVTdGF0ZSwgIHNyYzogQm94KTogeyAoYm94OiBCb3gpOiBib29sZWFuIH0gPT4ge1xuICBjb25zdCBzID0gZ2FtZVN0YXRlLmdldEVuY29kaW5nKHNyYyk7XG4gIGNvbnN0IG51bU1vdmVzID0gUGllY2VHYW1lTG9naWMuZ2V0TnVtTW92ZXMocyk7XG4gIGNvbnN0IFBpZWNlVHlwZSA9IFBpZWNlR2FtZUxvZ2ljLmdldFR5cGUocyk7XG4gIGNvbnN0IGlzUG9zc2libGVUb01vdmVUbyA9IFBpZWNlVHlwZS5nZXRQb3NzaWJsZU1vdmVzKGdhbWVTdGF0ZSwgc3JjKTtcbiAgcmV0dXJuIGlzUG9zc2libGVUb01vdmVUbztcbn07XG5QaWVjZUdhbWVMb2dpYy5pc0luQ2hlY2sgPSAoZ2FtZVN0YXRlOiBHYW1lU3RhdGUsIHNyYzogQm94KTogYm9vbGVhbiA9PiB7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgZ2FtZVN0YXRlLnJhbmtDb3VudDsgaSsrKVxuICAgIGZvciAobGV0IGogPSAwOyBqIDwgZ2FtZVN0YXRlLmZpbGVDb3VudDsgaisrKVxuICAgICAgaWYgKHNyYy5yICE9IGkgJiYgc3JjLmMgIT0gaikge1xuICAgICAgICBjb25zdCBwb3NzaWJsZUF0dGFja3MgPSBQaWVjZUdhbWVMb2dpYy5nZXRQb3NzaWJsZU1vdmVzKGdhbWVTdGF0ZSwge3I6aSxjOmp9KTtcbiAgICAgICAgLy8gY29uc29sZS5sb2coYFBpZWNlR2FtZUxvZ2ljLmlzSW5DaGVjayBwb3NzaWJsZUF0dGFja3MgcGllY2UgYXQgKCR7aX0sJHtqfSlgLCBwb3NzaWJsZUF0dGFja3MpO1xuICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IHBvc3NpYmxlQXR0YWNrcy5sZW5ndGg7IGsrKykge1xuICAgICAgICAgIGlmIChwb3NzaWJsZUF0dGFja3Nba10ucj09c3JjLnIgJiYgcG9zc2libGVBdHRhY2tzW2tdLmM9PXNyYy5jKSByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICByZXR1cm4gZmFsc2U7XG59O1xuUGllY2VHYW1lTG9naWMuaXNJbkNoZWNrbWF0ZSA9IChnYW1lU3RhdGU6IEdhbWVTdGF0ZSwgc3JjOiBCb3gpOiBib29sZWFuID0+IHtcbiAgY29uc3QgcG9zc2libGVNb3ZlcyA9IFBpZWNlR2FtZUxvZ2ljLmdldFBvc3NpYmxlTW92ZXMoZ2FtZVN0YXRlLCBzcmMpO1xuICBsZXQgcGllY2VJc0luQ2hlY2sgPSBQaWVjZUdhbWVMb2dpYy5pc0luQ2hlY2soZ2FtZVN0YXRlLCBzcmMpO1xuICBpZiAocGllY2VJc0luQ2hlY2spIHtcbiAgICBsZXQgaXNJbkNoZWNrbWF0ZSA9IHRydWU7IC8vIHVzZSByZWR1Y2VcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBvc3NpYmxlTW92ZXMubGVuZ3RoOyBpKyspXG4gICAgICBpc0luQ2hlY2ttYXRlID0gaXNJbkNoZWNrbWF0ZSAmJiBQaWVjZUdhbWVMb2dpYy5pc0luQ2hlY2soZ2FtZVN0YXRlLCBwb3NzaWJsZU1vdmVzW2ldKTtcbiAgICBpZiAoaXNJbkNoZWNrbWF0ZSkgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblBpZWNlR2FtZUxvZ2ljLmtpbmdDYW5DYXN0bGVXaXRoR2l2ZW5Sb29rID0gKGdhbWVTdGF0ZTogR2FtZVN0YXRlLCBzcmM6IEJveCwgZHN0OiBCb3gpOiBib29sZWFuID0+IHtcbiAgY29uc3QgcyA9IGdhbWVTdGF0ZS5nZXRFbmNvZGluZyhzcmMpO1xuICBjb25zdCB0ID0gZ2FtZVN0YXRlLmdldEVuY29kaW5nKGRzdCk7XG4gIGlmIChQaWVjZUdhbWVMb2dpYy5nZXRUeXBlKHMpLm5hbWUgIT0gKG5ldyBLaW5nKCcnKSkubmFtZSB8fCBQaWVjZUdhbWVMb2dpYy5nZXRUeXBlKHQpLm5hbWUgIT0gKG5ldyBSb29rKCcnKSkubmFtZSB8fCBQaWVjZUdhbWVMb2dpYy5nZXROdW1Nb3ZlcyhzKSAhPSAwIHx8IFBpZWNlR2FtZUxvZ2ljLmdldE51bU1vdmVzKHQpICE9IDApIHJldHVybiBmYWxzZTtcbiAgaWYgKFBpZWNlSGVscGVyLmlzUGllY2VPZkN1cnJlbnRQbGF5ZXIoZ2FtZVN0YXRlLCBzcmMpICYmIFBpZWNlSGVscGVyLmlzUGllY2VPZkN1cnJlbnRQbGF5ZXIoZ2FtZVN0YXRlLCBkc3QpICYmIFBpZWNlSGVscGVyLmlzQm94T25Cb2FyZChnYW1lU3RhdGUsIGRzdCkgJiYgc3JjICE9IGRzdCkge1xuICAgIGxldCBkaXIgPSBkc3QuYyAtIHNyYy5jID4gMCA/IDEgOiAtMTtcbiAgICBsZXQgbGVuID0gTWF0aC5hYnMoZHN0LmMtc3JjLmMpO1xuICAgIGZvciAobGV0IGkgPSBzcmMuYytkaXI7IGxlbi0tID4gMTsgaSArPSBkaXIpIGlmICghUGllY2VIZWxwZXIuaXNFbXB0eShnYW1lU3RhdGUsIHtyOnNyYy5yLGM6aX0pKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn07XG4vKipcbiAqIEByZXR1cm5zIHtHYW1lU3RhdGV9IFVwZGF0ZWQgR2FtZVN0YXRlIHdpdGggS2luZydzIGNhc3RsZS5cbiAqL1xuUGllY2VHYW1lTG9naWMuY2FzdGxlS2luZ1dpdGhHaXZlblJvb2sgPSAoZ2FtZVN0YXRlOiBHYW1lU3RhdGUsIHNyYzogQm94LCBkc3Q6IEJveCk6IEdhbWVTdGF0ZSA9PiB7XG4gIGlmICghUGllY2VHYW1lTG9naWMua2luZ0NhbkNhc3RsZVdpdGhHaXZlblJvb2soZ2FtZVN0YXRlLCBzcmMsIGRzdCkpIHJldHVybiBnYW1lU3RhdGU7XG4gIGNvbnN0IG5ld0JvYXJkID0gbmV3IEJvYXJkKGdhbWVTdGF0ZS5ib2FyZCk7XG4gIG5ld0JvYXJkLnNldEVuY29kaW5nKHNyYywgUGllY2VHYW1lTG9naWMuaW5jcmVtZW50TW92ZUNvdW50KGdhbWVTdGF0ZS5nZXRFbmNvZGluZyhzcmMpKSk7XG4gIGxldCBvdXREaXIgPSBkc3QuYyAtIHNyYy5jID4gMCA/IDEgOiAtMTtcbiAgbGV0IHNoaWZ0ID0gMDtcbiAgaWYgKE1hdGguYWJzKGRzdC5jIC0gc3JjLmMpID09IDMpIHNoaWZ0ID0gMjtcbiAgZWxzZSBpZiAoTWF0aC5hYnMoZHN0LmMgLSBzcmMuYykgPT0gNCkgc2hpZnQgPSAzO1xuICBuZXdCb2FyZC5zZXRFbmNvZGluZyh7cjogc3JjLnIsIGM6IHNyYy5jICsgb3V0RGlyICogc2hpZnQgfSwgZ2FtZVN0YXRlLmdldEVuY29kaW5nKHNyYykpO1xuICBuZXdCb2FyZC5zZXRFbmNvZGluZyhzcmMsICcgJyk7XG4gIG5ld0JvYXJkLnNldEVuY29kaW5nKHsgcjogZHN0LnIsIGM6IGRzdC5jIC0gb3V0RGlyICogc2hpZnQgfSwgZ2FtZVN0YXRlLmdldEVuY29kaW5nKGRzdCkpO1xuICBuZXdCb2FyZC5zZXRFbmNvZGluZyhkc3QsICcgJyk7XG4gIHJldHVybiBuZXcgR2FtZVN0YXRlKG5ld0JvYXJkKTtcbn07XG5QaWVjZUdhbWVMb2dpYy5nZXRTZXRPZkFsbFBvc3NpYmxlTW92ZXNGb3JQbGF5ZXIgPSAoZ2FtZVN0YXRlOiBHYW1lU3RhdGUsIHBsYXllcjogbnVtYmVyKTogU2V0PEJveD4gPT4ge1xuICBsZXQgcyA9IG5ldyBTZXQoKTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBnYW1lU3RhdGUucmFua0NvdW50OyBpKyspXG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCBnYW1lU3RhdGUuZmlsZUNvdW50OyBqKyspXG4gICAgICBpZiAoIVBpZWNlSGVscGVyLmlzUGllY2VPZkdpdmVuUGxheWVyKGdhbWVTdGF0ZSwgcGxheWVyLHtyOmksYzpqfSkgJiYgIVBpZWNlSGVscGVyLmlzRW1wdHkoZ2FtZVN0YXRlLCB7cjppLGM6an0pKSB7XG4gICAgICAgIGNvbnN0IHBvc3NpYmxlUGxheWVyTW92ZXMgPSBQaWVjZUdhbWVMb2dpYy5nZXRQb3NzaWJsZU1vdmVzKGdhbWVTdGF0ZSwge3I6aSxjOmp9KTtcbiAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBwb3NzaWJsZVBsYXllck1vdmVzLmxlbmd0aDsgaysrKVxuICAgICAgICAgIHMuYWRkKHBvc3NpYmxlUGxheWVyTW92ZXNba10pO1xuICAgICAgfVxuICByZXR1cm4gcztcbn07XG4vKipcbiAqIEB0b2RvIG5vdCB0aGlzIHNpbXBsZSwgc2hvdWxkIHByaW9yaXRpemUga2lsbC1tb3ZlcyBhbmQgbW92ZXMgdGhhdCBnZXQgdGhlIHBsYXllciBvdXQgb2YgaGFybSAoaW4gbmV4dCBtb3ZlIG9ubHksIGZvciBub3cpXG4gKi9cblBpZWNlR2FtZUxvZ2ljLnJhbmRvbURlZmVuc2l2ZU1vdmUgPSAoZ2FtZVN0YXRlOiBHYW1lU3RhdGUpOiBTZXQ8Qm94PiA9PiB7XG4gIGNvbnN0IGN1cnJlbnRQbGF5ZXIgPSBnYW1lU3RhdGUucGxheWVyO1xuICBjb25zdCBvcHBvbmVudCA9IGN1cnJlbnRQbGF5ZXIgPT0gMCA/IDEgOiAwO1xuICBjb25zdCBzZXRPZk9wcG9uZW50TW92ZXMgPSBQaWVjZUdhbWVMb2dpYy5nZXRTZXRPZkFsbFBvc3NpYmxlTW92ZXNGb3JQbGF5ZXIoZ2FtZVN0YXRlLCBvcHBvbmVudCk7XG4gIGxldCByYW5kSWR4ID0gMDtcbiAgcmV0dXJuIHNldE9mT3Bwb25lbnRNb3Zlcztcbn07XG5QaWVjZUdhbWVMb2dpYy5pc0FDYXB0dXJlID0gKGdhbWVTdGF0ZTogR2FtZVN0YXRlLCBzcmM6IEJveCwgZHN0OiBCb3gpOiBib29sZWFuID0+IHtcbiAgY29uc3QgcyA9IGdhbWVTdGF0ZS5nZXRFbmNvZGluZyhzcmMpO1xuICBjb25zdCBudW1Nb3ZlcyA9IFBpZWNlR2FtZUxvZ2ljLmdldE51bU1vdmVzKHMpO1xuICBjb25zdCBQaWVjZVR5cGUgPSBQaWVjZUdhbWVMb2dpYy5nZXRUeXBlKHMpO1xuICBpZiAodHlwZW9mIFBpZWNlVHlwZS5nZXRQb3NzaWJsZU1vdmVzID09ICdmdW5jdGlvbicgJiYgIWlzTmFOKG51bU1vdmVzKSkge1xuICAgIGNvbnN0IGlzUG9zc2libGVUb01vdmVUbyA9IFBpZWNlVHlwZS5nZXRQb3NzaWJsZU1vdmVzKGdhbWVTdGF0ZSwgc3JjLCBudW1Nb3Zlcyk7XG4gICAgaWYgKGlzUG9zc2libGVUb01vdmVUbyhkc3QpICYmICFQaWVjZUhlbHBlci5pc1BpZWNlT2ZDdXJyZW50UGxheWVyKGdhbWVTdGF0ZSwgZHN0KSAmJiAhUGllY2VIZWxwZXIuaXNFbXB0eShnYW1lU3RhdGUsIGRzdCkpIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn07XG4vKipcbiAqIEBwYXJhbSBzcmMgdGhlIGJveCB0byBjaGVjayBpZiBwb3NzaWJsZSB0byBFblBhc3NhbnQgZnJvbVxuICogQHBhcmFtIHByZXZNb3ZlIHRoZSBwcmV2aW91cyBtb3ZlIHBsYXllZCwgd2hpY2ggaXMgdXN1YWxseSB0aGUgb3Bwb25lbnQgdG8gdGhlIHBpZWNlIGF0IHNyYy5cbiAqL1xuUGllY2VHYW1lTG9naWMuaXNFblBhc3NhbnRQb3NzaWJsZSA9IChnYW1lU3RhdGU6IEdhbWVTdGF0ZSwgc3JjOiBCb3gsIHByZXZNb3ZlOiB7c3JjOiBCb3gsIGRzdDogQm94fSk6IGJvb2xlYW4gPT4ge1xuICBjb25zdCBvcHBvbmVudFN0YXJ0ID0gcHJldk1vdmUuZHN0LnIgLSBwcmV2TW92ZS5zcmMuciA+IDAgPyAxIDogNjtcbiAgY29uc3QgZGlyID0gcHJldk1vdmUuZHN0LnIgLSBwcmV2TW92ZS5zcmMuciA+IDAgPyAxIDogLTE7XG4gIGNvbnN0IHBpZWNlID0gUGllY2VHYW1lTG9naWMuZ2V0VHlwZShnYW1lU3RhdGUuZ2V0RW5jb2Rpbmcoc3JjKSk7XG4gIGlmIChwaWVjZSBpbnN0YW5jZW9mIFBhd25cbiAgICAgICYmIE1hdGguYWJzKHByZXZNb3ZlLmRzdC5yIC0gcHJldk1vdmUuc3JjLnIpID09PSAyXG4gICAgICAmJiBwcmV2TW92ZS5kc3QuciA9PT0gc3JjLnJcbiAgICAgICYmIG9wcG9uZW50U3RhcnQgPT09IHByZXZNb3ZlLnNyYy5yIC8qIHNob3VsZG4ndCBoYXBwZW4gdW5kZXIgbm9ybWFsIFBhd24gcnVsZXMgKi9cbiAgICAgICYmIFBpZWNlR2FtZUxvZ2ljLmdldFR5cGUoZ2FtZVN0YXRlLmdldEVuY29kaW5nKHByZXZNb3ZlLmRzdCkpIGluc3RhbmNlb2YgUGF3blxuICAgICAgJiYgIVBpZWNlSGVscGVyLmlzUGllY2VPZkN1cnJlbnRQbGF5ZXIoZ2FtZVN0YXRlLCBwcmV2TW92ZS5kc3QpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59O1xuUGllY2VHYW1lTG9naWMuZ2V0Qm94T2ZQcm9tb3RhYmxlUGllY2VJZlBvc3NpYmxlID0gKGdhbWVTdGF0ZTogR2FtZVN0YXRlKTogQm94ID0+IHtcbiAgY29uc3QgcGF3bkF0Q29sdW1uQm9yZGVyID0gKGJvcmRlcklkeDogbnVtYmVyKTogQm94ID0+IHtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGdhbWVTdGF0ZS5yYW5rQ291bnQ7IGkrKylcbiAgICAgIGlmIChQaWVjZUdhbWVMb2dpYy5nZXRUeXBlKGdhbWVTdGF0ZS5nZXRFbmNvZGluZyh7cjogYm9yZGVySWR4LCBjOiBpfSkpIGluc3RhbmNlb2YgUGF3bilcbiAgICAgICAgcmV0dXJuIHtyOiBib3JkZXJJZHgsIGM6IGl9O1xuICB9O1xuICByZXR1cm4gcGF3bkF0Q29sdW1uQm9yZGVyKDApIHx8IHBhd25BdENvbHVtbkJvcmRlcihnYW1lU3RhdGUucmFua0NvdW50IC0gMSk7XG59O1xuLyoqXG4gKiBAcGFyYW0gZmlyc3QgYm94IG9mIHBpZWNlIChpZSBwYXduKSB0byBwcm9tb3RlXG4gKiBAcGFyYW0gc2Vjb25kIHBpZWNlIChpZSBub3QgcGF3biBhbmQgbm90IGtpbmcgYW5kIG5vdCBub24tcGllY2UpIHRvIHByb21vdGUgdG9cbiAqL1xuUGllY2VHYW1lTG9naWMucHJvbW90ZUlmUG9zc2libGUgPSAoZ2FtZVN0YXRlOiBHYW1lU3RhdGUsIGZpcnN0OiBCb3gsIHNlY29uZDogUGllY2UpOiBHYW1lU3RhdGUgPT4ge1xuICBjb25zdCBwcm9tb3RhYmxlQm94ID0gUGllY2VHYW1lTG9naWMuZ2V0Qm94T2ZQcm9tb3RhYmxlUGllY2VJZlBvc3NpYmxlKGdhbWVTdGF0ZSk7XG4gIGNvbnN0IG5ld0JvYXJkID0gbmV3IEJvYXJkKGdhbWVTdGF0ZS5ib2FyZCk7XG4gIGlmIChwcm9tb3RhYmxlQm94ICE9PSB1bmRlZmluZWQgJiYgcHJvbW90YWJsZUJveC5yID09PSBmaXJzdC5yICYmIHByb21vdGFibGVCb3guYyA9PT0gZmlyc3QuY1xuICAgICAgJiYgIShzZWNvbmQgaW5zdGFuY2VvZiBQYXduKSAmJiAhKHNlY29uZCBpbnN0YW5jZW9mIEtpbmcpICYmICEoc2Vjb25kIGluc3RhbmNlb2YgRW1wdHlQaWVjZSlcbiAgICAgICYmIFBpZWNlR2FtZUxvZ2ljLmdldFR5cGUoZ2FtZVN0YXRlLmdldEVuY29kaW5nKGZpcnN0KSkuY29sb3IgPT09IHNlY29uZC5jb2xvcilcbiAgICAgIG5ld0JvYXJkLnNldEVuY29kaW5nKGZpcnN0LCBQaWVjZUdhbWVMb2dpYy5jb252ZXJ0UGllY2VUb1N0cmluZ0VuY29kaW5nKHNlY29uZCkpO1xuICByZXR1cm4gbmV3IEdhbWVTdGF0ZShuZXdCb2FyZCk7XG59O1xuUGllY2VHYW1lTG9naWMuaW5jcmVtZW50TW92ZUNvdW50ID0gKGVuYzogc3RyaW5nKTogc3RyaW5nID0+IHtcbiAgY29uc3QgcHJlZml4ID0gZW5jLnRyaW0oKS5tYXRjaCgvXFx3L2cpID8gZW5jLnRyaW0oKS5tYXRjaCgvXFx3L2cpWzBdIDogJyc7XG4gIGNvbnN0IG51bSA9IGVuYy50cmltKCkubWF0Y2goLyhcXGQrKS9nKSA/IE51bWJlcihlbmMudHJpbSgpLm1hdGNoKC8oXFxkKykvZylbMF0pIDogMDtcbiAgcmV0dXJuIHByZWZpeCArIE51bWJlcihudW0gKyAxKTtcbn07XG4vKipcbiAqIEBkZXNjcmlwdGlvbiBBdHRlbXB0IHRvIG1ha2UgdGhlIGRlc2lyZWQgbW92ZSwgaWYgdGhlIG1vdmUgaXMgbGVnYWwuXG4gKi9cblBpZWNlR2FtZUxvZ2ljLm1ha2VMZWdhbE1vdmUgPSAoZ2FtZVN0YXRlOiBHYW1lU3RhdGUsIHNyYzogQm94LCBkc3Q6IEJveCwgcHJldk1vdmU6IHtzcmM6IEJveCwgZHN0OiBCb3h9LCBwaWVjZVRvUHJvbW90ZVRvPzogUGllY2UpOiB7IGdhbWVTdGF0ZTogR2FtZVN0YXRlLCBjYXB0dXJlZFBpZWNlOiBQaWVjZSwgd2FzUHJvbW90aW9uOiBib29sZWFuIH0gPT4ge1xuICBjb25zdCBwcm9tb3RhYmxlQm94ID0gUGllY2VHYW1lTG9naWMuZ2V0Qm94T2ZQcm9tb3RhYmxlUGllY2VJZlBvc3NpYmxlKGdhbWVTdGF0ZSk7XG4gIGlmIChwcm9tb3RhYmxlQm94ICE9PSB1bmRlZmluZWQpIHtcbiAgICBpZiAocGllY2VUb1Byb21vdGVUbyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBwaWVjZVRvUHJvbW90ZVRvID0gUGllY2VHYW1lTG9naWMuZ2V0VHlwZShnYW1lU3RhdGUuZ2V0RW5jb2RpbmcoZHN0KSk7XG4gICAgfVxuICAgIHJldHVybiB7IGdhbWVTdGF0ZTogUGllY2VHYW1lTG9naWMucHJvbW90ZUlmUG9zc2libGUoZ2FtZVN0YXRlLCBzcmMsIHBpZWNlVG9Qcm9tb3RlVG8pLCBjYXB0dXJlZFBpZWNlOiBuZXcgRW1wdHlQaWVjZSwgd2FzUHJvbW90aW9uOiB0cnVlIH07XG4gIH1cbiAgaWYgKFBpZWNlR2FtZUxvZ2ljLmtpbmdDYW5DYXN0bGVXaXRoR2l2ZW5Sb29rKGdhbWVTdGF0ZSwgc3JjLCBkc3QpKSB7XG4gICAgcmV0dXJuIHsgZ2FtZVN0YXRlOiBQaWVjZUdhbWVMb2dpYy5jYXN0bGVLaW5nV2l0aEdpdmVuUm9vayhnYW1lU3RhdGUsIHNyYywgZHN0KSwgY2FwdHVyZWRQaWVjZTogbmV3IEVtcHR5UGllY2UsIHdhc1Byb21vdGlvbjogZmFsc2UgfTtcbiAgfVxuICBjb25zdCBtb3ZlQW5kVXBkYXRlU3RhdGUgPSAoZW5QYXNzYW50PzogQm94KTogeyBnYW1lU3RhdGU6IEdhbWVTdGF0ZSwgY2FwdHVyZWRQaWVjZTogUGllY2UsIHdhc1Byb21vdGlvbjogYm9vbGVhbiB9ID0+IHtcbiAgICBjb25zdCBjYXB0dXJlZFBpZWNlID0gZW5QYXNzYW50ID8gUGllY2VHYW1lTG9naWMuZ2V0VHlwZShnYW1lU3RhdGUuZ2V0RW5jb2RpbmcoZW5QYXNzYW50KSkgOiBQaWVjZUdhbWVMb2dpYy5nZXRUeXBlKGdhbWVTdGF0ZS5nZXRFbmNvZGluZyhkc3QpKTtcbiAgICBjb25zdCBuZXdCb2FyZCA9IG5ldyBCb2FyZChnYW1lU3RhdGUuYm9hcmQpO1xuICAgIGlmIChlblBhc3NhbnQpIG5ld0JvYXJkLnNldEVuY29kaW5nKGVuUGFzc2FudCwgJyAnKTtcbiAgICBuZXdCb2FyZC5zZXRFbmNvZGluZyhkc3QsIFBpZWNlR2FtZUxvZ2ljLmluY3JlbWVudE1vdmVDb3VudChnYW1lU3RhdGUuZ2V0RW5jb2Rpbmcoc3JjKSkpO1xuICAgIG5ld0JvYXJkLnNldEVuY29kaW5nKHNyYywgJyAnKTtcbiAgICByZXR1cm4geyBnYW1lU3RhdGU6IG5ldyBHYW1lU3RhdGUobmV3Qm9hcmQpLCBjYXB0dXJlZFBpZWNlLCB3YXNQcm9tb3Rpb246IGZhbHNlIH07XG4gIH07XG4gIGlmIChQaWVjZUdhbWVMb2dpYy5pc0VuUGFzc2FudFBvc3NpYmxlKGdhbWVTdGF0ZSwgc3JjLCBwcmV2TW92ZSkpIHtcbiAgICBjb25zdCBkaXIgPSBwcmV2TW92ZS5kc3QuciAtIHByZXZNb3ZlLnNyYy5yID4gMCA/IC0xIDogMTtcbiAgICBjb25zdCBib3ggPSB7IHI6IHNyYy5yICsgZGlyLCBjOiBwcmV2TW92ZS5kc3QuYyB9O1xuICAgIGlmIChkc3QuciA9PT0gYm94LnIgJiYgZHN0LmMgPT09IGJveC5jKSB7XG4gICAgICByZXR1cm4gbW92ZUFuZFVwZGF0ZVN0YXRlKHByZXZNb3ZlLmRzdCk7XG4gICAgfVxuICB9XG4gIGNvbnN0IHBvc3NpYmxlTW92ZXMgPSBQaWVjZUdhbWVMb2dpYy5nZXRQb3NzaWJsZU1vdmVzKGdhbWVTdGF0ZSwgc3JjLCBwcmV2TW92ZSk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcG9zc2libGVNb3Zlcy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGJveDogQm94ID0gcG9zc2libGVNb3Zlc1tpXTtcbiAgICBpZiAoZHN0LnIgPT09IGJveC5yICYmIGRzdC5jID09PSBib3guY1xuICAgICAgICAmJiAhUGllY2VIZWxwZXIuaXNQaWVjZU9mQ3VycmVudFBsYXllcihnYW1lU3RhdGUsIGRzdCkpIHtcbiAgICAgICAgICByZXR1cm4gbW92ZUFuZFVwZGF0ZVN0YXRlKCk7XG4gICAgICAgIH1cbiAgfVxuICByZXR1cm4geyBnYW1lU3RhdGUsIGNhcHR1cmVkUGllY2U6IG5ldyBFbXB0eVBpZWNlLCB3YXNQcm9tb3Rpb246IGZhbHNlIH07XG59O1xuZXhwb3J0IHsgUGllY2VHYW1lTG9naWMgfTtcbiIsImltcG9ydCBTdG9yZSBmcm9tICcuLi9zdG9yZS9zdG9yZSc7XG5pbXBvcnQgVmlldyBmcm9tICcuLi92aWV3L3ZpZXcnO1xuaW1wb3J0IHsgQm9hcmQsIEJveCwgUGllY2UsIEVtcHR5UGllY2UsIFN0b3JlU3RhdGUsIFBMQVlFUl9XSElURSwgUExBWUVSX0JMQUNLIH0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHsgUGllY2VHYW1lTG9naWMgfSBmcm9tICcuLi9tb2RlbC9waWVjZWdhbWVsb2dpYyc7XG5cbi8qKlxuICogTm90ZSB0aGF0IHRoZSBDb250cm9sbGVyIGlzIHRoZSBvbmx5IG1vZHVsZSB3aGljaCBzaGFsbCBrbm93IGFib3V0IGFueSBhbmQgYWxsIG9mIHRoZSBNb2RlbCwgU3RvcmUsIGFuZCBWaWV3LlxuICogVGhlIENvbnRyb2xsZXIgc2hhbGwgc2ltcGx5IHJlbGF5IHVzZXIgZXZlbnRzIGZyb20gdGhlIFZpZXcgdG8gdGhlIE1vZGVsLCB0YWtpbmcgdGhlIHB1cmVseSBmdW5jdGlvbmFsXG4gKiBvdXRwdXQgZnJvbSB0aGUgTW9kZWwgYW5kIHN0b3JpbmcgaXQgaW4gdGhlIFN0b3JlLiBUaGUgQ29udHJvbGxlciB0aGVuIG5vdGlmaWVzIHRoZSBWaWV3IG9mIHRoZSB1cGRhdGVkXG4gKiBzdGF0ZSAodmlhIHRoaXMuc3RvcmUuc3RhdGUsIG5vIG1vcmUsIG5vIGxlc3MpLCBhbmQgdGhlIFZpZXcgdXBkYXRlcy4gVGhlIGxvb3AgY29udGludWVzIGFzIHN1Y2guXG4gKiBcbiAqIFRoaXMgaXMgYSBzaW1wbGUgcGFyYWRpZ20gb25jZSB0aG91Z2h0IG91dC4gVGhlIENvbnRyb2xsZXIgc2hhbGwgYmUgYXMgc2ltcGxlIGFzIHBvc3NpYmxlLCBkZWxlZ2F0aW5nXG4gKiBhcyBtdWNoIG9mIHRoZSBnYW1lIGxvZ2ljIGFzIHBvc3NpYmxlIHRvIHRoZSBNb2RlbCwgYW5kIGFzIG11Y2ggYXMgdGhlIGdyYXBoaWNhbCBhcHBlYXJhbmNlIGFzIHBvc3NpYmxlXG4gKiB0byB0aGUgVmlldywgd2hpbGUgc3RvcmluZyB0aGUgdXBkYXRlcyB0byB0aGUgcmVsZXZhbnQgc3RhdGUgb2YgdGhlIGdhbWUgKGFzIG5lZWRlZCBieSB0aGUgVmlldykgaW4gXG4gKiB0aGUgU3RvcmUgKHdoaWNoIGNvbnRhaW5zIHZpcnR1YWxseSBubyBsb2dpYywgYWN0aW5nIG11Y2ggbGlrZSBhIHNpbXBsZSBOb1NRTCBkb2N1bWVudCkuXG4gKi9cblxuLyoqXG4gKiBEZXNlcmlhbGl6ZSB0aGUgSFRNTCBkYXRhIGludG8gYSBKUyBvYmplY3QuXG4gKiBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy81NjYwMDUwL3doYXQtaXMtc2VyaWFsaXphdGlvbi1hbmQtZGVzZXJpYWxpemF0aW9uLWNvbmNlcHR1YWxseVxuICogQHBhcmFtIHtFbGVtZW50fSBib3ggVGhlIHJhdyBodG1sIGJveCBmcm9tIHRoZSB2aWV3XG4gKiBAcmV0dXJucyB7Qm94fSB0aGUgY29udGVudHMgb2YgdGhlIGJveCBhcyBhIHN0cnVjdHVyZWQgSlMgb2JqZWN0XG4gKi9cbmNvbnN0IGRlc2VyaWFsaXplQm94Q29udGVudHMgPSAoYm94RWxlbTogRWxlbWVudCk6IHsgYm94OiBCb3gsIHBpZWNlOiBQaWVjZSB9ID0+IHtcbiAgICBsZXQgYm94UG9zID0gTnVtYmVyKGJveEVsZW0uZ2V0QXR0cmlidXRlKCdkYXRhLXBvcycpKTtcbiAgICBjb25zdCByID0gTWF0aC5mbG9vcihib3hQb3MgLyA4KTtcbiAgICBjb25zdCBjID0gYm94UG9zICUgODtcbiAgICBjb25zdCBib3g6IEJveCA9IHsgciwgYyB9O1xuICAgIGNvbnN0IHBpZWNlID0gPFBpZWNlPkpTT04ucGFyc2UoYm94RWxlbS5nZXRBdHRyaWJ1dGUoJ3BpZWNlJykpO1xuICAgIHJldHVybiB7IGJveCwgcGllY2UgfTtcbn1cblxuY29uc3QgZGVzZXJpYWxpemVDYXB0dXJlZFBpZWNlID0gKHBpZWNlRWxlbTogRWxlbWVudCk6IFBpZWNlID0+IFBpZWNlR2FtZUxvZ2ljLmdldFR5cGUocGllY2VFbGVtLnF1ZXJ5U2VsZWN0b3IoJ2RpdicpLmdldEF0dHJpYnV0ZSgnY2xhc3MnKS5yZXBsYWNlKCd3aGl0ZScsICcnKS5yZXBsYWNlKCdibGFjaycsICcnKSk7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbnRyb2xsZXIge1xuICAgIHByaXZhdGUgc3RvcmU6IFN0b3JlO1xuICAgIHByaXZhdGUgdmlldzogVmlldztcbiAgICBwcml2YXRlIF9zZWxlY3RlZEJveDogeyBib3g6IEJveCwgcGllY2U6IFBpZWNlIH07XG4gICAgcHJpdmF0ZSBfbGFzdFNlbGVjdGVkQm94OiB7IGJveDogQm94LCBwaWVjZTogUGllY2UgfTtcbiAgICBwcml2YXRlIF9zZWxlY3RlZENhcHR1cmVkUGllY2U6IFBpZWNlO1xuICAgIHByaXZhdGUgY3JlYXRlQW5kU2hvd0luaXRpYWxCb2FyZCgpIHtcbiAgICAgICAgY29uc3QgbmV3U3RhdGU6IFN0b3JlU3RhdGUgPSBuZXcgU3RvcmVTdGF0ZTtcbiAgICAgICAgbmV3U3RhdGUuYm9hcmQgPSBQaWVjZUdhbWVMb2dpYy5jb252ZXJ0R1NCb2FyZFRvUGllY2VCb2FyZChuZXdTdGF0ZS5nYW1lU3RhdGUpO1xuICAgICAgICB0aGlzLnN0b3JlLnN0YXRlID0gbmV3U3RhdGU7XG4gICAgICAgIHRoaXMuc2hvd0JvYXJkQW5kQmluZEJveGVzKCk7XG4gICAgfVxuICAgIHB1YmxpYyBzZXRTdG9yZVN0YXRlKG5ld1N0YXRlOiBTdG9yZVN0YXRlKTogdm9pZCB7XG4gICAgICBuZXdTdGF0ZS5ib2FyZCA9IFBpZWNlR2FtZUxvZ2ljLmNvbnZlcnRHU0JvYXJkVG9QaWVjZUJvYXJkKG5ld1N0YXRlLmdhbWVTdGF0ZSk7XG4gICAgICB0aGlzLnN0b3JlLnN0YXRlID0gbmV3U3RhdGU7XG4gICAgfVxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnN0b3JlID0gbmV3IFN0b3JlO1xuICAgICAgICB0aGlzLnZpZXcgPSBuZXcgVmlldztcbiAgICAgICAgdGhpcy5fc2VsZWN0ZWRCb3ggPSB7IGJveDogeyByOiAtMSwgYzogLTEgfSwgcGllY2U6IG5ldyBFbXB0eVBpZWNlIH07XG4gICAgICAgIHRoaXMuX2xhc3RTZWxlY3RlZEJveCA9IHsgYm94OiB7IHI6IC0xLCBjOiAtMSB9LCBwaWVjZTogbmV3IEVtcHR5UGllY2UgfTtcbiAgICAgICAgdGhpcy5fc2VsZWN0ZWRDYXB0dXJlZFBpZWNlID0gbmV3IEVtcHR5UGllY2U7XG4gICAgICAgIHRoaXMuY3JlYXRlQW5kU2hvd0luaXRpYWxCb2FyZCgpO1xuICAgICAgICAvLyB0aGlzLnZpZXcuYmluZFVuZG9Nb3ZlKHRoaXMudW5kb01vdmUuYmluZCh0aGlzKSk7XG4gICAgICAgIC8vIHRoaXMudmlldy5iaW5kUmVkb01vdmUodGhpcy5yZWRvTW92ZS5iaW5kKHRoaXMpKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIEhUTUwgYm9hcmQgaW4gVmlldywgYmluZCB0aGlzLnNlbGVjdEJveCB0byBlYWNoIGJveCBpbiBWaWV3LlxuICAgICAqIEBwYXJhbSB7Vm9pZH1cbiAgICAgKiBAcmV0dXJucyB7Vm9pZH1cbiAgICAgKi9cbiAgICBzaG93Qm9hcmRBbmRCaW5kQm94ZXMoKTogdm9pZCB7XG4gICAgICAgIHRoaXMudmlldy5zaG93Qm9hcmQodGhpcy5zdG9yZS5zdGF0ZSk7XG4gICAgICAgIGZvciAobGV0IHIgPSAwOyByIDwgODsgcisrKSB7XG4gICAgICAgICAgICBmb3IgKGxldCBjID0gMDsgYyA8IDg7IGMrKykge1xuICAgICAgICAgICAgICAgIGxldCBib3ggPSB0aGlzLnZpZXcuJGJvYXJkLmNoaWxkcmVuWzBdLmNoaWxkcmVuW3JdLmNoaWxkcmVuW2NdO1xuICAgICAgICAgICAgICAgIHRoaXMudmlldy5iaW5kU2VsZWN0Qm94KGJveCwgdGhpcy5zZWxlY3RCb3guYmluZCh0aGlzKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXQgdGhlIEhUTUwgY2FwdHVyZXMgaW4gVmlldywgYmluZCB0aGlzLnNlbGVjdENhcHR1cmVkUGllY2UgdG8gZWFjaCBjYXB0dXJlZCBwaWVjZSBpbiBWaWV3LlxuICAgICAqIEBwYXJhbSB7Vm9pZH1cbiAgICAgKiBAcmV0dXJucyB7Vm9pZH1cbiAgICAgKi9cbiAgICBzaG93QW5kQmluZENhcHR1cmVkUGllY2VzKCk6IHZvaWQge1xuICAgICAgICBsZXQgY2FwdHVyZXMgPSB0aGlzLnN0b3JlLnN0YXRlLmNhcHR1cmVzO1xuICAgICAgICB0aGlzLnZpZXcuc2hvd0NhcHR1cmVzKHRoaXMuc3RvcmUuc3RhdGUpO1xuICAgICAgICBsZXQgd2hpdGVJZHggPSAwO1xuICAgICAgICBsZXQgYmxhY2tJZHggPSAwO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNhcHR1cmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAoY2FwdHVyZXNbaV0uY29sb3IgJiYgY2FwdHVyZXNbaV0uY29sb3IuaW5kZXhPZignYmxhY2snKSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgbGV0IHBpZWNlID0gdGhpcy52aWV3LiRjYXB0dXJlZGJsYWNrLmNoaWxkcmVuWzBdLmNoaWxkcmVuW2JsYWNrSWR4KytdO1xuICAgICAgICAgICAgICAgIGlmIChwaWVjZSAhPSB1bmRlZmluZWQpIHRoaXMudmlldy5iaW5kQ2FwdHVyZWRQaWVjZShwaWVjZSwgaSwgdGhpcy5zZWxlY3RDYXB0dXJlZFBpZWNlLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoY2FwdHVyZXNbaV0uY29sb3IgJiYgY2FwdHVyZXNbaV0uY29sb3IuaW5kZXhPZignd2hpdGUnKSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgbGV0IHBpZWNlID0gdGhpcy52aWV3LiRjYXB0dXJlZHdoaXRlLmNoaWxkcmVuWzBdLmNoaWxkcmVuW3doaXRlSWR4KytdO1xuICAgICAgICAgICAgICAgIGlmIChwaWVjZSAhPSB1bmRlZmluZWQpIHRoaXMudmlldy5iaW5kQ2FwdHVyZWRQaWVjZShwaWVjZSwgaSwgdGhpcy5zZWxlY3RDYXB0dXJlZFBpZWNlLmJpbmQodGhpcykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQGRlc2NyaXB0aW9uIE5vdGlmaWVzIFBHTCBiYXNlZCBvbiBuZXcgc3RhdGUgb2YgdGhpcy5fc2VsZWN0ZWRCb3ggYW5kIHRoaXMuX2xhc3RTZWxlY3RlZEJveC5cbiAgICAgKiBAaGVscGVyIFRoaXMgaXMgZXh0cmFjdGVkIGZ1bmN0aW9uYWxpdHkgZnJvbSBDb250cm9sbGVyLnNlbGVjdEJveC5cbiAgICAgKi9cbiAgICBtb3ZlWG9yR2V0UG9zc2libGVNb3ZlcygpOiB2b2lkIHtcbiAgICAgIGlmICghKHRoaXMuX2xhc3RTZWxlY3RlZEJveC5waWVjZSBpbnN0YW5jZW9mIEVtcHR5UGllY2UpKSB7XG4gICAgICAgIGNvbnN0IHVwZGF0ZWRNb3ZlU3RhdGUgPSBQaWVjZUdhbWVMb2dpYy5tYWtlTGVnYWxNb3ZlKHRoaXMuc3RvcmUuc3RhdGUuZ2FtZVN0YXRlLCB0aGlzLl9sYXN0U2VsZWN0ZWRCb3guYm94LCB0aGlzLl9zZWxlY3RlZEJveC5ib3gsIHRoaXMuc3RvcmUuc3RhdGUucHJldk1vdmUsIHRoaXMuX3NlbGVjdGVkQ2FwdHVyZWRQaWVjZSk7XG4gICAgICAgIGNvbnN0IG5ld1N0YXRlID0gbmV3IFN0b3JlU3RhdGUodGhpcy5zdG9yZS5zdGF0ZSk7XG4gICAgICAgIG5ld1N0YXRlLmdhbWVTdGF0ZSA9IHVwZGF0ZWRNb3ZlU3RhdGUuZ2FtZVN0YXRlO1xuICAgICAgICBjb25zdCBjYXB0dXJlZFBpZWNlID0gdXBkYXRlZE1vdmVTdGF0ZS5jYXB0dXJlZFBpZWNlO1xuICAgICAgICBpZiAodGhpcy5zdG9yZS5zdGF0ZS5nYW1lU3RhdGUgIT09IG5ld1N0YXRlLmdhbWVTdGF0ZSkge1xuICAgICAgICAgIG5ld1N0YXRlLnBvc3NpYmxlRGVzdEJveGVzID0gdGhpcy5zdG9yZS5zdGF0ZS5pbml0aWFsaXplRmFsc2VHcmlkKDgpO1xuICAgICAgICAgIG5ld1N0YXRlLnByZXZNb3ZlID0geyBzcmM6IHRoaXMuX2xhc3RTZWxlY3RlZEJveC5ib3gsIGRzdDogdGhpcy5fc2VsZWN0ZWRCb3guYm94IH07XG4gICAgICAgICAgbmV3U3RhdGUuZ2FtZVN0YXRlLnBsYXllciA9IHRoaXMuc3RvcmUuc3RhdGUuZ2FtZVN0YXRlLnBsYXllciA9PT0gUExBWUVSX1dISVRFID8gUExBWUVSX0JMQUNLIDogUExBWUVSX1dISVRFO1xuICAgICAgICAgIGlmICh1cGRhdGVkTW92ZVN0YXRlLndhc1Byb21vdGlvbikgbmV3U3RhdGUuZ2FtZVN0YXRlLnBsYXllciA9IG5ld1N0YXRlLmdhbWVTdGF0ZS5wbGF5ZXIgPT09IFBMQVlFUl9XSElURSA/IFBMQVlFUl9CTEFDSyA6IFBMQVlFUl9XSElURTtcbiAgICAgICAgICBpZiAoIShjYXB0dXJlZFBpZWNlIGluc3RhbmNlb2YgRW1wdHlQaWVjZSkpIHtcbiAgICAgICAgICAgIG5ld1N0YXRlLmNhcHR1cmVzLnB1c2goY2FwdHVyZWRQaWVjZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNvbnN0IHBvc3NpYmxlTW92ZXMgPSBQaWVjZUdhbWVMb2dpYy5nZXRQb3NzaWJsZU1vdmVzKHRoaXMuc3RvcmUuc3RhdGUuZ2FtZVN0YXRlLCB0aGlzLl9zZWxlY3RlZEJveC5ib3gsIHRoaXMuc3RvcmUuc3RhdGUucHJldk1vdmUpO1xuICAgICAgICAgIG5ld1N0YXRlLnBvc3NpYmxlRGVzdEJveGVzID0gdGhpcy5zdG9yZS5zdGF0ZS5pbml0aWFsaXplRmFsc2VHcmlkKDgpO1xuICAgICAgICAgIHBvc3NpYmxlTW92ZXMuZm9yRWFjaCgoYm94OiBCb3gpID0+IHtcbiAgICAgICAgICAgIG5ld1N0YXRlLnBvc3NpYmxlRGVzdEJveGVzW2JveC5yXVtib3guY10gPSB0cnVlO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2V0U3RvcmVTdGF0ZShuZXdTdGF0ZSk7XG4gICAgICB9XG4gICAgICB0aGlzLl9zZWxlY3RlZENhcHR1cmVkUGllY2UgPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIHNlbGVjdGVkUGllY2UgYWZ0ZXIgc2V0aW5nIGxhc3RTZWxlY3RlZFBpZWNlIHRvIGN1cnJlbnQgc2VsZWN0ZWRQaWVjZS5cbiAgICAgKiBcbiAgICAgKiBAcGFyYW0geyFFbGVtZW50fSBib3ggZGl2IG9mIHRoZSBzZWxlY3RlZCBib3hcbiAgICAgKi9cbiAgICBzZWxlY3RCb3goYm94OiBFbGVtZW50KTogdm9pZCB7XG4gICAgICB0aGlzLl9sYXN0U2VsZWN0ZWRCb3ggPSB0aGlzLl9zZWxlY3RlZEJveDtcbiAgICAgIHRoaXMuX3NlbGVjdGVkQm94ID0gZGVzZXJpYWxpemVCb3hDb250ZW50cyhib3gpO1xuXG4gICAgICB0aGlzLnNob3dBbmRCaW5kQ2FwdHVyZWRQaWVjZXMoKTtcbiAgICAgIHRoaXMuc2hvd0JvYXJkQW5kQmluZEJveGVzKCk7XG5cbiAgICAgIHRoaXMubW92ZVhvckdldFBvc3NpYmxlTW92ZXMoKTtcblxuICAgICAgdGhpcy5zaG93QW5kQmluZENhcHR1cmVkUGllY2VzKCk7XG4gICAgICB0aGlzLnNob3dCb2FyZEFuZEJpbmRCb3hlcygpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gcGllY2VFbGVtXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGkgSW5kZXggb2YgY2FwdHVyZWQgcGllY2UuXG4gICAgICovXG4gICAgc2VsZWN0Q2FwdHVyZWRQaWVjZShwaWVjZUVsZW06IEVsZW1lbnQsIGk6IG51bWJlcik6IHZvaWQge1xuICAgICAgICB0aGlzLl9zZWxlY3RlZENhcHR1cmVkUGllY2UgPSB0aGlzLnN0b3JlLnN0YXRlLmNhcHR1cmVzW2ldO1xuICAgICAgICB0aGlzLnNob3dBbmRCaW5kQ2FwdHVyZWRQaWVjZXMoKTtcbiAgICAgICAgdGhpcy5zaG93Qm9hcmRBbmRCaW5kQm94ZXMoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAdG9kbyBMb29rIGludG8gRkVOLCBQR04sIFNBTiBhbmQgY29tbW9uIGltcGxlbWVudGF0aW9ucyBvZiBrZWVwaW5nIGhpc3RvcnlcbiAgICAgKi9cbiAgICB1bmRvTW92ZSgpOiB2b2lkIHtcblxuICAgIH1cblxuICAgIHJlZG9Nb3ZlKCk6IHZvaWQge1xuXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHRvZG8gQ29uc2lkZXIgRkVOLCBQR04sIFNBTiwgZXRjIGZvciB0aGlzLlxuICAgICAqL1xuICAgIGxvYWRCb2FyZCgpOiB2b2lkIHtcblxuICAgIH1cbiAgICBzYXZlQm9hcmQoKTogdm9pZCB7XG5cbiAgICB9XG59IiwiaW1wb3J0IENvbnRyb2xsZXIgZnJvbSAnLi9jb250cm9sbGVyL2NvbnRyb2xsZXInO1xuaW1wb3J0IHsgcXMgfSBmcm9tICcuL3ZpZXcvaGVscGVycyc7XG5jb25zdCBjb250cm9sbGVyID0gbmV3IENvbnRyb2xsZXI7XG4vLyBAdHMtaWdub3JlXG5xcygnLmNoZXNzYm9hcmQgPiBib2FyZDpudGgtY2hpbGQoMSkgPiB0cjpudGgtY2hpbGQoNykgPiB0ZDpudGgtY2hpbGQoNSkgPiBkaXY6bnRoLWNoaWxkKDEpJykuY2xpY2soKTsiLCIvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblxuLy8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0XG4vLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcbi8vIHdyYXBwZWQgaW4gc3RyaWN0IG1vZGUgY29kZSB3aGljaCBkb2Vzbid0IGRlZmluZSBhbnkgZ2xvYmFscy4gIEl0J3MgaW5zaWRlIGFcbi8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuXG5cbnZhciBjYWNoZWRTZXRUaW1lb3V0O1xudmFyIGNhY2hlZENsZWFyVGltZW91dDtcblxuZnVuY3Rpb24gZGVmYXVsdFNldFRpbW91dCgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRDbGVhclRpbWVvdXQgKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG4oZnVuY3Rpb24gKCkge1xuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2xlYXJUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgIH1cbn0gKCkpXG5mdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikge1xuICAgIGlmIChjYWNoZWRTZXRUaW1lb3V0ID09PSBzZXRUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICAvLyBpZiBzZXRUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkU2V0VGltZW91dCA9PT0gZGVmYXVsdFNldFRpbW91dCB8fCAhY2FjaGVkU2V0VGltZW91dCkgJiYgc2V0VGltZW91dCkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sIDApO1xuICAgIH0gY2F0Y2goZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwobnVsbCwgZnVuLCAwKTtcbiAgICAgICAgfSBjYXRjaChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yXG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKHRoaXMsIGZ1biwgMCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxufVxuZnVuY3Rpb24gcnVuQ2xlYXJUaW1lb3V0KG1hcmtlcikge1xuICAgIGlmIChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGNsZWFyVGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICAvLyBpZiBjbGVhclRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGRlZmF1bHRDbGVhclRpbWVvdXQgfHwgIWNhY2hlZENsZWFyVGltZW91dCkgJiYgY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCAgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLCBtYXJrZXIpO1xuICAgICAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yLlxuICAgICAgICAgICAgLy8gU29tZSB2ZXJzaW9ucyBvZiBJLkUuIGhhdmUgZGlmZmVyZW50IHJ1bGVzIGZvciBjbGVhclRpbWVvdXQgdnMgc2V0VGltZW91dFxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG59XG52YXIgcXVldWUgPSBbXTtcbnZhciBkcmFpbmluZyA9IGZhbHNlO1xudmFyIGN1cnJlbnRRdWV1ZTtcbnZhciBxdWV1ZUluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcbiAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgIH1cbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICAgIGRyYWluUXVldWUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG4gICAgaWYgKGRyYWluaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRpbWVvdXQgPSBydW5UaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG4gICAgZHJhaW5pbmcgPSB0cnVlO1xuXG4gICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZShsZW4pIHtcbiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG4gICAgICAgIHF1ZXVlID0gW107XG4gICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBydW5DbGVhclRpbWVvdXQodGltZW91dCk7XG59XG5cbnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcbiAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuICAgICAgICBydW5UaW1lb3V0KGRyYWluUXVldWUpO1xuICAgIH1cbn07XG5cbi8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcbmZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuICAgIHRoaXMuZnVuID0gZnVuO1xuICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbn1cbkl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcbn07XG5wcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcbnByb2Nlc3MuZW52ID0ge307XG5wcm9jZXNzLmFyZ3YgPSBbXTtcbnByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xucHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxucHJvY2Vzcy5vbiA9IG5vb3A7XG5wcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3Mub25jZSA9IG5vb3A7XG5wcm9jZXNzLm9mZiA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcbnByb2Nlc3MuZW1pdCA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRPbmNlTGlzdGVuZXIgPSBub29wO1xuXG5wcm9jZXNzLmxpc3RlbmVycyA9IGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBbXSB9XG5cbnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcblxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5wcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuIiwiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbi8vIHJlc29sdmVzIC4gYW5kIC4uIGVsZW1lbnRzIGluIGEgcGF0aCBhcnJheSB3aXRoIGRpcmVjdG9yeSBuYW1lcyB0aGVyZVxuLy8gbXVzdCBiZSBubyBzbGFzaGVzLCBlbXB0eSBlbGVtZW50cywgb3IgZGV2aWNlIG5hbWVzIChjOlxcKSBpbiB0aGUgYXJyYXlcbi8vIChzbyBhbHNvIG5vIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHNsYXNoZXMgLSBpdCBkb2VzIG5vdCBkaXN0aW5ndWlzaFxuLy8gcmVsYXRpdmUgYW5kIGFic29sdXRlIHBhdGhzKVxuZnVuY3Rpb24gbm9ybWFsaXplQXJyYXkocGFydHMsIGFsbG93QWJvdmVSb290KSB7XG4gIC8vIGlmIHRoZSBwYXRoIHRyaWVzIHRvIGdvIGFib3ZlIHRoZSByb290LCBgdXBgIGVuZHMgdXAgPiAwXG4gIHZhciB1cCA9IDA7XG4gIGZvciAodmFyIGkgPSBwYXJ0cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgIHZhciBsYXN0ID0gcGFydHNbaV07XG4gICAgaWYgKGxhc3QgPT09ICcuJykge1xuICAgICAgcGFydHMuc3BsaWNlKGksIDEpO1xuICAgIH0gZWxzZSBpZiAobGFzdCA9PT0gJy4uJykge1xuICAgICAgcGFydHMuc3BsaWNlKGksIDEpO1xuICAgICAgdXArKztcbiAgICB9IGVsc2UgaWYgKHVwKSB7XG4gICAgICBwYXJ0cy5zcGxpY2UoaSwgMSk7XG4gICAgICB1cC0tO1xuICAgIH1cbiAgfVxuXG4gIC8vIGlmIHRoZSBwYXRoIGlzIGFsbG93ZWQgdG8gZ28gYWJvdmUgdGhlIHJvb3QsIHJlc3RvcmUgbGVhZGluZyAuLnNcbiAgaWYgKGFsbG93QWJvdmVSb290KSB7XG4gICAgZm9yICg7IHVwLS07IHVwKSB7XG4gICAgICBwYXJ0cy51bnNoaWZ0KCcuLicpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBwYXJ0cztcbn1cblxuLy8gU3BsaXQgYSBmaWxlbmFtZSBpbnRvIFtyb290LCBkaXIsIGJhc2VuYW1lLCBleHRdLCB1bml4IHZlcnNpb25cbi8vICdyb290JyBpcyBqdXN0IGEgc2xhc2gsIG9yIG5vdGhpbmcuXG52YXIgc3BsaXRQYXRoUmUgPVxuICAgIC9eKFxcLz98KShbXFxzXFxTXSo/KSgoPzpcXC57MSwyfXxbXlxcL10rP3wpKFxcLlteLlxcL10qfCkpKD86W1xcL10qKSQvO1xudmFyIHNwbGl0UGF0aCA9IGZ1bmN0aW9uKGZpbGVuYW1lKSB7XG4gIHJldHVybiBzcGxpdFBhdGhSZS5leGVjKGZpbGVuYW1lKS5zbGljZSgxKTtcbn07XG5cbi8vIHBhdGgucmVzb2x2ZShbZnJvbSAuLi5dLCB0bylcbi8vIHBvc2l4IHZlcnNpb25cbmV4cG9ydHMucmVzb2x2ZSA9IGZ1bmN0aW9uKCkge1xuICB2YXIgcmVzb2x2ZWRQYXRoID0gJycsXG4gICAgICByZXNvbHZlZEFic29sdXRlID0gZmFsc2U7XG5cbiAgZm9yICh2YXIgaSA9IGFyZ3VtZW50cy5sZW5ndGggLSAxOyBpID49IC0xICYmICFyZXNvbHZlZEFic29sdXRlOyBpLS0pIHtcbiAgICB2YXIgcGF0aCA9IChpID49IDApID8gYXJndW1lbnRzW2ldIDogcHJvY2Vzcy5jd2QoKTtcblxuICAgIC8vIFNraXAgZW1wdHkgYW5kIGludmFsaWQgZW50cmllc1xuICAgIGlmICh0eXBlb2YgcGF0aCAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50cyB0byBwYXRoLnJlc29sdmUgbXVzdCBiZSBzdHJpbmdzJyk7XG4gICAgfSBlbHNlIGlmICghcGF0aCkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgcmVzb2x2ZWRQYXRoID0gcGF0aCArICcvJyArIHJlc29sdmVkUGF0aDtcbiAgICByZXNvbHZlZEFic29sdXRlID0gcGF0aC5jaGFyQXQoMCkgPT09ICcvJztcbiAgfVxuXG4gIC8vIEF0IHRoaXMgcG9pbnQgdGhlIHBhdGggc2hvdWxkIGJlIHJlc29sdmVkIHRvIGEgZnVsbCBhYnNvbHV0ZSBwYXRoLCBidXRcbiAgLy8gaGFuZGxlIHJlbGF0aXZlIHBhdGhzIHRvIGJlIHNhZmUgKG1pZ2h0IGhhcHBlbiB3aGVuIHByb2Nlc3MuY3dkKCkgZmFpbHMpXG5cbiAgLy8gTm9ybWFsaXplIHRoZSBwYXRoXG4gIHJlc29sdmVkUGF0aCA9IG5vcm1hbGl6ZUFycmF5KGZpbHRlcihyZXNvbHZlZFBhdGguc3BsaXQoJy8nKSwgZnVuY3Rpb24ocCkge1xuICAgIHJldHVybiAhIXA7XG4gIH0pLCAhcmVzb2x2ZWRBYnNvbHV0ZSkuam9pbignLycpO1xuXG4gIHJldHVybiAoKHJlc29sdmVkQWJzb2x1dGUgPyAnLycgOiAnJykgKyByZXNvbHZlZFBhdGgpIHx8ICcuJztcbn07XG5cbi8vIHBhdGgubm9ybWFsaXplKHBhdGgpXG4vLyBwb3NpeCB2ZXJzaW9uXG5leHBvcnRzLm5vcm1hbGl6ZSA9IGZ1bmN0aW9uKHBhdGgpIHtcbiAgdmFyIGlzQWJzb2x1dGUgPSBleHBvcnRzLmlzQWJzb2x1dGUocGF0aCksXG4gICAgICB0cmFpbGluZ1NsYXNoID0gc3Vic3RyKHBhdGgsIC0xKSA9PT0gJy8nO1xuXG4gIC8vIE5vcm1hbGl6ZSB0aGUgcGF0aFxuICBwYXRoID0gbm9ybWFsaXplQXJyYXkoZmlsdGVyKHBhdGguc3BsaXQoJy8nKSwgZnVuY3Rpb24ocCkge1xuICAgIHJldHVybiAhIXA7XG4gIH0pLCAhaXNBYnNvbHV0ZSkuam9pbignLycpO1xuXG4gIGlmICghcGF0aCAmJiAhaXNBYnNvbHV0ZSkge1xuICAgIHBhdGggPSAnLic7XG4gIH1cbiAgaWYgKHBhdGggJiYgdHJhaWxpbmdTbGFzaCkge1xuICAgIHBhdGggKz0gJy8nO1xuICB9XG5cbiAgcmV0dXJuIChpc0Fic29sdXRlID8gJy8nIDogJycpICsgcGF0aDtcbn07XG5cbi8vIHBvc2l4IHZlcnNpb25cbmV4cG9ydHMuaXNBYnNvbHV0ZSA9IGZ1bmN0aW9uKHBhdGgpIHtcbiAgcmV0dXJuIHBhdGguY2hhckF0KDApID09PSAnLyc7XG59O1xuXG4vLyBwb3NpeCB2ZXJzaW9uXG5leHBvcnRzLmpvaW4gPSBmdW5jdGlvbigpIHtcbiAgdmFyIHBhdGhzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKTtcbiAgcmV0dXJuIGV4cG9ydHMubm9ybWFsaXplKGZpbHRlcihwYXRocywgZnVuY3Rpb24ocCwgaW5kZXgpIHtcbiAgICBpZiAodHlwZW9mIHAgIT09ICdzdHJpbmcnKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudHMgdG8gcGF0aC5qb2luIG11c3QgYmUgc3RyaW5ncycpO1xuICAgIH1cbiAgICByZXR1cm4gcDtcbiAgfSkuam9pbignLycpKTtcbn07XG5cblxuLy8gcGF0aC5yZWxhdGl2ZShmcm9tLCB0bylcbi8vIHBvc2l4IHZlcnNpb25cbmV4cG9ydHMucmVsYXRpdmUgPSBmdW5jdGlvbihmcm9tLCB0bykge1xuICBmcm9tID0gZXhwb3J0cy5yZXNvbHZlKGZyb20pLnN1YnN0cigxKTtcbiAgdG8gPSBleHBvcnRzLnJlc29sdmUodG8pLnN1YnN0cigxKTtcblxuICBmdW5jdGlvbiB0cmltKGFycikge1xuICAgIHZhciBzdGFydCA9IDA7XG4gICAgZm9yICg7IHN0YXJ0IDwgYXJyLmxlbmd0aDsgc3RhcnQrKykge1xuICAgICAgaWYgKGFycltzdGFydF0gIT09ICcnKSBicmVhaztcbiAgICB9XG5cbiAgICB2YXIgZW5kID0gYXJyLmxlbmd0aCAtIDE7XG4gICAgZm9yICg7IGVuZCA+PSAwOyBlbmQtLSkge1xuICAgICAgaWYgKGFycltlbmRdICE9PSAnJykgYnJlYWs7XG4gICAgfVxuXG4gICAgaWYgKHN0YXJ0ID4gZW5kKSByZXR1cm4gW107XG4gICAgcmV0dXJuIGFyci5zbGljZShzdGFydCwgZW5kIC0gc3RhcnQgKyAxKTtcbiAgfVxuXG4gIHZhciBmcm9tUGFydHMgPSB0cmltKGZyb20uc3BsaXQoJy8nKSk7XG4gIHZhciB0b1BhcnRzID0gdHJpbSh0by5zcGxpdCgnLycpKTtcblxuICB2YXIgbGVuZ3RoID0gTWF0aC5taW4oZnJvbVBhcnRzLmxlbmd0aCwgdG9QYXJ0cy5sZW5ndGgpO1xuICB2YXIgc2FtZVBhcnRzTGVuZ3RoID0gbGVuZ3RoO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGZyb21QYXJ0c1tpXSAhPT0gdG9QYXJ0c1tpXSkge1xuICAgICAgc2FtZVBhcnRzTGVuZ3RoID0gaTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHZhciBvdXRwdXRQYXJ0cyA9IFtdO1xuICBmb3IgKHZhciBpID0gc2FtZVBhcnRzTGVuZ3RoOyBpIDwgZnJvbVBhcnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgb3V0cHV0UGFydHMucHVzaCgnLi4nKTtcbiAgfVxuXG4gIG91dHB1dFBhcnRzID0gb3V0cHV0UGFydHMuY29uY2F0KHRvUGFydHMuc2xpY2Uoc2FtZVBhcnRzTGVuZ3RoKSk7XG5cbiAgcmV0dXJuIG91dHB1dFBhcnRzLmpvaW4oJy8nKTtcbn07XG5cbmV4cG9ydHMuc2VwID0gJy8nO1xuZXhwb3J0cy5kZWxpbWl0ZXIgPSAnOic7XG5cbmV4cG9ydHMuZGlybmFtZSA9IGZ1bmN0aW9uKHBhdGgpIHtcbiAgdmFyIHJlc3VsdCA9IHNwbGl0UGF0aChwYXRoKSxcbiAgICAgIHJvb3QgPSByZXN1bHRbMF0sXG4gICAgICBkaXIgPSByZXN1bHRbMV07XG5cbiAgaWYgKCFyb290ICYmICFkaXIpIHtcbiAgICAvLyBObyBkaXJuYW1lIHdoYXRzb2V2ZXJcbiAgICByZXR1cm4gJy4nO1xuICB9XG5cbiAgaWYgKGRpcikge1xuICAgIC8vIEl0IGhhcyBhIGRpcm5hbWUsIHN0cmlwIHRyYWlsaW5nIHNsYXNoXG4gICAgZGlyID0gZGlyLnN1YnN0cigwLCBkaXIubGVuZ3RoIC0gMSk7XG4gIH1cblxuICByZXR1cm4gcm9vdCArIGRpcjtcbn07XG5cblxuZXhwb3J0cy5iYXNlbmFtZSA9IGZ1bmN0aW9uKHBhdGgsIGV4dCkge1xuICB2YXIgZiA9IHNwbGl0UGF0aChwYXRoKVsyXTtcbiAgLy8gVE9ETzogbWFrZSB0aGlzIGNvbXBhcmlzb24gY2FzZS1pbnNlbnNpdGl2ZSBvbiB3aW5kb3dzP1xuICBpZiAoZXh0ICYmIGYuc3Vic3RyKC0xICogZXh0Lmxlbmd0aCkgPT09IGV4dCkge1xuICAgIGYgPSBmLnN1YnN0cigwLCBmLmxlbmd0aCAtIGV4dC5sZW5ndGgpO1xuICB9XG4gIHJldHVybiBmO1xufTtcblxuXG5leHBvcnRzLmV4dG5hbWUgPSBmdW5jdGlvbihwYXRoKSB7XG4gIHJldHVybiBzcGxpdFBhdGgocGF0aClbM107XG59O1xuXG5mdW5jdGlvbiBmaWx0ZXIgKHhzLCBmKSB7XG4gICAgaWYgKHhzLmZpbHRlcikgcmV0dXJuIHhzLmZpbHRlcihmKTtcbiAgICB2YXIgcmVzID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB4cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoZih4c1tpXSwgaSwgeHMpKSByZXMucHVzaCh4c1tpXSk7XG4gICAgfVxuICAgIHJldHVybiByZXM7XG59XG5cbi8vIFN0cmluZy5wcm90b3R5cGUuc3Vic3RyIC0gbmVnYXRpdmUgaW5kZXggZG9uJ3Qgd29yayBpbiBJRThcbnZhciBzdWJzdHIgPSAnYWInLnN1YnN0cigtMSkgPT09ICdiJ1xuICAgID8gZnVuY3Rpb24gKHN0ciwgc3RhcnQsIGxlbikgeyByZXR1cm4gc3RyLnN1YnN0cihzdGFydCwgbGVuKSB9XG4gICAgOiBmdW5jdGlvbiAoc3RyLCBzdGFydCwgbGVuKSB7XG4gICAgICAgIGlmIChzdGFydCA8IDApIHN0YXJ0ID0gc3RyLmxlbmd0aCArIHN0YXJ0O1xuICAgICAgICByZXR1cm4gc3RyLnN1YnN0cihzdGFydCwgbGVuKTtcbiAgICB9XG47XG4iXSwic291cmNlUm9vdCI6IiJ9