!function(e){var t={};function r(o){if(t[o])return t[o].exports;var s=t[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)r.d(o,s,function(t){return e[t]}.bind(null,s));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";r.r(t);class o{constructor(e="blank"){this.name="empty",this.color=e,this.getPossibleMoves=((e,t,r)=>{return e=>!1})}}class s{get board(){return Object.assign([],this._board)}get rankCount(){return this._board.length}get fileCount(){return this._board[0].length>0?this._board[0].length:1}constructor(e){this._board=e instanceof s?e._board:e||[["r0","h0","b0","q0","k0","b0","h0","r0"],["p0","p0","p0","p0","p0","p0","p0","p0"],[" "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "],[" "," "," "," "," "," "," "," "],["P0","P0","P0","P0","P0","P0","P0","P0"],["R0","H0","B0","Q0","K0","B0","H0","R0"]],this.getEncoding=(e=>this._board[e.r][e.c]),this.setEncoding=((e,t)=>{e.r>-1&&e.r<this._board.length&&e.c>-1&&e.c<this._board[0].length&&(this._board[e.r][e.c]=t)})}}class n{get player(){return this._player}set player(e){this._player=e}get board(){return this._board.board}constructor(e){this._board=new s(e),this.getEncoding=(e=>this._board.getEncoding(e)),this._player=c,this.rankCount=this._board.rankCount,this.fileCount=this._board.fileCount}}class i{array2d(e,t){const r=[];for(let o=0;o<e;o++){r.push([]);for(let s=0;s<e;s++)r[o].push(t)}return r}initializeFalseGrid(e){return this.array2d(e,!1)}constructor(e){this.gameState=e?e.gameState:new n,this.selectedBoxes=e?e.selectedBoxes:this.initializeFalseGrid(8),this.possibleDestBoxes=e?e.possibleDestBoxes:this.initializeFalseGrid(8),this.prevMove=e?e.prevMove:{src:{r:-1,c:-1},dst:{r:-1,c:-1}},this.captures=e?e.captures:[],this.selectedCaptures=e?e.selectedCaptures:[],this.board=e?e.board:[]}}const c=0,a=1;class l{constructor(){this._state=new i}get state(){return this._state}set state(e){this._state.gameState=e.gameState?e.gameState:this._state.gameState,this._state.board=e.board?e.board:this._state.board,this._state.selectedBoxes=e.selectedBoxes?e.selectedBoxes:this._state.selectedBoxes,this._state.possibleDestBoxes=e.possibleDestBoxes?e.possibleDestBoxes:this._state.possibleDestBoxes,this._state.prevMove=e.prevMove?e.prevMove:this._state.prevMove,this._state.captures=e.captures?e.captures:this._state.captures,this._state.selectedCaptures=e.selectedCaptures?e.selectedCaptures:this._state.selectedCaptures}}function u(e,t){return(t||document).querySelector(e)}function d(e,t,r,o){e.addEventListener(t,r,!!o)}class h{Board(e){const t=e.board;let r=document.createElement("board"),o=0;for(let s=0;s<8;s++){let n=document.createElement("tr");for(let r=0;r<8;r++){let i=document.createElement("td");i.setAttribute("data-pos",String(o));const c=t[s][r];if(i.setAttribute("piece",JSON.stringify(c)),c){let e=document.createElement("div");e.setAttribute("class",c.color+c.name),i.appendChild(e)}e.selectedBoxes[s][r]&&i.setAttribute("class","selected"),e.possibleDestBoxes[s][r]&&i.setAttribute("class","possibleDest"),n.appendChild(i),o++}r.appendChild(n)}return r}Captured(e,t){const r=t.captures,o=t.selectedCaptures;let s=document.createElement("tr");for(let t=0;t<r.length;t++){const n=r[t];if(n.color&&0==n.color.indexOf(e)){let e=document.createElement("td"),r=document.createElement("div");r.setAttribute("class",n.color+n.name),o[t]&&r.setAttribute("class",n.color+n.name+" selectedCapture"),e.appendChild(r),s.appendChild(e)}}return s}CapturedWhite(e){return this.Captured("white",e)}CapturedBlack(e){return this.Captured("black",e)}}class g{constructor(){this._template=new h,this._$board=u(".chessboard"),this._$capturedwhite=u(".capturedwhite"),this._$capturedblack=u(".capturedblack"),this._$main=u(".main"),this._$undobtn=u(".undo"),this._$redobtn=u(".redo")}get $board(){return this._$board}get $capturedwhite(){return this._$capturedwhite}get $capturedblack(){return this._$capturedblack}showBoard(e){this.$board.replaceChild(this._template.Board(e),this.$board.firstChild)}showCaptures(e){this.$capturedwhite.replaceChild(this._template.CapturedWhite(e),this.$capturedwhite.firstChild),this.$capturedblack.replaceChild(this._template.CapturedBlack(e),this.$capturedblack.firstChild)}bindSelectBox(e,t){d(e,"click",()=>t(e))}bindCapturedPiece(e,t,r){d(e,"click",()=>r(e,t))}bindUndoMove(e){}bindRedoMove(e){}}r(2);const p={getNumMoves:(e,t)=>-1,isEmpty:(e,t)=>!1,isPieceOfGivenPlayer:(e,t,r)=>!1,isPieceOfCurrentPlayer:(e,t)=>!1,isBoxOnBoard:(e,t)=>!1,isValidSourceAndDest:(e,t,r)=>!1,canGoAlongRowToDest:(e,t,r)=>!1,canGoAlongColToDest:(e,t,r)=>!1,canGoAlongLineToDest:(e,t,r)=>!1,canGoAlongDiagonalToDest:(e,t,r)=>!1};p.getNumMoves=((e,t)=>{let r=e.getEncoding(t).match(/([a-zA-z])(\d*)/);return r&&r.length>2&&!isNaN(Number(r[2]))?Number(r[2]):-1}),p.isEmpty=((e,t)=>""===e.getEncoding(t).trim()),p.isPieceOfGivenPlayer=((e,t,r)=>{let o=e.getEncoding(r).match(/([a-zA-z])(\d*)/),s=o.length>1?o[1]:null;return!!s&&(t==c&&s==s.toUpperCase()||t==a&&s==s.toLowerCase())}),p.isPieceOfCurrentPlayer=((e,t)=>{const r=(r,{c:o,r:s}=t)=>e.getEncoding(t)===r.apply(e.getEncoding(t))&&!p.isEmpty(e,t);return e.player===c?r(String.prototype.toUpperCase):r(String.prototype.toLowerCase)}),p.isBoxOnBoard=((e,t)=>t.r<e.rankCount&&t.r>=0&&t.c>=0&&t.c<e.fileCount),p.isValidSourceAndDest=((e,t,r)=>p.isPieceOfCurrentPlayer(e,t)&&!p.isPieceOfCurrentPlayer(e,r)&&p.isBoxOnBoard(e,r)&&t!=r),p.canGoAlongRowToDest=((e,t,r)=>{if(t.r==r.r){const o=r.c>t.c?1:-1;let s=Math.abs(r.c-t.c);for(let r=t.c+o;s-- >1;r+=o)if(!p.isEmpty(e,{r:t.r,c:r}))return!1;return!0}return!1}),p.canGoAlongColToDest=((e,t,r)=>{if(t.c==r.c){const o=r.r>t.r?1:-1;let s=Math.abs(r.r-t.r);for(let r=t.r+o;s-- >1;r+=o)if(!p.isEmpty(e,{r:r,c:t.c}))return!1;return!0}return!1}),p.canGoAlongLineToDest=((e,t,r)=>p.canGoAlongColToDest(e,t,r)||p.canGoAlongRowToDest(e,t,r)),p.canGoAlongDiagonalToDest=((e,t,r)=>{if(1!=Math.abs((r.r-t.r)/(r.c-t.c)))return!1;let o=Math.abs(r.c-t.c);const s=r.r-t.r>0?1:-1,n=r.c-t.c>0?1:-1;let i=t.r+s,c=t.c+n;for(;o-- >1;i+=s,c+=n)if(!p.isEmpty(e,{r:i,c:c}))return!1;return!0});class f{constructor(e){this.name="pawn",this.color=e,this.getPossibleMoves=((e,t,r)=>{void 0===r&&(r=p.getNumMoves(e,t));return o=>{if(!p.isValidSourceAndDest(e,t,o))return!1;const s=(()=>e.player==c?-1:1)(),n=p.isEmpty(e,o)&&t.c==o.c&&o.r==t.r+s,i={r:t.r+s,c:o.c},a=0==r&&p.isEmpty(e,o)&&p.isEmpty(e,i)&&t.c==o.c&&o.r==t.r+2*s,l=!(p.isPieceOfCurrentPlayer(e,o)||p.isEmpty(e,o)||o.r!=t.r+s||o.c!=t.c+1&&o.c!=t.c-1);return(n||a||l)&&!p.isPieceOfCurrentPlayer(e,o)}})}}class b{constructor(e){this.name="rook",this.color=e,this.getPossibleMoves=((e,t,r)=>{return r=>!!p.isValidSourceAndDest(e,t,r)&&(p.canGoAlongRowToDest(e,t,r)||p.canGoAlongColToDest(e,t,r))})}}class m{constructor(e){this.name="knight",this.color=e,this.getPossibleMoves=((e,t,r)=>{return r=>!(!p.isValidSourceAndDest(e,t,r)||!(1==Math.abs(t.r-r.r)&&2==Math.abs(t.c-r.c)||1==Math.abs(t.c-r.c)&&2==Math.abs(t.r-r.r)))})}}class v{constructor(e){this.name="bishop",this.color=e,this.getPossibleMoves=function(e,t,r){return r=>!!p.isValidSourceAndDest(e,t,r)&&p.canGoAlongDiagonalToDest(e,t,r)}}}class P{constructor(e){this.name="queen",this.color=e,this.getPossibleMoves=((e,t,r)=>{return r=>!!p.isValidSourceAndDest(e,t,r)&&(p.canGoAlongRowToDest(e,t,r)||p.canGoAlongColToDest(e,t,r)||p.canGoAlongDiagonalToDest(e,t,r))})}}class w{constructor(e,t){this.name="king",this.color=e,this.getPossibleSpecialMoves=t,this.getPossibleMoves=((e,t,r)=>{return r=>!(!p.isValidSourceAndDest(e,t,r)||1!=Math.abs(r.c-t.c)&&1!=Math.abs(r.r-t.r))&&(p.canGoAlongRowToDest(e,t,r)||p.canGoAlongColToDest(e,t,r)||p.canGoAlongDiagonalToDest(e,t,r))})}}const C={convertGSBoardToPieceBoard:e=>[],convertPieceToStringEncoding:(e,t)=>"",getType:e=>new o,getNumMoves:e=>-1,getPossiblePiecesToPromoteTo:(e,t)=>[],getPossibleMoves:(e,t,r)=>[{r:-1,c:-1}],isPossibleToMoveTo:(e,t)=>e=>!1,isInCheck:(e,t)=>!1,isInCheckmate:(e,t)=>!1,kingCanCastleWithGivenRook:(e,t,r)=>!1,castleKingWithGivenRook:(e,t,r)=>e,getSetOfAllPossibleMovesForPlayer:(e,t)=>new Set,randomDefensiveMove:e=>new Set,isACapture:(e,t,r)=>!1,isEnPassantPossible:(e,t,r)=>!1,getBoxOfPromotablePieceIfPossible:e=>({r:-1,c:-1}),promoteIfPossible:(e,t,r)=>e,incrementMoveCount:e=>"",makeLegalMove:(e,t,r,s,n)=>({gameState:e,capturedPiece:new o,wasPromotion:!1})};C.convertGSBoardToPieceBoard=(e=>{const t=[];for(let r=0;r<e.rankCount;r++){t.push([]);for(let o=0;o<e.fileCount;o++)t[r].push(C.getType(e.getEncoding({r:r,c:o})))}return t}),C.convertPieceToStringEncoding=((e,t=0)=>{let r="";return e instanceof f&&(r="white"===e.color?"P":"p"),e instanceof b&&(r="white"===e.color?"R":"r"),e instanceof m&&(r="white"===e.color?"H":"h"),e instanceof v&&(r="white"===e.color?"B":"b"),e instanceof P&&(r="white"===e.color?"Q":"q"),e instanceof w&&(r="white"===e.color?"K":"k"),r=r?r+t:r}),C.getType=(e=>{if(""===e.trim())return new o;let t=e.match(/([a-zA-z])(\d*)/),r=t&&t.length>2?Number(t[2]):void 0,s=t.length>1?t[1]:void 0;if(void 0===r||void 0===s)return new o;switch(s.trim()){case"p":return new f("black");case"r":return new b("black");case"h":return new m("black");case"b":return new v("black");case"q":return new P("black");case"k":return new w("black",C.kingCanCastleWithGivenRook);case"P":return new f("white");case"R":return new b("white");case"H":return new m("white");case"B":return new v("white");case"Q":return new P("white");case"K":return new w("white",C.kingCanCastleWithGivenRook);case"":default:return new o}}),C.getNumMoves=(e=>{const t=e.match(/([a-zA-z])(\d*)/);return t&&t.length>2&&!Number.isNaN(Number(t[2]))?Number(t[2]):-1}),C.getPossiblePiecesToPromoteTo=((e,t)=>{const r=[];if(void 0!==C.getBoxOfPromotablePieceIfPossible(e)){const s=C.getType(e.getEncoding(t));for(let t=0;t<e.rankCount;t++)for(let n=0;n<e.fileCount;n++){const i={r:t,c:n},c=C.getType(e.getEncoding({r:t,c:n}));s.color!==c.color||c instanceof f||c instanceof w||c instanceof o||r.push(i)}}return r}),C.getPossibleMoves=((e,t,r)=>{const o=C.getPossiblePiecesToPromoteTo(e,t);if(o.length>0)return o;const s=e.getEncoding(t),n=C.getNumMoves(s),i=C.getType(s);if(i&&!isNaN(n)){const o=((e,t,r,o)=>{const s=[],n="function"==typeof r.getPossibleMoves?r.getPossibleMoves(e,t,o):e=>!1;if(!n)return s;for(let t=0;t<e.rankCount;t++)for(let r=0;r<e.fileCount;r++)n({r:t,c:r})&&s.push({r:t,c:r});return s})(e,t,i,n);if(C.getType(e.getEncoding(t))instanceof w&&(C.kingCanCastleWithGivenRook(e,t,{r:t.r,c:0})&&o.push({r:t.r,c:0}),C.kingCanCastleWithGivenRook(e,t,{r:t.r,c:e.fileCount-1})&&o.push({r:t.r,c:e.fileCount-1})),C.getType(e.getEncoding(t))instanceof f)if(void 0===r)console.warn("PieceGameLogic.getPossibleMoves should be passed prevMove as last parameter! Please refactor, else En Passante will not work.");else if(C.isEnPassantPossible(e,t,r)){const e=r.dst.c-r.src.c>0?1:-1;o.push({r:t.r+e,c:r.dst.c})}return o}return[]}),C.isPossibleToMoveTo=((e,t)=>{const r=e.getEncoding(t);C.getNumMoves(r);return C.getType(r).getPossibleMoves(e,t)}),C.isInCheck=((e,t)=>{for(let r=0;r<e.rankCount;r++)for(let o=0;o<e.fileCount;o++)if(t.r!=r&&t.c!=o){const s=C.getPossibleMoves(e,{r:r,c:o});for(let e=0;e<s.length;e++)if(s[e].r==t.r&&s[e].c==t.c)return!0}return!1}),C.isInCheckmate=((e,t)=>{const r=C.getPossibleMoves(e,t);if(C.isInCheck(e,t)){let t=!0;for(let o=0;o<r.length;o++)t=t&&C.isInCheck(e,r[o]);if(t)return!0}return!1}),C.kingCanCastleWithGivenRook=((e,t,r)=>{const o=e.getEncoding(t),s=e.getEncoding(r);if(C.getType(o).name!=new w("").name||C.getType(s).name!=new b("").name||0!=C.getNumMoves(o)||0!=C.getNumMoves(s))return!1;if(p.isPieceOfCurrentPlayer(e,t)&&p.isPieceOfCurrentPlayer(e,r)&&p.isBoxOnBoard(e,r)&&t!=r){let o=r.c-t.c>0?1:-1,s=Math.abs(r.c-t.c);for(let r=t.c+o;s-- >1;r+=o)if(!p.isEmpty(e,{r:t.r,c:r}))return!1;return!0}}),C.castleKingWithGivenRook=((e,t,r)=>{if(!C.kingCanCastleWithGivenRook(e,t,r))return e;const o=new s(e.board);o.setEncoding(t,C.incrementMoveCount(e.getEncoding(t)));let i=r.c-t.c>0?1:-1,c=0;return 3==Math.abs(r.c-t.c)?c=2:4==Math.abs(r.c-t.c)&&(c=3),o.setEncoding({r:t.r,c:t.c+i*c},e.getEncoding(t)),o.setEncoding(t," "),o.setEncoding({r:r.r,c:r.c-i*c},e.getEncoding(r)),o.setEncoding(r," "),new n(o)}),C.getSetOfAllPossibleMovesForPlayer=((e,t)=>{let r=new Set;for(let o=0;o<e.rankCount;o++)for(let s=0;s<e.fileCount;s++)if(!p.isPieceOfGivenPlayer(e,t,{r:o,c:s})&&!p.isEmpty(e,{r:o,c:s})){const t=C.getPossibleMoves(e,{r:o,c:s});for(let e=0;e<t.length;e++)r.add(t[e])}return r}),C.randomDefensiveMove=(e=>{const t=0==e.player?1:0;return C.getSetOfAllPossibleMovesForPlayer(e,t)}),C.isACapture=((e,t,r)=>{const o=e.getEncoding(t),s=C.getNumMoves(o),n=C.getType(o);if("function"==typeof n.getPossibleMoves&&!isNaN(s)){if(n.getPossibleMoves(e,t,s)(r)&&!p.isPieceOfCurrentPlayer(e,r)&&!p.isEmpty(e,r))return!0}return!1}),C.isEnPassantPossible=((e,t,r)=>{const o=r.dst.r-r.src.r>0?1:6;r.dst.r,r.src.r;return C.getType(e.getEncoding(t))instanceof f&&2===Math.abs(r.dst.r-r.src.r)&&r.dst.r===t.r&&o===r.src.r&&C.getType(e.getEncoding(r.dst))instanceof f&&!p.isPieceOfCurrentPlayer(e,r.dst)}),C.getBoxOfPromotablePieceIfPossible=(e=>{const t=t=>{for(let r=0;r<e.rankCount;r++)if(C.getType(e.getEncoding({r:t,c:r}))instanceof f)return{r:t,c:r}};return t(0)||t(e.rankCount-1)}),C.promoteIfPossible=((e,t,r)=>{const i=C.getBoxOfPromotablePieceIfPossible(e),c=new s(e.board);return void 0===i||i.r!==t.r||i.c!==t.c||r instanceof f||r instanceof w||r instanceof o||C.getType(e.getEncoding(t)).color!==r.color||c.setEncoding(t,C.convertPieceToStringEncoding(r)),new n(c)}),C.incrementMoveCount=(e=>{const t=e.trim().match(/\w/g)?e.trim().match(/\w/g)[0]:"",r=e.trim().match(/(\d+)/g)?Number(e.trim().match(/(\d+)/g)[0]):0;return t+Number(r+1)}),C.makeLegalMove=((e,t,r,i,c)=>{if(void 0!==C.getBoxOfPromotablePieceIfPossible(e))return void 0===c&&(c=C.getType(e.getEncoding(r))),{gameState:C.promoteIfPossible(e,t,c),capturedPiece:new o,wasPromotion:!0};if(C.kingCanCastleWithGivenRook(e,t,r))return{gameState:C.castleKingWithGivenRook(e,t,r),capturedPiece:new o,wasPromotion:!1};const a=o=>{const i=o?C.getType(e.getEncoding(o)):C.getType(e.getEncoding(r)),c=new s(e.board);return o&&c.setEncoding(o," "),c.setEncoding(r,C.incrementMoveCount(e.getEncoding(t))),c.setEncoding(t," "),{gameState:new n(c),capturedPiece:i,wasPromotion:!1}};if(C.isEnPassantPossible(e,t,i)){const e=i.dst.r-i.src.r>0?-1:1,o={r:t.r+e,c:i.dst.c};if(r.r===o.r&&r.c===o.c)return a(i.dst)}const l=C.getPossibleMoves(e,t,i);for(let t=0;t<l.length;t++){const o=l[t];if(r.r===o.r&&r.c===o.c&&!p.isPieceOfCurrentPlayer(e,r))return a()}return{gameState:e,capturedPiece:new o,wasPromotion:!1}});const y=e=>{let t=Number(e.getAttribute("data-pos"));return{box:{r:Math.floor(t/8),c:t%8},piece:JSON.parse(e.getAttribute("piece"))}};new class{createAndShowInitialBoard(){const e=new i;e.board=C.convertGSBoardToPieceBoard(e.gameState),this.store.state=e,this.showBoardAndBindBoxes()}setStoreState(e){e.board=C.convertGSBoardToPieceBoard(e.gameState),this.store.state=e}constructor(){this.store=new l,this.view=new g,this._selectedBox={box:{r:-1,c:-1},piece:new o},this._lastSelectedBox={box:{r:-1,c:-1},piece:new o},this._selectedCapturedPiece=new o,this.createAndShowInitialBoard()}showBoardAndBindBoxes(){this.view.showBoard(this.store.state);for(let e=0;e<8;e++)for(let t=0;t<8;t++){let r=this.view.$board.children[0].children[e].children[t];this.view.bindSelectBox(r,this.selectBox.bind(this))}}showAndBindCapturedPieces(){let e=this.store.state.captures;this.view.showCaptures(this.store.state);let t=0,r=0;for(let o=0;o<e.length;o++)if(e[o].color&&0==e[o].color.indexOf("black")){let e=this.view.$capturedblack.children[0].children[r++];void 0!=e&&this.view.bindCapturedPiece(e,o,this.selectCapturedPiece.bind(this))}else if(e[o].color&&0==e[o].color.indexOf("white")){let e=this.view.$capturedwhite.children[0].children[t++];void 0!=e&&this.view.bindCapturedPiece(e,o,this.selectCapturedPiece.bind(this))}}moveXorGetPossibleMoves(){if(!(this._lastSelectedBox.piece instanceof o)){const e=C.makeLegalMove(this.store.state.gameState,this._lastSelectedBox.box,this._selectedBox.box,this.store.state.prevMove,this._selectedCapturedPiece),t=new i(this.store.state);t.gameState=e.gameState;const r=e.capturedPiece;if(this.store.state.gameState!==t.gameState)t.possibleDestBoxes=this.store.state.initializeFalseGrid(8),t.prevMove={src:this._lastSelectedBox.box,dst:this._selectedBox.box},t.gameState.player=this.store.state.gameState.player===c?a:c,e.wasPromotion&&(t.gameState.player=t.gameState.player===c?a:c),r instanceof o||t.captures.push(r);else{const e=C.getPossibleMoves(this.store.state.gameState,this._selectedBox.box,this.store.state.prevMove);t.possibleDestBoxes=this.store.state.initializeFalseGrid(8),e.forEach(e=>{t.possibleDestBoxes[e.r][e.c]=!0})}this.setStoreState(t)}this._selectedCapturedPiece=void 0}selectBox(e){this._lastSelectedBox=this._selectedBox,this._selectedBox=y(e),this.showAndBindCapturedPieces(),this.showBoardAndBindBoxes(),this.moveXorGetPossibleMoves(),this.showAndBindCapturedPieces(),this.showBoardAndBindBoxes()}selectCapturedPiece(e,t){this._selectedCapturedPiece=this.store.state.captures[t],this.showAndBindCapturedPieces(),this.showBoardAndBindBoxes()}undoMove(){}redoMove(){}loadBoard(){}saveBoard(){}}},function(e,t){var r,o,s=e.exports={};function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function c(e){if(r===setTimeout)return setTimeout(e,0);if((r===n||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:n}catch(e){r=n}try{o="function"==typeof clearTimeout?clearTimeout:i}catch(e){o=i}}();var a,l=[],u=!1,d=-1;function h(){u&&a&&(u=!1,a.length?l=a.concat(l):d=-1,l.length&&g())}function g(){if(!u){var e=c(h);u=!0;for(var t=l.length;t;){for(a=l,l=[];++d<t;)a&&a[d].run();d=-1,t=l.length}a=null,u=!1,function(e){if(o===clearTimeout)return clearTimeout(e);if((o===i||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(e);try{o(e)}catch(t){try{return o.call(null,e)}catch(t){return o.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function f(){}s.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new p(e,t)),1!==l.length||u||c(g)},p.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=f,s.addListener=f,s.once=f,s.off=f,s.removeListener=f,s.removeAllListeners=f,s.emit=f,s.prependListener=f,s.prependOnceListener=f,s.listeners=function(e){return[]},s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},function(e,t,r){(function(e){function r(e,t){for(var r=0,o=e.length-1;o>=0;o--){var s=e[o];"."===s?e.splice(o,1):".."===s?(e.splice(o,1),r++):r&&(e.splice(o,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}var o=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,s=function(e){return o.exec(e).slice(1)};function n(e,t){if(e.filter)return e.filter(t);for(var r=[],o=0;o<e.length;o++)t(e[o],o,e)&&r.push(e[o]);return r}t.resolve=function(){for(var t="",o=!1,s=arguments.length-1;s>=-1&&!o;s--){var i=s>=0?arguments[s]:e.cwd();if("string"!=typeof i)throw new TypeError("Arguments to path.resolve must be strings");i&&(t=i+"/"+t,o="/"===i.charAt(0))}return t=r(n(t.split("/"),function(e){return!!e}),!o).join("/"),(o?"/":"")+t||"."},t.normalize=function(e){var o=t.isAbsolute(e),s="/"===i(e,-1);return(e=r(n(e.split("/"),function(e){return!!e}),!o).join("/"))||o||(e="."),e&&s&&(e+="/"),(o?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(n(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},t.relative=function(e,r){function o(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;r>=0&&""===e[r];r--);return t>r?[]:e.slice(t,r-t+1)}e=t.resolve(e).substr(1),r=t.resolve(r).substr(1);for(var s=o(e.split("/")),n=o(r.split("/")),i=Math.min(s.length,n.length),c=i,a=0;a<i;a++)if(s[a]!==n[a]){c=a;break}var l=[];for(a=c;a<s.length;a++)l.push("..");return(l=l.concat(n.slice(c))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){var t=s(e),r=t[0],o=t[1];return r||o?(o&&(o=o.substr(0,o.length-1)),r+o):"."},t.basename=function(e,t){var r=s(e)[2];return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},t.extname=function(e){return s(e)[3]};var i="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)}}).call(this,r(1))}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL3R5cGVzLnRzIiwid2VicGFjazovLy8uL3NyYy9zdG9yZS9zdG9yZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvdmlldy9oZWxwZXJzLnRzIiwid2VicGFjazovLy8uL3NyYy92aWV3L3RlbXBsYXRlLnRzIiwid2VicGFjazovLy8uL3NyYy92aWV3L3ZpZXcudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVsL3BpZWNlaGVscGVyLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbC9wYXduLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbC9yb29rLnRzIiwid2VicGFjazovLy8uL3NyYy9tb2RlbC9rbmlnaHQudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVsL2Jpc2hvcC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbW9kZWwvcXVlZW4udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVsL2tpbmcudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21vZGVsL3BpZWNlZ2FtZWxvZ2ljLnRzIiwid2VicGFjazovLy8uL3NyYy9jb250cm9sbGVyL2NvbnRyb2xsZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL2FwcC50cyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzIiwid2VicGFjazovLy8uL25vZGVfbW9kdWxlcy9wYXRoLWJyb3dzZXJpZnkvaW5kZXguanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJFbXB0eVBpZWNlIiwiW29iamVjdCBPYmplY3RdIiwiY29sb3IiLCJ0aGlzIiwiZ2V0UG9zc2libGVNb3ZlcyIsImdhbWVTdGF0ZSIsInNyYyIsIm51bU1vdmVzIiwiZHN0IiwiQm9hcmQiLCJib2FyZCIsImFzc2lnbiIsIl9ib2FyZCIsInJhbmtDb3VudCIsImxlbmd0aCIsImZpbGVDb3VudCIsImdldEVuY29kaW5nIiwiYm94Iiwic2V0RW5jb2RpbmciLCJlbmMiLCJHYW1lU3RhdGUiLCJwbGF5ZXIiLCJfcGxheWVyIiwibmV3UGxheWVyIiwiUExBWUVSX1dISVRFIiwiU3RvcmVTdGF0ZSIsInYiLCJhcnIiLCJwdXNoIiwiaiIsImFycmF5MmQiLCJzdGF0ZSIsInNlbGVjdGVkQm94ZXMiLCJpbml0aWFsaXplRmFsc2VHcmlkIiwicG9zc2libGVEZXN0Qm94ZXMiLCJwcmV2TW92ZSIsImNhcHR1cmVzIiwic2VsZWN0ZWRDYXB0dXJlcyIsIlBMQVlFUl9CTEFDSyIsInN0b3JlX1N0b3JlIiwiX3N0YXRlIiwicXMiLCJzZWxlY3RvciIsInNjb3BlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiJG9uIiwidGFyZ2V0IiwidHlwZSIsImNhbGxiYWNrIiwiY2FwdHVyZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJUZW1wbGF0ZSIsInBpZWNlcyIsImNyZWF0ZUVsZW1lbnQiLCJib3hQb3MiLCJ0ciIsInRkIiwic2V0QXR0cmlidXRlIiwiU3RyaW5nIiwicGllY2UiLCJKU09OIiwic3RyaW5naWZ5IiwicGllY2VEaXYiLCJhcHBlbmRDaGlsZCIsImluZGV4T2YiLCJDYXB0dXJlZCIsInZpZXdfVmlldyIsIl90ZW1wbGF0ZSIsIl8kYm9hcmQiLCJfJGNhcHR1cmVkd2hpdGUiLCJfJGNhcHR1cmVkYmxhY2siLCJfJG1haW4iLCJfJHVuZG9idG4iLCJfJHJlZG9idG4iLCIkYm9hcmQiLCIkY2FwdHVyZWR3aGl0ZSIsIiRjYXB0dXJlZGJsYWNrIiwicmVwbGFjZUNoaWxkIiwiZmlyc3RDaGlsZCIsIkNhcHR1cmVkV2hpdGUiLCJDYXB0dXJlZEJsYWNrIiwiaGFuZGxlciIsIlBpZWNlSGVscGVyIiwiZ2V0TnVtTW92ZXMiLCJpc0VtcHR5IiwiaXNQaWVjZU9mR2l2ZW5QbGF5ZXIiLCJpc1BpZWNlT2ZDdXJyZW50UGxheWVyIiwiaXNCb3hPbkJvYXJkIiwiaXNWYWxpZFNvdXJjZUFuZERlc3QiLCJjYW5Hb0Fsb25nUm93VG9EZXN0IiwiY2FuR29BbG9uZ0NvbFRvRGVzdCIsImNhbkdvQWxvbmdMaW5lVG9EZXN0IiwiY2FuR29BbG9uZ0RpYWdvbmFsVG9EZXN0IiwiY29kZU1hdGNoIiwibWF0Y2giLCJpc05hTiIsIk51bWJlciIsInRyaW0iLCJhbHBoYWNvZGUiLCJ0b1VwcGVyQ2FzZSIsInRvTG93ZXJDYXNlIiwiY2hlY2tQYXJ0aWN1bGFyUGxheWVyIiwicGxheWVyQ2FzZSIsImFwcGx5IiwiZGlyIiwibGVuIiwiTWF0aCIsImFicyIsInJvd0RpciIsImNvbERpciIsInBhd25fUGF3biIsInVuZGVmaW5lZCIsImZvcndhcmREaXJlY3Rpb25PZkN1cnJlbnRQbGF5ZXIiLCJwYXduQ2FuTW92ZTFGb3J3YXJkIiwiaW5CZXR3ZWVuU3F1YXJlIiwicGF3bkNhbk1vdmUyRm9yd2FyZCIsInBhd25DYW5BdHRhY2siLCJyb29rX1Jvb2siLCJrbmlnaHRfS25pZ2h0IiwiYmlzaG9wX0Jpc2hvcCIsInF1ZWVuX1F1ZWVuIiwia2luZ19LaW5nIiwic3BlY2lhbE1vdmVzIiwiZ2V0UG9zc2libGVTcGVjaWFsTW92ZXMiLCJQaWVjZUdhbWVMb2dpYyIsImNvbnZlcnRHU0JvYXJkVG9QaWVjZUJvYXJkIiwiY29udmVydFBpZWNlVG9TdHJpbmdFbmNvZGluZyIsInRpbWVzTW92ZWQiLCJnZXRUeXBlIiwiZ2V0UG9zc2libGVQaWVjZXNUb1Byb21vdGVUbyIsImlzUG9zc2libGVUb01vdmVUbyIsImlzSW5DaGVjayIsImlzSW5DaGVja21hdGUiLCJraW5nQ2FuQ2FzdGxlV2l0aEdpdmVuUm9vayIsImNhc3RsZUtpbmdXaXRoR2l2ZW5Sb29rIiwiZ2V0U2V0T2ZBbGxQb3NzaWJsZU1vdmVzRm9yUGxheWVyIiwiU2V0IiwicmFuZG9tRGVmZW5zaXZlTW92ZSIsImlzQUNhcHR1cmUiLCJpc0VuUGFzc2FudFBvc3NpYmxlIiwiZ2V0Qm94T2ZQcm9tb3RhYmxlUGllY2VJZlBvc3NpYmxlIiwicHJvbW90ZUlmUG9zc2libGUiLCJmaXJzdCIsInNlY29uZCIsImluY3JlbWVudE1vdmVDb3VudCIsIm1ha2VMZWdhbE1vdmUiLCJwaWVjZVRvUHJvbW90ZVRvIiwiY2FwdHVyZWRQaWVjZSIsIndhc1Byb21vdGlvbiIsInBpZWNlQm9hcmQiLCJlbmNvZGluZyIsInZhbGlkUHJvbW90aW9ucyIsInNyY1BpZWNlIiwib3RoZXJQaWVjZSIsInBvc3NpYmxlUHJvbW90aW9uTW92ZXMiLCJQaWVjZVR5cGUiLCJtb3Zlc01hdHJpeCIsInZhbGlkTW92ZXMiLCJjb25zdHJ1Y3RNb3Zlc01hdHJpeCIsImNvbnNvbGUiLCJ3YXJuIiwicG9zc2libGVBdHRhY2tzIiwiayIsInBvc3NpYmxlTW92ZXMiLCJuZXdCb2FyZCIsIm91dERpciIsInNoaWZ0IiwicG9zc2libGVQbGF5ZXJNb3ZlcyIsImFkZCIsIm9wcG9uZW50Iiwib3Bwb25lbnRTdGFydCIsInBhd25BdENvbHVtbkJvcmRlciIsImJvcmRlcklkeCIsInByb21vdGFibGVCb3giLCJwcmVmaXgiLCJudW0iLCJtb3ZlQW5kVXBkYXRlU3RhdGUiLCJlblBhc3NhbnQiLCJkZXNlcmlhbGl6ZUJveENvbnRlbnRzIiwiYm94RWxlbSIsImdldEF0dHJpYnV0ZSIsImZsb29yIiwicGFyc2UiLCJuZXdTdGF0ZSIsInN0b3JlIiwic2hvd0JvYXJkQW5kQmluZEJveGVzIiwidmlldyIsIl9zZWxlY3RlZEJveCIsIl9sYXN0U2VsZWN0ZWRCb3giLCJfc2VsZWN0ZWRDYXB0dXJlZFBpZWNlIiwiY3JlYXRlQW5kU2hvd0luaXRpYWxCb2FyZCIsInNob3dCb2FyZCIsImNoaWxkcmVuIiwiYmluZFNlbGVjdEJveCIsInNlbGVjdEJveCIsInNob3dDYXB0dXJlcyIsIndoaXRlSWR4IiwiYmxhY2tJZHgiLCJiaW5kQ2FwdHVyZWRQaWVjZSIsInNlbGVjdENhcHR1cmVkUGllY2UiLCJ1cGRhdGVkTW92ZVN0YXRlIiwiZm9yRWFjaCIsInNldFN0b3JlU3RhdGUiLCJzaG93QW5kQmluZENhcHR1cmVkUGllY2VzIiwibW92ZVhvckdldFBvc3NpYmxlTW92ZXMiLCJwaWVjZUVsZW0iLCJjYWNoZWRTZXRUaW1lb3V0IiwiY2FjaGVkQ2xlYXJUaW1lb3V0IiwicHJvY2VzcyIsImRlZmF1bHRTZXRUaW1vdXQiLCJFcnJvciIsImRlZmF1bHRDbGVhclRpbWVvdXQiLCJydW5UaW1lb3V0IiwiZnVuIiwic2V0VGltZW91dCIsImUiLCJjbGVhclRpbWVvdXQiLCJjdXJyZW50UXVldWUiLCJxdWV1ZSIsImRyYWluaW5nIiwicXVldWVJbmRleCIsImNsZWFuVXBOZXh0VGljayIsImNvbmNhdCIsImRyYWluUXVldWUiLCJ0aW1lb3V0IiwicnVuIiwibWFya2VyIiwicnVuQ2xlYXJUaW1lb3V0IiwiSXRlbSIsImFycmF5Iiwibm9vcCIsIm5leHRUaWNrIiwiYXJncyIsIkFycmF5IiwiYXJndW1lbnRzIiwidGl0bGUiLCJicm93c2VyIiwiZW52IiwiYXJndiIsInZlcnNpb24iLCJ2ZXJzaW9ucyIsIm9uIiwiYWRkTGlzdGVuZXIiLCJvbmNlIiwib2ZmIiwicmVtb3ZlTGlzdGVuZXIiLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJlbWl0IiwicHJlcGVuZExpc3RlbmVyIiwicHJlcGVuZE9uY2VMaXN0ZW5lciIsImxpc3RlbmVycyIsImJpbmRpbmciLCJjd2QiLCJjaGRpciIsInVtYXNrIiwibm9ybWFsaXplQXJyYXkiLCJwYXJ0cyIsImFsbG93QWJvdmVSb290IiwidXAiLCJsYXN0Iiwic3BsaWNlIiwidW5zaGlmdCIsInNwbGl0UGF0aFJlIiwic3BsaXRQYXRoIiwiZmlsZW5hbWUiLCJleGVjIiwic2xpY2UiLCJmaWx0ZXIiLCJ4cyIsImYiLCJyZXMiLCJyZXNvbHZlIiwicmVzb2x2ZWRQYXRoIiwicmVzb2x2ZWRBYnNvbHV0ZSIsInBhdGgiLCJUeXBlRXJyb3IiLCJjaGFyQXQiLCJzcGxpdCIsImpvaW4iLCJub3JtYWxpemUiLCJpc0Fic29sdXRlIiwidHJhaWxpbmdTbGFzaCIsInN1YnN0ciIsInBhdGhzIiwiaW5kZXgiLCJyZWxhdGl2ZSIsImZyb20iLCJ0byIsInN0YXJ0IiwiZW5kIiwiZnJvbVBhcnRzIiwidG9QYXJ0cyIsIm1pbiIsInNhbWVQYXJ0c0xlbmd0aCIsIm91dHB1dFBhcnRzIiwic2VwIiwiZGVsaW1pdGVyIiwiZGlybmFtZSIsInJlc3VsdCIsInJvb3QiLCJiYXNlbmFtZSIsImV4dCIsImV4dG5hbWUiLCJzdHIiXSwibWFwcGluZ3MiOiJhQUNBLElBQUFBLEtBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsSUFDQUcsRUFBQUgsRUFDQUksR0FBQSxFQUNBSCxZQVVBLE9BTkFJLEVBQUFMLEdBQUFNLEtBQUFKLEVBQUFELFFBQUFDLElBQUFELFFBQUFGLEdBR0FHLEVBQUFFLEdBQUEsRUFHQUYsRUFBQUQsUUFLQUYsRUFBQVEsRUFBQUYsRUFHQU4sRUFBQVMsRUFBQVYsRUFHQUMsRUFBQVUsRUFBQSxTQUFBUixFQUFBUyxFQUFBQyxHQUNBWixFQUFBYSxFQUFBWCxFQUFBUyxJQUNBRyxPQUFBQyxlQUFBYixFQUFBUyxHQUEwQ0ssWUFBQSxFQUFBQyxJQUFBTCxLQUsxQ1osRUFBQWtCLEVBQUEsU0FBQWhCLEdBQ0Esb0JBQUFpQixlQUFBQyxhQUNBTixPQUFBQyxlQUFBYixFQUFBaUIsT0FBQUMsYUFBd0RDLE1BQUEsV0FFeERQLE9BQUFDLGVBQUFiLEVBQUEsY0FBaURtQixPQUFBLEtBUWpEckIsRUFBQXNCLEVBQUEsU0FBQUQsRUFBQUUsR0FFQSxHQURBLEVBQUFBLElBQUFGLEVBQUFyQixFQUFBcUIsSUFDQSxFQUFBRSxFQUFBLE9BQUFGLEVBQ0EsS0FBQUUsR0FBQSxpQkFBQUYsUUFBQUcsV0FBQSxPQUFBSCxFQUNBLElBQUFJLEVBQUFYLE9BQUFZLE9BQUEsTUFHQSxHQUZBMUIsRUFBQWtCLEVBQUFPLEdBQ0FYLE9BQUFDLGVBQUFVLEVBQUEsV0FBeUNULFlBQUEsRUFBQUssVUFDekMsRUFBQUUsR0FBQSxpQkFBQUYsRUFBQSxRQUFBTSxLQUFBTixFQUFBckIsRUFBQVUsRUFBQWUsRUFBQUUsRUFBQSxTQUFBQSxHQUFnSCxPQUFBTixFQUFBTSxJQUFxQkMsS0FBQSxLQUFBRCxJQUNySSxPQUFBRixHQUlBekIsRUFBQTZCLEVBQUEsU0FBQTFCLEdBQ0EsSUFBQVMsRUFBQVQsS0FBQXFCLFdBQ0EsV0FBMkIsT0FBQXJCLEVBQUEsU0FDM0IsV0FBaUMsT0FBQUEsR0FFakMsT0FEQUgsRUFBQVUsRUFBQUUsRUFBQSxJQUFBQSxHQUNBQSxHQUlBWixFQUFBYSxFQUFBLFNBQUFpQixFQUFBQyxHQUFzRCxPQUFBakIsT0FBQWtCLFVBQUFDLGVBQUExQixLQUFBdUIsRUFBQUMsSUFHdEQvQixFQUFBa0MsRUFBQSxHQUlBbEMsSUFBQW1DLEVBQUEsK0NDdkVNQyxFQUlKQyxZQUFZQyxFQUFRLFNBQ2xCQyxLQUFLNUIsS0FBTyxRQUNaNEIsS0FBS0QsTUFBUUEsRUFDYkMsS0FBS0MsaUJBQW1CLEVBQUNDLEVBQXNCQyxFQUFVQyxLQUV2RCxPQUQ0QkMsSUFBYSxXQWF6Q0MsRUFLSkMsWUFFRSxPQURrQmhDLE9BQU9pQyxVQUFXUixLQUFLUyxRQUczQ0MsZ0JBQ0UsT0FBT1YsS0FBS1MsT0FBT0UsT0FFckJDLGdCQUNFLE9BQU9aLEtBQUtTLE9BQU8sR0FBR0UsT0FBUyxFQUFJWCxLQUFLUyxPQUFPLEdBQUdFLE9BQVMsRUFPN0RiLFlBQVlTLEdBQ2tCUCxLQUFLUyxPQUE3QkYsYUFBaUJELEVBQXFCQyxFQUFNRSxPQUN2Q0YsS0FFTixLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLE9BQ25DLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssT0FDbkMsSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLElBQUksSUFBSSxNQUM1QixJQUFJLElBQUksSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLE1BQzVCLElBQUksSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLElBQUksTUFDNUIsSUFBSSxJQUFJLElBQUksSUFBSSxJQUFJLElBQUksSUFBSSxNQUM1QixLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLE9BQ25DLEtBQUssS0FBSyxLQUFLLEtBQUssS0FBSyxLQUFLLEtBQUssT0FDdENQLEtBQUthLFlBQWMsQ0FBQ0MsR0FDWGQsS0FBS1MsT0FBT0ssRUFBSW5DLEdBQUdtQyxFQUFJNUMsSUFFaEM4QixLQUFLZSxZQUFjLEVBQUNELEVBQVVFLEtBQ3hCRixFQUFJbkMsR0FBSyxHQUFLbUMsRUFBSW5DLEVBQUlxQixLQUFLUyxPQUFPRSxRQUFVRyxFQUFJNUMsR0FBSyxHQUFLNEMsRUFBSTVDLEVBQUk4QixLQUFLUyxPQUFPLEdBQUdFLFNBQ25GWCxLQUFLUyxPQUFPSyxFQUFJbkMsR0FBR21DLEVBQUk1QyxHQUFLOEMsWUFjOUJDLEVBS0pDLGFBQ0UsT0FBT2xCLEtBQUttQixRQUVkRCxXQUFXRSxHQUlUcEIsS0FBS21CLFFBQVVDLEVBS2pCYixZQUNFLE9BQU9QLEtBQUtTLE9BQU9GLE1BVXJCVCxZQUFZUyxHQUNWUCxLQUFLUyxPQUFTLElBQUlILEVBQU1DLEdBQ3hCUCxLQUFLYSxZQUFjLENBQUNDLEdBQ1hkLEtBQUtTLE9BQU9JLFlBQVlDLElBRWpDZCxLQUFLbUIsUUFBVUUsRUFDZnJCLEtBQUtVLFVBQVlWLEtBQUtTLE9BQU9DLFVBQzdCVixLQUFLWSxVQUFZWixLQUFLUyxPQUFPRyxpQkFJM0JVLEVBUUl4QixRQUFRM0IsRUFBV29ELEdBQ3pCLE1BQU1DLEtBQ04sSUFBSyxJQUFJM0QsRUFBSSxFQUFHQSxFQUFJTSxFQUFHTixJQUFLLENBQzFCMkQsRUFBSUMsU0FDSixJQUFLLElBQUlDLEVBQUksRUFBR0EsRUFBSXZELEVBQUd1RCxJQUNyQkYsRUFBSTNELEdBQUc0RCxLQUFLRixHQUdoQixPQUFPQyxFQUVGMUIsb0JBQW9CM0IsR0FDekIsT0FBTzZCLEtBQUsyQixRQUFReEQsR0FBRyxHQUV6QjJCLFlBQVk4QixHQUNWNUIsS0FBS0UsVUFBWTBCLEVBQVFBLEVBQU0xQixVQUFZLElBQUllLEVBQy9DakIsS0FBSzZCLGNBQWdCRCxFQUFRQSxFQUFNQyxjQUFnQjdCLEtBQUs4QixvQkFBb0IsR0FDNUU5QixLQUFLK0Isa0JBQW9CSCxFQUFRQSxFQUFNRyxrQkFBb0IvQixLQUFLOEIsb0JBQW9CLEdBQ3BGOUIsS0FBS2dDLFNBQVdKLEVBQVFBLEVBQU1JLFVBQWE3QixLQUFPeEIsR0FBSSxFQUFHVCxHQUFJLEdBQUttQyxLQUFPMUIsR0FBSSxFQUFHVCxHQUFJLElBQ3BGOEIsS0FBS2lDLFNBQVdMLEVBQVFBLEVBQU1LLFlBQzlCakMsS0FBS2tDLGlCQUFtQk4sRUFBUUEsRUFBTU0sb0JBQ3RDbEMsS0FBS08sTUFBUXFCLEVBQVFBLEVBQU1yQixVQVl4QixNQUFNYyxFQUF1QixFQUt2QmMsRUFBdUIsUUNyS3RCQyxFQUVadEMsY0FDRUUsS0FBS3FDLE9BQVMsSUFBSWYsRUFFcEJNLFlBQ0UsT0FBTzVCLEtBQUtxQyxPQUVkVCxVQUFpQkEsR0FDZjVCLEtBQUtxQyxPQUFPbkMsVUFBWTBCLEVBQU0xQixVQUFZMEIsRUFBTTFCLFVBQVlGLEtBQUtxQyxPQUFPbkMsVUFDeEVGLEtBQUtxQyxPQUFPOUIsTUFBUXFCLEVBQU1yQixNQUFRcUIsRUFBTXJCLE1BQVFQLEtBQUtxQyxPQUFPOUIsTUFDNURQLEtBQUtxQyxPQUFPUixjQUFnQkQsRUFBTUMsY0FBZ0JELEVBQU1DLGNBQWdCN0IsS0FBS3FDLE9BQU9SLGNBQ3BGN0IsS0FBS3FDLE9BQU9OLGtCQUFvQkgsRUFBTUcsa0JBQW9CSCxFQUFNRyxrQkFBb0IvQixLQUFLcUMsT0FBT04sa0JBQ2hHL0IsS0FBS3FDLE9BQU9MLFNBQVdKLEVBQU1JLFNBQVdKLEVBQU1JLFNBQVdoQyxLQUFLcUMsT0FBT0wsU0FDckVoQyxLQUFLcUMsT0FBT0osU0FBV0wsRUFBTUssU0FBV0wsRUFBTUssU0FBV2pDLEtBQUtxQyxPQUFPSixTQUNyRWpDLEtBQUtxQyxPQUFPSCxpQkFBbUJOLEVBQU1NLGlCQUFtQk4sRUFBTU0saUJBQW1CbEMsS0FBS3FDLE9BQU9ILGtCQ1gzRixTQUFBSSxFQUFhQyxFQUFrQkMsR0FDakMsT0FBUUEsR0FBU0MsVUFBVUMsY0FBY0gsR0FNdkMsU0FBQUksRUFBY0MsRUFBMEJDLEVBQWNDLEVBQThDQyxHQUN0R0gsRUFBT0ksaUJBQWlCSCxFQUFNQyxJQUFZQyxTQ1ZoQ0UsRUFNVm5ELE1BQU04QixHQUNGLE1BQU1zQixFQUE4QnRCLEVBQU1yQixNQUMxQyxJQUFJQSxFQUFRa0MsU0FBU1UsY0FBYyxTQUMvQkMsRUFBUyxFQUNiLElBQUssSUFBSXpFLEVBQUksRUFBR0EsRUFBSSxFQUFHQSxJQUFLLENBQ3hCLElBQUkwRSxFQUFLWixTQUFTVSxjQUFjLE1BQ2hDLElBQUssSUFBSWpGLEVBQUksRUFBR0EsRUFBSSxFQUFHQSxJQUFLLENBQ3hCLElBQUlvRixFQUFLYixTQUFTVSxjQUFjLE1BQ2hDRyxFQUFHQyxhQUFhLFdBQVlDLE9BQU9KLElBQ25DLE1BQU1LLEVBQVFQLEVBQU92RSxHQUFHVCxHQUV4QixHQURBb0YsRUFBR0MsYUFBYSxRQUFTRyxLQUFLQyxVQUFVRixJQUNwQ0EsRUFBTyxDQUNQLElBQUlHLEVBQVduQixTQUFTVSxjQUFjLE9BQ3RDUyxFQUFTTCxhQUFhLFFBQVNFLEVBQU0xRCxNQUFRMEQsRUFBTXJGLE1BQ25Ea0YsRUFBR08sWUFBWUQsR0FFZmhDLEVBQU1DLGNBQWNsRCxHQUFHVCxJQUN2Qm9GLEVBQUdDLGFBQWEsUUFBUyxZQUV6QjNCLEVBQU1HLGtCQUFrQnBELEdBQUdULElBQzNCb0YsRUFBR0MsYUFBYSxRQUFTLGdCQUU3QkYsRUFBR1EsWUFBWVAsR0FDZkYsSUFFSjdDLEVBQU1zRCxZQUFZUixHQUV0QixPQUFPOUMsRUFFWFQsU0FBUytDLEVBQWNqQixHQUNuQixNQUFNSyxFQUFXTCxFQUFNSyxTQUNqQkMsRUFBbUJOLEVBQU1NLGlCQUMvQixJQUFJbUIsRUFBS1osU0FBU1UsY0FBYyxNQUNoQyxJQUFLLElBQUl0RixFQUFJLEVBQUdBLEVBQUlvRSxFQUFTdEIsT0FBUTlDLElBQUssQ0FDdEMsTUFBTTRGLEVBQVF4QixFQUFTcEUsR0FDdkIsR0FBSTRGLEVBQU0xRCxPQUFzQyxHQUE3QjBELEVBQU0xRCxNQUFNK0QsUUFBUWpCLEdBQVksQ0FDL0MsSUFBSVMsRUFBS2IsU0FBU1UsY0FBYyxNQUM1QlMsRUFBV25CLFNBQVNVLGNBQWMsT0FDdENTLEVBQVNMLGFBQWEsUUFBU0UsRUFBTTFELE1BQVEwRCxFQUFNckYsTUFDL0M4RCxFQUFpQnJFLElBQ2pCK0YsRUFBU0wsYUFBYSxRQUFTRSxFQUFNMUQsTUFBUTBELEVBQU1yRixLQUFPLG9CQUU5RGtGLEVBQUdPLFlBQVlELEdBQ2ZQLEVBQUdRLFlBQVlQLElBR3ZCLE9BQU9ELEVBR1h2RCxjQUFjOEIsR0FDVixPQUFPNUIsS0FBSytELFNBQVMsUUFBU25DLEdBRWxDOUIsY0FBYzhCLEdBQ1YsT0FBTzVCLEtBQUsrRCxTQUFTLFFBQVNuQyxVQzNEeEJvQyxFQVNWbEUsY0FDSUUsS0FBS2lFLFVBQVksSUFBSWhCLEVBQ3JCakQsS0FBS2tFLFFBQVU1QixFQUFHLGVBQ2xCdEMsS0FBS21FLGdCQUFrQjdCLEVBQUcsa0JBQzFCdEMsS0FBS29FLGdCQUFrQjlCLEVBQUcsa0JBQzFCdEMsS0FBS3FFLE9BQVMvQixFQUFHLFNBQ2pCdEMsS0FBS3NFLFVBQVloQyxFQUFHLFNBQ3BCdEMsS0FBS3VFLFVBQVlqQyxFQUFHLFNBR3hCa0MsYUFDSSxPQUFPeEUsS0FBS2tFLFFBRWhCTyxxQkFDSSxPQUFPekUsS0FBS21FLGdCQUVoQk8scUJBQ0ksT0FBTzFFLEtBQUtvRSxnQkFNaEJ0RSxVQUFVOEIsR0FDTjVCLEtBQUt3RSxPQUFPRyxhQUFhM0UsS0FBS2lFLFVBQVUzRCxNQUFNc0IsR0FBUTVCLEtBQUt3RSxPQUFPSSxZQU10RTlFLGFBQWE4QixHQUNUNUIsS0FBS3lFLGVBQWVFLGFBQWEzRSxLQUFLaUUsVUFBVVksY0FBY2pELEdBQVE1QixLQUFLeUUsZUFBZUcsWUFDMUY1RSxLQUFLMEUsZUFBZUMsYUFBYTNFLEtBQUtpRSxVQUFVYSxjQUFjbEQsR0FBUTVCLEtBQUswRSxlQUFlRSxZQU05RjlFLGNBQWNnQixFQUFjaUUsR0FDeEJwQyxFQUFJN0IsRUFBSyxRQUFTLElBQU1pRSxFQUFRakUsSUFNcENoQixrQkFBa0IyRCxFQUFnQjVGLEVBQVdrSCxHQUN6Q3BDLEVBQUljLEVBQU8sUUFBUyxJQUFNc0IsRUFBUXRCLEVBQU81RixJQUc3Q2lDLGFBQWFpRixJQUliakYsYUFBYWlGLFVDakVqQixNQUFNQyxHQUNKQyxZQUFhLENBQUMvRSxFQUFzQlksS0FBYyxFQUNsRG9FLFFBQVMsQ0FBQ2hGLEVBQXNCWSxLQUFzQixFQUN0RHFFLHFCQUFzQixDQUFDakYsRUFBc0JnQixFQUFnQkosS0FBc0IsRUFDbkZzRSx1QkFBd0IsQ0FBQ2xGLEVBQXNCWSxLQUFzQixFQUNyRXVFLGFBQWMsQ0FBQ25GLEVBQXNCWSxLQUFzQixFQUMzRHdFLHFCQUFzQixDQUFDcEYsRUFBc0JDLEVBQVVFLEtBQXNCLEVBQzdFa0Ysb0JBQXFCLENBQUNyRixFQUFzQkMsRUFBVUUsS0FBc0IsRUFDNUVtRixvQkFBcUIsQ0FBQ3RGLEVBQXNCQyxFQUFVRSxLQUFzQixFQUM1RW9GLHFCQUFzQixDQUFDdkYsRUFBc0JDLEVBQVVFLEtBQXNCLEVBQzdFcUYseUJBQTBCLENBQUN4RixFQUFzQkMsRUFBVUUsS0FBc0IsR0FRbkYyRSxFQUFZQyxZQUFjLEVBQUMvRSxFQUFzQlksS0FFL0MsSUFBSTZFLEVBRE16RixFQUFVVyxZQUFZQyxHQUNkOEUsTUFBTSxtQkFFeEIsT0FEZUQsR0FBYUEsRUFBVWhGLE9BQVMsSUFBTWtGLE1BQU1DLE9BQU9ILEVBQVUsS0FBT0csT0FBT0gsRUFBVSxLQUFPLElBUzdHWCxFQUFZRSxRQUFVLEVBQUNoRixFQUFzQlksSUFBNEQsS0FBdENaLEVBQVVXLFlBQVlDLEdBQUtpRixRQVE5RmYsRUFBWUcscUJBQXVCLEVBQUNqRixFQUFzQmdCLEVBQWdCSixLQUV4RSxJQUFJNkUsRUFETXpGLEVBQVVXLFlBQVlDLEdBQ2Q4RSxNQUFNLG1CQUNwQkksRUFBWUwsRUFBVWhGLE9BQVMsRUFBSWdGLEVBQVUsR0FBSyxLQUN0RCxRQUFLSyxJQUNBOUUsR0FBVUcsR0FBZ0IyRSxHQUFhQSxFQUFVQyxlQUFtQi9FLEdBQVVpQixHQUFnQjZELEdBQWFBLEVBQVVFLGlCQUc1SGxCLEVBQVlJLHVCQUF5QixFQUFDbEYsRUFBc0JZLEtBQzFELE1BQU1xRixFQUF3QixDQUFDQyxHQUFvQ2xJLEVBQUdBLEVBQUdTLEVBQUdBLEdBQUttQyxJQUM5RVosRUFBVVcsWUFBWUMsS0FBU3NGLEVBQVdDLE1BQU1uRyxFQUFVVyxZQUFZQyxNQUFXa0UsRUFBWUUsUUFBUWhGLEVBQVdZLEdBQ25ILE9BQU9aLEVBQVVnQixTQUFXRyxFQUMxQjhFLEVBQXNCM0MsT0FBTy9ELFVBQVV3RyxhQUFlRSxFQUFzQjNDLE9BQU8vRCxVQUFVeUcsZUFRakdsQixFQUFZSyxhQUFlLEVBQUNuRixFQUFzQlksSUFBc0JBLEVBQUluQyxFQUFJdUIsRUFBVVEsV0FBYUksRUFBSW5DLEdBQUssR0FBS21DLEVBQUk1QyxHQUFLLEdBQUs0QyxFQUFJNUMsRUFBSWdDLEVBQVVVLFdBUXJKb0UsRUFBWU0scUJBQXVCLEVBQUNwRixFQUFzQkMsRUFBVUUsSUFBc0IyRSxFQUFZSSx1QkFBdUJsRixFQUFVQyxLQUFTNkUsRUFBWUksdUJBQXVCbEYsRUFBVUcsSUFBUTJFLEVBQVlLLGFBQWFuRixFQUFVRyxJQUFRRixHQUFPRSxHQVF2UDJFLEVBQVlPLG9CQUFzQixFQUFDckYsRUFBc0JDLEVBQVVFLEtBQ2pFLEdBQUlGLEVBQUl4QixHQUFLMEIsRUFBSTFCLEVBQUcsQ0FDbEIsTUFBTTJILEVBQU1qRyxFQUFJbkMsRUFBSWlDLEVBQUlqQyxFQUFJLEdBQUssRUFDakMsSUFBSXFJLEVBQU1DLEtBQUtDLElBQUlwRyxFQUFJbkMsRUFBRWlDLEVBQUlqQyxHQUM3QixJQUFLLElBQUlMLEVBQUlzQyxFQUFJakMsRUFBRW9JLEVBQUtDLEtBQVEsRUFBRzFJLEdBQUt5SSxFQUFLLElBQUt0QixFQUFZRSxRQUFRaEYsR0FBV3ZCLEVBQUV3QixFQUFJeEIsRUFBRVQsRUFBRUwsSUFBSyxPQUFPLEVBQ3ZHLE9BQU8sRUFFVCxPQUFPLElBU1RtSCxFQUFZUSxvQkFBc0IsRUFBQ3RGLEVBQXNCQyxFQUFVRSxLQUNqRSxHQUFJRixFQUFJakMsR0FBS21DLEVBQUluQyxFQUFHLENBQ2xCLE1BQU1vSSxFQUFNakcsRUFBSTFCLEVBQUl3QixFQUFJeEIsRUFBSSxHQUFLLEVBQ2pDLElBQUk0SCxFQUFNQyxLQUFLQyxJQUFJcEcsRUFBSTFCLEVBQUV3QixFQUFJeEIsR0FDN0IsSUFBSyxJQUFJZCxFQUFJc0MsRUFBSXhCLEVBQUUySCxFQUFLQyxLQUFRLEVBQUcxSSxHQUFLeUksRUFBSyxJQUFLdEIsRUFBWUUsUUFBUWhGLEdBQVd2QixFQUFFZCxFQUFFSyxFQUFFaUMsRUFBSWpDLElBQUssT0FBTyxFQUN2RyxPQUFPLEVBRVQsT0FBTyxJQVNUOEcsRUFBWVMscUJBQXVCLEVBQUN2RixFQUFzQkMsRUFBVUUsSUFBc0IyRSxFQUFZUSxvQkFBb0J0RixFQUFXQyxFQUFLRSxJQUFRMkUsRUFBWU8sb0JBQW9CckYsRUFBV0MsRUFBS0UsSUFRbE0yRSxFQUFZVSx5QkFBMkIsRUFBQ3hGLEVBQXNCQyxFQUFVRSxLQUN0RSxHQUFpRCxHQUE3Q21HLEtBQUtDLEtBQUtwRyxFQUFJMUIsRUFBSXdCLEVBQUl4QixJQUFJMEIsRUFBSW5DLEVBQUlpQyxFQUFJakMsSUFBVSxPQUFPLEVBQzNELElBQUlxSSxFQUFNQyxLQUFLQyxJQUFJcEcsRUFBSW5DLEVBQUlpQyxFQUFJakMsR0FDL0IsTUFBTXdJLEVBQVNyRyxFQUFJMUIsRUFBSXdCLEVBQUl4QixFQUFJLEVBQUksR0FBSyxFQUNsQ2dJLEVBQVN0RyxFQUFJbkMsRUFBSWlDLEVBQUlqQyxFQUFJLEVBQUksR0FBSyxFQUN4QyxJQUFJTCxFQUFJc0MsRUFBSXhCLEVBQUUrSCxFQUNWaEYsRUFBSXZCLEVBQUlqQyxFQUFFeUksRUFDZCxLQUFPSixLQUFRLEVBQUcxSSxHQUFLNkksRUFBUWhGLEdBQUtpRixFQUFRLElBQUszQixFQUFZRSxRQUFRaEYsR0FBV3ZCLEVBQUVkLEVBQUVLLEVBQUV3RCxJQUFLLE9BQU8sRUFDbEcsT0FBTyxVQ3hIS2tGLEVBSVo5RyxZQUFZQyxHQUNWQyxLQUFLNUIsS0FBTyxPQUNaNEIsS0FBS0QsTUFBUUEsRUFDYkMsS0FBS0MsaUJBQW1CLEVBQUNDLEVBQXNCQyxFQUFTQyxVQUNyQ3lHLElBQWJ6RyxJQUF3QkEsRUFBVzRFLEVBQVlDLFlBQVkvRSxFQUFVQyxJQWtCekUsT0FaNEJFLElBQzFCLElBQUsyRSxFQUFZTSxxQkFBcUJwRixFQUFVQyxFQUFJRSxHQUFNLE9BQU8sRUFDakUsTUFBTWlHLEVBUGdDLEtBQU1wRyxFQUFVZ0IsUUFBVUcsR0FBZ0IsRUFBSSxFQU94RXlGLEdBQ05DLEVBQXNCL0IsRUFBWUUsUUFBUWhGLEVBQVVHLElBQVFGLEVBQUlqQyxHQUFLbUMsRUFBSW5DLEdBQUttQyxFQUFJMUIsR0FBS3dCLEVBQUl4QixFQUFJMkgsRUFDL0ZVLEdBQ0pySSxFQUFHd0IsRUFBSXhCLEVBQUkySCxFQUNYcEksRUFBR21DLEVBQUluQyxHQUVIK0ksRUFBa0MsR0FBWjdHLEdBQWlCNEUsRUFBWUUsUUFBUWhGLEVBQVVHLElBQVEyRSxFQUFZRSxRQUFRaEYsRUFBVThHLElBQW9CN0csRUFBSWpDLEdBQUttQyxFQUFJbkMsR0FBS21DLEVBQUkxQixHQUFLd0IsRUFBSXhCLEVBQUcsRUFBRTJILEVBQ25LWSxJQUFpQmxDLEVBQVlJLHVCQUF1QmxGLEVBQVVHLElBQVMyRSxFQUFZRSxRQUFRaEYsRUFBVUcsSUFBUUEsRUFBSTFCLEdBQUt3QixFQUFJeEIsRUFBSTJILEdBQVFqRyxFQUFJbkMsR0FBS2lDLEVBQUlqQyxFQUFJLEdBQUttQyxFQUFJbkMsR0FBS2lDLEVBQUlqQyxFQUFJLEdBQ25MLE9BQVE2SSxHQUF1QkUsR0FBdUJDLEtBQW1CbEMsRUFBWUksdUJBQXVCbEYsRUFBV0csYUN4QmpIOEcsRUFJWnJILFlBQVlDLEdBQ1ZDLEtBQUs1QixLQUFPLE9BQ1o0QixLQUFLRCxNQUFRQSxFQUNiQyxLQUFLQyxpQkFBbUIsRUFBQ0MsRUFBc0JDLEVBQVNDLEtBSXRELE9BSDRCQyxLQUMxQjJFLEVBQVlNLHFCQUFxQnBGLEVBQVVDLEVBQUlFLEtBQy9DMkUsRUFBWU8sb0JBQW9CckYsRUFBVUMsRUFBSUUsSUFBUTJFLEVBQVlRLG9CQUFvQnRGLEVBQVVDLEVBQUlFLGFDVjlGK0csRUFJWnRILFlBQVlDLEdBQ1ZDLEtBQUs1QixLQUFPLFNBQ1o0QixLQUFLRCxNQUFRQSxFQUNiQyxLQUFLQyxpQkFBbUIsRUFBQ0MsRUFBVUMsRUFBSUMsS0FLckMsT0FKNEJDLE1BQzFCMkUsRUFBWU0scUJBQXFCcEYsRUFBVUMsRUFBSUUsTUFDcEIsR0FBekJtRyxLQUFLQyxJQUFJdEcsRUFBSXhCLEVBQUUwQixFQUFJMUIsSUFBb0MsR0FBekI2SCxLQUFLQyxJQUFJdEcsRUFBSWpDLEVBQUVtQyxFQUFJbkMsSUFBc0MsR0FBekJzSSxLQUFLQyxJQUFJdEcsRUFBSWpDLEVBQUVtQyxFQUFJbkMsSUFBb0MsR0FBekJzSSxLQUFLQyxJQUFJdEcsRUFBSXhCLEVBQUUwQixFQUFJMUIsY0NWM0cwSSxFQUladkgsWUFBWUMsR0FDVkMsS0FBSzVCLEtBQU8sU0FDWjRCLEtBQUtELE1BQVFBLEVBQ2JDLEtBQUtDLGlCQUFtQixTQUFTQyxFQUFXQyxFQUFVQyxHQUtwRCxPQUo0QkMsS0FDbkIyRSxFQUFZTSxxQkFBcUJwRixFQUFVQyxFQUFJRSxJQUN0RDJFLEVBQVlVLHlCQUF5QnhGLEVBQVVDLEVBQUlFLFdDTjdDaUgsRUFJWnhILFlBQVlDLEdBQ1ZDLEtBQUs1QixLQUFPLFFBQ1o0QixLQUFLRCxNQUFRQSxFQUNiQyxLQUFLQyxpQkFBbUIsRUFBQ0MsRUFBc0JDLEVBQVNDLEtBSXRELE9BSDRCQyxLQUMxQjJFLEVBQVlNLHFCQUFxQnBGLEVBQVVDLEVBQUlFLEtBQy9DMkUsRUFBWU8sb0JBQW9CckYsRUFBVUMsRUFBSUUsSUFBUTJFLEVBQVlRLG9CQUFvQnRGLEVBQVVDLEVBQUlFLElBQVEyRSxFQUFZVSx5QkFBeUJ4RixFQUFVQyxFQUFJRSxhQ2R6SmtILEVBS1p6SCxZQUFZQyxFQUFleUgsR0FDekJ4SCxLQUFLNUIsS0FBTyxPQUNaNEIsS0FBS0QsTUFBUUEsRUFDYkMsS0FBS3lILHdCQUEwQkQsRUFDL0J4SCxLQUFLQyxpQkFBbUIsRUFBQ0MsRUFBc0JDLEVBQVNDLEtBTXRELE9BTDRCQyxNQUN0QjJFLEVBQVlNLHFCQUFxQnBGLEVBQVVDLEVBQUlFLElBQWdDLEdBQXZCbUcsS0FBS0MsSUFBSXBHLEVBQUluQyxFQUFFaUMsRUFBSWpDLElBQWdDLEdBQXZCc0ksS0FBS0MsSUFBSXBHLEVBQUkxQixFQUFFd0IsRUFBSXhCLE1BQ2xHcUcsRUFBWU8sb0JBQW9CckYsRUFBVUMsRUFBSUUsSUFBUTJFLEVBQVlRLG9CQUFvQnRGLEVBQVVDLEVBQUlFLElBQVEyRSxFQUFZVSx5QkFBeUJ4RixFQUFVQyxFQUFJRSxPQ0ZoTCxNQUFNcUgsR0FDSkMsMkJBQTZCekgsTUFDN0IwSCw2QkFBOEIsQ0FBQ25FLEVBQWNvRSxJQUFnQyxHQUM3RUMsUUFBVWxJLEdBQTRCLElBQUtDLEVBQzNDb0YsWUFBY3JGLElBQXVCLEVBQ3JDbUksNkJBQThCLENBQUM3SCxFQUFzQkMsT0FDckRGLGlCQUFrQixDQUFDQyxFQUF1QkMsRUFBVTZCLE1BQW9EckQsR0FBSSxFQUFHVCxHQUFJLElBQ25IOEosbUJBQW9CLENBQUM5SCxFQUF1QkMsSUFBd0JXLElBQXNCLEVBQzFGbUgsVUFBVyxDQUFDL0gsRUFBdUJDLEtBQXNCLEVBQ3pEK0gsY0FBZSxDQUFDaEksRUFBdUJDLEtBQXNCLEVBQzdEZ0ksMkJBQTRCLENBQUNqSSxFQUF1QkMsRUFBVUUsS0FBc0IsRUFDcEYrSCx3QkFBeUIsQ0FBQ2xJLEVBQXVCQyxFQUFVRSxJQUF3QkgsRUFDbkZtSSxrQ0FBbUMsQ0FBQ25JLEVBQXVCZ0IsSUFBNkIsSUFBSW9ILElBQzVGQyxvQkFBc0JySSxHQUFtQyxJQUFJb0ksSUFDN0RFLFdBQVksQ0FBQ3RJLEVBQXVCQyxFQUFVRSxLQUFzQixFQUNwRW9JLG9CQUFxQixDQUFDdkksRUFBc0JDLEVBQVU2QixLQUE0QyxFQUNsRzBHLGtDQUFvQ3hJLEtBQWdDdkIsR0FBSSxFQUFHVCxHQUFJLElBQy9FeUssa0JBQW1CLENBQUN6SSxFQUFzQjBJLEVBQVlDLElBQTZCM0ksRUFDbkY0SSxtQkFBcUI5SCxHQUF3QixHQUM3QytILGNBQWUsQ0FBQzdJLEVBQXNCQyxFQUFVRSxFQUFVMkIsRUFBZ0NnSCxNQUF1RzlJLFlBQVcrSSxjQUFzQixJQUFLcEosRUFBYXFKLGNBQWMsS0FFcFF4QixFQUFlQywyQkFBNkIsQ0FBQ3pILElBQzNDLE1BQU1pSixLQUNOLElBQUssSUFBSXRMLEVBQUksRUFBR0EsRUFBSXFDLEVBQVVRLFVBQVc3QyxJQUFLLENBQzVDc0wsRUFBVzFILFNBQ1gsSUFBSyxJQUFJQyxFQUFJLEVBQUdBLEVBQUl4QixFQUFVVSxVQUFXYyxJQUN2Q3lILEVBQVd0TCxHQUFHNEQsS0FBS2lHLEVBQWVJLFFBQVE1SCxFQUFVVyxhQUFjbEMsRUFBR2QsRUFBR0ssRUFBR3dELE1BRy9FLE9BQU95SCxJQUVUekIsRUFBZUUsNkJBQStCLEVBQUNuRSxFQUFjb0UsRUFBYSxLQUN0RSxJQUFJdUIsRUFBVyxHQTBCZixPQXpCSTNGLGFBQWlCbUQsSUFDVXdDLEVBQVQsVUFBaEIzRixFQUFNMUQsTUFBOEIsSUFDeEIsS0FFZDBELGFBQWlCMEQsSUFDVWlDLEVBQVQsVUFBaEIzRixFQUFNMUQsTUFBOEIsSUFDeEIsS0FFZDBELGFBQWlCMkQsSUFDVWdDLEVBQVQsVUFBaEIzRixFQUFNMUQsTUFBOEIsSUFDeEIsS0FFZDBELGFBQWlCNEQsSUFDVStCLEVBQVQsVUFBaEIzRixFQUFNMUQsTUFBOEIsSUFDeEIsS0FFZDBELGFBQWlCNkQsSUFDVThCLEVBQVQsVUFBaEIzRixFQUFNMUQsTUFBOEIsSUFDeEIsS0FFZDBELGFBQWlCOEQsSUFDVTZCLEVBQVQsVUFBaEIzRixFQUFNMUQsTUFBOEIsSUFDeEIsS0FFbEJxSixFQUFXQSxFQUFXQSxFQUFTdkIsRUFBYXVCLElBR2hEMUIsRUFBZUksUUFBVSxDQUFDbEksSUFDeEIsR0FBaUIsS0FBYkEsRUFBRW1HLE9BQWUsT0FBTyxJQUFJbEcsRUFDaEMsSUFBSThGLEVBQXdCL0YsRUFBRWdHLE1BQU0sbUJBQ2hDeEYsRUFBbUJ1RixHQUFhQSxFQUFVaEYsT0FBUyxFQUFJbUYsT0FBT0gsRUFBVSxTQUFNa0IsRUFDOUViLEVBQW9CTCxFQUFVaEYsT0FBUyxFQUFJZ0YsRUFBVSxRQUFLa0IsRUFDOUQsUUFBaUJBLElBQWJ6RyxRQUF3Q3lHLElBQWRiLEVBQXlCLE9BQU8sSUFBSW5HLEVBQ2xFLE9BQVFtRyxFQUFVRCxRQUNoQixJQUFLLElBQ0gsT0FBTyxJQUFJYSxFQUFLLFNBQ2xCLElBQUssSUFDSCxPQUFPLElBQUlPLEVBQUssU0FDbEIsSUFBSyxJQUNILE9BQU8sSUFBSUMsRUFBTyxTQUNwQixJQUFLLElBQ0gsT0FBTyxJQUFJQyxFQUFPLFNBQ3BCLElBQUssSUFDSCxPQUFPLElBQUlDLEVBQU0sU0FDbkIsSUFBSyxJQUVILE9BRGtCLElBQUlDLEVBQUssUUFBU0csRUFBZVMsNEJBRXJELElBQUssSUFDTCxPQUFPLElBQUl2QixFQUFLLFNBQ2hCLElBQUssSUFDSCxPQUFPLElBQUlPLEVBQUssU0FDbEIsSUFBSyxJQUNILE9BQU8sSUFBSUMsRUFBTyxTQUNwQixJQUFLLElBQ0gsT0FBTyxJQUFJQyxFQUFPLFNBQ3BCLElBQUssSUFDSCxPQUFPLElBQUlDLEVBQU0sU0FDbkIsSUFBSyxJQUVILE9BRGtCLElBQUlDLEVBQUssUUFBU0csRUFBZVMsNEJBRXJELElBQUssR0FFTCxRQUNFLE9BQU8sSUFBSXRJLEtBTWpCNkgsRUFBZXpDLFlBQWMsQ0FBQ3JGLElBQzVCLE1BQU0rRixFQUEyQi9GLEVBQUVnRyxNQUFNLG1CQUV6QyxPQUR5QkQsR0FBYUEsRUFBVWhGLE9BQVMsSUFBTW1GLE9BQU9ELE1BQU1DLE9BQU9ILEVBQVUsS0FBT0csT0FBT0gsRUFBVSxLQUFPLElBRzlIK0IsRUFBZUssNkJBQStCLEVBQUM3SCxFQUFzQkMsS0FDbkUsTUFBTWtKLEtBRU4sUUFBc0J4QyxJQURBYSxFQUFlZ0Isa0NBQWtDeEksR0FDdEMsQ0FDL0IsTUFBTW9KLEVBQVc1QixFQUFlSSxRQUFRNUgsRUFBVVcsWUFBWVYsSUFDOUQsSUFBSyxJQUFJdEMsRUFBSSxFQUFHQSxFQUFJcUMsRUFBVVEsVUFBVzdDLElBQ3ZDLElBQUssSUFBSTZELEVBQUksRUFBR0EsRUFBSXhCLEVBQVVVLFVBQVdjLElBQUssQ0FDNUMsTUFBTVosR0FBUW5DLEVBQUdkLEVBQUdLLEVBQUd3RCxHQUNqQjZILEVBQWE3QixFQUFlSSxRQUFRNUgsRUFBVVcsYUFBYWxDLEVBQUdkLEVBQUdLLEVBQUd3RCxLQUN0RTRILEVBQVN2SixRQUFVd0osRUFBV3hKLE9BQ3pCd0osYUFBc0IzQyxHQUFXMkMsYUFBc0JoQyxHQUFXZ0MsYUFBc0IxSixHQUMzRndKLEVBQWdCNUgsS0FBS1gsSUFHakMsT0FBT3VJLElBRVQzQixFQUFlekgsaUJBQW1CLEVBQUNDLEVBQXNCQyxFQUFVNkIsS0FDakUsTUFBTXdILEVBQXlCOUIsRUFBZUssNkJBQTZCN0gsRUFBV0MsR0FDdEYsR0FBSXFKLEVBQXVCN0ksT0FBUyxFQUFHLE9BQU82SSxFQUM5QyxNQVNNNUosRUFBSU0sRUFBVVcsWUFBWVYsR0FDMUJDLEVBQVdzSCxFQUFlekMsWUFBWXJGLEdBQ3RDNkosRUFBWS9CLEVBQWVJLFFBQVFsSSxHQUN6QyxHQUFJNkosSUFBYzVELE1BQU16RixHQUFXLENBQ2pDLE1BQU1zSixFQWJxQixFQUFDeEosRUFBc0JDLEVBQVVzSixFQUFrQnJKLEtBQzlFLE1BQU11SixLQUNBM0IsRUFBMEQsbUJBQTlCeUIsRUFBVXhKLGlCQUFpQ3dKLEVBQVV4SixpQkFBaUJDLEVBQVdDLEVBQUtDLEdBQWFDLElBQVcsRUFDaEosSUFBSzJILEVBQW9CLE9BQU8yQixFQUNoQyxJQUFLLElBQUk5TCxFQUFJLEVBQUdBLEVBQUlxQyxFQUFVUSxVQUFXN0MsSUFDdkMsSUFBSyxJQUFJNkQsRUFBSSxFQUFHQSxFQUFJeEIsRUFBVVUsVUFBV2MsSUFDbENzRyxHQUFvQnJKLEVBQUVkLEVBQUVLLEVBQUV3RCxLQUFLaUksRUFBV2xJLE1BQU05QyxFQUFFZCxFQUFFSyxFQUFFd0QsSUFDL0QsT0FBT2lJLEdBTWFDLENBQXFCMUosRUFBV0MsRUFBS3NKLEVBQVdySixHQVNwRSxHQVJJc0gsRUFBZUksUUFBUTVILEVBQVVXLFlBQVlWLGNBQWlCb0gsSUFDNURHLEVBQWVTLDJCQUEyQmpJLEVBQVdDLEdBQU94QixFQUFHd0IsRUFBSXhCLEVBQUdULEVBQUcsS0FDM0V3TCxFQUFZakksTUFBTzlDLEVBQUd3QixFQUFJeEIsRUFBR1QsRUFBRyxJQUU5QndKLEVBQWVTLDJCQUEyQmpJLEVBQVdDLEdBQU94QixFQUFHd0IsRUFBSXhCLEVBQUdULEVBQUdnQyxFQUFVVSxVQUFZLEtBQ2pHOEksRUFBWWpJLE1BQU85QyxFQUFHd0IsRUFBSXhCLEVBQUdULEVBQUdnQyxFQUFVVSxVQUFZLEtBR3REOEcsRUFBZUksUUFBUTVILEVBQVVXLFlBQVlWLGNBQWlCeUcsRUFDaEUsUUFBaUJDLElBQWI3RSxFQUNvQzZILFFBQVFDLEtBQUssc0lBQzlDLEdBQUlwQyxFQUFlZSxvQkFBb0J2SSxFQUFXQyxFQUFLNkIsR0FBVyxDQUN2RSxNQUFNc0UsRUFBTXRFLEVBQVMzQixJQUFJbkMsRUFBSThELEVBQVM3QixJQUFJakMsRUFBSSxFQUFJLEdBQUssRUFDdkR3TCxFQUFZakksTUFBTzlDLEVBQUd3QixFQUFJeEIsRUFBSTJILEVBQUtwSSxFQUFHOEQsRUFBUzNCLElBQUluQyxJQUd2RCxPQUFPd0wsRUFFVCxXQUVGaEMsRUFBZU0sbUJBQXFCLEVBQUM5SCxFQUF1QkMsS0FDMUQsTUFBTVAsRUFBSU0sRUFBVVcsWUFBWVYsR0FDZnVILEVBQWV6QyxZQUFZckYsR0FHNUMsT0FGa0I4SCxFQUFlSSxRQUFRbEksR0FDSkssaUJBQWlCQyxFQUFXQyxLQUduRXVILEVBQWVPLFVBQVksRUFBQy9ILEVBQXNCQyxLQUNoRCxJQUFLLElBQUl0QyxFQUFJLEVBQUdBLEVBQUlxQyxFQUFVUSxVQUFXN0MsSUFDdkMsSUFBSyxJQUFJNkQsRUFBSSxFQUFHQSxFQUFJeEIsRUFBVVUsVUFBV2MsSUFDdkMsR0FBSXZCLEVBQUl4QixHQUFLZCxHQUFLc0MsRUFBSWpDLEdBQUt3RCxFQUFHLENBQzVCLE1BQU1xSSxFQUFrQnJDLEVBQWV6SCxpQkFBaUJDLEdBQVl2QixFQUFFZCxFQUFFSyxFQUFFd0QsSUFFMUUsSUFBSyxJQUFJc0ksRUFBSSxFQUFHQSxFQUFJRCxFQUFnQnBKLE9BQVFxSixJQUMxQyxHQUFJRCxFQUFnQkMsR0FBR3JMLEdBQUd3QixFQUFJeEIsR0FBS29MLEVBQWdCQyxHQUFHOUwsR0FBR2lDLEVBQUlqQyxFQUFHLE9BQU8sRUFHL0UsT0FBTyxJQUVUd0osRUFBZVEsY0FBZ0IsRUFBQ2hJLEVBQXNCQyxLQUNwRCxNQUFNOEosRUFBZ0J2QyxFQUFlekgsaUJBQWlCQyxFQUFXQyxHQUVqRSxHQURxQnVILEVBQWVPLFVBQVUvSCxFQUFXQyxHQUNyQyxDQUNsQixJQUFJK0gsR0FBZ0IsRUFDcEIsSUFBSyxJQUFJckssRUFBSSxFQUFHQSxFQUFJb00sRUFBY3RKLE9BQVE5QyxJQUN4Q3FLLEVBQWdCQSxHQUFpQlIsRUFBZU8sVUFBVS9ILEVBQVcrSixFQUFjcE0sSUFDckYsR0FBSXFLLEVBQWUsT0FBTyxFQUU1QixPQUFPLElBRVRSLEVBQWVTLDJCQUE2QixFQUFDakksRUFBc0JDLEVBQVVFLEtBQzNFLE1BQU1ULEVBQUlNLEVBQVVXLFlBQVlWLEdBQzFCcEIsRUFBSW1CLEVBQVVXLFlBQVlSLEdBQ2hDLEdBQUlxSCxFQUFlSSxRQUFRbEksR0FBR3hCLE1BQVEsSUFBS21KLEVBQUssSUFBS25KLE1BQVFzSixFQUFlSSxRQUFRL0ksR0FBR1gsTUFBUSxJQUFLK0ksRUFBSyxJQUFLL0ksTUFBeUMsR0FBakNzSixFQUFlekMsWUFBWXJGLElBQTRDLEdBQWpDOEgsRUFBZXpDLFlBQVlsRyxHQUFTLE9BQU8sRUFDdk0sR0FBSWlHLEVBQVlJLHVCQUF1QmxGLEVBQVdDLElBQVE2RSxFQUFZSSx1QkFBdUJsRixFQUFXRyxJQUFRMkUsRUFBWUssYUFBYW5GLEVBQVdHLElBQVFGLEdBQU9FLEVBQUssQ0FDdEssSUFBSWlHLEVBQU1qRyxFQUFJbkMsRUFBSWlDLEVBQUlqQyxFQUFJLEVBQUksR0FBSyxFQUMvQnFJLEVBQU1DLEtBQUtDLElBQUlwRyxFQUFJbkMsRUFBRWlDLEVBQUlqQyxHQUM3QixJQUFLLElBQUlMLEVBQUlzQyxFQUFJakMsRUFBRW9JLEVBQUtDLEtBQVEsRUFBRzFJLEdBQUt5SSxFQUFLLElBQUt0QixFQUFZRSxRQUFRaEYsR0FBWXZCLEVBQUV3QixFQUFJeEIsRUFBRVQsRUFBRUwsSUFBSyxPQUFPLEVBQ3hHLE9BQU8sS0FNWDZKLEVBQWVVLHdCQUEwQixFQUFDbEksRUFBc0JDLEVBQVVFLEtBQ3hFLElBQUtxSCxFQUFlUywyQkFBMkJqSSxFQUFXQyxFQUFLRSxHQUFNLE9BQU9ILEVBQzVFLE1BQU1nSyxFQUFXLElBQUk1SixFQUFNSixFQUFVSyxPQUNyQzJKLEVBQVNuSixZQUFZWixFQUFLdUgsRUFBZW9CLG1CQUFtQjVJLEVBQVVXLFlBQVlWLEtBQ2xGLElBQUlnSyxFQUFTOUosRUFBSW5DLEVBQUlpQyxFQUFJakMsRUFBSSxFQUFJLEdBQUssRUFDbENrTSxFQUFRLEVBT1osT0FOK0IsR0FBM0I1RCxLQUFLQyxJQUFJcEcsRUFBSW5DLEVBQUlpQyxFQUFJakMsR0FBU2tNLEVBQVEsRUFDTixHQUEzQjVELEtBQUtDLElBQUlwRyxFQUFJbkMsRUFBSWlDLEVBQUlqQyxLQUFTa00sRUFBUSxHQUMvQ0YsRUFBU25KLGFBQWFwQyxFQUFHd0IsRUFBSXhCLEVBQUdULEVBQUdpQyxFQUFJakMsRUFBSWlNLEVBQVNDLEdBQVNsSyxFQUFVVyxZQUFZVixJQUNuRitKLEVBQVNuSixZQUFZWixFQUFLLEtBQzFCK0osRUFBU25KLGFBQWNwQyxFQUFHMEIsRUFBSTFCLEVBQUdULEVBQUdtQyxFQUFJbkMsRUFBSWlNLEVBQVNDLEdBQVNsSyxFQUFVVyxZQUFZUixJQUNwRjZKLEVBQVNuSixZQUFZVixFQUFLLEtBQ25CLElBQUlZLEVBQVVpSixLQUV2QnhDLEVBQWVXLGtDQUFvQyxFQUFDbkksRUFBc0JnQixLQUN4RSxJQUFJdEIsRUFBSSxJQUFJMEksSUFDWixJQUFLLElBQUl6SyxFQUFJLEVBQUdBLEVBQUlxQyxFQUFVUSxVQUFXN0MsSUFDdkMsSUFBSyxJQUFJNkQsRUFBSSxFQUFHQSxFQUFJeEIsRUFBVVUsVUFBV2MsSUFDdkMsSUFBS3NELEVBQVlHLHFCQUFxQmpGLEVBQVdnQixHQUFRdkMsRUFBRWQsRUFBRUssRUFBRXdELE1BQVFzRCxFQUFZRSxRQUFRaEYsR0FBWXZCLEVBQUVkLEVBQUVLLEVBQUV3RCxJQUFLLENBQ2hILE1BQU0ySSxFQUFzQjNDLEVBQWV6SCxpQkFBaUJDLEdBQVl2QixFQUFFZCxFQUFFSyxFQUFFd0QsSUFDOUUsSUFBSyxJQUFJc0ksRUFBSSxFQUFHQSxFQUFJSyxFQUFvQjFKLE9BQVFxSixJQUM5Q3BLLEVBQUUwSyxJQUFJRCxFQUFvQkwsSUFFbEMsT0FBT3BLLElBS1Q4SCxFQUFlYSxvQkFBc0IsQ0FBQ3JJLElBQ3BDLE1BQ01xSyxFQUE0QixHQURackssRUFBVWdCLE9BQ00sRUFBSSxFQUcxQyxPQUYyQndHLEVBQWVXLGtDQUFrQ25JLEVBQVdxSyxLQUl6RjdDLEVBQWVjLFdBQWEsRUFBQ3RJLEVBQXNCQyxFQUFVRSxLQUMzRCxNQUFNVCxFQUFJTSxFQUFVVyxZQUFZVixHQUMxQkMsRUFBV3NILEVBQWV6QyxZQUFZckYsR0FDdEM2SixFQUFZL0IsRUFBZUksUUFBUWxJLEdBQ3pDLEdBQXlDLG1CQUE5QjZKLEVBQVV4SixtQkFBbUM0RixNQUFNekYsR0FBVyxDQUV2RSxHQUQyQnFKLEVBQVV4SixpQkFBaUJDLEVBQVdDLEVBQUtDLEVBQ2xFNEgsQ0FBbUIzSCxLQUFTMkUsRUFBWUksdUJBQXVCbEYsRUFBV0csS0FBUzJFLEVBQVlFLFFBQVFoRixFQUFXRyxHQUFNLE9BQU8sRUFFckksT0FBTyxJQU1UcUgsRUFBZWUsb0JBQXNCLEVBQUN2SSxFQUFzQkMsRUFBVTZCLEtBQ3BFLE1BQU13SSxFQUFnQnhJLEVBQVMzQixJQUFJMUIsRUFBSXFELEVBQVM3QixJQUFJeEIsRUFBSSxFQUFJLEVBQUksRUFDcERxRCxFQUFTM0IsSUFBSTFCLEVBQUlxRCxFQUFTN0IsSUFBSXhCLEVBRTFDLE9BRGMrSSxFQUFlSSxRQUFRNUgsRUFBVVcsWUFBWVYsY0FDdEN5RyxHQUNnQyxJQUE5Q0osS0FBS0MsSUFBSXpFLEVBQVMzQixJQUFJMUIsRUFBSXFELEVBQVM3QixJQUFJeEIsSUFDdkNxRCxFQUFTM0IsSUFBSTFCLElBQU13QixFQUFJeEIsR0FDdkI2TCxJQUFrQnhJLEVBQVM3QixJQUFJeEIsR0FDL0IrSSxFQUFlSSxRQUFRNUgsRUFBVVcsWUFBWW1CLEVBQVMzQixnQkFBaUJ1RyxJQUN0RTVCLEVBQVlJLHVCQUF1QmxGLEVBQVc4QixFQUFTM0IsT0FLakVxSCxFQUFlZ0Isa0NBQW9DLENBQUN4SSxJQUNsRCxNQUFNdUssRUFBc0JDLElBQzFCLElBQUssSUFBSTdNLEVBQUksRUFBR0EsRUFBSXFDLEVBQVVRLFVBQVc3QyxJQUN2QyxHQUFJNkosRUFBZUksUUFBUTVILEVBQVVXLGFBQWFsQyxFQUFHK0wsRUFBV3hNLEVBQUdMLGVBQWdCK0ksRUFDakYsT0FBUWpJLEVBQUcrTCxFQUFXeE0sRUFBR0wsSUFFL0IsT0FBTzRNLEVBQW1CLElBQU1BLEVBQW1CdkssRUFBVVEsVUFBWSxLQU0zRWdILEVBQWVpQixrQkFBb0IsRUFBQ3pJLEVBQXNCMEksRUFBWUMsS0FDcEUsTUFBTThCLEVBQWdCakQsRUFBZWdCLGtDQUFrQ3hJLEdBQ2pFZ0ssRUFBVyxJQUFJNUosRUFBTUosRUFBVUssT0FLckMsWUFKc0JzRyxJQUFsQjhELEdBQStCQSxFQUFjaE0sSUFBTWlLLEVBQU1qSyxHQUFLZ00sRUFBY3pNLElBQU0wSyxFQUFNMUssR0FDbkYySyxhQUFrQmpDLEdBQVdpQyxhQUFrQnRCLEdBQVdzQixhQUFrQmhKLEdBQzlFNkgsRUFBZUksUUFBUTVILEVBQVVXLFlBQVkrSCxJQUFRN0ksUUFBVThJLEVBQU85SSxPQUN6RW1LLEVBQVNuSixZQUFZNkgsRUFBT2xCLEVBQWVFLDZCQUE2QmlCLElBQ3JFLElBQUk1SCxFQUFVaUosS0FFdkJ4QyxFQUFlb0IsbUJBQXFCLENBQUM5SCxJQUNuQyxNQUFNNEosRUFBUzVKLEVBQUkrRSxPQUFPSCxNQUFNLE9BQVM1RSxFQUFJK0UsT0FBT0gsTUFBTSxPQUFPLEdBQUssR0FDaEVpRixFQUFNN0osRUFBSStFLE9BQU9ILE1BQU0sVUFBWUUsT0FBTzlFLEVBQUkrRSxPQUFPSCxNQUFNLFVBQVUsSUFBTSxFQUNqRixPQUFPZ0YsRUFBUzlFLE9BQU8rRSxFQUFNLEtBSy9CbkQsRUFBZXFCLGNBQWdCLEVBQUM3SSxFQUFzQkMsRUFBVUUsRUFBVTJCLEVBQWdDZ0gsS0FFeEcsUUFBc0JuQyxJQURBYSxFQUFlZ0Isa0NBQWtDeEksR0FLckUsWUFIeUIyRyxJQUFyQm1DLElBQ0ZBLEVBQW1CdEIsRUFBZUksUUFBUTVILEVBQVVXLFlBQVlSLE1BRXpESCxVQUFXd0gsRUFBZWlCLGtCQUFrQnpJLEVBQVdDLEVBQUs2SSxHQUFtQkMsY0FBZSxJQUFJcEosRUFBWXFKLGNBQWMsR0FFdkksR0FBSXhCLEVBQWVTLDJCQUEyQmpJLEVBQVdDLEVBQUtFLEdBQzVELE9BQVNILFVBQVd3SCxFQUFlVSx3QkFBd0JsSSxFQUFXQyxFQUFLRSxHQUFNNEksY0FBZSxJQUFJcEosRUFBWXFKLGNBQWMsR0FFaEksTUFBTTRCLEVBQXNCQyxJQUMxQixNQUFNOUIsRUFBZ0I4QixFQUFZckQsRUFBZUksUUFBUTVILEVBQVVXLFlBQVlrSyxJQUFjckQsRUFBZUksUUFBUTVILEVBQVVXLFlBQVlSLElBQ3BJNkosRUFBVyxJQUFJNUosRUFBTUosRUFBVUssT0FJckMsT0FISXdLLEdBQVdiLEVBQVNuSixZQUFZZ0ssRUFBVyxLQUMvQ2IsRUFBU25KLFlBQVlWLEVBQUtxSCxFQUFlb0IsbUJBQW1CNUksRUFBVVcsWUFBWVYsS0FDbEYrSixFQUFTbkosWUFBWVosRUFBSyxNQUNqQkQsVUFBVyxJQUFJZSxFQUFVaUosR0FBV2pCLGdCQUFlQyxjQUFjLElBRTVFLEdBQUl4QixFQUFlZSxvQkFBb0J2SSxFQUFXQyxFQUFLNkIsR0FBVyxDQUNoRSxNQUFNc0UsRUFBTXRFLEVBQVMzQixJQUFJMUIsRUFBSXFELEVBQVM3QixJQUFJeEIsRUFBSSxHQUFLLEVBQUksRUFDakRtQyxHQUFRbkMsRUFBR3dCLEVBQUl4QixFQUFJMkgsRUFBS3BJLEVBQUc4RCxFQUFTM0IsSUFBSW5DLEdBQzlDLEdBQUltQyxFQUFJMUIsSUFBTW1DLEVBQUluQyxHQUFLMEIsRUFBSW5DLElBQU00QyxFQUFJNUMsRUFDbkMsT0FBTzRNLEVBQW1COUksRUFBUzNCLEtBR3ZDLE1BQU00SixFQUFnQnZDLEVBQWV6SCxpQkFBaUJDLEVBQVdDLEVBQUs2QixHQUN0RSxJQUFLLElBQUluRSxFQUFJLEVBQUdBLEVBQUlvTSxFQUFjdEosT0FBUTlDLElBQUssQ0FDN0MsTUFBTWlELEVBQVdtSixFQUFjcE0sR0FDL0IsR0FBSXdDLEVBQUkxQixJQUFNbUMsRUFBSW5DLEdBQUswQixFQUFJbkMsSUFBTTRDLEVBQUk1QyxJQUM3QjhHLEVBQVlJLHVCQUF1QmxGLEVBQVdHLEdBQ2hELE9BQU95SyxJQUdmLE9BQVM1SyxZQUFXK0ksY0FBZSxJQUFJcEosRUFBWXFKLGNBQWMsS0NoVW5FLE1BQU04QixFQUEwQkMsSUFDNUIsSUFBSTdILEVBQVMwQyxPQUFPbUYsRUFBUUMsYUFBYSxhQUt6QyxPQUFTcEssS0FGVW5DLEVBRlQ2SCxLQUFLMkUsTUFBTS9ILEVBQVMsR0FFUmxGLEVBRFprRixFQUFTLEdBR0xLLE1BRE9DLEtBQUswSCxNQUFNSCxFQUFRQyxhQUFhLFlDM0J0QyxVRHVDUHBMLDRCQUNKLE1BQU11TCxFQUF1QixJQUFJL0osRUFDakMrSixFQUFTOUssTUFBUW1ILEVBQWVDLDJCQUEyQjBELEVBQVNuTCxXQUNwRUYsS0FBS3NMLE1BQU0xSixNQUFReUosRUFDbkJyTCxLQUFLdUwsd0JBRUZ6TCxjQUFjdUwsR0FDbkJBLEVBQVM5SyxNQUFRbUgsRUFBZUMsMkJBQTJCMEQsRUFBU25MLFdBQ3BFRixLQUFLc0wsTUFBTTFKLE1BQVF5SixFQUVyQnZMLGNBQ0lFLEtBQUtzTCxNQUFRLElBQUlsSixFQUNqQnBDLEtBQUt3TCxLQUFPLElBQUl4SCxFQUNoQmhFLEtBQUt5TCxjQUFpQjNLLEtBQU9uQyxHQUFJLEVBQUdULEdBQUksR0FBS3VGLE1BQU8sSUFBSTVELEdBQ3hERyxLQUFLMEwsa0JBQXFCNUssS0FBT25DLEdBQUksRUFBR1QsR0FBSSxHQUFLdUYsTUFBTyxJQUFJNUQsR0FDNURHLEtBQUsyTCx1QkFBeUIsSUFBSTlMLEVBQ2xDRyxLQUFLNEwsNEJBVVQ5TCx3QkFDSUUsS0FBS3dMLEtBQUtLLFVBQVU3TCxLQUFLc0wsTUFBTTFKLE9BQy9CLElBQUssSUFBSWpELEVBQUksRUFBR0EsRUFBSSxFQUFHQSxJQUNuQixJQUFLLElBQUlULEVBQUksRUFBR0EsRUFBSSxFQUFHQSxJQUFLLENBQ3hCLElBQUk0QyxFQUFNZCxLQUFLd0wsS0FBS2hILE9BQU9zSCxTQUFTLEdBQUdBLFNBQVNuTixHQUFHbU4sU0FBUzVOLEdBQzVEOEIsS0FBS3dMLEtBQUtPLGNBQWNqTCxFQUFLZCxLQUFLZ00sVUFBVTNNLEtBQUtXLFFBVTdERiw0QkFDSSxJQUFJbUMsRUFBV2pDLEtBQUtzTCxNQUFNMUosTUFBTUssU0FDaENqQyxLQUFLd0wsS0FBS1MsYUFBYWpNLEtBQUtzTCxNQUFNMUosT0FDbEMsSUFBSXNLLEVBQVcsRUFDWEMsRUFBVyxFQUNmLElBQUssSUFBSXRPLEVBQUksRUFBR0EsRUFBSW9FLEVBQVN0QixPQUFROUMsSUFDakMsR0FBSW9FLEVBQVNwRSxHQUFHa0MsT0FBK0MsR0FBdENrQyxFQUFTcEUsR0FBR2tDLE1BQU0rRCxRQUFRLFNBQWUsQ0FDOUQsSUFBSUwsRUFBUXpELEtBQUt3TCxLQUFLOUcsZUFBZW9ILFNBQVMsR0FBR0EsU0FBU0ssVUFDN0N0RixHQUFUcEQsR0FBb0J6RCxLQUFLd0wsS0FBS1ksa0JBQWtCM0ksRUFBTzVGLEVBQUdtQyxLQUFLcU0sb0JBQW9CaE4sS0FBS1csWUFFM0YsR0FBSWlDLEVBQVNwRSxHQUFHa0MsT0FBK0MsR0FBdENrQyxFQUFTcEUsR0FBR2tDLE1BQU0rRCxRQUFRLFNBQWUsQ0FDbkUsSUFBSUwsRUFBUXpELEtBQUt3TCxLQUFLL0csZUFBZXFILFNBQVMsR0FBR0EsU0FBU0ksVUFDN0NyRixHQUFUcEQsR0FBb0J6RCxLQUFLd0wsS0FBS1ksa0JBQWtCM0ksRUFBTzVGLEVBQUdtQyxLQUFLcU0sb0JBQW9CaE4sS0FBS1csUUFTeEdGLDBCQUNFLEtBQU1FLEtBQUswTCxpQkFBaUJqSSxpQkFBaUI1RCxHQUFhLENBQ3hELE1BQU15TSxFQUFtQjVFLEVBQWVxQixjQUFjL0ksS0FBS3NMLE1BQU0xSixNQUFNMUIsVUFBV0YsS0FBSzBMLGlCQUFpQjVLLElBQUtkLEtBQUt5TCxhQUFhM0ssSUFBS2QsS0FBS3NMLE1BQU0xSixNQUFNSSxTQUFVaEMsS0FBSzJMLHdCQUM5Sk4sRUFBVyxJQUFJL0osRUFBV3RCLEtBQUtzTCxNQUFNMUosT0FDM0N5SixFQUFTbkwsVUFBWW9NLEVBQWlCcE0sVUFDdEMsTUFBTStJLEVBQWdCcUQsRUFBaUJyRCxjQUN2QyxHQUFJakosS0FBS3NMLE1BQU0xSixNQUFNMUIsWUFBY21MLEVBQVNuTCxVQUMxQ21MLEVBQVN0SixrQkFBb0IvQixLQUFLc0wsTUFBTTFKLE1BQU1FLG9CQUFvQixHQUNsRXVKLEVBQVNySixVQUFhN0IsSUFBS0gsS0FBSzBMLGlCQUFpQjVLLElBQUtULElBQUtMLEtBQUt5TCxhQUFhM0ssS0FDN0V1SyxFQUFTbkwsVUFBVWdCLE9BQVNsQixLQUFLc0wsTUFBTTFKLE1BQU0xQixVQUFVZ0IsU0FBV0csRUFBZWMsRUFBZWQsRUFDNUZpTCxFQUFpQnBELGVBQWNtQyxFQUFTbkwsVUFBVWdCLE9BQVNtSyxFQUFTbkwsVUFBVWdCLFNBQVdHLEVBQWVjLEVBQWVkLEdBQ3JINEgsYUFBeUJwSixHQUM3QndMLEVBQVNwSixTQUFTUixLQUFLd0gsT0FFcEIsQ0FDTCxNQUFNZ0IsRUFBZ0J2QyxFQUFlekgsaUJBQWlCRCxLQUFLc0wsTUFBTTFKLE1BQU0xQixVQUFXRixLQUFLeUwsYUFBYTNLLElBQUtkLEtBQUtzTCxNQUFNMUosTUFBTUksVUFDMUhxSixFQUFTdEosa0JBQW9CL0IsS0FBS3NMLE1BQU0xSixNQUFNRSxvQkFBb0IsR0FDbEVtSSxFQUFjc0MsUUFBU3pMLElBQ3JCdUssRUFBU3RKLGtCQUFrQmpCLEVBQUluQyxHQUFHbUMsRUFBSTVDLElBQUssSUFHL0M4QixLQUFLd00sY0FBY25CLEdBRXJCckwsS0FBSzJMLDRCQUF5QjlFLEVBUWhDL0csVUFBVWdCLEdBQ1JkLEtBQUswTCxpQkFBbUIxTCxLQUFLeUwsYUFDN0J6TCxLQUFLeUwsYUFBZVQsRUFBdUJsSyxHQUUzQ2QsS0FBS3lNLDRCQUNMek0sS0FBS3VMLHdCQUVMdkwsS0FBSzBNLDBCQUVMMU0sS0FBS3lNLDRCQUNMek0sS0FBS3VMLHdCQVFQekwsb0JBQW9CNk0sRUFBb0I5TyxHQUNwQ21DLEtBQUsyTCx1QkFBeUIzTCxLQUFLc0wsTUFBTTFKLE1BQU1LLFNBQVNwRSxHQUN4RG1DLEtBQUt5TSw0QkFDTHpNLEtBQUt1TCx3QkFNVHpMLFlBSUFBLFlBT0FBLGFBR0FBLDhCRTdLSixJQU9BOE0sRUFDQUMsRUFSQUMsRUFBQWxQLEVBQUFELFdBVUEsU0FBQW9QLElBQ0EsVUFBQUMsTUFBQSxtQ0FFQSxTQUFBQyxJQUNBLFVBQUFELE1BQUEscUNBc0JBLFNBQUFFLEVBQUFDLEdBQ0EsR0FBQVAsSUFBQVEsV0FFQSxPQUFBQSxXQUFBRCxFQUFBLEdBR0EsSUFBQVAsSUFBQUcsSUFBQUgsSUFBQVEsV0FFQSxPQURBUixFQUFBUSxXQUNBQSxXQUFBRCxFQUFBLEdBRUEsSUFFQSxPQUFBUCxFQUFBTyxFQUFBLEdBQ0ssTUFBQUUsR0FDTCxJQUVBLE9BQUFULEVBQUE1TyxLQUFBLEtBQUFtUCxFQUFBLEdBQ1MsTUFBQUUsR0FFVCxPQUFBVCxFQUFBNU8sS0FBQWdDLEtBQUFtTixFQUFBLE1BdkNBLFdBQ0EsSUFFQVAsRUFEQSxtQkFBQVEsV0FDQUEsV0FFQUwsRUFFSyxNQUFBTSxHQUNMVCxFQUFBRyxFQUVBLElBRUFGLEVBREEsbUJBQUFTLGFBQ0FBLGFBRUFMLEVBRUssTUFBQUksR0FDTFIsRUFBQUksR0FqQkEsR0F3RUEsSUFFQU0sRUFGQUMsS0FDQUMsR0FBQSxFQUVBQyxHQUFBLEVBRUEsU0FBQUMsSUFDQUYsR0FBQUYsSUFHQUUsR0FBQSxFQUNBRixFQUFBNU0sT0FDQTZNLEVBQUFELEVBQUFLLE9BQUFKLEdBRUFFLEdBQUEsRUFFQUYsRUFBQTdNLFFBQ0FrTixLQUlBLFNBQUFBLElBQ0EsSUFBQUosRUFBQSxDQUdBLElBQUFLLEVBQUFaLEVBQUFTLEdBQ0FGLEdBQUEsRUFHQSxJQURBLElBQUFsSCxFQUFBaUgsRUFBQTdNLE9BQ0E0RixHQUFBLENBR0EsSUFGQWdILEVBQUFDLEVBQ0FBLE9BQ0FFLEVBQUFuSCxHQUNBZ0gsR0FDQUEsRUFBQUcsR0FBQUssTUFHQUwsR0FBQSxFQUNBbkgsRUFBQWlILEVBQUE3TSxPQUVBNE0sRUFBQSxLQUNBRSxHQUFBLEVBbkVBLFNBQUFPLEdBQ0EsR0FBQW5CLElBQUFTLGFBRUEsT0FBQUEsYUFBQVUsR0FHQSxJQUFBbkIsSUFBQUksSUFBQUosSUFBQVMsYUFFQSxPQURBVCxFQUFBUyxhQUNBQSxhQUFBVSxHQUVBLElBRUFuQixFQUFBbUIsR0FDSyxNQUFBWCxHQUNMLElBRUEsT0FBQVIsRUFBQTdPLEtBQUEsS0FBQWdRLEdBQ1MsTUFBQVgsR0FHVCxPQUFBUixFQUFBN08sS0FBQWdDLEtBQUFnTyxLQWdEQUMsQ0FBQUgsSUFpQkEsU0FBQUksRUFBQWYsRUFBQWdCLEdBQ0FuTyxLQUFBbU4sTUFDQW5OLEtBQUFtTyxRQVlBLFNBQUFDLEtBNUJBdEIsRUFBQXVCLFNBQUEsU0FBQWxCLEdBQ0EsSUFBQW1CLEVBQUEsSUFBQUMsTUFBQUMsVUFBQTdOLE9BQUEsR0FDQSxHQUFBNk4sVUFBQTdOLE9BQUEsRUFDQSxRQUFBOUMsRUFBQSxFQUF1QkEsRUFBQTJRLFVBQUE3TixPQUFzQjlDLElBQzdDeVEsRUFBQXpRLEVBQUEsR0FBQTJRLFVBQUEzUSxHQUdBMlAsRUFBQS9MLEtBQUEsSUFBQXlNLEVBQUFmLEVBQUFtQixJQUNBLElBQUFkLEVBQUE3TSxRQUFBOE0sR0FDQVAsRUFBQVcsSUFTQUssRUFBQXpPLFVBQUFzTyxJQUFBLFdBQ0EvTixLQUFBbU4sSUFBQTlHLE1BQUEsS0FBQXJHLEtBQUFtTyxRQUVBckIsRUFBQTJCLE1BQUEsVUFDQTNCLEVBQUE0QixTQUFBLEVBQ0E1QixFQUFBNkIsT0FDQTdCLEVBQUE4QixRQUNBOUIsRUFBQStCLFFBQUEsR0FDQS9CLEVBQUFnQyxZQUlBaEMsRUFBQWlDLEdBQUFYLEVBQ0F0QixFQUFBa0MsWUFBQVosRUFDQXRCLEVBQUFtQyxLQUFBYixFQUNBdEIsRUFBQW9DLElBQUFkLEVBQ0F0QixFQUFBcUMsZUFBQWYsRUFDQXRCLEVBQUFzQyxtQkFBQWhCLEVBQ0F0QixFQUFBdUMsS0FBQWpCLEVBQ0F0QixFQUFBd0MsZ0JBQUFsQixFQUNBdEIsRUFBQXlDLG9CQUFBbkIsRUFFQXRCLEVBQUEwQyxVQUFBLFNBQUFwUixHQUFxQyxVQUVyQzBPLEVBQUEyQyxRQUFBLFNBQUFyUixHQUNBLFVBQUE0TyxNQUFBLHFDQUdBRixFQUFBNEMsSUFBQSxXQUEyQixXQUMzQjVDLEVBQUE2QyxNQUFBLFNBQUFySixHQUNBLFVBQUEwRyxNQUFBLG1DQUVBRixFQUFBOEMsTUFBQSxXQUE0Qiw0QkN2TDVCLFNBQUE5QyxHQXlCQSxTQUFBK0MsRUFBQUMsRUFBQUMsR0FHQSxJQURBLElBQUFDLEVBQUEsRUFDQW5TLEVBQUFpUyxFQUFBblAsT0FBQSxFQUFnQzlDLEdBQUEsRUFBUUEsSUFBQSxDQUN4QyxJQUFBb1MsRUFBQUgsRUFBQWpTLEdBQ0EsTUFBQW9TLEVBQ0FILEVBQUFJLE9BQUFyUyxFQUFBLEdBQ0ssT0FBQW9TLEdBQ0xILEVBQUFJLE9BQUFyUyxFQUFBLEdBQ0FtUyxLQUNLQSxJQUNMRixFQUFBSSxPQUFBclMsRUFBQSxHQUNBbVMsS0FLQSxHQUFBRCxFQUNBLEtBQVVDLElBQU1BLEVBQ2hCRixFQUFBSyxRQUFBLE1BSUEsT0FBQUwsRUFLQSxJQUFBTSxFQUNBLGdFQUNBQyxFQUFBLFNBQUFDLEdBQ0EsT0FBQUYsRUFBQUcsS0FBQUQsR0FBQUUsTUFBQSxJQXVKQSxTQUFBQyxFQUFBQyxFQUFBQyxHQUNBLEdBQUFELEVBQUFELE9BQUEsT0FBQUMsRUFBQUQsT0FBQUUsR0FFQSxJQURBLElBQUFDLEtBQ0EvUyxFQUFBLEVBQW1CQSxFQUFBNlMsRUFBQS9QLE9BQWU5QyxJQUNsQzhTLEVBQUFELEVBQUE3UyxLQUFBNlMsSUFBQUUsRUFBQW5QLEtBQUFpUCxFQUFBN1MsSUFFQSxPQUFBK1MsRUF4SkFqVCxFQUFBa1QsUUFBQSxXQUlBLElBSEEsSUFBQUMsRUFBQSxHQUNBQyxHQUFBLEVBRUFsVCxFQUFBMlEsVUFBQTdOLE9BQUEsRUFBb0M5QyxJQUFBLElBQUFrVCxFQUE4QmxULElBQUEsQ0FDbEUsSUFBQW1ULEVBQUFuVCxHQUFBLEVBQUEyUSxVQUFBM1EsR0FBQWlQLEVBQUE0QyxNQUdBLG9CQUFBc0IsRUFDQSxVQUFBQyxVQUFBLDZDQUNLRCxJQUlMRixFQUFBRSxFQUFBLElBQUFGLEVBQ0FDLEVBQUEsTUFBQUMsRUFBQUUsT0FBQSxJQVdBLE9BSkFKLEVBQUFqQixFQUFBWSxFQUFBSyxFQUFBSyxNQUFBLGNBQUF4UixHQUNBLFFBQUFBLEtBQ0dvUixHQUFBSyxLQUFBLE1BRUhMLEVBQUEsUUFBQUQsR0FBQSxLQUtBblQsRUFBQTBULFVBQUEsU0FBQUwsR0FDQSxJQUFBTSxFQUFBM1QsRUFBQTJULFdBQUFOLEdBQ0FPLEVBQUEsTUFBQUMsRUFBQVIsR0FBQSxHQWNBLE9BWEFBLEVBQUFuQixFQUFBWSxFQUFBTyxFQUFBRyxNQUFBLGNBQUF4UixHQUNBLFFBQUFBLEtBQ0cyUixHQUFBRixLQUFBLE9BRUhFLElBQ0FOLEVBQUEsS0FFQUEsR0FBQU8sSUFDQVAsR0FBQSxNQUdBTSxFQUFBLFFBQUFOLEdBSUFyVCxFQUFBMlQsV0FBQSxTQUFBTixHQUNBLFlBQUFBLEVBQUFFLE9BQUEsSUFJQXZULEVBQUF5VCxLQUFBLFdBQ0EsSUFBQUssRUFBQWxELE1BQUE5TyxVQUFBK1EsTUFBQXhTLEtBQUF3USxVQUFBLEdBQ0EsT0FBQTdRLEVBQUEwVCxVQUFBWixFQUFBZ0IsRUFBQSxTQUFBOVIsRUFBQStSLEdBQ0Esb0JBQUEvUixFQUNBLFVBQUFzUixVQUFBLDBDQUVBLE9BQUF0UixJQUNHeVIsS0FBQSxPQU1IelQsRUFBQWdVLFNBQUEsU0FBQUMsRUFBQUMsR0FJQSxTQUFBOUwsRUFBQXZFLEdBRUEsSUFEQSxJQUFBc1EsRUFBQSxFQUNVQSxFQUFBdFEsRUFBQWIsUUFDVixLQUFBYSxFQUFBc1EsR0FEOEJBLEtBSzlCLElBREEsSUFBQUMsRUFBQXZRLEVBQUFiLE9BQUEsRUFDVW9SLEdBQUEsR0FDVixLQUFBdlEsRUFBQXVRLEdBRG9CQSxLQUlwQixPQUFBRCxFQUFBQyxLQUNBdlEsRUFBQWdQLE1BQUFzQixFQUFBQyxFQUFBRCxFQUFBLEdBZkFGLEVBQUFqVSxFQUFBa1QsUUFBQWUsR0FBQUosT0FBQSxHQUNBSyxFQUFBbFUsRUFBQWtULFFBQUFnQixHQUFBTCxPQUFBLEdBc0JBLElBTEEsSUFBQVEsRUFBQWpNLEVBQUE2TCxFQUFBVCxNQUFBLE1BQ0FjLEVBQUFsTSxFQUFBOEwsRUFBQVYsTUFBQSxNQUVBeFEsRUFBQTZGLEtBQUEwTCxJQUFBRixFQUFBclIsT0FBQXNSLEVBQUF0UixRQUNBd1IsRUFBQXhSLEVBQ0E5QyxFQUFBLEVBQWlCQSxFQUFBOEMsRUFBWTlDLElBQzdCLEdBQUFtVSxFQUFBblUsS0FBQW9VLEVBQUFwVSxHQUFBLENBQ0FzVSxFQUFBdFUsRUFDQSxNQUlBLElBQUF1VSxLQUNBLElBQUF2VSxFQUFBc1UsRUFBK0J0VSxFQUFBbVUsRUFBQXJSLE9BQXNCOUMsSUFDckR1VSxFQUFBM1EsS0FBQSxNQUtBLE9BRkEyUSxJQUFBeEUsT0FBQXFFLEVBQUF6QixNQUFBMkIsS0FFQWYsS0FBQSxNQUdBelQsRUFBQTBVLElBQUEsSUFDQTFVLEVBQUEyVSxVQUFBLElBRUEzVSxFQUFBNFUsUUFBQSxTQUFBdkIsR0FDQSxJQUFBd0IsRUFBQW5DLEVBQUFXLEdBQ0F5QixFQUFBRCxFQUFBLEdBQ0FsTSxFQUFBa00sRUFBQSxHQUVBLE9BQUFDLEdBQUFuTSxHQUtBQSxJQUVBQSxJQUFBa0wsT0FBQSxFQUFBbEwsRUFBQTNGLE9BQUEsSUFHQThSLEVBQUFuTSxHQVJBLEtBWUEzSSxFQUFBK1UsU0FBQSxTQUFBMUIsRUFBQTJCLEdBQ0EsSUFBQWhDLEVBQUFOLEVBQUFXLEdBQUEsR0FLQSxPQUhBMkIsR0FBQWhDLEVBQUFhLFFBQUEsRUFBQW1CLEVBQUFoUyxVQUFBZ1MsSUFDQWhDLElBQUFhLE9BQUEsRUFBQWIsRUFBQWhRLE9BQUFnUyxFQUFBaFMsU0FFQWdRLEdBSUFoVCxFQUFBaVYsUUFBQSxTQUFBNUIsR0FDQSxPQUFBWCxFQUFBVyxHQUFBLElBYUEsSUFBQVEsRUFBQSxXQUFBQSxRQUFBLEdBQ0EsU0FBQXFCLEVBQUFmLEVBQUF2TCxHQUFrQyxPQUFBc00sRUFBQXJCLE9BQUFNLEVBQUF2TCxJQUNsQyxTQUFBc00sRUFBQWYsRUFBQXZMLEdBRUEsT0FEQXVMLEVBQUEsSUFBQUEsRUFBQWUsRUFBQWxTLE9BQUFtUixHQUNBZSxFQUFBckIsT0FBQU0sRUFBQXZMIiwiZmlsZSI6Ii4vZGlzdC9idW5kbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCJleHBvcnQgaW50ZXJmYWNlIEJveCB7XG4gIHI6IG51bWJlcjtcbiAgYzogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBpZWNlIHtcbiAgbmFtZTogc3RyaW5nO1xuICBjb2xvcjogc3RyaW5nO1xuICBnZXRQb3NzaWJsZU1vdmVzOiAoZ2FtZVN0YXRlOiBHYW1lU3RhdGUsIHNyYzogQm94LCBudW1Nb3Zlcz86IG51bWJlcikgPT4gKGRzdDogQm94KSA9PiBib29sZWFuO1xufVxuXG5leHBvcnQgY2xhc3MgRW1wdHlQaWVjZSBpbXBsZW1lbnRzIFBpZWNlIHtcbiAgcHVibGljIG5hbWU6IHN0cmluZztcbiAgcHVibGljIGNvbG9yOiBzdHJpbmc7XG4gIHB1YmxpYyBnZXRQb3NzaWJsZU1vdmVzOiAoZ2FtZVN0YXRlOiBHYW1lU3RhdGUsIHNyYzogQm94LCBudW1Nb3Zlcz86IG51bWJlcikgPT4gKGRzdDogQm94KSA9PiBib29sZWFuO1xuICBjb25zdHJ1Y3Rvcihjb2xvciA9ICdibGFuaycpIHtcbiAgICB0aGlzLm5hbWUgPSAnZW1wdHknO1xuICAgIHRoaXMuY29sb3IgPSBjb2xvcjtcbiAgICB0aGlzLmdldFBvc3NpYmxlTW92ZXMgPSAoZ2FtZVN0YXRlOiBHYW1lU3RhdGUsIHNyYzogQm94LCBudW1Nb3Zlcz86IG51bWJlcikgPT4ge1xuICAgICAgY29uc3QgaXNQb3NzaWJsZVRvTW92ZVRvID0gKGRzdDogQm94KSA9PiBmYWxzZTtcbiAgICAgIHJldHVybiBpc1Bvc3NpYmxlVG9Nb3ZlVG87XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQHR5cGVkZWYge3tib2FyZDogQXJyYXk8QXJyYXk8c3RyaW5nPj4sIG51bVJvd3M6IG51bWJlciwgbnVtQ29sczogbnVtYmVyLCBwbGF5ZXJXaGl0ZTogbnVtYmVyLCBwbGF5ZXJCbGFjazogbnVtYmVyLCBwbGF5ZXI6IG51bWJlcn19XG4gKi9cbi8vIGV4cG9ydCBpbnRlcmZhY2UgR2FtZVN0YXRlIHtcbi8vICAgYm9hcmQ6IEFycmF5PEFycmF5PHN0cmluZz4+LCBwbGF5ZXI6IFBsYXllciwgZ2V0RW5jb2Rpbmc6ICgoYm94OiBCb3gpID0+IHN0cmluZyk7XG4vLyB9O1xuXG5leHBvcnQgY2xhc3MgQm9hcmQge1xuICBwcml2YXRlIF9ib2FyZDogQXJyYXk8QXJyYXk8c3RyaW5nPj47XG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb24gQ3JlYXRlcyBhIGNvcHkgb2YgYSBib2FyZCAod2hpY2ggY2FuIGJlIHNhZmVseSBtdXRhdGVkIGluIEZQIHBhcmFkaWdtKS5cbiAgICovXG4gIHB1YmxpYyBnZXQgYm9hcmQoKTogQXJyYXk8QXJyYXk8c3RyaW5nPj4ge1xuICAgIGNvbnN0IGJvYXJkQ29weSA9IE9iamVjdC5hc3NpZ24oW10sIHRoaXMuX2JvYXJkKTtcbiAgICByZXR1cm4gYm9hcmRDb3B5O1xuICB9XG4gIHB1YmxpYyBnZXQgcmFua0NvdW50KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX2JvYXJkLmxlbmd0aDtcbiAgfVxuICBwdWJsaWMgZ2V0IGZpbGVDb3VudCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9ib2FyZFswXS5sZW5ndGggPiAwID8gdGhpcy5fYm9hcmRbMF0ubGVuZ3RoIDogMTtcbiAgfVxuICAvLyBwcm90ZWN0ZWQgc2V0IGJvYXJkKGJvYXJkOiBBcnJheTxBcnJheTxzdHJpbmc+Pikge1xuICAvLyAgIHRoaXMuX2JvYXJkID0gYm9hcmQ7XG4gIC8vIH1cbiAgcHVibGljIHJlYWRvbmx5IGdldEVuY29kaW5nOiAoYm94OiBCb3gpID0+IHN0cmluZztcbiAgcHVibGljIHJlYWRvbmx5IHNldEVuY29kaW5nOiAoYm94OiBCb3gsIGVuYzogc3RyaW5nKSA9PiB2b2lkO1xuICBjb25zdHJ1Y3Rvcihib2FyZD86IEFycmF5PEFycmF5PHN0cmluZz4+fEJvYXJkICkge1xuICAgIGlmIChib2FyZCBpbnN0YW5jZW9mIEJvYXJkKSB0aGlzLl9ib2FyZCA9IGJvYXJkLl9ib2FyZDtcbiAgICBlbHNlIGlmIChib2FyZCkgdGhpcy5fYm9hcmQgPSBib2FyZDtcbiAgICBlbHNlIHRoaXMuX2JvYXJkID0gW1xuICAgICAgWydyMCcsJ2gwJywnYjAnLCdxMCcsJ2swJywnYjAnLCdoMCcsJ3IwJ10sIC8vIGxvd2VyIGNhc2U6IGJsYWNrIHBpZWNlc1xuICAgICAgWydwMCcsJ3AwJywncDAnLCdwMCcsJ3AwJywncDAnLCdwMCcsJ3AwJ10sXG4gICAgICBbJyAnLCcgJywnICcsJyAnLCcgJywnICcsJyAnLCcgJ10sXG4gICAgICBbJyAnLCcgJywnICcsJyAnLCcgJywnICcsJyAnLCcgJ10sXG4gICAgICBbJyAnLCcgJywnICcsJyAnLCcgJywnICcsJyAnLCcgJ10sXG4gICAgICBbJyAnLCcgJywnICcsJyAnLCcgJywnICcsJyAnLCcgJ10sXG4gICAgICBbJ1AwJywnUDAnLCdQMCcsJ1AwJywnUDAnLCdQMCcsJ1AwJywnUDAnXSwgLy8gdXBwZXIgY2FzZTogd2hpdGUgcGllY2VzXG4gICAgICBbJ1IwJywnSDAnLCdCMCcsJ1EwJywnSzAnLCdCMCcsJ0gwJywnUjAnXSBdO1xuICAgIHRoaXMuZ2V0RW5jb2RpbmcgPSAoYm94OiBCb3gpOiBzdHJpbmcgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuX2JvYXJkW2JveC5yXVtib3guY107XG4gICAgfVxuICAgIHRoaXMuc2V0RW5jb2RpbmcgPSAoYm94OiBCb3gsIGVuYzogc3RyaW5nKTogdm9pZCA9PiB7XG4gICAgICBpZiAoYm94LnIgPiAtMSAmJiBib3guciA8IHRoaXMuX2JvYXJkLmxlbmd0aCAmJiBib3guYyA+IC0xICYmIGJveC5jIDwgdGhpcy5fYm9hcmRbMF0ubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuX2JvYXJkW2JveC5yXVtib3guY10gPSBlbmM7XG4gICAgICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnVEVTVCcpIHtcbiAgICAgICAgY29uc29sZS53YXJuKCd0aGlzLl9ib2FyZC5sZW5ndGgnLCB0aGlzLl9ib2FyZC5sZW5ndGgpO1xuICAgICAgICBjb25zb2xlLndhcm4oJ3RoaXMuX2JvYXJkWzBdLmxlbmd0aCcsIHRoaXMuX2JvYXJkWzBdLmxlbmd0aCk7XG4gICAgICAgIGNvbnNvbGUud2FybihgQXR0ZW1wdGluZyB0byBpbmNvcnJlY3RseSBzZXQgZW5jb2RpbmcgKCR7ZW5jfSkgdG8gYm9hcmQgYXQgYm94ICh7cjogJHtib3gucn0sIGM6ICR7Ym94LmN9fSkuIEZvciBib2FyZCB0aGUgZm9sbG93aW5nIGJvYXJkICR7SlNPTi5zdHJpbmdpZnkodGhpcy5fYm9hcmQpfS4gUGxlYXNlIGZpeCB0aGlzIGJ1Zy5gKTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG59O1xuXG4vKipcbiAqIEBmdW5jdGlvblxuICogQHJldHVybnMge0dhbWVTdGF0ZX1cbiAqL1xuZXhwb3J0IGNsYXNzIEdhbWVTdGF0ZSB7XG4gIHByaXZhdGUgX2JvYXJkOiBCb2FyZDtcbiAgcHJpdmF0ZSBfcGxheWVyOiBQbGF5ZXI7XG4gIC8vIHByaXZhdGUgc2V0RW5jb2Rpbmc7IC8vIGhpZGUgXG4gIHB1YmxpYyByZWFkb25seSBnZXRFbmNvZGluZzogKGJveDogQm94KSA9PiBzdHJpbmc7XG4gIGdldCBwbGF5ZXIoKTogUGxheWVyIHtcbiAgICByZXR1cm4gdGhpcy5fcGxheWVyO1xuICB9XG4gIHNldCBwbGF5ZXIobmV3UGxheWVyOiBQbGF5ZXIpIHtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdURVNUJykge1xuICAgICAgY29uc29sZS53YXJuKGBwbGF5ZXIgaXMgYmVpbmcgY2hhbmdlZCBmcm9tIFBsYXllciAke3RoaXMuX3BsYXllcn0gdG8gUGxheWVyICR7bmV3UGxheWVyfS5gKTtcbiAgICB9XG4gICAgdGhpcy5fcGxheWVyID0gbmV3UGxheWVyO1xuICB9XG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb24gQ3JlYXRlcyBhIGNvcHkgb2YgYSBib2FyZCAod2hpY2ggY2FuIGJlIHNhZmVseSBtdXRhdGVkIGluIEZQIHBhcmFkaWdtKS5cbiAgICovXG4gIGdldCBib2FyZCgpOiBBcnJheTxBcnJheTxzdHJpbmc+PiB7XG4gICAgcmV0dXJuIHRoaXMuX2JvYXJkLmJvYXJkO1xuICB9XG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb24gTnVtYmVyIG9mICdyb3dzJyBvbiBjaGVzc2JvYXJkLlxuICAgKi9cbiAgcHVibGljIHJlYWRvbmx5IHJhbmtDb3VudDogbnVtYmVyO1xuICAvKipcbiAgICogQGRlc2NyaXB0aW9uIE51bWJlciBvZiAnY29sdW1ucycgb24gY2hlc3Nib2FyZC5cbiAgICovXG4gIHB1YmxpYyByZWFkb25seSBmaWxlQ291bnQ6IG51bWJlcjtcbiAgY29uc3RydWN0b3IoYm9hcmQ/OiBCb2FyZHxBcnJheTxBcnJheTxzdHJpbmc+Pikge1xuICAgIHRoaXMuX2JvYXJkID0gbmV3IEJvYXJkKGJvYXJkKTtcbiAgICB0aGlzLmdldEVuY29kaW5nID0gKGJveDogQm94KTogc3RyaW5nID0+IHtcbiAgICAgIHJldHVybiB0aGlzLl9ib2FyZC5nZXRFbmNvZGluZyhib3gpO1xuICAgIH1cbiAgICB0aGlzLl9wbGF5ZXIgPSBQTEFZRVJfV0hJVEU7XG4gICAgdGhpcy5yYW5rQ291bnQgPSB0aGlzLl9ib2FyZC5yYW5rQ291bnQ7XG4gICAgdGhpcy5maWxlQ291bnQgPSB0aGlzLl9ib2FyZC5maWxlQ291bnQ7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFN0b3JlU3RhdGUge1xuICBwdWJsaWMgZ2FtZVN0YXRlOiBHYW1lU3RhdGU7XG4gIHB1YmxpYyBzZWxlY3RlZEJveGVzOiBBcnJheTxBcnJheTxib29sZWFuPj47XG4gIHB1YmxpYyBwb3NzaWJsZURlc3RCb3hlczogQXJyYXk8QXJyYXk8Ym9vbGVhbj4+O1xuICBwdWJsaWMgcHJldk1vdmU6IHsgc3JjOiBCb3gsIGRzdDogQm94IH07XG4gIHB1YmxpYyBjYXB0dXJlczogQXJyYXk8UGllY2U+O1xuICBwdWJsaWMgc2VsZWN0ZWRDYXB0dXJlczogQXJyYXk8Ym9vbGVhbj47XG4gIHB1YmxpYyBib2FyZDogQXJyYXk8QXJyYXk8UGllY2U+PjtcbiAgcHJpdmF0ZSBhcnJheTJkKGQ6IG51bWJlciwgdjogYW55KTogQXJyYXk8QXJyYXk8YW55Pj4ge1xuICAgIGNvbnN0IGFyciA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZDsgaSsrKSB7XG4gICAgICBhcnIucHVzaChbXSk7XG4gICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGQ7IGorKykge1xuICAgICAgICBhcnJbaV0ucHVzaCh2KTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGFycjtcbiAgfVxuICBwdWJsaWMgaW5pdGlhbGl6ZUZhbHNlR3JpZChkOiBudW1iZXIpOiBBcnJheTxBcnJheTxib29sZWFuPj4ge1xuICAgIHJldHVybiB0aGlzLmFycmF5MmQoZCwgZmFsc2UpO1xuICB9XG4gIGNvbnN0cnVjdG9yKHN0YXRlPzogU3RvcmVTdGF0ZSkge1xuICAgIHRoaXMuZ2FtZVN0YXRlID0gc3RhdGUgPyBzdGF0ZS5nYW1lU3RhdGUgOiBuZXcgR2FtZVN0YXRlO1xuICAgIHRoaXMuc2VsZWN0ZWRCb3hlcyA9IHN0YXRlID8gc3RhdGUuc2VsZWN0ZWRCb3hlcyA6IHRoaXMuaW5pdGlhbGl6ZUZhbHNlR3JpZCg4KTtcbiAgICB0aGlzLnBvc3NpYmxlRGVzdEJveGVzID0gc3RhdGUgPyBzdGF0ZS5wb3NzaWJsZURlc3RCb3hlcyA6IHRoaXMuaW5pdGlhbGl6ZUZhbHNlR3JpZCg4KTtcbiAgICB0aGlzLnByZXZNb3ZlID0gc3RhdGUgPyBzdGF0ZS5wcmV2TW92ZSA6IHsgc3JjOiB7IHI6IC0xLCBjOiAtMSB9LCBkc3Q6IHsgcjogLTEsIGM6IC0xIH19O1xuICAgIHRoaXMuY2FwdHVyZXMgPSBzdGF0ZSA/IHN0YXRlLmNhcHR1cmVzIDogW107XG4gICAgdGhpcy5zZWxlY3RlZENhcHR1cmVzID0gc3RhdGUgPyBzdGF0ZS5zZWxlY3RlZENhcHR1cmVzIDogW107XG4gICAgdGhpcy5ib2FyZCA9IHN0YXRlID8gc3RhdGUuYm9hcmQgOiBbXTtcbiAgfVxufVxuXG4vKipcbiAqIEB0eXBlZGVmIHshbnVtYmVyfVxuICovXG5leHBvcnQgdHlwZSBQbGF5ZXIgPSBudW1iZXI7XG5cbi8qKlxuICogQHR5cGUgeyFQbGF5ZXJ9XG4gKi9cbmV4cG9ydCBjb25zdCBQTEFZRVJfV0hJVEU6IFBsYXllciA9IDA7XG5cbi8qKlxuICogQHR5cGUgeyFQbGF5ZXJ9XG4gKi9cbmV4cG9ydCBjb25zdCBQTEFZRVJfQkxBQ0s6IFBsYXllciA9IDE7XG5cbi8qKlxuICogQHR5cGVkZWYgeyFBcnJheTxCb3g+fVxuICovXG4vLyBleHBvcnQgdHlwZSBCb2FyZCA9IEFycmF5PEJveD47IiwiaW1wb3J0IHsgQm94LCBQaWVjZSwgRW1wdHlQaWVjZSwgR2FtZVN0YXRlLCBCb2FyZCwgU3RvcmVTdGF0ZSB9IGZyb20gJy4uL3R5cGVzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3RvcmUge1xuICBwcml2YXRlIHJlYWRvbmx5IF9zdGF0ZTogU3RvcmVTdGF0ZTtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5fc3RhdGUgPSBuZXcgU3RvcmVTdGF0ZTtcbiAgfVxuICBwdWJsaWMgZ2V0IHN0YXRlKCkge1xuICAgIHJldHVybiB0aGlzLl9zdGF0ZTtcbiAgfVxuICBwdWJsaWMgc2V0IHN0YXRlKHN0YXRlOiBTdG9yZVN0YXRlKSB7XG4gICAgdGhpcy5fc3RhdGUuZ2FtZVN0YXRlID0gc3RhdGUuZ2FtZVN0YXRlID8gc3RhdGUuZ2FtZVN0YXRlIDogdGhpcy5fc3RhdGUuZ2FtZVN0YXRlO1xuICAgIHRoaXMuX3N0YXRlLmJvYXJkID0gc3RhdGUuYm9hcmQgPyBzdGF0ZS5ib2FyZCA6IHRoaXMuX3N0YXRlLmJvYXJkO1xuICAgIHRoaXMuX3N0YXRlLnNlbGVjdGVkQm94ZXMgPSBzdGF0ZS5zZWxlY3RlZEJveGVzID8gc3RhdGUuc2VsZWN0ZWRCb3hlcyA6IHRoaXMuX3N0YXRlLnNlbGVjdGVkQm94ZXM7XG4gICAgdGhpcy5fc3RhdGUucG9zc2libGVEZXN0Qm94ZXMgPSBzdGF0ZS5wb3NzaWJsZURlc3RCb3hlcyA/IHN0YXRlLnBvc3NpYmxlRGVzdEJveGVzIDogdGhpcy5fc3RhdGUucG9zc2libGVEZXN0Qm94ZXM7XG4gICAgdGhpcy5fc3RhdGUucHJldk1vdmUgPSBzdGF0ZS5wcmV2TW92ZSA/IHN0YXRlLnByZXZNb3ZlIDogdGhpcy5fc3RhdGUucHJldk1vdmU7XG4gICAgdGhpcy5fc3RhdGUuY2FwdHVyZXMgPSBzdGF0ZS5jYXB0dXJlcyA/IHN0YXRlLmNhcHR1cmVzIDogdGhpcy5fc3RhdGUuY2FwdHVyZXM7XG4gICAgdGhpcy5fc3RhdGUuc2VsZWN0ZWRDYXB0dXJlcyA9IHN0YXRlLnNlbGVjdGVkQ2FwdHVyZXMgPyBzdGF0ZS5zZWxlY3RlZENhcHR1cmVzIDogdGhpcy5fc3RhdGUuc2VsZWN0ZWRDYXB0dXJlcztcbiAgfVxufSIsIi8vIFRoaXMgZmlsZSwgYXMgd2l0aCBtb3N0IG9mIGZyb250X2VuZCwgaXMgaW5zcGlyZWQgYnkgYW5kIG1vc3RseSB0YWtlbiBmcm9tIFRvZG9NVkMvdmFuaWxsYS1lczZcbi8vIHJlc3BlY3Q6IGh0dHBzOi8vZ2l0aHViLmNvbS90YXN0ZWpzL3RvZG9tdmMvdHJlZS9naC1wYWdlcy9leGFtcGxlcy92YW5pbGxhLWVzNlxuXG4vKipcbiAqIEBkZXNjcmlwdGlvbiBxdWVyeVNlbGVjdG9yIHdyYXBwZXJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHFzKHNlbGVjdG9yOiBzdHJpbmcsIHNjb3BlPzogRWxlbWVudCkge1xuICAgIHJldHVybiAoc2NvcGUgfHwgZG9jdW1lbnQpLnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3IpO1xufVxuXG4vKipcbiAqIEBkZXNjcmlwdGlvbiBhZGRFdmVudExpc3RlbmVyIHdyYXBwZXJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uICRvbih0YXJnZXQ6IEVsZW1lbnQgfCBXaW5kb3csIHR5cGU6IHN0cmluZywgY2FsbGJhY2s6IEV2ZW50TGlzdGVuZXJPckV2ZW50TGlzdGVuZXJPYmplY3QsIGNhcHR1cmU/OiBib29sZWFuIHwgQWRkRXZlbnRMaXN0ZW5lck9wdGlvbnMpOiB2b2lkIHsgLy8gQHRvZG8gZml4IGNhbGxiYWNrIHR5cGVcbiAgICB0YXJnZXQuYWRkRXZlbnRMaXN0ZW5lcih0eXBlLCBjYWxsYmFjaywgISFjYXB0dXJlKTtcbn1cblxuLyoqXG4gKiBBdHRhY2ggYSBoYW5kbGVyIHRvIGFuIGV2ZW50IGZvciBhbGwgZWxlbWVudHMgbWF0Y2hpbmcgYSBzZWxlY3RvclxuICogXG4gKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldCBFbGVtZW50IHdoaWNoIHRoZSBldmVudCBtdXN0IGJ1YmJsZSB0b1xuICovXG4vLyAuLi4uXG5cbi8qKlxuICogQGRlc2NyaXB0aW9uIEVuY29kZSBsZXNzLXRoYW4gYW5kIGFtcGVyc2FuZCBjaGFyYWN0ZXJzIHdpdGggSFRNTC1zYWZlIHZlcnNpb25zLlxuICogQHBhcmFtIHtzdHJpbmd9IHMgU3RyaW5nIHRvIGVzY2FwZVxuICogQHJldHVybnMge3N0cmluZ30gU3RyaW5nIHdpdGggdW5zYWZlIGNoYXJhY3RlcnMgZXNjYXBlZC5cbiAqL1xuZXhwb3J0IGNvbnN0IGVzY2FwZUZvckhUTUwgPSAoczogc3RyaW5nKTogc3RyaW5nID0+IHMucmVwbGFjZSgvWyY8XS9nLCBjID0+IGMgPT09ICcmJyA/ICcmYW1wOycgOiAnJmx0OycpOyIsImltcG9ydCB7IEJvYXJkLCBQaWVjZSwgU3RvcmVTdGF0ZSB9IGZyb20gJy4uL3R5cGVzJztcblxuaW1wb3J0IHsgZXNjYXBlRm9ySFRNTCB9IGZyb20gJy4vaGVscGVycyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRlbXBsYXRlIHtcbiAgICAvKipcbiAgICAgKiBGb3JtYXQgdGhlIGNvbnRlbnQgb2YgdGhlIGJvYXJkIGJ5OlxuICAgICAqIDEpIENyZWF0aW5nIGVhY2ggYm94IGluIGEgdGFibGUgcmVwcmVzZW50YXRpb247XG4gICAgICogMikgUGxhY2luZyBlYWNoIHBpZWNlIGluIGl0cyBjb3JyZXNwb25kaW5nIGJveC5cbiAgICAgKi9cbiAgICBCb2FyZChzdGF0ZTogU3RvcmVTdGF0ZSk6IEVsZW1lbnQge1xuICAgICAgICBjb25zdCBwaWVjZXM6IEFycmF5PEFycmF5PFBpZWNlPj4gPSBzdGF0ZS5ib2FyZDtcbiAgICAgICAgbGV0IGJvYXJkID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYm9hcmQnKTtcbiAgICAgICAgbGV0IGJveFBvcyA9IDA7XG4gICAgICAgIGZvciAobGV0IHIgPSAwOyByIDwgODsgcisrKSB7XG4gICAgICAgICAgICBsZXQgdHIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpO1xuICAgICAgICAgICAgZm9yIChsZXQgYyA9IDA7IGMgPCA4OyBjKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgdGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZCcpO1xuICAgICAgICAgICAgICAgIHRkLnNldEF0dHJpYnV0ZSgnZGF0YS1wb3MnLCBTdHJpbmcoYm94UG9zKSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcGllY2UgPSBwaWVjZXNbcl1bY107XG4gICAgICAgICAgICAgICAgdGQuc2V0QXR0cmlidXRlKCdwaWVjZScsIEpTT04uc3RyaW5naWZ5KHBpZWNlKSk7XG4gICAgICAgICAgICAgICAgaWYgKHBpZWNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGxldCBwaWVjZURpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgICAgICAgICAgICBwaWVjZURpdi5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgcGllY2UuY29sb3IgKyBwaWVjZS5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgdGQuYXBwZW5kQ2hpbGQocGllY2VEaXYpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUuc2VsZWN0ZWRCb3hlc1tyXVtjXSkge1xuICAgICAgICAgICAgICAgICAgICB0ZC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ3NlbGVjdGVkJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChzdGF0ZS5wb3NzaWJsZURlc3RCb3hlc1tyXVtjXSkge1xuICAgICAgICAgICAgICAgICAgICB0ZC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ3Bvc3NpYmxlRGVzdCcpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0ci5hcHBlbmRDaGlsZCh0ZCk7XG4gICAgICAgICAgICAgICAgYm94UG9zKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBib2FyZC5hcHBlbmRDaGlsZCh0cik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGJvYXJkO1xuICAgIH1cbiAgICBDYXB0dXJlZCh0eXBlOiBzdHJpbmcsIHN0YXRlOiBTdG9yZVN0YXRlKTogRWxlbWVudCB7XG4gICAgICAgIGNvbnN0IGNhcHR1cmVzID0gc3RhdGUuY2FwdHVyZXM7XG4gICAgICAgIGNvbnN0IHNlbGVjdGVkQ2FwdHVyZXMgPSBzdGF0ZS5zZWxlY3RlZENhcHR1cmVzO1xuICAgICAgICBsZXQgdHIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0cicpO1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNhcHR1cmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBwaWVjZSA9IGNhcHR1cmVzW2ldO1xuICAgICAgICAgICAgaWYgKHBpZWNlLmNvbG9yICYmIHBpZWNlLmNvbG9yLmluZGV4T2YodHlwZSkgPT0gMCkge1xuICAgICAgICAgICAgICAgIGxldCB0ZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJyk7XG4gICAgICAgICAgICAgICAgbGV0IHBpZWNlRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICAgICAgcGllY2VEaXYuc2V0QXR0cmlidXRlKCdjbGFzcycsIHBpZWNlLmNvbG9yICsgcGllY2UubmFtZSk7XG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkQ2FwdHVyZXNbaV0pIHtcbiAgICAgICAgICAgICAgICAgICAgcGllY2VEaXYuc2V0QXR0cmlidXRlKCdjbGFzcycsIHBpZWNlLmNvbG9yICsgcGllY2UubmFtZSArICcgc2VsZWN0ZWRDYXB0dXJlJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRkLmFwcGVuZENoaWxkKHBpZWNlRGl2KTtcbiAgICAgICAgICAgICAgICB0ci5hcHBlbmRDaGlsZCh0ZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRyO1xuXG4gICAgfVxuICAgIENhcHR1cmVkV2hpdGUoc3RhdGU6IFN0b3JlU3RhdGUpOiBFbGVtZW50IHtcbiAgICAgICAgcmV0dXJuIHRoaXMuQ2FwdHVyZWQoJ3doaXRlJywgc3RhdGUpO1xuICAgIH1cbiAgICBDYXB0dXJlZEJsYWNrKHN0YXRlOiBTdG9yZVN0YXRlKTogRWxlbWVudCB7XG4gICAgICAgIHJldHVybiB0aGlzLkNhcHR1cmVkKCdibGFjaycsIHN0YXRlKTtcbiAgICB9XG59IiwiaW1wb3J0IHsgQm9hcmQsIEJveCwgUGllY2UsIFN0b3JlU3RhdGUgfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgeyBxcywgJG9uIH0gZnJvbSAnLi9oZWxwZXJzJztcbmltcG9ydCBUZW1wbGF0ZSBmcm9tICcuL3RlbXBsYXRlJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVmlldyB7XG4gICAgcHJpdmF0ZSBfdGVtcGxhdGU6IFRlbXBsYXRlO1xuICAgIHByaXZhdGUgXyRib2FyZDogRWxlbWVudDtcbiAgICBwcml2YXRlIF8kY2FwdHVyZWR3aGl0ZTogRWxlbWVudDtcbiAgICBwcml2YXRlIF8kY2FwdHVyZWRibGFjazogRWxlbWVudDtcbiAgICBwcml2YXRlIF8kbWFpbjogRWxlbWVudDtcbiAgICBwcml2YXRlIF8kdW5kb2J0bjogRWxlbWVudDtcbiAgICBwcml2YXRlIF8kcmVkb2J0bjogRWxlbWVudDtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLl90ZW1wbGF0ZSA9IG5ldyBUZW1wbGF0ZTtcbiAgICAgICAgdGhpcy5fJGJvYXJkID0gcXMoJy5jaGVzc2JvYXJkJyk7XG4gICAgICAgIHRoaXMuXyRjYXB0dXJlZHdoaXRlID0gcXMoJy5jYXB0dXJlZHdoaXRlJyk7XG4gICAgICAgIHRoaXMuXyRjYXB0dXJlZGJsYWNrID0gcXMoJy5jYXB0dXJlZGJsYWNrJyk7XG4gICAgICAgIHRoaXMuXyRtYWluID0gcXMoJy5tYWluJyk7XG4gICAgICAgIHRoaXMuXyR1bmRvYnRuID0gcXMoJy51bmRvJyk7XG4gICAgICAgIHRoaXMuXyRyZWRvYnRuID0gcXMoJy5yZWRvJyk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldCAkYm9hcmQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl8kYm9hcmQ7XG4gICAgfVxuICAgIHB1YmxpYyBnZXQgJGNhcHR1cmVkd2hpdGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl8kY2FwdHVyZWR3aGl0ZTtcbiAgICB9XG4gICAgcHVibGljIGdldCAkY2FwdHVyZWRibGFjaygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuXyRjYXB0dXJlZGJsYWNrO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBkZXNjcmlwdGlvbiBVcGRhdGVzIHRoZSBjaGVzc2JvYXJkIGh0bWwuXG4gICAgICovXG4gICAgc2hvd0JvYXJkKHN0YXRlOiBTdG9yZVN0YXRlKTogdm9pZCB7XG4gICAgICAgIHRoaXMuJGJvYXJkLnJlcGxhY2VDaGlsZCh0aGlzLl90ZW1wbGF0ZS5Cb2FyZChzdGF0ZSksIHRoaXMuJGJvYXJkLmZpcnN0Q2hpbGQpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBkZXNjcmlwdGlvbiBVcGRhdGVzIHRoZSBjYXB0dXJlZCBwaWVjZXMgaW4gdGhlIGh0bWwuXG4gICAgICovXG4gICAgc2hvd0NhcHR1cmVzKHN0YXRlOiBTdG9yZVN0YXRlKTogdm9pZCB7XG4gICAgICAgIHRoaXMuJGNhcHR1cmVkd2hpdGUucmVwbGFjZUNoaWxkKHRoaXMuX3RlbXBsYXRlLkNhcHR1cmVkV2hpdGUoc3RhdGUpLCB0aGlzLiRjYXB0dXJlZHdoaXRlLmZpcnN0Q2hpbGQpO1xuICAgICAgICB0aGlzLiRjYXB0dXJlZGJsYWNrLnJlcGxhY2VDaGlsZCh0aGlzLl90ZW1wbGF0ZS5DYXB0dXJlZEJsYWNrKHN0YXRlKSwgdGhpcy4kY2FwdHVyZWRibGFjay5maXJzdENoaWxkKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAZGVzY3JpcHRpb24gQmluZHMgaGFuZGxlciB0byBib3gsIGNhbGxpbmcgaGFuZGxlciB3aGVuIHRoZSBzeW50aGV0aWMgJ2NsaWNrJyBldmVudCBpcyBmaXJlZC5cbiAgICAgKi9cbiAgICBiaW5kU2VsZWN0Qm94KGJveDogRWxlbWVudCwgaGFuZGxlcjogKGJveDogRWxlbWVudCkgPT4gdm9pZCk6IHZvaWQge1xuICAgICAgICAkb24oYm94LCAnY2xpY2snLCAoKSA9PiBoYW5kbGVyKGJveCkpO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBkZXNjcmlwdGlvbiBCaW5kcyBoYW5kbGVyIHRvIHBpZWNlLCBjYWxsaW5nIGhhbmRsZXIgd2hlbiB0aGUgc3ludGhldGljICdjbGljaycgZXZlbnQgaXMgZmlyZWQuXG4gICAgICovXG4gICAgYmluZENhcHR1cmVkUGllY2UocGllY2U6IEVsZW1lbnQsIGk6IG51bWJlciwgaGFuZGxlcjogKHBpZWNlOiBFbGVtZW50LCBpOiBudW1iZXIpID0+IHZvaWQpOiB2b2lkIHtcbiAgICAgICAgJG9uKHBpZWNlLCAnY2xpY2snLCAoKSA9PiBoYW5kbGVyKHBpZWNlLCBpKSk7XG4gICAgfVxuXG4gICAgYmluZFVuZG9Nb3ZlKGhhbmRsZXI6IEZ1bmN0aW9uKTogdm9pZCB7XG4gICAgICAgIC8vICRvbih0aGlzLiR1bmRvYnRuLCAnY2xpY2snLCAoKSA9PiBoYW5kbGVyKCkpO1xuICAgIH1cblxuICAgIGJpbmRSZWRvTW92ZShoYW5kbGVyOiBGdW5jdGlvbik6IHZvaWQge1xuICAgICAgICAvLyAkb24odGhpcy4kcmVkb2J0biwgJ2NsaWNrJywgKCkgPT4gaGFuZGxlcigpKTtcbiAgICB9XG59IiwiaW1wb3J0IHsgQm94LCBQaWVjZSwgRW1wdHlQaWVjZSwgR2FtZVN0YXRlLCBQTEFZRVJfV0hJVEUsIFBMQVlFUl9CTEFDSywgUGxheWVyIH0gZnJvbSAnLi4vdHlwZXMnO1xuY29uc3QgUGllY2VIZWxwZXIgPSB7XG4gIGdldE51bU1vdmVzOiAoZ2FtZVN0YXRlOiBHYW1lU3RhdGUsIGJveDogQm94KSA9PiAtMSxcbiAgaXNFbXB0eTogKGdhbWVTdGF0ZTogR2FtZVN0YXRlLCBib3g6IEJveCk6IGJvb2xlYW4gPT4gZmFsc2UsXG4gIGlzUGllY2VPZkdpdmVuUGxheWVyOiAoZ2FtZVN0YXRlOiBHYW1lU3RhdGUsIHBsYXllcjogUGxheWVyLCBib3g6IEJveCk6IGJvb2xlYW4gPT4gZmFsc2UsXG4gIGlzUGllY2VPZkN1cnJlbnRQbGF5ZXI6IChnYW1lU3RhdGU6IEdhbWVTdGF0ZSwgYm94OiBCb3gpOiBib29sZWFuID0+IGZhbHNlLCBcbiAgaXNCb3hPbkJvYXJkOiAoZ2FtZVN0YXRlOiBHYW1lU3RhdGUsIGJveDogQm94KTogYm9vbGVhbiA9PiBmYWxzZSwgXG4gIGlzVmFsaWRTb3VyY2VBbmREZXN0OiAoZ2FtZVN0YXRlOiBHYW1lU3RhdGUsIHNyYzogQm94LCBkc3Q6IEJveCk6IGJvb2xlYW4gPT4gZmFsc2UsIFxuICBjYW5Hb0Fsb25nUm93VG9EZXN0OiAoZ2FtZVN0YXRlOiBHYW1lU3RhdGUsIHNyYzogQm94LCBkc3Q6IEJveCk6IGJvb2xlYW4gPT4gZmFsc2UsIFxuICBjYW5Hb0Fsb25nQ29sVG9EZXN0OiAoZ2FtZVN0YXRlOiBHYW1lU3RhdGUsIHNyYzogQm94LCBkc3Q6IEJveCk6IGJvb2xlYW4gPT4gZmFsc2UsIFxuICBjYW5Hb0Fsb25nTGluZVRvRGVzdDogKGdhbWVTdGF0ZTogR2FtZVN0YXRlLCBzcmM6IEJveCwgZHN0OiBCb3gpOiBib29sZWFuID0+IGZhbHNlLCBcbiAgY2FuR29BbG9uZ0RpYWdvbmFsVG9EZXN0OiAoZ2FtZVN0YXRlOiBHYW1lU3RhdGUsIHNyYzogQm94LCBkc3Q6IEJveCk6IGJvb2xlYW4gPT4gZmFsc2UsIFxufTtcbi8qKlxuICogQHBhcmFtIHtHYW1lU3RhdGV9IGdhbWVTdGF0ZVxuICogQHBhcmFtIHtCb3h9IGJveFxuICogQHJldHVybnMge251bWJlcn1cbiAqIEB0b2RvIGhhbmRsZSBlcnJvciBjYXNlIHdoZXJlIGNvZGUgZG9lc24ndCBtYXRjaCBpbiBtb3JlIG1lYW5pbmdmdWwgd2F5LCBiZXR0ZXIgZm9yIHRlc3RpbmcuXG4gKi9cblBpZWNlSGVscGVyLmdldE51bU1vdmVzID0gKGdhbWVTdGF0ZTogR2FtZVN0YXRlLCBib3g6IEJveCk6IG51bWJlciA9PiB7XG4gIGNvbnN0IHMgPSBnYW1lU3RhdGUuZ2V0RW5jb2RpbmcoYm94KTtcbiAgbGV0IGNvZGVNYXRjaCA9IHMubWF0Y2goLyhbYS16QS16XSkoXFxkKikvKTtcbiAgbGV0IG51bU1vdmVzID0gY29kZU1hdGNoICYmIGNvZGVNYXRjaC5sZW5ndGggPiAyICYmICFpc05hTihOdW1iZXIoY29kZU1hdGNoWzJdKSkgPyBOdW1iZXIoY29kZU1hdGNoWzJdKSA6IC0xOyAvLyAtMSBzaG91bGQgbmV2ZXIgaGFwcGVuLCB0aG91Z2guXG4gIHJldHVybiBudW1Nb3Zlcztcbn1cbi8qKlxuICogXG4gKiBAcGFyYW0ge0dhbWVTdGF0ZX0gZ2FtZVN0YXRlXG4gKiBAcGFyYW0ge0JveH0gYm94XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuUGllY2VIZWxwZXIuaXNFbXB0eSA9IChnYW1lU3RhdGU6IEdhbWVTdGF0ZSwgYm94OiBCb3gpOiBib29sZWFuID0+IGdhbWVTdGF0ZS5nZXRFbmNvZGluZyhib3gpLnRyaW0oKSA9PT0gJyc7XG4vKipcbiAqIFxuICogQHBhcmFtIHtHYW1lU3RhdGV9IGdhbWVTdGF0ZSBcbiAqIEBwYXJhbSB7bnVtYmVyfSBwbGF5ZXIgXG4gKiBAcGFyYW0ge0JveH0gYm94XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuUGllY2VIZWxwZXIuaXNQaWVjZU9mR2l2ZW5QbGF5ZXIgPSAoZ2FtZVN0YXRlOiBHYW1lU3RhdGUsIHBsYXllcjogUGxheWVyLCBib3g6IEJveCk6IGJvb2xlYW4gPT4ge1xuICBjb25zdCBzID0gZ2FtZVN0YXRlLmdldEVuY29kaW5nKGJveCk7XG4gIGxldCBjb2RlTWF0Y2ggPSBzLm1hdGNoKC8oW2EtekEtel0pKFxcZCopLyk7XG4gIGxldCBhbHBoYWNvZGUgPSBjb2RlTWF0Y2gubGVuZ3RoID4gMSA/IGNvZGVNYXRjaFsxXSA6IG51bGw7XG4gIGlmICghYWxwaGFjb2RlKSByZXR1cm4gZmFsc2U7XG4gIGlmICgocGxheWVyID09IFBMQVlFUl9XSElURSAmJiBhbHBoYWNvZGUgPT0gYWxwaGFjb2RlLnRvVXBwZXJDYXNlKCkpIHx8IChwbGF5ZXIgPT0gUExBWUVSX0JMQUNLICYmIGFscGhhY29kZSA9PSBhbHBoYWNvZGUudG9Mb3dlckNhc2UoKSkpIHJldHVybiB0cnVlO1xuICByZXR1cm4gZmFsc2U7XG59XG5QaWVjZUhlbHBlci5pc1BpZWNlT2ZDdXJyZW50UGxheWVyID0gKGdhbWVTdGF0ZTogR2FtZVN0YXRlLCBib3g6IEJveCk6IGJvb2xlYW4gPT4ge1xuICBjb25zdCBjaGVja1BhcnRpY3VsYXJQbGF5ZXIgPSAocGxheWVyQ2FzZTogKHM6IHN0cmluZykgPT4gc3RyaW5nLCB7YzogYywgcjogcn0gPSBib3gpOiBib29sZWFuID0+XG4gICAgKGdhbWVTdGF0ZS5nZXRFbmNvZGluZyhib3gpID09PSBwbGF5ZXJDYXNlLmFwcGx5KGdhbWVTdGF0ZS5nZXRFbmNvZGluZyhib3gpKSkgJiYgIVBpZWNlSGVscGVyLmlzRW1wdHkoZ2FtZVN0YXRlLCBib3gpO1xuICByZXR1cm4gZ2FtZVN0YXRlLnBsYXllciA9PT0gUExBWUVSX1dISVRFID9cbiAgICBjaGVja1BhcnRpY3VsYXJQbGF5ZXIoU3RyaW5nLnByb3RvdHlwZS50b1VwcGVyQ2FzZSkgOiBjaGVja1BhcnRpY3VsYXJQbGF5ZXIoU3RyaW5nLnByb3RvdHlwZS50b0xvd2VyQ2FzZSk7XG59XG4vKipcbiAqIFxuICogQHBhcmFtIHtHYW1lU3RhdGV9IGdhbWVTdGF0ZSBcbiAqIEBwYXJhbSB7Qm94fSBib3ggXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuUGllY2VIZWxwZXIuaXNCb3hPbkJvYXJkID0gKGdhbWVTdGF0ZTogR2FtZVN0YXRlLCBib3g6IEJveCk6IGJvb2xlYW4gPT4gYm94LnIgPCBnYW1lU3RhdGUucmFua0NvdW50ICYmIGJveC5yID49IDAgJiYgYm94LmMgPj0gMCAmJiBib3guYyA8IGdhbWVTdGF0ZS5maWxlQ291bnQ7XG4vKipcbiAqIFxuICogQHBhcmFtIHtHYW1lU3RhdGV9IGdhbWVTdGF0ZSBcbiAqIEBwYXJhbSB7Qm94fSBzcmMgXG4gKiBAcGFyYW0ge0JveH0gZHN0IFxuICogQHJldHVybnMge2Jvb2xlYW59XG4gKi9cblBpZWNlSGVscGVyLmlzVmFsaWRTb3VyY2VBbmREZXN0ID0gKGdhbWVTdGF0ZTogR2FtZVN0YXRlLCBzcmM6IEJveCwgZHN0OiBCb3gpOiBib29sZWFuID0+IFBpZWNlSGVscGVyLmlzUGllY2VPZkN1cnJlbnRQbGF5ZXIoZ2FtZVN0YXRlLHNyYykgJiYgIVBpZWNlSGVscGVyLmlzUGllY2VPZkN1cnJlbnRQbGF5ZXIoZ2FtZVN0YXRlLGRzdCkgJiYgUGllY2VIZWxwZXIuaXNCb3hPbkJvYXJkKGdhbWVTdGF0ZSxkc3QpICYmIHNyYyAhPSBkc3Q7XG4vKipcbiAqIFxuICogQHBhcmFtIHtHYW1lU3RhdGV9IGdhbWVTdGF0ZSBcbiAqIEBwYXJhbSB7Qm94fSBzcmMgXG4gKiBAcGFyYW0ge0JveH0gZHN0IFxuICogQHJldHVybnMge2Jvb2xlYW59XG4gKi9cblBpZWNlSGVscGVyLmNhbkdvQWxvbmdSb3dUb0Rlc3QgPSAoZ2FtZVN0YXRlOiBHYW1lU3RhdGUsIHNyYzogQm94LCBkc3Q6IEJveCk6IGJvb2xlYW4gPT4ge1xuICBpZiAoc3JjLnIgPT0gZHN0LnIpIHtcbiAgICBjb25zdCBkaXIgPSBkc3QuYyA+IHNyYy5jID8gMSA6IC0xO1xuICAgIGxldCBsZW4gPSBNYXRoLmFicyhkc3QuYy1zcmMuYyk7XG4gICAgZm9yIChsZXQgaSA9IHNyYy5jK2RpcjsgbGVuLS0gPiAxOyBpICs9IGRpcikgaWYgKCFQaWVjZUhlbHBlci5pc0VtcHR5KGdhbWVTdGF0ZSx7cjpzcmMucixjOml9KSkgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cbi8qKlxuICogXG4gKiBAcGFyYW0ge0dhbWVTdGF0ZX0gZ2FtZVN0YXRlIFxuICogQHBhcmFtIHtCb3h9IHNyYyBcbiAqIEBwYXJhbSB7Qm94fSBkc3QgXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuUGllY2VIZWxwZXIuY2FuR29BbG9uZ0NvbFRvRGVzdCA9IChnYW1lU3RhdGU6IEdhbWVTdGF0ZSwgc3JjOiBCb3gsIGRzdDogQm94KTogYm9vbGVhbiA9PiB7XG4gIGlmIChzcmMuYyA9PSBkc3QuYykge1xuICAgIGNvbnN0IGRpciA9IGRzdC5yID4gc3JjLnIgPyAxIDogLTE7XG4gICAgbGV0IGxlbiA9IE1hdGguYWJzKGRzdC5yLXNyYy5yKTtcbiAgICBmb3IgKGxldCBpID0gc3JjLnIrZGlyOyBsZW4tLSA+IDE7IGkgKz0gZGlyKSBpZiAoIVBpZWNlSGVscGVyLmlzRW1wdHkoZ2FtZVN0YXRlLHtyOmksYzpzcmMuY30pKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuLyoqXG4gKiBcbiAqIEBwYXJhbSB7R2FtZVN0YXRlfSBnYW1lU3RhdGUgXG4gKiBAcGFyYW0ge0JveH0gc3JjXG4gKiBAcGFyYW0ge0JveH0gZHN0XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuUGllY2VIZWxwZXIuY2FuR29BbG9uZ0xpbmVUb0Rlc3QgPSAoZ2FtZVN0YXRlOiBHYW1lU3RhdGUsIHNyYzogQm94LCBkc3Q6IEJveCk6IGJvb2xlYW4gPT4gUGllY2VIZWxwZXIuY2FuR29BbG9uZ0NvbFRvRGVzdChnYW1lU3RhdGUsIHNyYywgZHN0KSB8fCBQaWVjZUhlbHBlci5jYW5Hb0Fsb25nUm93VG9EZXN0KGdhbWVTdGF0ZSwgc3JjLCBkc3QpO1xuLyoqXG4gKiBcbiAqIEBwYXJhbSB7R2FtZVN0YXRlfSBnYW1lU3RhdGUgXG4gKiBAcGFyYW0ge0JveH0gc3JjIFxuICogQHBhcmFtIHtCb3h9IGRzdCBcbiAqIEByZXR1cm5zIHtib29sZWFufVxuICovXG5QaWVjZUhlbHBlci5jYW5Hb0Fsb25nRGlhZ29uYWxUb0Rlc3QgPSAoZ2FtZVN0YXRlOiBHYW1lU3RhdGUsIHNyYzogQm94LCBkc3Q6IEJveCk6IGJvb2xlYW4gPT4geyAvLyBuYXR1cmFsIGZ1bmN0aW9uYWxpdHkgZm9yIGJpc2hvcFxuICBpZiAoTWF0aC5hYnMoKGRzdC5yIC0gc3JjLnIpLyhkc3QuYyAtIHNyYy5jKSkgIT0gMSkgcmV0dXJuIGZhbHNlO1xuICBsZXQgbGVuID0gTWF0aC5hYnMoZHN0LmMgLSBzcmMuYyk7XG4gIGNvbnN0IHJvd0RpciA9IGRzdC5yIC0gc3JjLnIgPiAwID8gMSA6IC0xO1xuICBjb25zdCBjb2xEaXIgPSBkc3QuYyAtIHNyYy5jID4gMCA/IDEgOiAtMTtcbiAgbGV0IGkgPSBzcmMucityb3dEaXI7XG4gIGxldCBqID0gc3JjLmMrY29sRGlyO1xuICBmb3IgKDsgbGVuLS0gPiAxOyBpICs9IHJvd0RpciwgaiArPSBjb2xEaXIpIGlmICghUGllY2VIZWxwZXIuaXNFbXB0eShnYW1lU3RhdGUse3I6aSxjOmp9KSkgcmV0dXJuIGZhbHNlO1xuICByZXR1cm4gdHJ1ZTtcbn1cbmV4cG9ydCB7UGllY2VIZWxwZXJ9OyIsImltcG9ydCB7IEJveCwgUGllY2UsIEdhbWVTdGF0ZSwgUExBWUVSX1dISVRFIH0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHsgUGllY2VIZWxwZXIgfSBmcm9tICcuL3BpZWNlaGVscGVyJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF3biBpbXBsZW1lbnRzIFBpZWNlIHtcbiAgcHVibGljIG5hbWU6IHN0cmluZztcbiAgcHVibGljIGNvbG9yOiBzdHJpbmc7XG4gIHB1YmxpYyBnZXRQb3NzaWJsZU1vdmVzOiAoZ2FtZVN0YXRlOiBHYW1lU3RhdGUsIHNyYzogQm94LCBudW1Nb3Zlcz86IG51bWJlcikgPT4gKGRzdDogQm94KSA9PiBib29sZWFuO1xuICBjb25zdHJ1Y3Rvcihjb2xvcjogc3RyaW5nKSB7XG4gICAgdGhpcy5uYW1lID0gJ3Bhd24nO1xuICAgIHRoaXMuY29sb3IgPSBjb2xvcjtcbiAgICB0aGlzLmdldFBvc3NpYmxlTW92ZXMgPSAoZ2FtZVN0YXRlOiBHYW1lU3RhdGUsIHNyYzogQm94LG51bU1vdmVzPzogbnVtYmVyKTogKGRzdDogQm94KSA9PiBib29sZWFuID0+IHtcbiAgICAgIGlmIChudW1Nb3ZlcyA9PT0gdW5kZWZpbmVkKSBudW1Nb3ZlcyA9IFBpZWNlSGVscGVyLmdldE51bU1vdmVzKGdhbWVTdGF0ZSxzcmMpO1xuICAgICAgY29uc3QgZm9yd2FyZERpcmVjdGlvbk9mQ3VycmVudFBsYXllciA9ICgpID0+IGdhbWVTdGF0ZS5wbGF5ZXIgPT0gUExBWUVSX1dISVRFID8gLTEgOiAxO1xuICAgICAgLyoqXG4gICAgICAgKiBAcGFyYW0geyFCb3h9IGRzdCBcbiAgICAgICAqIEB5aWVsZHMge2Jvb2xlYW59IFJldHVybnMgYSAoY3VycmllZCkgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgYm9vbGVhbiAod2hlbiBhcHBsaWVkKS5cbiAgICAgICAqL1xuICAgICAgY29uc3QgaXNQb3NzaWJsZVRvTW92ZVRvID0gKGRzdDogQm94KTogYm9vbGVhbiA9PiB7XG4gICAgICAgIGlmICghUGllY2VIZWxwZXIuaXNWYWxpZFNvdXJjZUFuZERlc3QoZ2FtZVN0YXRlLHNyYyxkc3QpKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIGNvbnN0IGRpciA9IGZvcndhcmREaXJlY3Rpb25PZkN1cnJlbnRQbGF5ZXIoKTtcbiAgICAgICAgY29uc3QgcGF3bkNhbk1vdmUxRm9yd2FyZCA9IFBpZWNlSGVscGVyLmlzRW1wdHkoZ2FtZVN0YXRlLGRzdCkgJiYgc3JjLmMgPT0gZHN0LmMgJiYgZHN0LnIgPT0gc3JjLnIgKyBkaXI7XG4gICAgICAgIGNvbnN0IGluQmV0d2VlblNxdWFyZSA9IHtcbiAgICAgICAgICByOiBzcmMuciArIGRpcixcbiAgICAgICAgICBjOiBkc3QuY1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBwYXduQ2FuTW92ZTJGb3J3YXJkID0gbnVtTW92ZXMgPT0gMCAmJiBQaWVjZUhlbHBlci5pc0VtcHR5KGdhbWVTdGF0ZSxkc3QpICYmIFBpZWNlSGVscGVyLmlzRW1wdHkoZ2FtZVN0YXRlLGluQmV0d2VlblNxdWFyZSkgJiYgc3JjLmMgPT0gZHN0LmMgJiYgZHN0LnIgPT0gc3JjLnIgKzIqZGlyO1xuICAgICAgICBjb25zdCBwYXduQ2FuQXR0YWNrID0gIVBpZWNlSGVscGVyLmlzUGllY2VPZkN1cnJlbnRQbGF5ZXIoZ2FtZVN0YXRlLGRzdCkgJiYgIVBpZWNlSGVscGVyLmlzRW1wdHkoZ2FtZVN0YXRlLGRzdCkgJiYgZHN0LnIgPT0gc3JjLnIgKyBkaXIgJiYgKGRzdC5jID09IHNyYy5jICsgMSB8fCBkc3QuYyA9PSBzcmMuYyAtIDEpO1xuICAgICAgICByZXR1cm4gKHBhd25DYW5Nb3ZlMUZvcndhcmQgfHwgcGF3bkNhbk1vdmUyRm9yd2FyZCB8fCBwYXduQ2FuQXR0YWNrKSAmJiAhUGllY2VIZWxwZXIuaXNQaWVjZU9mQ3VycmVudFBsYXllcihnYW1lU3RhdGUsIGRzdCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gaXNQb3NzaWJsZVRvTW92ZVRvO1xuICAgIH07XG4gIH1cbn0iLCJpbXBvcnQgeyBCb3gsIFBpZWNlLCBHYW1lU3RhdGUgfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgeyBQaWVjZUhlbHBlciB9IGZyb20gJy4vcGllY2VoZWxwZXInO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSb29rIGltcGxlbWVudHMgUGllY2Uge1xuICBwdWJsaWMgbmFtZTogc3RyaW5nO1xuICBwdWJsaWMgY29sb3I6IHN0cmluZztcbiAgcHVibGljIGdldFBvc3NpYmxlTW92ZXM6IChnYW1lU3RhdGU6IEdhbWVTdGF0ZSwgc3JjOiBCb3gsIG51bU1vdmVzPzogbnVtYmVyKSA9PiAoZHN0OiBCb3gpID0+IGJvb2xlYW47XG4gIGNvbnN0cnVjdG9yKGNvbG9yOiBzdHJpbmcpIHtcbiAgICB0aGlzLm5hbWUgPSAncm9vayc7XG4gICAgdGhpcy5jb2xvciA9IGNvbG9yO1xuICAgIHRoaXMuZ2V0UG9zc2libGVNb3ZlcyA9IChnYW1lU3RhdGU6IEdhbWVTdGF0ZSwgc3JjOiBCb3gsbnVtTW92ZXM/OiBudW1iZXIpID0+IHtcbiAgICAgIGNvbnN0IGlzUG9zc2libGVUb01vdmVUbyA9IChkc3Q6IEJveCk6IGJvb2xlYW4gPT5cbiAgICAgICAgUGllY2VIZWxwZXIuaXNWYWxpZFNvdXJjZUFuZERlc3QoZ2FtZVN0YXRlLHNyYyxkc3QpID9cbiAgICAgICAgUGllY2VIZWxwZXIuY2FuR29BbG9uZ1Jvd1RvRGVzdChnYW1lU3RhdGUsc3JjLGRzdCkgfHwgUGllY2VIZWxwZXIuY2FuR29BbG9uZ0NvbFRvRGVzdChnYW1lU3RhdGUsc3JjLGRzdCkgOiBmYWxzZTtcbiAgICAgIHJldHVybiBpc1Bvc3NpYmxlVG9Nb3ZlVG87XG4gICAgfTtcbiAgfVxufSIsImltcG9ydCB7IEJveCwgUGllY2UsIEdhbWVTdGF0ZSB9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB7IFBpZWNlSGVscGVyIH0gZnJvbSAnLi9waWVjZWhlbHBlcic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEtuaWdodCBpbXBsZW1lbnRzIFBpZWNlIHtcbiAgcHVibGljIG5hbWU6IHN0cmluZztcbiAgcHVibGljIGNvbG9yOiBzdHJpbmc7XG4gIHB1YmxpYyBnZXRQb3NzaWJsZU1vdmVzOiAoZ2FtZVN0YXRlOiBHYW1lU3RhdGUsIHNyYzogQm94LCBudW1Nb3Zlcz86IG51bWJlcikgPT4gKGRzdDogQm94KSA9PiBib29sZWFuO1xuICBjb25zdHJ1Y3Rvcihjb2xvcjogc3RyaW5nKSB7XG4gICAgdGhpcy5uYW1lID0gJ2tuaWdodCc7XG4gICAgdGhpcy5jb2xvciA9IGNvbG9yO1xuICAgIHRoaXMuZ2V0UG9zc2libGVNb3ZlcyA9IChnYW1lU3RhdGUsc3JjLG51bU1vdmVzKSA9PiB7XG4gICAgICBjb25zdCBpc1Bvc3NpYmxlVG9Nb3ZlVG8gPSAoZHN0OiBCb3gpOiBib29sZWFuID0+XG4gICAgICAgIFBpZWNlSGVscGVyLmlzVmFsaWRTb3VyY2VBbmREZXN0KGdhbWVTdGF0ZSxzcmMsZHN0KSAmJlxuICAgICAgICAoKE1hdGguYWJzKHNyYy5yLWRzdC5yKSA9PSAxICYmIE1hdGguYWJzKHNyYy5jLWRzdC5jKSA9PSAyKSB8fCAoTWF0aC5hYnMoc3JjLmMtZHN0LmMpID09IDEgJiYgTWF0aC5hYnMoc3JjLnItZHN0LnIpID09IDIpKSA/XG4gICAgICAgIHRydWUgOiBmYWxzZTtcbiAgICAgIHJldHVybiBpc1Bvc3NpYmxlVG9Nb3ZlVG87XG4gICAgfTtcbiAgfVxufSIsImltcG9ydCB7IEJveCwgUGllY2UsIEdhbWVTdGF0ZSB9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB7IFBpZWNlSGVscGVyIH0gZnJvbSAnLi9waWVjZWhlbHBlcic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJpc2hvcCBpbXBsZW1lbnRzIFBpZWNlIHtcbiAgcHVibGljIG5hbWU6IHN0cmluZztcbiAgcHVibGljIGNvbG9yOiBzdHJpbmc7XG4gIHB1YmxpYyBnZXRQb3NzaWJsZU1vdmVzOiAoZ2FtZVN0YXRlOiBHYW1lU3RhdGUsIHNyYzogQm94LCBudW1Nb3Zlcz86IG51bWJlcikgPT4gKGRzdDogQm94KSA9PiBib29sZWFuO1xuICBjb25zdHJ1Y3Rvcihjb2xvcjogc3RyaW5nKSB7XG4gICAgdGhpcy5uYW1lID0gJ2Jpc2hvcCc7XG4gICAgdGhpcy5jb2xvciA9IGNvbG9yO1xuICAgIHRoaXMuZ2V0UG9zc2libGVNb3ZlcyA9IGZ1bmN0aW9uKGdhbWVTdGF0ZSwgc3JjOiBCb3gsIG51bU1vdmVzPzogbnVtYmVyKSB7XG4gICAgICBjb25zdCBpc1Bvc3NpYmxlVG9Nb3ZlVG8gPSAoZHN0OiBCb3gpID0+IHtcbiAgICAgICAgcmV0dXJuIFBpZWNlSGVscGVyLmlzVmFsaWRTb3VyY2VBbmREZXN0KGdhbWVTdGF0ZSxzcmMsZHN0KSA/XG4gICAgICAgIFBpZWNlSGVscGVyLmNhbkdvQWxvbmdEaWFnb25hbFRvRGVzdChnYW1lU3RhdGUsc3JjLGRzdCkgOiBmYWxzZTtcbiAgICAgIH07XG4gICAgICByZXR1cm4gaXNQb3NzaWJsZVRvTW92ZVRvO1xuICAgIH1cbiAgfVxufSIsImltcG9ydCB7IEJveCwgUGllY2UsIEdhbWVTdGF0ZSB9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB7IFBpZWNlSGVscGVyIH0gZnJvbSAnLi9waWVjZWhlbHBlcic7XG5cbi8qKlxuICogQGNsYXNzIFF1ZWVuXG4gKiBAdHlwZSB7UGllY2V9XG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFF1ZWVuIGltcGxlbWVudHMgUGllY2Uge1xuICBwdWJsaWMgbmFtZTogc3RyaW5nO1xuICBwdWJsaWMgY29sb3I6IHN0cmluZztcbiAgcHVibGljIGdldFBvc3NpYmxlTW92ZXM6IChnYW1lU3RhdGU6IEdhbWVTdGF0ZSwgc3JjOiBCb3gsIG51bU1vdmVzPzogbnVtYmVyKSA9PiAoZHN0OiBCb3gpID0+IGJvb2xlYW47XG4gIGNvbnN0cnVjdG9yKGNvbG9yOiBzdHJpbmcpIHtcbiAgICB0aGlzLm5hbWUgPSAncXVlZW4nO1xuICAgIHRoaXMuY29sb3IgPSBjb2xvcjtcbiAgICB0aGlzLmdldFBvc3NpYmxlTW92ZXMgPSAoZ2FtZVN0YXRlOiBHYW1lU3RhdGUsIHNyYzogQm94LG51bU1vdmVzPzogbnVtYmVyKSA9PiB7XG4gICAgICBjb25zdCBpc1Bvc3NpYmxlVG9Nb3ZlVG8gPSAoZHN0OiBCb3gpOiBib29sZWFuID0+XG4gICAgICAgIFBpZWNlSGVscGVyLmlzVmFsaWRTb3VyY2VBbmREZXN0KGdhbWVTdGF0ZSxzcmMsZHN0KSA/XG4gICAgICAgIFBpZWNlSGVscGVyLmNhbkdvQWxvbmdSb3dUb0Rlc3QoZ2FtZVN0YXRlLHNyYyxkc3QpIHx8IFBpZWNlSGVscGVyLmNhbkdvQWxvbmdDb2xUb0Rlc3QoZ2FtZVN0YXRlLHNyYyxkc3QpIHx8IFBpZWNlSGVscGVyLmNhbkdvQWxvbmdEaWFnb25hbFRvRGVzdChnYW1lU3RhdGUsc3JjLGRzdCkgOiBmYWxzZTtcbiAgICAgIHJldHVybiBpc1Bvc3NpYmxlVG9Nb3ZlVG87XG4gICAgfTtcbiAgfVxufSIsImltcG9ydCB7IEJveCwgUGllY2UsIEdhbWVTdGF0ZSB9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB7IFBpZWNlSGVscGVyIH0gZnJvbSAnLi9waWVjZWhlbHBlcic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEtpbmcgaW1wbGVtZW50cyBQaWVjZSB7XG4gIHB1YmxpYyBuYW1lOiBzdHJpbmc7XG4gIHB1YmxpYyBjb2xvcjogc3RyaW5nO1xuICBwdWJsaWMgZ2V0UG9zc2libGVNb3ZlczogKGdhbWVTdGF0ZTogR2FtZVN0YXRlLCBzcmM6IEJveCwgbnVtTW92ZXM/OiBudW1iZXIpID0+IChkc3Q6IEJveCkgPT4gYm9vbGVhbjtcbiAgcHVibGljIGdldFBvc3NpYmxlU3BlY2lhbE1vdmVzOiBGdW5jdGlvbjtcbiAgY29uc3RydWN0b3IoY29sb3I6IHN0cmluZywgc3BlY2lhbE1vdmVzPzogRnVuY3Rpb24pIHtcbiAgICB0aGlzLm5hbWUgPSAna2luZyc7XG4gICAgdGhpcy5jb2xvciA9IGNvbG9yO1xuICAgIHRoaXMuZ2V0UG9zc2libGVTcGVjaWFsTW92ZXMgPSBzcGVjaWFsTW92ZXM7XG4gICAgdGhpcy5nZXRQb3NzaWJsZU1vdmVzID0gKGdhbWVTdGF0ZTogR2FtZVN0YXRlLCBzcmM6IEJveCxudW1Nb3Zlcz86IG51bWJlcikgPT4ge1xuICAgICAgY29uc3QgaXNQb3NzaWJsZVRvTW92ZVRvID0gKGRzdDogQm94KTogYm9vbGVhbiA9PiB7XG4gICAgICAgIGlmIChQaWVjZUhlbHBlci5pc1ZhbGlkU291cmNlQW5kRGVzdChnYW1lU3RhdGUsc3JjLGRzdCkgJiYgKE1hdGguYWJzKGRzdC5jLXNyYy5jKT09MSB8fCBNYXRoLmFicyhkc3Quci1zcmMucik9PTEpKVxuICAgICAgICAgIHJldHVybiBQaWVjZUhlbHBlci5jYW5Hb0Fsb25nUm93VG9EZXN0KGdhbWVTdGF0ZSxzcmMsZHN0KSB8fCBQaWVjZUhlbHBlci5jYW5Hb0Fsb25nQ29sVG9EZXN0KGdhbWVTdGF0ZSxzcmMsZHN0KSB8fCBQaWVjZUhlbHBlci5jYW5Hb0Fsb25nRGlhZ29uYWxUb0Rlc3QoZ2FtZVN0YXRlLHNyYyxkc3QpXG4gICAgICAgIGVsc2UgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGlzUG9zc2libGVUb01vdmVUbztcbiAgICB9O1xuICB9XG59IiwiaW1wb3J0ICdwYXRoJztcbmltcG9ydCB7IEJveCwgUGllY2UsIEVtcHR5UGllY2UsIEdhbWVTdGF0ZSwgQm9hcmQgfSBmcm9tICcuLi90eXBlcyc7XG5pbXBvcnQgeyBQaWVjZUhlbHBlciB9IGZyb20gJy4vcGllY2VoZWxwZXInO1xuaW1wb3J0IFBhd24gZnJvbSAnLi9wYXduJztcbmltcG9ydCBSb29rIGZyb20gJy4vcm9vayc7XG5pbXBvcnQgS25pZ2h0IGZyb20gJy4va25pZ2h0JztcbmltcG9ydCBCaXNob3AgZnJvbSAnLi9iaXNob3AnO1xuaW1wb3J0IFF1ZWVuIGZyb20gJy4vcXVlZW4nO1xuaW1wb3J0IEtpbmcgZnJvbSAnLi9raW5nJztcbi8qKlxuICogQGRlc2NyaXB0aW9uIFRoaXMgbW9kdWxlIGlzIHB1cmVseSBmdW5jdGlvbmFsICh0aGVyZSBzaGFsbCBiZSBubyBzaWRlLWVmZmVjdHMpLlxuICogIEZ1cnRoZXJtb3JlLCBpdCBpcyB1cCB0byB0aGUgY2FsbGVyIHRvIGFkZXF1YXRlbHkgc3RvcmUgdGhlIHJlc3VsdHMgb2YgY2FsbGluZyB0aGVzZSBwdXJlIGZ1bmN0aW9ucy5cbiAqL1xuY29uc3QgUGllY2VHYW1lTG9naWMgPSB7IC8vIGZvciBUeXBlU2NyaXB0XG4gIGNvbnZlcnRHU0JvYXJkVG9QaWVjZUJvYXJkOiAoZ2FtZVN0YXRlOiBHYW1lU3RhdGUpOiBBcnJheTxBcnJheTxQaWVjZT4+ID0+IFtdLFxuICBjb252ZXJ0UGllY2VUb1N0cmluZ0VuY29kaW5nOiAocGllY2U6IFBpZWNlLCB0aW1lc01vdmVkPzogbnVtYmVyKTogc3RyaW5nID0+ICcnLFxuICBnZXRUeXBlOiAoczogc3RyaW5nKTogUGllY2UgPT4gPFBpZWNlPihuZXcgRW1wdHlQaWVjZSksXG4gIGdldE51bU1vdmVzOiAoczogc3RyaW5nKTogbnVtYmVyID0+IC0xLFxuICBnZXRQb3NzaWJsZVBpZWNlc1RvUHJvbW90ZVRvOiAoZ2FtZVN0YXRlOiBHYW1lU3RhdGUsIHNyYzogQm94KTogQXJyYXk8Qm94PiA9PiBbXSxcbiAgZ2V0UG9zc2libGVNb3ZlczogKGdhbWVTdGF0ZTogR2FtZVN0YXRlLCAgc3JjOiBCb3gsIHByZXZNb3ZlPzogeyBzcmM6IEJveCwgZHN0OiBCb3ggfSk6IEFycmF5PEJveD4gPT4gW3tyOiAtMSwgYzogLTF9XSxcbiAgaXNQb3NzaWJsZVRvTW92ZVRvOiAoZ2FtZVN0YXRlOiBHYW1lU3RhdGUsICBzcmM6IEJveCk6IEZ1bmN0aW9uID0+IChib3g6IEJveCk6IGJvb2xlYW4gPT4gZmFsc2UsXG4gIGlzSW5DaGVjazogKGdhbWVTdGF0ZTogR2FtZVN0YXRlLCAgc3JjOiBCb3gpOiBib29sZWFuID0+IGZhbHNlLFxuICBpc0luQ2hlY2ttYXRlOiAoZ2FtZVN0YXRlOiBHYW1lU3RhdGUsICBzcmM6IEJveCk6IGJvb2xlYW4gPT4gZmFsc2UsXG4gIGtpbmdDYW5DYXN0bGVXaXRoR2l2ZW5Sb29rOiAoZ2FtZVN0YXRlOiBHYW1lU3RhdGUsICBzcmM6IEJveCwgZHN0OiBCb3gpOiBib29sZWFuID0+IGZhbHNlLFxuICBjYXN0bGVLaW5nV2l0aEdpdmVuUm9vazogKGdhbWVTdGF0ZTogR2FtZVN0YXRlLCAgc3JjOiBCb3gsIGRzdDogQm94KTogR2FtZVN0YXRlID0+IGdhbWVTdGF0ZSxcbiAgZ2V0U2V0T2ZBbGxQb3NzaWJsZU1vdmVzRm9yUGxheWVyOiAoZ2FtZVN0YXRlOiBHYW1lU3RhdGUsICBwbGF5ZXI6IG51bWJlcik6IFNldDxCb3g+ID0+IG5ldyBTZXQoKSxcbiAgcmFuZG9tRGVmZW5zaXZlTW92ZTogKGdhbWVTdGF0ZTogR2FtZVN0YXRlKTogU2V0PEJveD4gPT4gbmV3IFNldCgpLFxuICBpc0FDYXB0dXJlOiAoZ2FtZVN0YXRlOiBHYW1lU3RhdGUsICBzcmM6IEJveCwgZHN0OiBCb3gpOiBib29sZWFuID0+IGZhbHNlLFxuICBpc0VuUGFzc2FudFBvc3NpYmxlOiAoZ2FtZVN0YXRlOiBHYW1lU3RhdGUsIHNyYzogQm94LCBwcmV2TW92ZToge3NyYzogQm94LCBkc3Q6IEJveH0pOiBib29sZWFuID0+IGZhbHNlLFxuICBnZXRCb3hPZlByb21vdGFibGVQaWVjZUlmUG9zc2libGU6IChnYW1lU3RhdGU6IEdhbWVTdGF0ZSk6IEJveCA9PiAoe3I6IC0xLCBjOiAtMX0pLFxuICBwcm9tb3RlSWZQb3NzaWJsZTogKGdhbWVTdGF0ZTogR2FtZVN0YXRlLCBmaXJzdDogQm94LCBzZWNvbmQ6IFBpZWNlKTogR2FtZVN0YXRlID0+IGdhbWVTdGF0ZSxcbiAgaW5jcmVtZW50TW92ZUNvdW50OiAoZW5jOiBzdHJpbmcpOiBzdHJpbmcgPT4gJycsXG4gIG1ha2VMZWdhbE1vdmU6IChnYW1lU3RhdGU6IEdhbWVTdGF0ZSwgc3JjOiBCb3gsIGRzdDogQm94LCBwcmV2TW92ZToge3NyYzogQm94LCBkc3Q6IEJveH0sIHBpZWNlVG9Qcm9tb3RlVG8/OiBQaWVjZSk6IHsgZ2FtZVN0YXRlOiBHYW1lU3RhdGUsIGNhcHR1cmVkUGllY2U6IFBpZWNlLCB3YXNQcm9tb3Rpb246IGJvb2xlYW4gfSA9PiAoeyBnYW1lU3RhdGUsIGNhcHR1cmVkUGllY2U6IDxQaWVjZT4obmV3IEVtcHR5UGllY2UpLCB3YXNQcm9tb3Rpb246IGZhbHNlIH0pLFxufTtcblBpZWNlR2FtZUxvZ2ljLmNvbnZlcnRHU0JvYXJkVG9QaWVjZUJvYXJkID0gKGdhbWVTdGF0ZTogR2FtZVN0YXRlKTogQXJyYXk8QXJyYXk8UGllY2U+PiA9PiB7XG4gIGNvbnN0IHBpZWNlQm9hcmQgPSBbXTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBnYW1lU3RhdGUucmFua0NvdW50OyBpKyspIHtcbiAgICBwaWVjZUJvYXJkLnB1c2goW10pO1xuICAgIGZvciAobGV0IGogPSAwOyBqIDwgZ2FtZVN0YXRlLmZpbGVDb3VudDsgaisrKSB7XG4gICAgICBwaWVjZUJvYXJkW2ldLnB1c2goUGllY2VHYW1lTG9naWMuZ2V0VHlwZShnYW1lU3RhdGUuZ2V0RW5jb2RpbmcoeyByOiBpLCBjOiBqIH0pKSk7XG4gICAgfVxuICB9XG4gIHJldHVybiBwaWVjZUJvYXJkO1xufTtcblBpZWNlR2FtZUxvZ2ljLmNvbnZlcnRQaWVjZVRvU3RyaW5nRW5jb2RpbmcgPSAocGllY2U6IFBpZWNlLCB0aW1lc01vdmVkID0gMCk6IHN0cmluZyA9PiB7XG4gICAgbGV0IGVuY29kaW5nID0gJyc7XG4gICAgaWYgKHBpZWNlIGluc3RhbmNlb2YgUGF3bikge1xuICAgICAgaWYgKHBpZWNlLmNvbG9yID09PSAnd2hpdGUnKSBlbmNvZGluZyA9ICdQJztcbiAgICAgIGVsc2UgZW5jb2RpbmcgPSAncCc7XG4gICAgfVxuICAgIGlmIChwaWVjZSBpbnN0YW5jZW9mIFJvb2spIHtcbiAgICAgIGlmIChwaWVjZS5jb2xvciA9PT0gJ3doaXRlJykgZW5jb2RpbmcgPSAnUic7XG4gICAgICBlbHNlIGVuY29kaW5nID0gJ3InO1xuICAgIH1cbiAgICBpZiAocGllY2UgaW5zdGFuY2VvZiBLbmlnaHQpIHtcbiAgICAgIGlmIChwaWVjZS5jb2xvciA9PT0gJ3doaXRlJykgZW5jb2RpbmcgPSAnSCc7XG4gICAgICBlbHNlIGVuY29kaW5nID0gJ2gnO1xuICAgIH1cbiAgICBpZiAocGllY2UgaW5zdGFuY2VvZiBCaXNob3ApIHtcbiAgICAgIGlmIChwaWVjZS5jb2xvciA9PT0gJ3doaXRlJykgZW5jb2RpbmcgPSAnQic7XG4gICAgICBlbHNlIGVuY29kaW5nID0gJ2InO1xuICAgIH1cbiAgICBpZiAocGllY2UgaW5zdGFuY2VvZiBRdWVlbikge1xuICAgICAgaWYgKHBpZWNlLmNvbG9yID09PSAnd2hpdGUnKSBlbmNvZGluZyA9ICdRJztcbiAgICAgIGVsc2UgZW5jb2RpbmcgPSAncSc7XG4gICAgfVxuICAgIGlmIChwaWVjZSBpbnN0YW5jZW9mIEtpbmcpIHtcbiAgICAgIGlmIChwaWVjZS5jb2xvciA9PT0gJ3doaXRlJykgZW5jb2RpbmcgPSAnSyc7XG4gICAgICBlbHNlIGVuY29kaW5nID0gJ2snO1xuICAgIH1cbiAgICBlbmNvZGluZyA9IGVuY29kaW5nID8gZW5jb2RpbmcrdGltZXNNb3ZlZCA6IGVuY29kaW5nO1xuICAgIHJldHVybiBlbmNvZGluZztcbn1cblBpZWNlR2FtZUxvZ2ljLmdldFR5cGUgPSAoczogc3RyaW5nKTogUGllY2UgPT4ge1xuICBpZiAocy50cmltKCkgPT09ICcnKSByZXR1cm4gbmV3IEVtcHR5UGllY2U7XG4gIGxldCBjb2RlTWF0Y2g6IEFycmF5PGFueT4gPSBzLm1hdGNoKC8oW2EtekEtel0pKFxcZCopLyk7XG4gIGxldCBudW1Nb3ZlczogbnVtYmVyID0gY29kZU1hdGNoICYmIGNvZGVNYXRjaC5sZW5ndGggPiAyID8gTnVtYmVyKGNvZGVNYXRjaFsyXSkgOiB1bmRlZmluZWQ7XG4gIGxldCBhbHBoYWNvZGU6IHN0cmluZyA9IGNvZGVNYXRjaC5sZW5ndGggPiAxID8gY29kZU1hdGNoWzFdIDogdW5kZWZpbmVkO1xuICBpZiAobnVtTW92ZXMgPT09IHVuZGVmaW5lZCB8fCBhbHBoYWNvZGUgPT09IHVuZGVmaW5lZCkgcmV0dXJuIG5ldyBFbXB0eVBpZWNlO1xuICBzd2l0Y2ggKGFscGhhY29kZS50cmltKCkpIHtcbiAgICBjYXNlICdwJzpcbiAgICAgIHJldHVybiBuZXcgUGF3bignYmxhY2snKTtcbiAgICBjYXNlICdyJzpcbiAgICAgIHJldHVybiBuZXcgUm9vaygnYmxhY2snKTtcbiAgICBjYXNlICdoJzpcbiAgICAgIHJldHVybiBuZXcgS25pZ2h0KCdibGFjaycpO1xuICAgIGNhc2UgJ2InOlxuICAgICAgcmV0dXJuIG5ldyBCaXNob3AoJ2JsYWNrJyk7XG4gICAgY2FzZSAncSc6XG4gICAgICByZXR1cm4gbmV3IFF1ZWVuKCdibGFjaycpO1xuICAgIGNhc2UgJ2snOlxuICAgICAgY29uc3QgYmxhY2traW5nID0gbmV3IEtpbmcoJ2JsYWNrJywgUGllY2VHYW1lTG9naWMua2luZ0NhbkNhc3RsZVdpdGhHaXZlblJvb2spO1xuICAgICAgcmV0dXJuIGJsYWNra2luZztcbiAgICBjYXNlICdQJzpcbiAgICByZXR1cm4gbmV3IFBhd24oJ3doaXRlJyk7XG4gICAgY2FzZSAnUic6XG4gICAgICByZXR1cm4gbmV3IFJvb2soJ3doaXRlJyk7XG4gICAgY2FzZSAnSCc6XG4gICAgICByZXR1cm4gbmV3IEtuaWdodCgnd2hpdGUnKTtcbiAgICBjYXNlICdCJzpcbiAgICAgIHJldHVybiBuZXcgQmlzaG9wKCd3aGl0ZScpO1xuICAgIGNhc2UgJ1EnOlxuICAgICAgcmV0dXJuIG5ldyBRdWVlbignd2hpdGUnKTtcbiAgICBjYXNlICdLJzpcbiAgICAgIGNvbnN0IHdoaXRla2luZyA9IG5ldyBLaW5nKCd3aGl0ZScsIFBpZWNlR2FtZUxvZ2ljLmtpbmdDYW5DYXN0bGVXaXRoR2l2ZW5Sb29rKTtcbiAgICAgIHJldHVybiB3aGl0ZWtpbmc7XG4gICAgY2FzZSAnJzpcbiAgICAgIHJldHVybiBuZXcgRW1wdHlQaWVjZTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIG5ldyBFbXB0eVBpZWNlO1xuICAgIH1cbn07XG4vKipcbiAqIEB0b2RvIGhhbmRsZSBlcnJvciBjYXNlIHdoZXJlIGNvZGUgZG9lc24ndCBtYXRjaCBpbiBtb3JlIG1lYW5pbmdmdWwgd2F5LCBiZXR0ZXIgZm9yIHRlc3RpbmcuXG4gKi9cblBpZWNlR2FtZUxvZ2ljLmdldE51bU1vdmVzID0gKHM6IHN0cmluZyk6IG51bWJlciA9PiB7XG4gIGNvbnN0IGNvZGVNYXRjaDogQXJyYXk8c3RyaW5nPiA9IHMubWF0Y2goLyhbYS16QS16XSkoXFxkKikvKTtcbiAgY29uc3QgbnVtTW92ZXM6IG51bWJlciA9IGNvZGVNYXRjaCAmJiBjb2RlTWF0Y2gubGVuZ3RoID4gMiAmJiAhTnVtYmVyLmlzTmFOKE51bWJlcihjb2RlTWF0Y2hbMl0pKSA/IE51bWJlcihjb2RlTWF0Y2hbMl0pIDogLTE7IC8vIC0xIHNob3VsZCBuZXZlciBoYXBwZW4sIHRob3VnaC5cbiAgcmV0dXJuIG51bU1vdmVzO1xufTtcblBpZWNlR2FtZUxvZ2ljLmdldFBvc3NpYmxlUGllY2VzVG9Qcm9tb3RlVG8gPSAoZ2FtZVN0YXRlOiBHYW1lU3RhdGUsIHNyYzogQm94KTogQXJyYXk8Qm94PiA9PiB7XG4gIGNvbnN0IHZhbGlkUHJvbW90aW9uczogQXJyYXk8Qm94PiA9IFtdO1xuICBjb25zdCBwcm9tb3RhYmxlQm94ID0gUGllY2VHYW1lTG9naWMuZ2V0Qm94T2ZQcm9tb3RhYmxlUGllY2VJZlBvc3NpYmxlKGdhbWVTdGF0ZSk7XG4gIGlmIChwcm9tb3RhYmxlQm94ICE9PSB1bmRlZmluZWQpIHtcbiAgICBjb25zdCBzcmNQaWVjZSA9IFBpZWNlR2FtZUxvZ2ljLmdldFR5cGUoZ2FtZVN0YXRlLmdldEVuY29kaW5nKHNyYykpO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZ2FtZVN0YXRlLnJhbmtDb3VudDsgaSsrKVxuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBnYW1lU3RhdGUuZmlsZUNvdW50OyBqKyspIHtcbiAgICAgICAgY29uc3QgYm94ID0geyByOiBpLCBjOiBqIH07XG4gICAgICAgIGNvbnN0IG90aGVyUGllY2UgPSBQaWVjZUdhbWVMb2dpYy5nZXRUeXBlKGdhbWVTdGF0ZS5nZXRFbmNvZGluZyh7cjogaSwgYzogan0pKTtcbiAgICAgICAgaWYgKHNyY1BpZWNlLmNvbG9yID09PSBvdGhlclBpZWNlLmNvbG9yXG4gICAgICAgICAgICAmJiAhKG90aGVyUGllY2UgaW5zdGFuY2VvZiBQYXduKSAmJiAhKG90aGVyUGllY2UgaW5zdGFuY2VvZiBLaW5nKSAmJiAhKG90aGVyUGllY2UgaW5zdGFuY2VvZiBFbXB0eVBpZWNlKSlcbiAgICAgICAgICAgICAgdmFsaWRQcm9tb3Rpb25zLnB1c2goYm94KTtcbiAgICAgIH1cbiAgfVxuICByZXR1cm4gdmFsaWRQcm9tb3Rpb25zO1xufVxuUGllY2VHYW1lTG9naWMuZ2V0UG9zc2libGVNb3ZlcyA9IChnYW1lU3RhdGU6IEdhbWVTdGF0ZSwgc3JjOiBCb3gsIHByZXZNb3ZlPzogeyBzcmM6IEJveCwgZHN0OiBCb3ggfSk6IEFycmF5PEJveD4gPT4ge1xuICBjb25zdCBwb3NzaWJsZVByb21vdGlvbk1vdmVzID0gUGllY2VHYW1lTG9naWMuZ2V0UG9zc2libGVQaWVjZXNUb1Byb21vdGVUbyhnYW1lU3RhdGUsIHNyYyk7XG4gIGlmIChwb3NzaWJsZVByb21vdGlvbk1vdmVzLmxlbmd0aCA+IDApIHJldHVybiBwb3NzaWJsZVByb21vdGlvbk1vdmVzO1xuICBjb25zdCBjb25zdHJ1Y3RNb3Zlc01hdHJpeCA9IChnYW1lU3RhdGU6IEdhbWVTdGF0ZSwgc3JjOiBCb3gsIFBpZWNlVHlwZTogUGllY2UsIG51bU1vdmVzOiBudW1iZXIpID0+IHtcbiAgICBjb25zdCB2YWxpZE1vdmVzOiBBcnJheTxCb3g+ID0gW107XG4gICAgY29uc3QgaXNQb3NzaWJsZVRvTW92ZVRvID0gdHlwZW9mIFBpZWNlVHlwZS5nZXRQb3NzaWJsZU1vdmVzID09ICdmdW5jdGlvbicgPyBQaWVjZVR5cGUuZ2V0UG9zc2libGVNb3ZlcyhnYW1lU3RhdGUsIHNyYywgbnVtTW92ZXMpIDogKGRzdDogQm94KT0+ZmFsc2U7XG4gICAgaWYgKCFpc1Bvc3NpYmxlVG9Nb3ZlVG8pIHJldHVybiB2YWxpZE1vdmVzO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZ2FtZVN0YXRlLnJhbmtDb3VudDsgaSsrKVxuICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBnYW1lU3RhdGUuZmlsZUNvdW50OyBqKyspXG4gICAgICAgICBpZiAoaXNQb3NzaWJsZVRvTW92ZVRvKHtyOmksYzpqfSkpIHZhbGlkTW92ZXMucHVzaCh7cjppLGM6an0pO1xuICAgIHJldHVybiB2YWxpZE1vdmVzO1xuICB9XG4gIGNvbnN0IHMgPSBnYW1lU3RhdGUuZ2V0RW5jb2Rpbmcoc3JjKTtcbiAgY29uc3QgbnVtTW92ZXMgPSBQaWVjZUdhbWVMb2dpYy5nZXROdW1Nb3ZlcyhzKTtcbiAgY29uc3QgUGllY2VUeXBlID0gUGllY2VHYW1lTG9naWMuZ2V0VHlwZShzKTtcbiAgaWYgKFBpZWNlVHlwZSAmJiAhaXNOYU4obnVtTW92ZXMpKSB7XG4gICAgY29uc3QgbW92ZXNNYXRyaXggPSBjb25zdHJ1Y3RNb3Zlc01hdHJpeChnYW1lU3RhdGUsIHNyYywgUGllY2VUeXBlLCBudW1Nb3Zlcyk7XG4gICAgaWYgKFBpZWNlR2FtZUxvZ2ljLmdldFR5cGUoZ2FtZVN0YXRlLmdldEVuY29kaW5nKHNyYykpIGluc3RhbmNlb2YgS2luZykge1xuICAgICAgaWYgKFBpZWNlR2FtZUxvZ2ljLmtpbmdDYW5DYXN0bGVXaXRoR2l2ZW5Sb29rKGdhbWVTdGF0ZSwgc3JjLCB7IHI6IHNyYy5yLCBjOiAwIH0pKSB7XG4gICAgICAgIG1vdmVzTWF0cml4LnB1c2goeyByOiBzcmMuciwgYzogMCB9KTtcbiAgICAgIH1cbiAgICAgIGlmIChQaWVjZUdhbWVMb2dpYy5raW5nQ2FuQ2FzdGxlV2l0aEdpdmVuUm9vayhnYW1lU3RhdGUsIHNyYywgeyByOiBzcmMuciwgYzogZ2FtZVN0YXRlLmZpbGVDb3VudCAtIDEgfSkpIHtcbiAgICAgICAgbW92ZXNNYXRyaXgucHVzaCh7IHI6IHNyYy5yLCBjOiBnYW1lU3RhdGUuZmlsZUNvdW50IC0gMSB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKFBpZWNlR2FtZUxvZ2ljLmdldFR5cGUoZ2FtZVN0YXRlLmdldEVuY29kaW5nKHNyYykpIGluc3RhbmNlb2YgUGF3bikge1xuICAgICAgaWYgKHByZXZNb3ZlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ1RFU1QnKSBjb25zb2xlLndhcm4oJ1BpZWNlR2FtZUxvZ2ljLmdldFBvc3NpYmxlTW92ZXMgc2hvdWxkIGJlIHBhc3NlZCBwcmV2TW92ZSBhcyBsYXN0IHBhcmFtZXRlciEgUGxlYXNlIHJlZmFjdG9yLCBlbHNlIEVuIFBhc3NhbnRlIHdpbGwgbm90IHdvcmsuJyk7XG4gICAgICB9IGVsc2UgaWYgKFBpZWNlR2FtZUxvZ2ljLmlzRW5QYXNzYW50UG9zc2libGUoZ2FtZVN0YXRlLCBzcmMsIHByZXZNb3ZlKSkge1xuICAgICAgICBjb25zdCBkaXIgPSBwcmV2TW92ZS5kc3QuYyAtIHByZXZNb3ZlLnNyYy5jID4gMCA/IDEgOiAtMTtcbiAgICAgICAgbW92ZXNNYXRyaXgucHVzaCh7IHI6IHNyYy5yICsgZGlyLCBjOiBwcmV2TW92ZS5kc3QuYyB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG1vdmVzTWF0cml4O1xuICB9XG4gIHJldHVybiBbXTtcbn07XG5QaWVjZUdhbWVMb2dpYy5pc1Bvc3NpYmxlVG9Nb3ZlVG8gPSAoZ2FtZVN0YXRlOiBHYW1lU3RhdGUsICBzcmM6IEJveCk6IHsgKGJveDogQm94KTogYm9vbGVhbiB9ID0+IHtcbiAgY29uc3QgcyA9IGdhbWVTdGF0ZS5nZXRFbmNvZGluZyhzcmMpO1xuICBjb25zdCBudW1Nb3ZlcyA9IFBpZWNlR2FtZUxvZ2ljLmdldE51bU1vdmVzKHMpO1xuICBjb25zdCBQaWVjZVR5cGUgPSBQaWVjZUdhbWVMb2dpYy5nZXRUeXBlKHMpO1xuICBjb25zdCBpc1Bvc3NpYmxlVG9Nb3ZlVG8gPSBQaWVjZVR5cGUuZ2V0UG9zc2libGVNb3ZlcyhnYW1lU3RhdGUsIHNyYyk7XG4gIHJldHVybiBpc1Bvc3NpYmxlVG9Nb3ZlVG87XG59O1xuUGllY2VHYW1lTG9naWMuaXNJbkNoZWNrID0gKGdhbWVTdGF0ZTogR2FtZVN0YXRlLCBzcmM6IEJveCk6IGJvb2xlYW4gPT4ge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGdhbWVTdGF0ZS5yYW5rQ291bnQ7IGkrKylcbiAgICBmb3IgKGxldCBqID0gMDsgaiA8IGdhbWVTdGF0ZS5maWxlQ291bnQ7IGorKylcbiAgICAgIGlmIChzcmMuciAhPSBpICYmIHNyYy5jICE9IGopIHtcbiAgICAgICAgY29uc3QgcG9zc2libGVBdHRhY2tzID0gUGllY2VHYW1lTG9naWMuZ2V0UG9zc2libGVNb3ZlcyhnYW1lU3RhdGUsIHtyOmksYzpqfSk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKGBQaWVjZUdhbWVMb2dpYy5pc0luQ2hlY2sgcG9zc2libGVBdHRhY2tzIHBpZWNlIGF0ICgke2l9LCR7an0pYCwgcG9zc2libGVBdHRhY2tzKTtcbiAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBwb3NzaWJsZUF0dGFja3MubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgICBpZiAocG9zc2libGVBdHRhY2tzW2tdLnI9PXNyYy5yICYmIHBvc3NpYmxlQXR0YWNrc1trXS5jPT1zcmMuYykgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblBpZWNlR2FtZUxvZ2ljLmlzSW5DaGVja21hdGUgPSAoZ2FtZVN0YXRlOiBHYW1lU3RhdGUsIHNyYzogQm94KTogYm9vbGVhbiA9PiB7XG4gIGNvbnN0IHBvc3NpYmxlTW92ZXMgPSBQaWVjZUdhbWVMb2dpYy5nZXRQb3NzaWJsZU1vdmVzKGdhbWVTdGF0ZSwgc3JjKTtcbiAgbGV0IHBpZWNlSXNJbkNoZWNrID0gUGllY2VHYW1lTG9naWMuaXNJbkNoZWNrKGdhbWVTdGF0ZSwgc3JjKTtcbiAgaWYgKHBpZWNlSXNJbkNoZWNrKSB7XG4gICAgbGV0IGlzSW5DaGVja21hdGUgPSB0cnVlOyAvLyB1c2UgcmVkdWNlXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwb3NzaWJsZU1vdmVzLmxlbmd0aDsgaSsrKVxuICAgICAgaXNJbkNoZWNrbWF0ZSA9IGlzSW5DaGVja21hdGUgJiYgUGllY2VHYW1lTG9naWMuaXNJbkNoZWNrKGdhbWVTdGF0ZSwgcG9zc2libGVNb3Zlc1tpXSk7XG4gICAgaWYgKGlzSW5DaGVja21hdGUpIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn07XG5QaWVjZUdhbWVMb2dpYy5raW5nQ2FuQ2FzdGxlV2l0aEdpdmVuUm9vayA9IChnYW1lU3RhdGU6IEdhbWVTdGF0ZSwgc3JjOiBCb3gsIGRzdDogQm94KTogYm9vbGVhbiA9PiB7XG4gIGNvbnN0IHMgPSBnYW1lU3RhdGUuZ2V0RW5jb2Rpbmcoc3JjKTtcbiAgY29uc3QgdCA9IGdhbWVTdGF0ZS5nZXRFbmNvZGluZyhkc3QpO1xuICBpZiAoUGllY2VHYW1lTG9naWMuZ2V0VHlwZShzKS5uYW1lICE9IChuZXcgS2luZygnJykpLm5hbWUgfHwgUGllY2VHYW1lTG9naWMuZ2V0VHlwZSh0KS5uYW1lICE9IChuZXcgUm9vaygnJykpLm5hbWUgfHwgUGllY2VHYW1lTG9naWMuZ2V0TnVtTW92ZXMocykgIT0gMCB8fCBQaWVjZUdhbWVMb2dpYy5nZXROdW1Nb3Zlcyh0KSAhPSAwKSByZXR1cm4gZmFsc2U7XG4gIGlmIChQaWVjZUhlbHBlci5pc1BpZWNlT2ZDdXJyZW50UGxheWVyKGdhbWVTdGF0ZSwgc3JjKSAmJiBQaWVjZUhlbHBlci5pc1BpZWNlT2ZDdXJyZW50UGxheWVyKGdhbWVTdGF0ZSwgZHN0KSAmJiBQaWVjZUhlbHBlci5pc0JveE9uQm9hcmQoZ2FtZVN0YXRlLCBkc3QpICYmIHNyYyAhPSBkc3QpIHtcbiAgICBsZXQgZGlyID0gZHN0LmMgLSBzcmMuYyA+IDAgPyAxIDogLTE7XG4gICAgbGV0IGxlbiA9IE1hdGguYWJzKGRzdC5jLXNyYy5jKTtcbiAgICBmb3IgKGxldCBpID0gc3JjLmMrZGlyOyBsZW4tLSA+IDE7IGkgKz0gZGlyKSBpZiAoIVBpZWNlSGVscGVyLmlzRW1wdHkoZ2FtZVN0YXRlLCB7cjpzcmMucixjOml9KSkgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG59O1xuLyoqXG4gKiBAcmV0dXJucyB7R2FtZVN0YXRlfSBVcGRhdGVkIEdhbWVTdGF0ZSB3aXRoIEtpbmcncyBjYXN0bGUuXG4gKi9cblBpZWNlR2FtZUxvZ2ljLmNhc3RsZUtpbmdXaXRoR2l2ZW5Sb29rID0gKGdhbWVTdGF0ZTogR2FtZVN0YXRlLCBzcmM6IEJveCwgZHN0OiBCb3gpOiBHYW1lU3RhdGUgPT4ge1xuICBpZiAoIVBpZWNlR2FtZUxvZ2ljLmtpbmdDYW5DYXN0bGVXaXRoR2l2ZW5Sb29rKGdhbWVTdGF0ZSwgc3JjLCBkc3QpKSByZXR1cm4gZ2FtZVN0YXRlO1xuICBjb25zdCBuZXdCb2FyZCA9IG5ldyBCb2FyZChnYW1lU3RhdGUuYm9hcmQpO1xuICBuZXdCb2FyZC5zZXRFbmNvZGluZyhzcmMsIFBpZWNlR2FtZUxvZ2ljLmluY3JlbWVudE1vdmVDb3VudChnYW1lU3RhdGUuZ2V0RW5jb2Rpbmcoc3JjKSkpO1xuICBsZXQgb3V0RGlyID0gZHN0LmMgLSBzcmMuYyA+IDAgPyAxIDogLTE7XG4gIGxldCBzaGlmdCA9IDA7XG4gIGlmIChNYXRoLmFicyhkc3QuYyAtIHNyYy5jKSA9PSAzKSBzaGlmdCA9IDI7XG4gIGVsc2UgaWYgKE1hdGguYWJzKGRzdC5jIC0gc3JjLmMpID09IDQpIHNoaWZ0ID0gMztcbiAgbmV3Qm9hcmQuc2V0RW5jb2Rpbmcoe3I6IHNyYy5yLCBjOiBzcmMuYyArIG91dERpciAqIHNoaWZ0IH0sIGdhbWVTdGF0ZS5nZXRFbmNvZGluZyhzcmMpKTtcbiAgbmV3Qm9hcmQuc2V0RW5jb2Rpbmcoc3JjLCAnICcpO1xuICBuZXdCb2FyZC5zZXRFbmNvZGluZyh7IHI6IGRzdC5yLCBjOiBkc3QuYyAtIG91dERpciAqIHNoaWZ0IH0sIGdhbWVTdGF0ZS5nZXRFbmNvZGluZyhkc3QpKTtcbiAgbmV3Qm9hcmQuc2V0RW5jb2RpbmcoZHN0LCAnICcpO1xuICByZXR1cm4gbmV3IEdhbWVTdGF0ZShuZXdCb2FyZCk7XG59O1xuUGllY2VHYW1lTG9naWMuZ2V0U2V0T2ZBbGxQb3NzaWJsZU1vdmVzRm9yUGxheWVyID0gKGdhbWVTdGF0ZTogR2FtZVN0YXRlLCBwbGF5ZXI6IG51bWJlcik6IFNldDxCb3g+ID0+IHtcbiAgbGV0IHMgPSBuZXcgU2V0KCk7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgZ2FtZVN0YXRlLnJhbmtDb3VudDsgaSsrKVxuICAgIGZvciAobGV0IGogPSAwOyBqIDwgZ2FtZVN0YXRlLmZpbGVDb3VudDsgaisrKVxuICAgICAgaWYgKCFQaWVjZUhlbHBlci5pc1BpZWNlT2ZHaXZlblBsYXllcihnYW1lU3RhdGUsIHBsYXllcix7cjppLGM6an0pICYmICFQaWVjZUhlbHBlci5pc0VtcHR5KGdhbWVTdGF0ZSwge3I6aSxjOmp9KSkge1xuICAgICAgICBjb25zdCBwb3NzaWJsZVBsYXllck1vdmVzID0gUGllY2VHYW1lTG9naWMuZ2V0UG9zc2libGVNb3ZlcyhnYW1lU3RhdGUsIHtyOmksYzpqfSk7XG4gICAgICAgIGZvciAobGV0IGsgPSAwOyBrIDwgcG9zc2libGVQbGF5ZXJNb3Zlcy5sZW5ndGg7IGsrKylcbiAgICAgICAgICBzLmFkZChwb3NzaWJsZVBsYXllck1vdmVzW2tdKTtcbiAgICAgIH1cbiAgcmV0dXJuIHM7XG59O1xuLyoqXG4gKiBAdG9kbyBub3QgdGhpcyBzaW1wbGUsIHNob3VsZCBwcmlvcml0aXplIGtpbGwtbW92ZXMgYW5kIG1vdmVzIHRoYXQgZ2V0IHRoZSBwbGF5ZXIgb3V0IG9mIGhhcm0gKGluIG5leHQgbW92ZSBvbmx5LCBmb3Igbm93KVxuICovXG5QaWVjZUdhbWVMb2dpYy5yYW5kb21EZWZlbnNpdmVNb3ZlID0gKGdhbWVTdGF0ZTogR2FtZVN0YXRlKTogU2V0PEJveD4gPT4ge1xuICBjb25zdCBjdXJyZW50UGxheWVyID0gZ2FtZVN0YXRlLnBsYXllcjtcbiAgY29uc3Qgb3Bwb25lbnQgPSBjdXJyZW50UGxheWVyID09IDAgPyAxIDogMDtcbiAgY29uc3Qgc2V0T2ZPcHBvbmVudE1vdmVzID0gUGllY2VHYW1lTG9naWMuZ2V0U2V0T2ZBbGxQb3NzaWJsZU1vdmVzRm9yUGxheWVyKGdhbWVTdGF0ZSwgb3Bwb25lbnQpO1xuICBsZXQgcmFuZElkeCA9IDA7XG4gIHJldHVybiBzZXRPZk9wcG9uZW50TW92ZXM7XG59O1xuUGllY2VHYW1lTG9naWMuaXNBQ2FwdHVyZSA9IChnYW1lU3RhdGU6IEdhbWVTdGF0ZSwgc3JjOiBCb3gsIGRzdDogQm94KTogYm9vbGVhbiA9PiB7XG4gIGNvbnN0IHMgPSBnYW1lU3RhdGUuZ2V0RW5jb2Rpbmcoc3JjKTtcbiAgY29uc3QgbnVtTW92ZXMgPSBQaWVjZUdhbWVMb2dpYy5nZXROdW1Nb3ZlcyhzKTtcbiAgY29uc3QgUGllY2VUeXBlID0gUGllY2VHYW1lTG9naWMuZ2V0VHlwZShzKTtcbiAgaWYgKHR5cGVvZiBQaWVjZVR5cGUuZ2V0UG9zc2libGVNb3ZlcyA9PSAnZnVuY3Rpb24nICYmICFpc05hTihudW1Nb3ZlcykpIHtcbiAgICBjb25zdCBpc1Bvc3NpYmxlVG9Nb3ZlVG8gPSBQaWVjZVR5cGUuZ2V0UG9zc2libGVNb3ZlcyhnYW1lU3RhdGUsIHNyYywgbnVtTW92ZXMpO1xuICAgIGlmIChpc1Bvc3NpYmxlVG9Nb3ZlVG8oZHN0KSAmJiAhUGllY2VIZWxwZXIuaXNQaWVjZU9mQ3VycmVudFBsYXllcihnYW1lU3RhdGUsIGRzdCkgJiYgIVBpZWNlSGVscGVyLmlzRW1wdHkoZ2FtZVN0YXRlLCBkc3QpKSByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59O1xuLyoqXG4gKiBAcGFyYW0gc3JjIHRoZSBib3ggdG8gY2hlY2sgaWYgcG9zc2libGUgdG8gRW5QYXNzYW50IGZyb21cbiAqIEBwYXJhbSBwcmV2TW92ZSB0aGUgcHJldmlvdXMgbW92ZSBwbGF5ZWQsIHdoaWNoIGlzIHVzdWFsbHkgdGhlIG9wcG9uZW50IHRvIHRoZSBwaWVjZSBhdCBzcmMuXG4gKi9cblBpZWNlR2FtZUxvZ2ljLmlzRW5QYXNzYW50UG9zc2libGUgPSAoZ2FtZVN0YXRlOiBHYW1lU3RhdGUsIHNyYzogQm94LCBwcmV2TW92ZToge3NyYzogQm94LCBkc3Q6IEJveH0pOiBib29sZWFuID0+IHtcbiAgY29uc3Qgb3Bwb25lbnRTdGFydCA9IHByZXZNb3ZlLmRzdC5yIC0gcHJldk1vdmUuc3JjLnIgPiAwID8gMSA6IDY7XG4gIGNvbnN0IGRpciA9IHByZXZNb3ZlLmRzdC5yIC0gcHJldk1vdmUuc3JjLnIgPiAwID8gMSA6IC0xO1xuICBjb25zdCBwaWVjZSA9IFBpZWNlR2FtZUxvZ2ljLmdldFR5cGUoZ2FtZVN0YXRlLmdldEVuY29kaW5nKHNyYykpO1xuICBpZiAocGllY2UgaW5zdGFuY2VvZiBQYXduXG4gICAgICAmJiBNYXRoLmFicyhwcmV2TW92ZS5kc3QuciAtIHByZXZNb3ZlLnNyYy5yKSA9PT0gMlxuICAgICAgJiYgcHJldk1vdmUuZHN0LnIgPT09IHNyYy5yXG4gICAgICAmJiBvcHBvbmVudFN0YXJ0ID09PSBwcmV2TW92ZS5zcmMuciAvKiBzaG91bGRuJ3QgaGFwcGVuIHVuZGVyIG5vcm1hbCBQYXduIHJ1bGVzICovXG4gICAgICAmJiBQaWVjZUdhbWVMb2dpYy5nZXRUeXBlKGdhbWVTdGF0ZS5nZXRFbmNvZGluZyhwcmV2TW92ZS5kc3QpKSBpbnN0YW5jZW9mIFBhd25cbiAgICAgICYmICFQaWVjZUhlbHBlci5pc1BpZWNlT2ZDdXJyZW50UGxheWVyKGdhbWVTdGF0ZSwgcHJldk1vdmUuZHN0KSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblBpZWNlR2FtZUxvZ2ljLmdldEJveE9mUHJvbW90YWJsZVBpZWNlSWZQb3NzaWJsZSA9IChnYW1lU3RhdGU6IEdhbWVTdGF0ZSk6IEJveCA9PiB7XG4gIGNvbnN0IHBhd25BdENvbHVtbkJvcmRlciA9IChib3JkZXJJZHg6IG51bWJlcik6IEJveCA9PiB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBnYW1lU3RhdGUucmFua0NvdW50OyBpKyspXG4gICAgICBpZiAoUGllY2VHYW1lTG9naWMuZ2V0VHlwZShnYW1lU3RhdGUuZ2V0RW5jb2Rpbmcoe3I6IGJvcmRlcklkeCwgYzogaX0pKSBpbnN0YW5jZW9mIFBhd24pXG4gICAgICAgIHJldHVybiB7cjogYm9yZGVySWR4LCBjOiBpfTtcbiAgfTtcbiAgcmV0dXJuIHBhd25BdENvbHVtbkJvcmRlcigwKSB8fCBwYXduQXRDb2x1bW5Cb3JkZXIoZ2FtZVN0YXRlLnJhbmtDb3VudCAtIDEpO1xufTtcbi8qKlxuICogQHBhcmFtIGZpcnN0IGJveCBvZiBwaWVjZSAoaWUgcGF3bikgdG8gcHJvbW90ZVxuICogQHBhcmFtIHNlY29uZCBwaWVjZSAoaWUgbm90IHBhd24gYW5kIG5vdCBraW5nIGFuZCBub3Qgbm9uLXBpZWNlKSB0byBwcm9tb3RlIHRvXG4gKi9cblBpZWNlR2FtZUxvZ2ljLnByb21vdGVJZlBvc3NpYmxlID0gKGdhbWVTdGF0ZTogR2FtZVN0YXRlLCBmaXJzdDogQm94LCBzZWNvbmQ6IFBpZWNlKTogR2FtZVN0YXRlID0+IHtcbiAgY29uc3QgcHJvbW90YWJsZUJveCA9IFBpZWNlR2FtZUxvZ2ljLmdldEJveE9mUHJvbW90YWJsZVBpZWNlSWZQb3NzaWJsZShnYW1lU3RhdGUpO1xuICBjb25zdCBuZXdCb2FyZCA9IG5ldyBCb2FyZChnYW1lU3RhdGUuYm9hcmQpO1xuICBpZiAocHJvbW90YWJsZUJveCAhPT0gdW5kZWZpbmVkICYmIHByb21vdGFibGVCb3guciA9PT0gZmlyc3QuciAmJiBwcm9tb3RhYmxlQm94LmMgPT09IGZpcnN0LmNcbiAgICAgICYmICEoc2Vjb25kIGluc3RhbmNlb2YgUGF3bikgJiYgIShzZWNvbmQgaW5zdGFuY2VvZiBLaW5nKSAmJiAhKHNlY29uZCBpbnN0YW5jZW9mIEVtcHR5UGllY2UpXG4gICAgICAmJiBQaWVjZUdhbWVMb2dpYy5nZXRUeXBlKGdhbWVTdGF0ZS5nZXRFbmNvZGluZyhmaXJzdCkpLmNvbG9yID09PSBzZWNvbmQuY29sb3IpXG4gICAgICBuZXdCb2FyZC5zZXRFbmNvZGluZyhmaXJzdCwgUGllY2VHYW1lTG9naWMuY29udmVydFBpZWNlVG9TdHJpbmdFbmNvZGluZyhzZWNvbmQpKTtcbiAgcmV0dXJuIG5ldyBHYW1lU3RhdGUobmV3Qm9hcmQpO1xufTtcblBpZWNlR2FtZUxvZ2ljLmluY3JlbWVudE1vdmVDb3VudCA9IChlbmM6IHN0cmluZyk6IHN0cmluZyA9PiB7XG4gIGNvbnN0IHByZWZpeCA9IGVuYy50cmltKCkubWF0Y2goL1xcdy9nKSA/IGVuYy50cmltKCkubWF0Y2goL1xcdy9nKVswXSA6ICcnO1xuICBjb25zdCBudW0gPSBlbmMudHJpbSgpLm1hdGNoKC8oXFxkKykvZykgPyBOdW1iZXIoZW5jLnRyaW0oKS5tYXRjaCgvKFxcZCspL2cpWzBdKSA6IDA7XG4gIHJldHVybiBwcmVmaXggKyBOdW1iZXIobnVtICsgMSk7XG59O1xuLyoqXG4gKiBAZGVzY3JpcHRpb24gQXR0ZW1wdCB0byBtYWtlIHRoZSBkZXNpcmVkIG1vdmUsIGlmIHRoZSBtb3ZlIGlzIGxlZ2FsLlxuICovXG5QaWVjZUdhbWVMb2dpYy5tYWtlTGVnYWxNb3ZlID0gKGdhbWVTdGF0ZTogR2FtZVN0YXRlLCBzcmM6IEJveCwgZHN0OiBCb3gsIHByZXZNb3ZlOiB7c3JjOiBCb3gsIGRzdDogQm94fSwgcGllY2VUb1Byb21vdGVUbz86IFBpZWNlKTogeyBnYW1lU3RhdGU6IEdhbWVTdGF0ZSwgY2FwdHVyZWRQaWVjZTogUGllY2UsIHdhc1Byb21vdGlvbjogYm9vbGVhbiB9ID0+IHtcbiAgY29uc3QgcHJvbW90YWJsZUJveCA9IFBpZWNlR2FtZUxvZ2ljLmdldEJveE9mUHJvbW90YWJsZVBpZWNlSWZQb3NzaWJsZShnYW1lU3RhdGUpO1xuICBpZiAocHJvbW90YWJsZUJveCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgaWYgKHBpZWNlVG9Qcm9tb3RlVG8gPT09IHVuZGVmaW5lZCkge1xuICAgICAgcGllY2VUb1Byb21vdGVUbyA9IFBpZWNlR2FtZUxvZ2ljLmdldFR5cGUoZ2FtZVN0YXRlLmdldEVuY29kaW5nKGRzdCkpO1xuICAgIH1cbiAgICByZXR1cm4geyBnYW1lU3RhdGU6IFBpZWNlR2FtZUxvZ2ljLnByb21vdGVJZlBvc3NpYmxlKGdhbWVTdGF0ZSwgc3JjLCBwaWVjZVRvUHJvbW90ZVRvKSwgY2FwdHVyZWRQaWVjZTogbmV3IEVtcHR5UGllY2UsIHdhc1Byb21vdGlvbjogdHJ1ZSB9O1xuICB9XG4gIGlmIChQaWVjZUdhbWVMb2dpYy5raW5nQ2FuQ2FzdGxlV2l0aEdpdmVuUm9vayhnYW1lU3RhdGUsIHNyYywgZHN0KSkge1xuICAgIHJldHVybiB7IGdhbWVTdGF0ZTogUGllY2VHYW1lTG9naWMuY2FzdGxlS2luZ1dpdGhHaXZlblJvb2soZ2FtZVN0YXRlLCBzcmMsIGRzdCksIGNhcHR1cmVkUGllY2U6IG5ldyBFbXB0eVBpZWNlLCB3YXNQcm9tb3Rpb246IGZhbHNlIH07XG4gIH1cbiAgY29uc3QgbW92ZUFuZFVwZGF0ZVN0YXRlID0gKGVuUGFzc2FudD86IEJveCk6IHsgZ2FtZVN0YXRlOiBHYW1lU3RhdGUsIGNhcHR1cmVkUGllY2U6IFBpZWNlLCB3YXNQcm9tb3Rpb246IGJvb2xlYW4gfSA9PiB7XG4gICAgY29uc3QgY2FwdHVyZWRQaWVjZSA9IGVuUGFzc2FudCA/IFBpZWNlR2FtZUxvZ2ljLmdldFR5cGUoZ2FtZVN0YXRlLmdldEVuY29kaW5nKGVuUGFzc2FudCkpIDogUGllY2VHYW1lTG9naWMuZ2V0VHlwZShnYW1lU3RhdGUuZ2V0RW5jb2RpbmcoZHN0KSk7XG4gICAgY29uc3QgbmV3Qm9hcmQgPSBuZXcgQm9hcmQoZ2FtZVN0YXRlLmJvYXJkKTtcbiAgICBpZiAoZW5QYXNzYW50KSBuZXdCb2FyZC5zZXRFbmNvZGluZyhlblBhc3NhbnQsICcgJyk7XG4gICAgbmV3Qm9hcmQuc2V0RW5jb2RpbmcoZHN0LCBQaWVjZUdhbWVMb2dpYy5pbmNyZW1lbnRNb3ZlQ291bnQoZ2FtZVN0YXRlLmdldEVuY29kaW5nKHNyYykpKTtcbiAgICBuZXdCb2FyZC5zZXRFbmNvZGluZyhzcmMsICcgJyk7XG4gICAgcmV0dXJuIHsgZ2FtZVN0YXRlOiBuZXcgR2FtZVN0YXRlKG5ld0JvYXJkKSwgY2FwdHVyZWRQaWVjZSwgd2FzUHJvbW90aW9uOiBmYWxzZSB9O1xuICB9O1xuICBpZiAoUGllY2VHYW1lTG9naWMuaXNFblBhc3NhbnRQb3NzaWJsZShnYW1lU3RhdGUsIHNyYywgcHJldk1vdmUpKSB7XG4gICAgY29uc3QgZGlyID0gcHJldk1vdmUuZHN0LnIgLSBwcmV2TW92ZS5zcmMuciA+IDAgPyAtMSA6IDE7XG4gICAgY29uc3QgYm94ID0geyByOiBzcmMuciArIGRpciwgYzogcHJldk1vdmUuZHN0LmMgfTtcbiAgICBpZiAoZHN0LnIgPT09IGJveC5yICYmIGRzdC5jID09PSBib3guYykge1xuICAgICAgcmV0dXJuIG1vdmVBbmRVcGRhdGVTdGF0ZShwcmV2TW92ZS5kc3QpO1xuICAgIH1cbiAgfVxuICBjb25zdCBwb3NzaWJsZU1vdmVzID0gUGllY2VHYW1lTG9naWMuZ2V0UG9zc2libGVNb3ZlcyhnYW1lU3RhdGUsIHNyYywgcHJldk1vdmUpO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IHBvc3NpYmxlTW92ZXMubGVuZ3RoOyBpKyspIHtcbiAgICBjb25zdCBib3g6IEJveCA9IHBvc3NpYmxlTW92ZXNbaV07XG4gICAgaWYgKGRzdC5yID09PSBib3guciAmJiBkc3QuYyA9PT0gYm94LmNcbiAgICAgICAgJiYgIVBpZWNlSGVscGVyLmlzUGllY2VPZkN1cnJlbnRQbGF5ZXIoZ2FtZVN0YXRlLCBkc3QpKSB7XG4gICAgICAgICAgcmV0dXJuIG1vdmVBbmRVcGRhdGVTdGF0ZSgpO1xuICAgICAgICB9XG4gIH1cbiAgcmV0dXJuIHsgZ2FtZVN0YXRlLCBjYXB0dXJlZFBpZWNlOiBuZXcgRW1wdHlQaWVjZSwgd2FzUHJvbW90aW9uOiBmYWxzZSB9O1xufTtcbmV4cG9ydCB7IFBpZWNlR2FtZUxvZ2ljIH07XG4iLCJpbXBvcnQgU3RvcmUgZnJvbSAnLi4vc3RvcmUvc3RvcmUnO1xuaW1wb3J0IFZpZXcgZnJvbSAnLi4vdmlldy92aWV3JztcbmltcG9ydCB7IEJvYXJkLCBCb3gsIFBpZWNlLCBFbXB0eVBpZWNlLCBTdG9yZVN0YXRlLCBQTEFZRVJfV0hJVEUsIFBMQVlFUl9CTEFDSyB9IGZyb20gJy4uL3R5cGVzJztcbmltcG9ydCB7IFBpZWNlR2FtZUxvZ2ljIH0gZnJvbSAnLi4vbW9kZWwvcGllY2VnYW1lbG9naWMnO1xuXG4vKipcbiAqIE5vdGUgdGhhdCB0aGUgQ29udHJvbGxlciBpcyB0aGUgb25seSBtb2R1bGUgd2hpY2ggc2hhbGwga25vdyBhYm91dCBhbnkgYW5kIGFsbCBvZiB0aGUgTW9kZWwsIFN0b3JlLCBhbmQgVmlldy5cbiAqIFRoZSBDb250cm9sbGVyIHNoYWxsIHNpbXBseSByZWxheSB1c2VyIGV2ZW50cyBmcm9tIHRoZSBWaWV3IHRvIHRoZSBNb2RlbCwgdGFraW5nIHRoZSBwdXJlbHkgZnVuY3Rpb25hbFxuICogb3V0cHV0IGZyb20gdGhlIE1vZGVsIGFuZCBzdG9yaW5nIGl0IGluIHRoZSBTdG9yZS4gVGhlIENvbnRyb2xsZXIgdGhlbiBub3RpZmllcyB0aGUgVmlldyBvZiB0aGUgdXBkYXRlZFxuICogc3RhdGUgKHZpYSB0aGlzLnN0b3JlLnN0YXRlLCBubyBtb3JlLCBubyBsZXNzKSwgYW5kIHRoZSBWaWV3IHVwZGF0ZXMuIFRoZSBsb29wIGNvbnRpbnVlcyBhcyBzdWNoLlxuICogXG4gKiBUaGlzIGlzIGEgc2ltcGxlIHBhcmFkaWdtIG9uY2UgdGhvdWdodCBvdXQuIFRoZSBDb250cm9sbGVyIHNoYWxsIGJlIGFzIHNpbXBsZSBhcyBwb3NzaWJsZSwgZGVsZWdhdGluZ1xuICogYXMgbXVjaCBvZiB0aGUgZ2FtZSBsb2dpYyBhcyBwb3NzaWJsZSB0byB0aGUgTW9kZWwsIGFuZCBhcyBtdWNoIGFzIHRoZSBncmFwaGljYWwgYXBwZWFyYW5jZSBhcyBwb3NzaWJsZVxuICogdG8gdGhlIFZpZXcsIHdoaWxlIHN0b3JpbmcgdGhlIHVwZGF0ZXMgdG8gdGhlIHJlbGV2YW50IHN0YXRlIG9mIHRoZSBnYW1lIChhcyBuZWVkZWQgYnkgdGhlIFZpZXcpIGluIFxuICogdGhlIFN0b3JlICh3aGljaCBjb250YWlucyB2aXJ0dWFsbHkgbm8gbG9naWMsIGFjdGluZyBtdWNoIGxpa2UgYSBzaW1wbGUgTm9TUUwgZG9jdW1lbnQpLlxuICovXG5cbi8qKlxuICogRGVzZXJpYWxpemUgdGhlIEhUTUwgZGF0YSBpbnRvIGEgSlMgb2JqZWN0LlxuICogaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNTY2MDA1MC93aGF0LWlzLXNlcmlhbGl6YXRpb24tYW5kLWRlc2VyaWFsaXphdGlvbi1jb25jZXB0dWFsbHlcbiAqIEBwYXJhbSB7RWxlbWVudH0gYm94IFRoZSByYXcgaHRtbCBib3ggZnJvbSB0aGUgdmlld1xuICogQHJldHVybnMge0JveH0gdGhlIGNvbnRlbnRzIG9mIHRoZSBib3ggYXMgYSBzdHJ1Y3R1cmVkIEpTIG9iamVjdFxuICovXG5jb25zdCBkZXNlcmlhbGl6ZUJveENvbnRlbnRzID0gKGJveEVsZW06IEVsZW1lbnQpOiB7IGJveDogQm94LCBwaWVjZTogUGllY2UgfSA9PiB7XG4gICAgbGV0IGJveFBvcyA9IE51bWJlcihib3hFbGVtLmdldEF0dHJpYnV0ZSgnZGF0YS1wb3MnKSk7XG4gICAgY29uc3QgciA9IE1hdGguZmxvb3IoYm94UG9zIC8gOCk7XG4gICAgY29uc3QgYyA9IGJveFBvcyAlIDg7XG4gICAgY29uc3QgYm94OiBCb3ggPSB7IHIsIGMgfTtcbiAgICBjb25zdCBwaWVjZSA9IDxQaWVjZT5KU09OLnBhcnNlKGJveEVsZW0uZ2V0QXR0cmlidXRlKCdwaWVjZScpKTtcbiAgICByZXR1cm4geyBib3gsIHBpZWNlIH07XG59XG5cbmNvbnN0IGRlc2VyaWFsaXplQ2FwdHVyZWRQaWVjZSA9IChwaWVjZUVsZW06IEVsZW1lbnQpOiBQaWVjZSA9PiBQaWVjZUdhbWVMb2dpYy5nZXRUeXBlKHBpZWNlRWxlbS5xdWVyeVNlbGVjdG9yKCdkaXYnKS5nZXRBdHRyaWJ1dGUoJ2NsYXNzJykucmVwbGFjZSgnd2hpdGUnLCAnJykucmVwbGFjZSgnYmxhY2snLCAnJykpO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBDb250cm9sbGVyIHtcbiAgICBwcml2YXRlIHN0b3JlOiBTdG9yZTtcbiAgICBwcml2YXRlIHZpZXc6IFZpZXc7XG4gICAgcHJpdmF0ZSBfc2VsZWN0ZWRCb3g6IHsgYm94OiBCb3gsIHBpZWNlOiBQaWVjZSB9O1xuICAgIHByaXZhdGUgX2xhc3RTZWxlY3RlZEJveDogeyBib3g6IEJveCwgcGllY2U6IFBpZWNlIH07XG4gICAgcHJpdmF0ZSBfc2VsZWN0ZWRDYXB0dXJlZFBpZWNlOiBQaWVjZTtcbiAgICBwcml2YXRlIGNyZWF0ZUFuZFNob3dJbml0aWFsQm9hcmQoKSB7XG4gICAgICAgIGNvbnN0IG5ld1N0YXRlOiBTdG9yZVN0YXRlID0gbmV3IFN0b3JlU3RhdGU7XG4gICAgICAgIG5ld1N0YXRlLmJvYXJkID0gUGllY2VHYW1lTG9naWMuY29udmVydEdTQm9hcmRUb1BpZWNlQm9hcmQobmV3U3RhdGUuZ2FtZVN0YXRlKTtcbiAgICAgICAgdGhpcy5zdG9yZS5zdGF0ZSA9IG5ld1N0YXRlO1xuICAgICAgICB0aGlzLnNob3dCb2FyZEFuZEJpbmRCb3hlcygpO1xuICAgIH1cbiAgICBwdWJsaWMgc2V0U3RvcmVTdGF0ZShuZXdTdGF0ZTogU3RvcmVTdGF0ZSk6IHZvaWQge1xuICAgICAgbmV3U3RhdGUuYm9hcmQgPSBQaWVjZUdhbWVMb2dpYy5jb252ZXJ0R1NCb2FyZFRvUGllY2VCb2FyZChuZXdTdGF0ZS5nYW1lU3RhdGUpO1xuICAgICAgdGhpcy5zdG9yZS5zdGF0ZSA9IG5ld1N0YXRlO1xuICAgIH1cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5zdG9yZSA9IG5ldyBTdG9yZTtcbiAgICAgICAgdGhpcy52aWV3ID0gbmV3IFZpZXc7XG4gICAgICAgIHRoaXMuX3NlbGVjdGVkQm94ID0geyBib3g6IHsgcjogLTEsIGM6IC0xIH0sIHBpZWNlOiBuZXcgRW1wdHlQaWVjZSB9O1xuICAgICAgICB0aGlzLl9sYXN0U2VsZWN0ZWRCb3ggPSB7IGJveDogeyByOiAtMSwgYzogLTEgfSwgcGllY2U6IG5ldyBFbXB0eVBpZWNlIH07XG4gICAgICAgIHRoaXMuX3NlbGVjdGVkQ2FwdHVyZWRQaWVjZSA9IG5ldyBFbXB0eVBpZWNlO1xuICAgICAgICB0aGlzLmNyZWF0ZUFuZFNob3dJbml0aWFsQm9hcmQoKTtcbiAgICAgICAgLy8gdGhpcy52aWV3LmJpbmRVbmRvTW92ZSh0aGlzLnVuZG9Nb3ZlLmJpbmQodGhpcykpO1xuICAgICAgICAvLyB0aGlzLnZpZXcuYmluZFJlZG9Nb3ZlKHRoaXMucmVkb01vdmUuYmluZCh0aGlzKSk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBIVE1MIGJvYXJkIGluIFZpZXcsIGJpbmQgdGhpcy5zZWxlY3RCb3ggdG8gZWFjaCBib3ggaW4gVmlldy5cbiAgICAgKiBAcGFyYW0ge1ZvaWR9XG4gICAgICogQHJldHVybnMge1ZvaWR9XG4gICAgICovXG4gICAgc2hvd0JvYXJkQW5kQmluZEJveGVzKCk6IHZvaWQge1xuICAgICAgICB0aGlzLnZpZXcuc2hvd0JvYXJkKHRoaXMuc3RvcmUuc3RhdGUpO1xuICAgICAgICBmb3IgKGxldCByID0gMDsgciA8IDg7IHIrKykge1xuICAgICAgICAgICAgZm9yIChsZXQgYyA9IDA7IGMgPCA4OyBjKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgYm94ID0gdGhpcy52aWV3LiRib2FyZC5jaGlsZHJlblswXS5jaGlsZHJlbltyXS5jaGlsZHJlbltjXTtcbiAgICAgICAgICAgICAgICB0aGlzLnZpZXcuYmluZFNlbGVjdEJveChib3gsIHRoaXMuc2VsZWN0Qm94LmJpbmQodGhpcykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBIVE1MIGNhcHR1cmVzIGluIFZpZXcsIGJpbmQgdGhpcy5zZWxlY3RDYXB0dXJlZFBpZWNlIHRvIGVhY2ggY2FwdHVyZWQgcGllY2UgaW4gVmlldy5cbiAgICAgKiBAcGFyYW0ge1ZvaWR9XG4gICAgICogQHJldHVybnMge1ZvaWR9XG4gICAgICovXG4gICAgc2hvd0FuZEJpbmRDYXB0dXJlZFBpZWNlcygpOiB2b2lkIHtcbiAgICAgICAgbGV0IGNhcHR1cmVzID0gdGhpcy5zdG9yZS5zdGF0ZS5jYXB0dXJlcztcbiAgICAgICAgdGhpcy52aWV3LnNob3dDYXB0dXJlcyh0aGlzLnN0b3JlLnN0YXRlKTtcbiAgICAgICAgbGV0IHdoaXRlSWR4ID0gMDtcbiAgICAgICAgbGV0IGJsYWNrSWR4ID0gMDtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjYXB0dXJlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKGNhcHR1cmVzW2ldLmNvbG9yICYmIGNhcHR1cmVzW2ldLmNvbG9yLmluZGV4T2YoJ2JsYWNrJykgPT0gMCkge1xuICAgICAgICAgICAgICAgIGxldCBwaWVjZSA9IHRoaXMudmlldy4kY2FwdHVyZWRibGFjay5jaGlsZHJlblswXS5jaGlsZHJlbltibGFja0lkeCsrXTtcbiAgICAgICAgICAgICAgICBpZiAocGllY2UgIT0gdW5kZWZpbmVkKSB0aGlzLnZpZXcuYmluZENhcHR1cmVkUGllY2UocGllY2UsIGksIHRoaXMuc2VsZWN0Q2FwdHVyZWRQaWVjZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKGNhcHR1cmVzW2ldLmNvbG9yICYmIGNhcHR1cmVzW2ldLmNvbG9yLmluZGV4T2YoJ3doaXRlJykgPT0gMCkge1xuICAgICAgICAgICAgICAgIGxldCBwaWVjZSA9IHRoaXMudmlldy4kY2FwdHVyZWR3aGl0ZS5jaGlsZHJlblswXS5jaGlsZHJlblt3aGl0ZUlkeCsrXTtcbiAgICAgICAgICAgICAgICBpZiAocGllY2UgIT0gdW5kZWZpbmVkKSB0aGlzLnZpZXcuYmluZENhcHR1cmVkUGllY2UocGllY2UsIGksIHRoaXMuc2VsZWN0Q2FwdHVyZWRQaWVjZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBkZXNjcmlwdGlvbiBOb3RpZmllcyBQR0wgYmFzZWQgb24gbmV3IHN0YXRlIG9mIHRoaXMuX3NlbGVjdGVkQm94IGFuZCB0aGlzLl9sYXN0U2VsZWN0ZWRCb3guXG4gICAgICogQGhlbHBlciBUaGlzIGlzIGV4dHJhY3RlZCBmdW5jdGlvbmFsaXR5IGZyb20gQ29udHJvbGxlci5zZWxlY3RCb3guXG4gICAgICovXG4gICAgbW92ZVhvckdldFBvc3NpYmxlTW92ZXMoKTogdm9pZCB7XG4gICAgICBpZiAoISh0aGlzLl9sYXN0U2VsZWN0ZWRCb3gucGllY2UgaW5zdGFuY2VvZiBFbXB0eVBpZWNlKSkge1xuICAgICAgICBjb25zdCB1cGRhdGVkTW92ZVN0YXRlID0gUGllY2VHYW1lTG9naWMubWFrZUxlZ2FsTW92ZSh0aGlzLnN0b3JlLnN0YXRlLmdhbWVTdGF0ZSwgdGhpcy5fbGFzdFNlbGVjdGVkQm94LmJveCwgdGhpcy5fc2VsZWN0ZWRCb3guYm94LCB0aGlzLnN0b3JlLnN0YXRlLnByZXZNb3ZlLCB0aGlzLl9zZWxlY3RlZENhcHR1cmVkUGllY2UpO1xuICAgICAgICBjb25zdCBuZXdTdGF0ZSA9IG5ldyBTdG9yZVN0YXRlKHRoaXMuc3RvcmUuc3RhdGUpO1xuICAgICAgICBuZXdTdGF0ZS5nYW1lU3RhdGUgPSB1cGRhdGVkTW92ZVN0YXRlLmdhbWVTdGF0ZTtcbiAgICAgICAgY29uc3QgY2FwdHVyZWRQaWVjZSA9IHVwZGF0ZWRNb3ZlU3RhdGUuY2FwdHVyZWRQaWVjZTtcbiAgICAgICAgaWYgKHRoaXMuc3RvcmUuc3RhdGUuZ2FtZVN0YXRlICE9PSBuZXdTdGF0ZS5nYW1lU3RhdGUpIHtcbiAgICAgICAgICBuZXdTdGF0ZS5wb3NzaWJsZURlc3RCb3hlcyA9IHRoaXMuc3RvcmUuc3RhdGUuaW5pdGlhbGl6ZUZhbHNlR3JpZCg4KTtcbiAgICAgICAgICBuZXdTdGF0ZS5wcmV2TW92ZSA9IHsgc3JjOiB0aGlzLl9sYXN0U2VsZWN0ZWRCb3guYm94LCBkc3Q6IHRoaXMuX3NlbGVjdGVkQm94LmJveCB9O1xuICAgICAgICAgIG5ld1N0YXRlLmdhbWVTdGF0ZS5wbGF5ZXIgPSB0aGlzLnN0b3JlLnN0YXRlLmdhbWVTdGF0ZS5wbGF5ZXIgPT09IFBMQVlFUl9XSElURSA/IFBMQVlFUl9CTEFDSyA6IFBMQVlFUl9XSElURTtcbiAgICAgICAgICBpZiAodXBkYXRlZE1vdmVTdGF0ZS53YXNQcm9tb3Rpb24pIG5ld1N0YXRlLmdhbWVTdGF0ZS5wbGF5ZXIgPSBuZXdTdGF0ZS5nYW1lU3RhdGUucGxheWVyID09PSBQTEFZRVJfV0hJVEUgPyBQTEFZRVJfQkxBQ0sgOiBQTEFZRVJfV0hJVEU7XG4gICAgICAgICAgaWYgKCEoY2FwdHVyZWRQaWVjZSBpbnN0YW5jZW9mIEVtcHR5UGllY2UpKSB7XG4gICAgICAgICAgICBuZXdTdGF0ZS5jYXB0dXJlcy5wdXNoKGNhcHR1cmVkUGllY2UpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBwb3NzaWJsZU1vdmVzID0gUGllY2VHYW1lTG9naWMuZ2V0UG9zc2libGVNb3Zlcyh0aGlzLnN0b3JlLnN0YXRlLmdhbWVTdGF0ZSwgdGhpcy5fc2VsZWN0ZWRCb3guYm94LCB0aGlzLnN0b3JlLnN0YXRlLnByZXZNb3ZlKTtcbiAgICAgICAgICBuZXdTdGF0ZS5wb3NzaWJsZURlc3RCb3hlcyA9IHRoaXMuc3RvcmUuc3RhdGUuaW5pdGlhbGl6ZUZhbHNlR3JpZCg4KTtcbiAgICAgICAgICBwb3NzaWJsZU1vdmVzLmZvckVhY2goKGJveDogQm94KSA9PiB7XG4gICAgICAgICAgICBuZXdTdGF0ZS5wb3NzaWJsZURlc3RCb3hlc1tib3gucl1bYm94LmNdID0gdHJ1ZTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNldFN0b3JlU3RhdGUobmV3U3RhdGUpO1xuICAgICAgfVxuICAgICAgdGhpcy5fc2VsZWN0ZWRDYXB0dXJlZFBpZWNlID0gdW5kZWZpbmVkO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFVwZGF0ZSBzZWxlY3RlZFBpZWNlIGFmdGVyIHNldGluZyBsYXN0U2VsZWN0ZWRQaWVjZSB0byBjdXJyZW50IHNlbGVjdGVkUGllY2UuXG4gICAgICogXG4gICAgICogQHBhcmFtIHshRWxlbWVudH0gYm94IGRpdiBvZiB0aGUgc2VsZWN0ZWQgYm94XG4gICAgICovXG4gICAgc2VsZWN0Qm94KGJveDogRWxlbWVudCk6IHZvaWQge1xuICAgICAgdGhpcy5fbGFzdFNlbGVjdGVkQm94ID0gdGhpcy5fc2VsZWN0ZWRCb3g7XG4gICAgICB0aGlzLl9zZWxlY3RlZEJveCA9IGRlc2VyaWFsaXplQm94Q29udGVudHMoYm94KTtcblxuICAgICAgdGhpcy5zaG93QW5kQmluZENhcHR1cmVkUGllY2VzKCk7XG4gICAgICB0aGlzLnNob3dCb2FyZEFuZEJpbmRCb3hlcygpO1xuXG4gICAgICB0aGlzLm1vdmVYb3JHZXRQb3NzaWJsZU1vdmVzKCk7XG5cbiAgICAgIHRoaXMuc2hvd0FuZEJpbmRDYXB0dXJlZFBpZWNlcygpO1xuICAgICAgdGhpcy5zaG93Qm9hcmRBbmRCaW5kQm94ZXMoKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IHBpZWNlRWxlbVxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBpIEluZGV4IG9mIGNhcHR1cmVkIHBpZWNlLlxuICAgICAqL1xuICAgIHNlbGVjdENhcHR1cmVkUGllY2UocGllY2VFbGVtOiBFbGVtZW50LCBpOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5fc2VsZWN0ZWRDYXB0dXJlZFBpZWNlID0gdGhpcy5zdG9yZS5zdGF0ZS5jYXB0dXJlc1tpXTtcbiAgICAgICAgdGhpcy5zaG93QW5kQmluZENhcHR1cmVkUGllY2VzKCk7XG4gICAgICAgIHRoaXMuc2hvd0JvYXJkQW5kQmluZEJveGVzKCk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHRvZG8gTG9vayBpbnRvIEZFTiwgUEdOLCBTQU4gYW5kIGNvbW1vbiBpbXBsZW1lbnRhdGlvbnMgb2Yga2VlcGluZyBoaXN0b3J5XG4gICAgICovXG4gICAgdW5kb01vdmUoKTogdm9pZCB7XG5cbiAgICB9XG5cbiAgICByZWRvTW92ZSgpOiB2b2lkIHtcblxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEB0b2RvIENvbnNpZGVyIEZFTiwgUEdOLCBTQU4sIGV0YyBmb3IgdGhpcy5cbiAgICAgKi9cbiAgICBsb2FkQm9hcmQoKTogdm9pZCB7XG5cbiAgICB9XG4gICAgc2F2ZUJvYXJkKCk6IHZvaWQge1xuXG4gICAgfVxufSIsImltcG9ydCBDb250cm9sbGVyIGZyb20gJy4vY29udHJvbGxlci9jb250cm9sbGVyJztcbmNvbnN0IGNvbnRyb2xsZXIgPSBuZXcgQ29udHJvbGxlcjsiLCIvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblxuLy8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0XG4vLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcbi8vIHdyYXBwZWQgaW4gc3RyaWN0IG1vZGUgY29kZSB3aGljaCBkb2Vzbid0IGRlZmluZSBhbnkgZ2xvYmFscy4gIEl0J3MgaW5zaWRlIGFcbi8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuXG5cbnZhciBjYWNoZWRTZXRUaW1lb3V0O1xudmFyIGNhY2hlZENsZWFyVGltZW91dDtcblxuZnVuY3Rpb24gZGVmYXVsdFNldFRpbW91dCgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRDbGVhclRpbWVvdXQgKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG4oZnVuY3Rpb24gKCkge1xuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2xlYXJUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgIH1cbn0gKCkpXG5mdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikge1xuICAgIGlmIChjYWNoZWRTZXRUaW1lb3V0ID09PSBzZXRUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICAvLyBpZiBzZXRUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkU2V0VGltZW91dCA9PT0gZGVmYXVsdFNldFRpbW91dCB8fCAhY2FjaGVkU2V0VGltZW91dCkgJiYgc2V0VGltZW91dCkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sIDApO1xuICAgIH0gY2F0Y2goZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwobnVsbCwgZnVuLCAwKTtcbiAgICAgICAgfSBjYXRjaChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yXG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKHRoaXMsIGZ1biwgMCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxufVxuZnVuY3Rpb24gcnVuQ2xlYXJUaW1lb3V0KG1hcmtlcikge1xuICAgIGlmIChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGNsZWFyVGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICAvLyBpZiBjbGVhclRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGRlZmF1bHRDbGVhclRpbWVvdXQgfHwgIWNhY2hlZENsZWFyVGltZW91dCkgJiYgY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCAgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLCBtYXJrZXIpO1xuICAgICAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yLlxuICAgICAgICAgICAgLy8gU29tZSB2ZXJzaW9ucyBvZiBJLkUuIGhhdmUgZGlmZmVyZW50IHJ1bGVzIGZvciBjbGVhclRpbWVvdXQgdnMgc2V0VGltZW91dFxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG59XG52YXIgcXVldWUgPSBbXTtcbnZhciBkcmFpbmluZyA9IGZhbHNlO1xudmFyIGN1cnJlbnRRdWV1ZTtcbnZhciBxdWV1ZUluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcbiAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgIH1cbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICAgIGRyYWluUXVldWUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG4gICAgaWYgKGRyYWluaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRpbWVvdXQgPSBydW5UaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG4gICAgZHJhaW5pbmcgPSB0cnVlO1xuXG4gICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZShsZW4pIHtcbiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG4gICAgICAgIHF1ZXVlID0gW107XG4gICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBydW5DbGVhclRpbWVvdXQodGltZW91dCk7XG59XG5cbnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcbiAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuICAgICAgICBydW5UaW1lb3V0KGRyYWluUXVldWUpO1xuICAgIH1cbn07XG5cbi8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcbmZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuICAgIHRoaXMuZnVuID0gZnVuO1xuICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbn1cbkl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcbn07XG5wcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcbnByb2Nlc3MuZW52ID0ge307XG5wcm9jZXNzLmFyZ3YgPSBbXTtcbnByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xucHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxucHJvY2Vzcy5vbiA9IG5vb3A7XG5wcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3Mub25jZSA9IG5vb3A7XG5wcm9jZXNzLm9mZiA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcbnByb2Nlc3MuZW1pdCA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRPbmNlTGlzdGVuZXIgPSBub29wO1xuXG5wcm9jZXNzLmxpc3RlbmVycyA9IGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBbXSB9XG5cbnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcblxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5wcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuIiwiLy8gQ29weXJpZ2h0IEpveWVudCwgSW5jLiBhbmQgb3RoZXIgTm9kZSBjb250cmlidXRvcnMuXG4vL1xuLy8gUGVybWlzc2lvbiBpcyBoZXJlYnkgZ3JhbnRlZCwgZnJlZSBvZiBjaGFyZ2UsIHRvIGFueSBwZXJzb24gb2J0YWluaW5nIGFcbi8vIGNvcHkgb2YgdGhpcyBzb2Z0d2FyZSBhbmQgYXNzb2NpYXRlZCBkb2N1bWVudGF0aW9uIGZpbGVzICh0aGVcbi8vIFwiU29mdHdhcmVcIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQgcmVzdHJpY3Rpb24sIGluY2x1ZGluZ1xuLy8gd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLCBjb3B5LCBtb2RpZnksIG1lcmdlLCBwdWJsaXNoLFxuLy8gZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwgY29waWVzIG9mIHRoZSBTb2Z0d2FyZSwgYW5kIHRvIHBlcm1pdFxuLy8gcGVyc29ucyB0byB3aG9tIHRoZSBTb2Z0d2FyZSBpcyBmdXJuaXNoZWQgdG8gZG8gc28sIHN1YmplY3QgdG8gdGhlXG4vLyBmb2xsb3dpbmcgY29uZGl0aW9uczpcbi8vXG4vLyBUaGUgYWJvdmUgY29weXJpZ2h0IG5vdGljZSBhbmQgdGhpcyBwZXJtaXNzaW9uIG5vdGljZSBzaGFsbCBiZSBpbmNsdWRlZFxuLy8gaW4gYWxsIGNvcGllcyBvciBzdWJzdGFudGlhbCBwb3J0aW9ucyBvZiB0aGUgU29mdHdhcmUuXG4vL1xuLy8gVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEIFwiQVMgSVNcIiwgV0lUSE9VVCBXQVJSQU5UWSBPRiBBTlkgS0lORCwgRVhQUkVTU1xuLy8gT1IgSU1QTElFRCwgSU5DTFVESU5HIEJVVCBOT1QgTElNSVRFRCBUTyBUSEUgV0FSUkFOVElFUyBPRlxuLy8gTUVSQ0hBTlRBQklMSVRZLCBGSVRORVNTIEZPUiBBIFBBUlRJQ1VMQVIgUFVSUE9TRSBBTkQgTk9OSU5GUklOR0VNRU5ULiBJTlxuLy8gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUlMgT1IgQ09QWVJJR0hUIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sXG4vLyBEQU1BR0VTIE9SIE9USEVSIExJQUJJTElUWSwgV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1Jcbi8vIE9USEVSV0lTRSwgQVJJU0lORyBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEVcbi8vIFVTRSBPUiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuXG5cbi8vIHJlc29sdmVzIC4gYW5kIC4uIGVsZW1lbnRzIGluIGEgcGF0aCBhcnJheSB3aXRoIGRpcmVjdG9yeSBuYW1lcyB0aGVyZVxuLy8gbXVzdCBiZSBubyBzbGFzaGVzLCBlbXB0eSBlbGVtZW50cywgb3IgZGV2aWNlIG5hbWVzIChjOlxcKSBpbiB0aGUgYXJyYXlcbi8vIChzbyBhbHNvIG5vIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHNsYXNoZXMgLSBpdCBkb2VzIG5vdCBkaXN0aW5ndWlzaFxuLy8gcmVsYXRpdmUgYW5kIGFic29sdXRlIHBhdGhzKVxuZnVuY3Rpb24gbm9ybWFsaXplQXJyYXkocGFydHMsIGFsbG93QWJvdmVSb290KSB7XG4gIC8vIGlmIHRoZSBwYXRoIHRyaWVzIHRvIGdvIGFib3ZlIHRoZSByb290LCBgdXBgIGVuZHMgdXAgPiAwXG4gIHZhciB1cCA9IDA7XG4gIGZvciAodmFyIGkgPSBwYXJ0cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgIHZhciBsYXN0ID0gcGFydHNbaV07XG4gICAgaWYgKGxhc3QgPT09ICcuJykge1xuICAgICAgcGFydHMuc3BsaWNlKGksIDEpO1xuICAgIH0gZWxzZSBpZiAobGFzdCA9PT0gJy4uJykge1xuICAgICAgcGFydHMuc3BsaWNlKGksIDEpO1xuICAgICAgdXArKztcbiAgICB9IGVsc2UgaWYgKHVwKSB7XG4gICAgICBwYXJ0cy5zcGxpY2UoaSwgMSk7XG4gICAgICB1cC0tO1xuICAgIH1cbiAgfVxuXG4gIC8vIGlmIHRoZSBwYXRoIGlzIGFsbG93ZWQgdG8gZ28gYWJvdmUgdGhlIHJvb3QsIHJlc3RvcmUgbGVhZGluZyAuLnNcbiAgaWYgKGFsbG93QWJvdmVSb290KSB7XG4gICAgZm9yICg7IHVwLS07IHVwKSB7XG4gICAgICBwYXJ0cy51bnNoaWZ0KCcuLicpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBwYXJ0cztcbn1cblxuLy8gU3BsaXQgYSBmaWxlbmFtZSBpbnRvIFtyb290LCBkaXIsIGJhc2VuYW1lLCBleHRdLCB1bml4IHZlcnNpb25cbi8vICdyb290JyBpcyBqdXN0IGEgc2xhc2gsIG9yIG5vdGhpbmcuXG52YXIgc3BsaXRQYXRoUmUgPVxuICAgIC9eKFxcLz98KShbXFxzXFxTXSo/KSgoPzpcXC57MSwyfXxbXlxcL10rP3wpKFxcLlteLlxcL10qfCkpKD86W1xcL10qKSQvO1xudmFyIHNwbGl0UGF0aCA9IGZ1bmN0aW9uKGZpbGVuYW1lKSB7XG4gIHJldHVybiBzcGxpdFBhdGhSZS5leGVjKGZpbGVuYW1lKS5zbGljZSgxKTtcbn07XG5cbi8vIHBhdGgucmVzb2x2ZShbZnJvbSAuLi5dLCB0bylcbi8vIHBvc2l4IHZlcnNpb25cbmV4cG9ydHMucmVzb2x2ZSA9IGZ1bmN0aW9uKCkge1xuICB2YXIgcmVzb2x2ZWRQYXRoID0gJycsXG4gICAgICByZXNvbHZlZEFic29sdXRlID0gZmFsc2U7XG5cbiAgZm9yICh2YXIgaSA9IGFyZ3VtZW50cy5sZW5ndGggLSAxOyBpID49IC0xICYmICFyZXNvbHZlZEFic29sdXRlOyBpLS0pIHtcbiAgICB2YXIgcGF0aCA9IChpID49IDApID8gYXJndW1lbnRzW2ldIDogcHJvY2Vzcy5jd2QoKTtcblxuICAgIC8vIFNraXAgZW1wdHkgYW5kIGludmFsaWQgZW50cmllc1xuICAgIGlmICh0eXBlb2YgcGF0aCAhPT0gJ3N0cmluZycpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50cyB0byBwYXRoLnJlc29sdmUgbXVzdCBiZSBzdHJpbmdzJyk7XG4gICAgfSBlbHNlIGlmICghcGF0aCkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgcmVzb2x2ZWRQYXRoID0gcGF0aCArICcvJyArIHJlc29sdmVkUGF0aDtcbiAgICByZXNvbHZlZEFic29sdXRlID0gcGF0aC5jaGFyQXQoMCkgPT09ICcvJztcbiAgfVxuXG4gIC8vIEF0IHRoaXMgcG9pbnQgdGhlIHBhdGggc2hvdWxkIGJlIHJlc29sdmVkIHRvIGEgZnVsbCBhYnNvbHV0ZSBwYXRoLCBidXRcbiAgLy8gaGFuZGxlIHJlbGF0aXZlIHBhdGhzIHRvIGJlIHNhZmUgKG1pZ2h0IGhhcHBlbiB3aGVuIHByb2Nlc3MuY3dkKCkgZmFpbHMpXG5cbiAgLy8gTm9ybWFsaXplIHRoZSBwYXRoXG4gIHJlc29sdmVkUGF0aCA9IG5vcm1hbGl6ZUFycmF5KGZpbHRlcihyZXNvbHZlZFBhdGguc3BsaXQoJy8nKSwgZnVuY3Rpb24ocCkge1xuICAgIHJldHVybiAhIXA7XG4gIH0pLCAhcmVzb2x2ZWRBYnNvbHV0ZSkuam9pbignLycpO1xuXG4gIHJldHVybiAoKHJlc29sdmVkQWJzb2x1dGUgPyAnLycgOiAnJykgKyByZXNvbHZlZFBhdGgpIHx8ICcuJztcbn07XG5cbi8vIHBhdGgubm9ybWFsaXplKHBhdGgpXG4vLyBwb3NpeCB2ZXJzaW9uXG5leHBvcnRzLm5vcm1hbGl6ZSA9IGZ1bmN0aW9uKHBhdGgpIHtcbiAgdmFyIGlzQWJzb2x1dGUgPSBleHBvcnRzLmlzQWJzb2x1dGUocGF0aCksXG4gICAgICB0cmFpbGluZ1NsYXNoID0gc3Vic3RyKHBhdGgsIC0xKSA9PT0gJy8nO1xuXG4gIC8vIE5vcm1hbGl6ZSB0aGUgcGF0aFxuICBwYXRoID0gbm9ybWFsaXplQXJyYXkoZmlsdGVyKHBhdGguc3BsaXQoJy8nKSwgZnVuY3Rpb24ocCkge1xuICAgIHJldHVybiAhIXA7XG4gIH0pLCAhaXNBYnNvbHV0ZSkuam9pbignLycpO1xuXG4gIGlmICghcGF0aCAmJiAhaXNBYnNvbHV0ZSkge1xuICAgIHBhdGggPSAnLic7XG4gIH1cbiAgaWYgKHBhdGggJiYgdHJhaWxpbmdTbGFzaCkge1xuICAgIHBhdGggKz0gJy8nO1xuICB9XG5cbiAgcmV0dXJuIChpc0Fic29sdXRlID8gJy8nIDogJycpICsgcGF0aDtcbn07XG5cbi8vIHBvc2l4IHZlcnNpb25cbmV4cG9ydHMuaXNBYnNvbHV0ZSA9IGZ1bmN0aW9uKHBhdGgpIHtcbiAgcmV0dXJuIHBhdGguY2hhckF0KDApID09PSAnLyc7XG59O1xuXG4vLyBwb3NpeCB2ZXJzaW9uXG5leHBvcnRzLmpvaW4gPSBmdW5jdGlvbigpIHtcbiAgdmFyIHBhdGhzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLCAwKTtcbiAgcmV0dXJuIGV4cG9ydHMubm9ybWFsaXplKGZpbHRlcihwYXRocywgZnVuY3Rpb24ocCwgaW5kZXgpIHtcbiAgICBpZiAodHlwZW9mIHAgIT09ICdzdHJpbmcnKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudHMgdG8gcGF0aC5qb2luIG11c3QgYmUgc3RyaW5ncycpO1xuICAgIH1cbiAgICByZXR1cm4gcDtcbiAgfSkuam9pbignLycpKTtcbn07XG5cblxuLy8gcGF0aC5yZWxhdGl2ZShmcm9tLCB0bylcbi8vIHBvc2l4IHZlcnNpb25cbmV4cG9ydHMucmVsYXRpdmUgPSBmdW5jdGlvbihmcm9tLCB0bykge1xuICBmcm9tID0gZXhwb3J0cy5yZXNvbHZlKGZyb20pLnN1YnN0cigxKTtcbiAgdG8gPSBleHBvcnRzLnJlc29sdmUodG8pLnN1YnN0cigxKTtcblxuICBmdW5jdGlvbiB0cmltKGFycikge1xuICAgIHZhciBzdGFydCA9IDA7XG4gICAgZm9yICg7IHN0YXJ0IDwgYXJyLmxlbmd0aDsgc3RhcnQrKykge1xuICAgICAgaWYgKGFycltzdGFydF0gIT09ICcnKSBicmVhaztcbiAgICB9XG5cbiAgICB2YXIgZW5kID0gYXJyLmxlbmd0aCAtIDE7XG4gICAgZm9yICg7IGVuZCA+PSAwOyBlbmQtLSkge1xuICAgICAgaWYgKGFycltlbmRdICE9PSAnJykgYnJlYWs7XG4gICAgfVxuXG4gICAgaWYgKHN0YXJ0ID4gZW5kKSByZXR1cm4gW107XG4gICAgcmV0dXJuIGFyci5zbGljZShzdGFydCwgZW5kIC0gc3RhcnQgKyAxKTtcbiAgfVxuXG4gIHZhciBmcm9tUGFydHMgPSB0cmltKGZyb20uc3BsaXQoJy8nKSk7XG4gIHZhciB0b1BhcnRzID0gdHJpbSh0by5zcGxpdCgnLycpKTtcblxuICB2YXIgbGVuZ3RoID0gTWF0aC5taW4oZnJvbVBhcnRzLmxlbmd0aCwgdG9QYXJ0cy5sZW5ndGgpO1xuICB2YXIgc2FtZVBhcnRzTGVuZ3RoID0gbGVuZ3RoO1xuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgaWYgKGZyb21QYXJ0c1tpXSAhPT0gdG9QYXJ0c1tpXSkge1xuICAgICAgc2FtZVBhcnRzTGVuZ3RoID0gaTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIHZhciBvdXRwdXRQYXJ0cyA9IFtdO1xuICBmb3IgKHZhciBpID0gc2FtZVBhcnRzTGVuZ3RoOyBpIDwgZnJvbVBhcnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgb3V0cHV0UGFydHMucHVzaCgnLi4nKTtcbiAgfVxuXG4gIG91dHB1dFBhcnRzID0gb3V0cHV0UGFydHMuY29uY2F0KHRvUGFydHMuc2xpY2Uoc2FtZVBhcnRzTGVuZ3RoKSk7XG5cbiAgcmV0dXJuIG91dHB1dFBhcnRzLmpvaW4oJy8nKTtcbn07XG5cbmV4cG9ydHMuc2VwID0gJy8nO1xuZXhwb3J0cy5kZWxpbWl0ZXIgPSAnOic7XG5cbmV4cG9ydHMuZGlybmFtZSA9IGZ1bmN0aW9uKHBhdGgpIHtcbiAgdmFyIHJlc3VsdCA9IHNwbGl0UGF0aChwYXRoKSxcbiAgICAgIHJvb3QgPSByZXN1bHRbMF0sXG4gICAgICBkaXIgPSByZXN1bHRbMV07XG5cbiAgaWYgKCFyb290ICYmICFkaXIpIHtcbiAgICAvLyBObyBkaXJuYW1lIHdoYXRzb2V2ZXJcbiAgICByZXR1cm4gJy4nO1xuICB9XG5cbiAgaWYgKGRpcikge1xuICAgIC8vIEl0IGhhcyBhIGRpcm5hbWUsIHN0cmlwIHRyYWlsaW5nIHNsYXNoXG4gICAgZGlyID0gZGlyLnN1YnN0cigwLCBkaXIubGVuZ3RoIC0gMSk7XG4gIH1cblxuICByZXR1cm4gcm9vdCArIGRpcjtcbn07XG5cblxuZXhwb3J0cy5iYXNlbmFtZSA9IGZ1bmN0aW9uKHBhdGgsIGV4dCkge1xuICB2YXIgZiA9IHNwbGl0UGF0aChwYXRoKVsyXTtcbiAgLy8gVE9ETzogbWFrZSB0aGlzIGNvbXBhcmlzb24gY2FzZS1pbnNlbnNpdGl2ZSBvbiB3aW5kb3dzP1xuICBpZiAoZXh0ICYmIGYuc3Vic3RyKC0xICogZXh0Lmxlbmd0aCkgPT09IGV4dCkge1xuICAgIGYgPSBmLnN1YnN0cigwLCBmLmxlbmd0aCAtIGV4dC5sZW5ndGgpO1xuICB9XG4gIHJldHVybiBmO1xufTtcblxuXG5leHBvcnRzLmV4dG5hbWUgPSBmdW5jdGlvbihwYXRoKSB7XG4gIHJldHVybiBzcGxpdFBhdGgocGF0aClbM107XG59O1xuXG5mdW5jdGlvbiBmaWx0ZXIgKHhzLCBmKSB7XG4gICAgaWYgKHhzLmZpbHRlcikgcmV0dXJuIHhzLmZpbHRlcihmKTtcbiAgICB2YXIgcmVzID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB4cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoZih4c1tpXSwgaSwgeHMpKSByZXMucHVzaCh4c1tpXSk7XG4gICAgfVxuICAgIHJldHVybiByZXM7XG59XG5cbi8vIFN0cmluZy5wcm90b3R5cGUuc3Vic3RyIC0gbmVnYXRpdmUgaW5kZXggZG9uJ3Qgd29yayBpbiBJRThcbnZhciBzdWJzdHIgPSAnYWInLnN1YnN0cigtMSkgPT09ICdiJ1xuICAgID8gZnVuY3Rpb24gKHN0ciwgc3RhcnQsIGxlbikgeyByZXR1cm4gc3RyLnN1YnN0cihzdGFydCwgbGVuKSB9XG4gICAgOiBmdW5jdGlvbiAoc3RyLCBzdGFydCwgbGVuKSB7XG4gICAgICAgIGlmIChzdGFydCA8IDApIHN0YXJ0ID0gc3RyLmxlbmd0aCArIHN0YXJ0O1xuICAgICAgICByZXR1cm4gc3RyLnN1YnN0cihzdGFydCwgbGVuKTtcbiAgICB9XG47XG4iXSwic291cmNlUm9vdCI6IiJ9